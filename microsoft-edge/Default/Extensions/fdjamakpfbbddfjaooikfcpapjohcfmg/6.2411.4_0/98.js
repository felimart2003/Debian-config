(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[98],{504085:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var i=n(696832),a=n(526849),s=n(383849),o=n.n(s),l=n(957459);var r=n(855541),c=n(803322);function d(e,t){const n=e.find((e=>String(e.value)===String(t)));return null!=n?n:null}class _ extends i.Component{constructor(e){super(e),this.select=i.createRef(),this.handleChange=e=>{const t=e.target;if(!t)return;const n=t.value,i=d(this.props.options,n);this.setState({optionSelected:i}),this.props.onChange&&this.props.onChange(e)},this.handleKeyDown=e=>{"Enter"===e.key&&e.preventDefault(),this.props.onFieldKeyDown?.(e)},this.handleFocus=()=>{this.setState({isSelectFocused:!0})},this.handleBlur=()=>{this.setState({isSelectFocused:!1})};let t=null;this.props.options.length&&(t=d(this.props.options,null===this.props.defaultOption?(0,a.head)(this.props.options).value:this.props.defaultOption.value)),this.state={fieldHtmlId:(0,l.Z)(),optionSelected:t,isSelectFocused:!1}}getValue(){if(!this.select.current)throw new Error("select ref not initialized");return this.select.current.value}render(){var e;const t=this.props.marginSide||"none",n=o()("selectContainer--mo5uz0qo56",r.Z[t],{"transparent--pz8wb74Jmh":this.props.isTransparent,"disabled--I9BAM7Vdre":this.props.disabled,"focused--ietgHqFLIm":this.state.isSelectFocused}),i=o()("selector--fgNHKzkAC3",this.props.classNames);let s;this.state.optionSelected?s=this.state.optionSelected.value:this.props.options.length&&(s=null===this.props.defaultOption?(0,a.head)(this.props.options).value:this.props.defaultOption.value);const l=this.state.optionSelected?this.state.optionSelected.selectedLabel?this.state.optionSelected.selectedLabel:this.state.optionSelected.label:this.props.placeholder;return(0,c.BX)("div",{className:"container--KChkEdb4YV",children:[this.props.label&&(0,c.tZ)("label",{className:r.Z.label,color:"ds.text.neutral.catchy",htmlFor:this.state.fieldHtmlId,title:this.props.label,children:this.props.label}),(0,c.BX)("div",{className:n,children:[(0,c.BX)("div",{className:i,children:[this.state.optionSelected&&this.state.optionSelected.icon&&(0,c.tZ)("span",{className:"icon--p3a7nsSbg9",children:this.state.optionSelected.icon}),(0,c.tZ)("span",{className:"text--SjkXyB7Kyp",sx:{color:"ds.text.neutral.catchy"},children:l})]}),(0,c.tZ)("select",{className:r.Z.select,ref:this.select,id:this.state.fieldHtmlId,value:s,name:this.props.name,disabled:this.props.disabled,"data-name":this.props.dataName,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,"aria-label":null!=(e=this.props.ariaLabel)?e:this.props.label,children:this.props.options.map((e=>(0,c.tZ)("option",{disabled:e.disabled,value:String(e.value),children:e.label},e.value)))},this.state.fieldHtmlId)]})]})}}},978892:(e,t,n)=>{"use strict";n.d(t,{p:()=>A});var i=n(696832),a=n(812027),s=n(86970),o=n(700033),l=n(45272),r=n(50663),c=n(803322);const d=(0,i.createContext)({}),_=(0,i.createContext)({}),p=({children:e,vaultItem:t,isAddCollectionDisabled:n,signalEditedValues:s,setHasOpenedDialogs:p,setCollectionsToUpdate:u})=>{const{vaultItemId:m,spaceId:h}=t,[f,b]=(0,i.useState)(""),[g,E]=(0,i.useState)(!1),{allCollections:C}=(0,a.b)(),[S,I]=(0,i.useState)((()=>""===m?[]:C.flatMap((e=>e.vaultItems.some((e=>e.id===m))?{...e,initiallyExisting:!0,hasBeenDeleted:!1}:[])))),w=(0,i.useMemo)((()=>S.filter((e=>!e.hasBeenDeleted))),[S]),y=(0,i.useMemo)((()=>C.filter((e=>!w.some((t=>t.id===e.id))))),[C,w]),T=e=>{const t=e(S);u?.(t),I(t)},v={setInput:b,setIsInputVisible:E,onSubmit:(e=f,t)=>{if((e=e.trim()).length<=0)return;const n=S.findIndex((t=>t.name===e));if(-1===n)T((n=>{var i;const a=[...n],s=C.find((t=>t.name===e&&t.spaceId===h));return a.push({id:null!=(i=s?.id)?i:"",name:e,spaceId:h,isShared:s?.isShared,vaultItems:[],initiallyExisting:!1,hasBeenDeleted:!1,itemPermission:t}),(0,r.p)(a)}));else{const e=S[n];e.initiallyExisting&&e.hasBeenDeleted&&T((e=>{const t=[...e];return t[n].hasBeenDeleted=!1,t}))}s?.(!0),b("")},onDelete:e=>{const t=S.findIndex((t=>t.name===e));if(-1===t)return;const n=S[t];T((e=>{const i=[...e];return n.initiallyExisting?i[t].hasBeenDeleted=!0:i.splice(t,1),i})),(0,l.Nc)(o.PageView.CollectionDelete),s?.(!0)},clearVaultItemCollections:()=>T((e=>e.flatMap((e=>e.initiallyExisting?{...e,hasBeenDeleted:!0}:[]))))};return(0,c.tZ)(d.Provider,{value:{input:f,isInputVisible:g,filteredCollections:y,vaultItemCollections:S,vaultItemCollectionsToDisplay:w,setHasOpenedDialogs:p,vaultItem:t,isAddCollectionDisabled:n},children:(0,c.tZ)(_.Provider,{value:v,children:e})})},u=()=>(0,i.useContext)(d),m=()=>(0,i.useContext)(_);var h,f=n(782579),b=n(361607),g=n(982466),E=n(488203),C=n(267678),S=n(333918),I=n(71951);const w=({id:e,hasCollections:t,setHasOpenedDialogs:n,isDisabled:a=!1})=>{var o;const{translate:l}=(0,E.Z)(),r=(0,i.useRef)(null),d=(0,b._)(),{isInputVisible:_,filteredCollections:p,input:w,vaultItem:y}=u(),{vaultItemTitle:T,spaceId:v,isSharedWithLimitedRights:x}=y,N=Boolean(d.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(d.data?.sharingVault_web_Collection_Item_Permissions_prod),{openDialog:O,closeDialog:R}=(0,C.R)(),{setInput:A,setIsInputVisible:D,onSubmit:Z}=m(),L=(e,t)=>{Z(t,e),R(),n?.(!1),r.current?.focus()},k=()=>{R(),n?.(!1)};return _?(0,c.tZ)(s.x5,{collections:p,id:e,input:w,inputRef:r,spaceId:v,selectionAsDropdown:!0,onSubmit:e=>{const t=p.find((t=>t.name===e&&t.spaceId===v));t?.isShared&&x?(O(o||(o=(0,c.tZ)(I.Q,{onClose:k}))),n?.(!0)):t?.isShared?(O((0,c.tZ)(S.B,{onSubmit:L,onClose:k,itemTitle:T,isItemPermissionsEnabled:N,collectionName:t.name})),n?.(!0)):L(g.y3.Admin,e)},setInput:A,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||window.setTimeout((()=>{D(!1)}),100)}}):(0,c.tZ)(f.zx,{onClick:()=>D(!0),layout:"iconLeading",intensity:"supershy",disabled:a,mood:"neutral",icon:h||(h=(0,c.tZ)(f.JO,{name:"ActionAddOutlined"})),children:l(t?"webapp_collections_input_placeholder_add_another":"webapp_collections_input_placeholder_add_new")})},y=e=>(0,c.tZ)("div",{sx:{flex:"1",display:"flex",flexDirection:"column"},...e});var T,v=n(660756);const x=({hasMultipleCollections:e,...t})=>{const{vaultItem:n}=u(),i=(0,v.b)(n.spaceId),{translate:a}=(0,E.Z)();return(0,c.tZ)("label",{sx:{display:"flex",width:"149px",justifyContent:"flex-end",fontWeight:"600",textAlign:"right"},...t,children:(0,c.BX)("span",{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[i&&(0,c.BX)(c.HY,{children:[`${i}`,T||(T=(0,c.tZ)("br",{}))]}),a(e?"webapp_credentials_header_row_category":"webapp_credential_edition_field_category")]})})},N=e=>(0,c.tZ)("div",{sx:{display:"flex",flexDirection:"row"},...e}),O="collectionsFieldId",R=(0,i.forwardRef)((({hasLabel:e=!0},t)=>{const{vaultItemCollections:n,vaultItemCollectionsToDisplay:a,isAddCollectionDisabled:o,setHasOpenedDialogs:l}=u(),{onDelete:r,clearVaultItemCollections:d}=m(),_=a?.length>0;return(0,i.useImperativeHandle)(t,(()=>({getVaultItemCollections:()=>n,clearVaultItemCollections:d}))),(0,c.BX)(N,{sx:{gap:"24px",alignItems:!_&&"center"},children:[e?(0,c.tZ)(x,{hasMultipleCollections:a?.length>1,htmlFor:O,sx:{marginTop:_&&"15px"}}):null,(0,c.BX)(y,{sx:{..._&&{gap:"8px",marginTop:"10px"}},children:[(0,c.tZ)(s.zT,{sx:{marginLeft:"16px"},collectionListItems:a.map((e=>(0,c.tZ)(s.cF,{children:(0,c.tZ)(s.KH,{onDismiss:()=>r(e.name),isShared:e.isShared,children:e.name})},`collections_field_li_${e.name}`)))}),(0,c.tZ)(w,{id:O,hasCollections:_,setHasOpenedDialogs:l,isDisabled:o})]})]})})),A=(0,i.forwardRef)((({vaultItem:e,isAddCollectionDisabled:t,signalEditedValues:n,setHasOpenedDialogs:i,hasLabel:s,setCollectionsToUpdate:o},l)=>{const{isCollectionsLoading:r}=(0,a.b)();return r?null:(0,c.tZ)(p,{vaultItem:e,signalEditedValues:n,setHasOpenedDialogs:i,isAddCollectionDisabled:t,setCollectionsToUpdate:o,children:(0,c.tZ)(R,{ref:l,hasLabel:s})})}))},773157:(e,t,n)=>{"use strict";n.d(t,{d:()=>S});var i=n(696832),a=n(782579),s=n(310789),o=n(700033),l=n(488203),r=(n(416702),n(842403),n(798849),n(978895),n(445595),n(325676),n(221119)),c=n(740300),d=n(45272),_=n(86498),p=n(589923),u=n(923206),m=n(317086);const h=15*Math.pow(1024,2),f={PROGRESS_CIPHERING:"webapp_secure_file_upload_progress_ciphering_markup"};function b(e){const[t,n]=(0,i.useState)(!1),a=(0,_.V)(),{translateWithMarkup:l}=(0,p.Y)();return{isUploading:t,upload:(t,i)=>{if(t)if(t.size>h)i?.({success:!1,error:{code:r.tA.MAX_CONTENT_LENGTH_EXCEEDED}});else{const _=(0,u.K)(t.name);a.showAlert((0,m.b)(l({key:f.PROGRESS_CIPHERING,params:{fileName:_}})),s.BLW.SUBTLE,!1),n(!0);const p=new FileReader,b=e=>{i?.(e),n(!1)};p.onloadend=async()=>async function(e,t,n,i){if(2===e.readyState){const a=e.result,s=new Uint8Array(a),l=JSON.stringify(Array.from(s));if(t.size>h)i?.({success:!1,error:{code:r.tA.MAX_CONTENT_LENGTH_EXCEEDED}});else{const e=await c.C.addSecureFile({fileName:t.name,fileType:t.type,serializedContent:l});e.success&&(0,d.Kz)(new o.UserUpdateVaultItemAttachmentEvent({attachmentAction:o.Action.Add,itemId:e.secureFileInfo.Id,itemType:n})),i?.(e)}}return null}(p,t,e,b),p.readAsArrayBuffer(t)}}}}var g=n(671785),E=n(553966),C=n(803322);const S=({onFileUploadStarted:e,onFileUploadDone:t,isQuotaReached:n,isShared:r,itemId:_,dataType:p,disabled:u=!1})=>{var m;const h=(0,g.ml)("KWIDCard"===p)&&!r,f=null!=(m=E.dataModelTypeToItemType[p])?m:function(e){throw new Error(e)}(`Unsupported Type ${p}`),{translate:S}=(0,l.Z)(),{upload:I,isUploading:w}=b(f),[y,T]=(0,i.useState)(""),{showErrorAlert:v}=(0,g.Pw)(y),x=(0,g.yK)(),N=e=>{t?.(e),e.success||v(e.error?.code)},O=async t=>{const n=await(async e=>await c.C.validateSecureFile({fileName:e.name,fileType:e.type,contentLength:e.size}))(t);n.success?(e(),T(t.name),I(t,N)):v(n?.error?.code)};return h?(0,C.BX)(s.Ejs,{children:[(0,C.tZ)("input",{type:"file",id:"secureFileInput",sx:{display:"none"},onChange:e=>{e?.target?.files?.length&&O(e.target.files[0]),e.target.value=""},accept:x?.join(",")}),(0,C.tZ)(a.zx,{mood:"neutral",intensity:"quiet",icon:"AttachmentOutlined",layout:"iconLeading",onClick:e=>{_&&(0,d.Kz)(new o.UserUpdateVaultItemAttachmentEvent({attachmentAction:o.Action.Add,itemId:_,itemType:f})),document.getElementById("secureFileInput")?.click(),e.preventDefault()},disabled:n||w||u,children:S("webapp_secure_notes_add_attachment_action_name")},"attach")]}):null}},317086:(e,t,n)=>{"use strict";n.d(t,{b:()=>s});var i=n(310789),a=n(803322);const s=e=>(0,a.BX)(i.Ejs,{justifyContent:"center",children:[(0,a.tZ)(i.HoD,{sx:{mr:"8px"},color:i.colors.dashGreen00,size:18}),e]})},899193:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});const i=e=>({id:e.Id,type:e.Type,version:1,filename:e.Filename,downloadKey:e.DownloadKey,cryptoKey:e.CryptoKey,localSize:e.LocalSize,remoteSize:e.RemoteSize,creationDatetime:e.CreationDatetime,userModificationDatetime:e.UserModificationDatetime,owner:e.Owner})},923206:(e,t,n)=>{"use strict";n.d(t,{K:()=>i});const i=e=>e.length<=32?e:e.substring(0,32)},671785:(e,t,n)=>{"use strict";n.d(t,{ml:()=>g,aV:()=>f,yK:()=>x,vN:()=>l,gF:()=>u,Ce:()=>c,Pw:()=>v});var i=n(221119),a=n(740300),s=n(45272),o=n(700033);function l(e,t,n,l){return{deleteFile:()=>{a.C.deleteSecureFile({id:e}).then((a=>{var r;a.success||!a.success&&a.error?.code===i.tA.FILE_NOT_FOUND?(l?.(e),(0,s.Kz)(new o.UserUpdateVaultItemAttachmentEvent({attachmentAction:o.Action.Delete,itemId:e,itemType:n}))):t(null!=(r=a.error?.code)?r:i.tA.INTERNAL_ERROR)}))}}}var r=n(148038);function c(e){const t=(0,r.qr)({queryConfig:{query:a.C.getFileDownloadProgress,queryParam:e},liveConfig:{live:a.C.liveFileDownloadProgress,liveParam:e}},[e]);return t.status===r.rq.Success?t.data:null}n(416702),n(842403),n(798849),n(978895),n(445595),n(325676);var d=n(696832),_=n(354760);const p=(e,t)=>{try{const t=JSON.parse(e);return new Uint8Array(t).buffer}catch(e){return t(i.tA.INTERNAL_ERROR),null}};function u({id:e,filename:t,downloadKey:n,cryptoKey:l,type:r},u,m){const h=c(n),f=(0,d.useRef)("");return(0,d.useEffect)((()=>{h?.status===i.wL.ChunkReady&&(f.current=f.current.concat(h.chunk),a.C.chunkTransferDone(n))}),[h,n]),(0,d.useEffect)((()=>{if(h?.status===i.wL.TransferComplete){const i=p(f.current,u);i&&((0,_.S)(i,t,r),f.current="",a.C.clearSecureFileState(n),(0,s.Kz)(new o.UserDownloadVaultItemAttachmentEvent({itemId:e,itemType:m})))}}),[h,u,t,r,n,e,m]),{download:()=>{a.C.downloadSecureFile({downloadKey:n,cryptoKey:l})}}}n(341571);var m=n(65255),h=n(377377);function f(){return(0,h.w)(m.w.SaexSecureNoteAttachmentsForrelease)}var b=n(615394);function g(e){const t=(0,h.w)(m.w.TechweekWebAttachmentsForIdsV1),n=f(),i=(0,b.rp)(["secureFiles"]),a=n&&i;return e?a&&t:a}var E=n(310789),C=n(86498),S=n(589923),I=n(317086),w=n(923206);const y={PROGRESS_UPLOADING:"webapp_secure_file_upload_progress_loading_markup",PROGRESS_CIPHERING:"webapp_secure_file_upload_progress_ciphering_markup",UPLOAD_SUCCESS:"webapp_secure_file_upload_success_markup",UNKNOWN_ERROR:"webapp_secure_file_error_unknown",MAX_CONTENT_LENGTH_EXCEEDED:"webapp_secure_file_error_upload_max_length_excedeed",QUOTA_EXCEDEED:"webapp_secure_file_error_upload_quota_excedeed",INVALID_FILE_TYPE:"webapp_secure_file_error_file_type_not_allowed"},T=e=>{var t;return e&&null!=(t=y[e])?t:y.UNKNOWN_ERROR},v=e=>{const t=(0,C.V)(),{translateWithMarkup:n}=(0,S.Y)(),s=function(){const e=(0,r.qr)({queryConfig:{query:a.C.getFileUploadProgress},liveConfig:{live:a.C.liveFileUploadProgress}},[]);return e.status===r.rq.Success?e.data:null}(),o=(0,w.K)(e);return(0,d.useEffect)((()=>{var e,a;const l=e=>t.showAlert((0,I.b)(n(e)),E.BLW.SUBTLE,!1);switch(s?.status){case i.XX.Uploading:l({key:y.PROGRESS_UPLOADING,params:{fileName:o,progress:Math.round(null!=(e=(null!=(a=100*s?.bytesSent)?a:0)/s?.contentLength)?e:1)}});break;case i.XX.Ciphering:l({key:y.PROGRESS_CIPHERING,params:{fileName:o}});break;case i.XX.Done:t.showAlert(n({key:y.UPLOAD_SUCCESS,params:{fileName:o}}),E.BLW.SUCCESS)}}),[t,e,s,n]),{showErrorAlert:e=>{t.showAlert(n({key:T(null!=e?e:"")}),E.BLW.ERROR)}}};function x(){const e=(0,r.qr)({queryConfig:{query:a.C.getSecureDocumentsExtensionsList}},[]);return e.status===r.rq.Success?e.data:void 0}},341571:(e,t,n)=>{"use strict";n.d(t,{I:()=>s});var i=n(148038),a=n(740300);function s(){const e=(0,i.qr)({queryConfig:{query:a.C.getSecureFilesQuota},liveConfig:{live:a.C.liveSecureFilesQuota}},[]);return e.status===i.rq.Success?e.data:{max:0,remaining:0}}},420684:(e,t,n)=>{"use strict";n.d(t,{P:()=>a});var i=n(740300);const a=async e=>await i.C.clearSecureFileState(null!=e?e:"")},86541:(e,t,n)=>{"use strict";n.d(t,{SecureNoteTabs:()=>i});let i=function(e){return e[e.CONTENT=0]="CONTENT",e[e.DOCUMENT_STORAGE=1]="DOCUMENT_STORAGE",e[e.MORE_OPTIONS=2]="MORE_OPTIONS",e[e.SHARED_ACCESS=3]="SHARED_ACCESS",e}({})},326239:(e,t,n)=>{"use strict";n.d(t,{h:()=>R});var i=n(310789),a=n(696832),s=n(383849),o=n.n(s),l=n(365580);var r,c,d=n(15567),_=n.n(d),p=n(102730),u=n.n(p),m=n(803322);const h=312,f="info";class b extends a.Component{constructor(e){super(e),this.showTooltip=()=>{this.setState({isTooltipVisible:!0})},this.hideTooltip=()=>{this.setState({isTooltipVisible:!1})},this.renderIcon=()=>{const{type:e=f}=this.props;switch(e){case"info":return r||(r=(0,m.tZ)(u(),{}));case"question":return c||(c=(0,m.tZ)(_(),{}));default:(0,l.U)(e)}return null},this.state={isTooltipVisible:!1}}render(){const{iconClassNames:e=[],maxWidth:t=h,children:n}=this.props,i=this.renderIcon();return(0,m.BX)("div",{className:"container--nIJjYvifKn",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,children:[(0,m.tZ)("div",{className:o()("iconContainer--Qd32ya5v0T",...e),children:i}),(0,m.BX)("div",{className:o()("tooltipContainer--Yos9HnS8si",{"tooltipDisplayed--ibyWhutbpT":this.state.isTooltipVisible}),style:{maxWidth:`${t}px`},children:[n,(0,m.tZ)("div",{className:"triangle--n9NwQgxSAc"})]})]})}}var g=n(86541),E=n(351575),C=n(488203),S=n(671785),I=n(376452),w=n(573630);const y=({title:e,disabled:t=!1,onChange:n})=>{const{translate:i}=(0,C.Z)(),a=i("webapp_secure_notes_addition_field_placeholder_no_title");return(0,m.tZ)(w.Z,{sx:{display:"block",width:"100%"},tooltipText:e||a,children:(0,m.tZ)("input",{sx:{color:"ds.text.neutral.catchy",backgroundColor:"transparent",border:"none",fontSize:"24px",lineHeight:"30px",fontWeight:"600",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",fontFamily:"'GT Walsheim Pro', 'Helvetica', 'Arial', 'sans-serif'","&:focus":{outline:"none",border:"none"}},placeholder:a,value:e||"",disabled:t,onChange:n})})};var T;const{CONTENT:v,DOCUMENT_STORAGE:x,MORE_OPTIONS:N,SHARED_ACCESS:O}=g.SecureNoteTabs,R=({activeTab:e,setActiveTab:t,backgroundColor:n,disabled:a,displayDocumentStorage:s,displaySharedAccess:o,displayMoreOptions:l,recipientsCount:r,title:c,setTitle:d})=>{const{translate:_}=(0,C.Z)(),p=(0,S.aV)(),u=[{active:e===v,label:_("webapp_secure_notes_edition_field_tab_title_details"),onClick:()=>t(v)}];if(o&&u.push({active:e===O,label:`${_("webapp_secure_notes_edition_field_tab_title_shared_access")} (${r})`,onClick:()=>t(O)}),s){const n=p?void 0:(0,m.tZ)(b,{children:(0,m.tZ)("p",{children:_("webapp_secure_notes_edition_field_tab_title_attachments_tooltips")})});u.push({active:e===x,label:_("webapp_secure_notes_edition_field_tab_title_attachments"),onClick:()=>t(x),tabIconElement:n})}return l&&u.push({active:e===N,label:_("webapp_secure_notes_edition_field_tab_title_options"),onClick:()=>t(N)}),(0,m.tZ)(I.V9,{icon:(0,m.tZ)("div",{className:"iconWrapper--d4t5P9vl4W",children:T||(T=(0,m.tZ)(i.uHY,{size:40,color:"white"}))}),iconBackgroundColor:(0,E.Z)(n),title:(0,m.tZ)(y,{title:c,disabled:a,onChange:e=>d(e.target.value)}),tabs:u})}},302268:(e,t,n)=>{"use strict";n.d(t,{i:()=>Pe,T:()=>Ue});var i=n(526849),a=n(782579),s=n(65255),o=n(377377),l=n(488203),r=n(555449),c=n(86541),d=n(696832),_=n(310789),p=n(605961),u=n.n(p),m=n(361607),h=n(133354),f=n(803322);let b=function(e){return e.BOLD="bold",e.CODE="code",e.ITALIC="italic",e.LINK="link",e.SUBSUBTITLE="subsubtitle",e.SUBTITLE="subtitle",e.TITLE="title",e}({});const g=e=>(t,n)=>{var i;const{formatPrefix:a,cursorOffsetStart:s,cursorOffsetEnd:o}=e,l=null!=(i=e.formatSuffix)?i:"",{start:r,end:c}=n,d=t.slice(r,c),_=((e,t,n)=>{const i=!n||e.endsWith(n);return e.startsWith(t)&&i})(d,a,l),p=((e,t,n,i)=>e.start===e.end?(e.start=e.start+n,e.end=e.end+n,e):(e.end=t?e.end-n-i:e.end+n+i,e))(n,_,s,o);return _?{updatedContent:[t.slice(0,r),t.slice(r+a.length,c-l.length),t.slice(c)].join(""),updatedSelectionRange:p}:{updatedContent:[t.slice(0,r),a,d,l,t.slice(c)].join(""),updatedSelectionRange:p}},E={[b.TITLE]:{icon:(0,f.tZ)(a.JO,{name:"FormattingHeading1Outlined"}),label:"Heading",format:g({formatPrefix:"# ",cursorOffsetStart:2,cursorOffsetEnd:0})},[b.SUBTITLE]:{icon:(0,f.tZ)(a.JO,{name:"FormattingHeading2Outlined"}),label:"Subheading",format:g({formatPrefix:"## ",cursorOffsetStart:3,cursorOffsetEnd:0})},[b.SUBSUBTITLE]:{icon:(0,f.tZ)(a.JO,{name:"FormattingHeading3Outlined"}),label:"Subsubheading",format:g({formatPrefix:"### ",cursorOffsetStart:4,cursorOffsetEnd:0})},[b.BOLD]:{icon:(0,f.tZ)(a.JO,{name:"FormattingBoldOutlined"}),label:"Bold",format:g({formatPrefix:"**",formatSuffix:"**",cursorOffsetStart:2,cursorOffsetEnd:2})},[b.ITALIC]:{icon:(0,f.tZ)(a.JO,{name:"FormattingItalicOutlined"}),label:"Italic",format:g({formatPrefix:"_",formatSuffix:"_",cursorOffsetStart:1,cursorOffsetEnd:1})},[b.CODE]:{icon:(0,f.tZ)(a.JO,{name:"FormattingCodeOutlined"}),label:"Code",format:g({formatPrefix:"`",formatSuffix:"`",cursorOffsetStart:1,cursorOffsetEnd:1})},[b.LINK]:{icon:(0,f.tZ)(a.JO,{name:"LinkOutlined"}),label:"Link",format:(e,t)=>{const{start:n,end:i}=t,a=e.slice(n,i),s=((e,t,n)=>(e.start===e.end?(e.start=e.start+1,e.end=e.end+1):(e.start=e.end+3,e.end=e.end+6),e))(t);return{updatedContent:[e.slice(0,n),"[",a,"](url)",e.slice(i)].join(""),updatedSelectionRange:s}}}},C="webapp_secure_notes_content_markdown_preview",S=({fieldRef:e,content:t,isPreviewing:n,setContent:i,setIsPreviewing:s})=>{const{translate:o}=(0,l.Z)(),r=n=>()=>{var a,s;const o=E[n].format,{updatedContent:l,updatedSelectionRange:r}=o(t,{start:null!=(a=e.current?.selectionStart)?a:0,end:null!=(s=e.current?.selectionEnd)?s:0});i(l),setTimeout((()=>{e.current&&(e.current.focus(),e.current.selectionStart=r.start,e.current.selectionEnd=r.end)}),200)};return(0,f.BX)("div",{sx:{display:"flex",height:"50px",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",marginTop:"16px",backgroundColor:"ds.background.alternate",borderRadius:"8px"},children:[(0,f.tZ)("div",{sx:{gap:"4px"},children:Object.keys(E).map((e=>(0,f.tZ)(a.zx,{mood:"neutral",intensity:"supershy",layout:"iconOnly",icon:E[e].icon,onClick:r(e),disabled:n,"aria-label":E[e].label,title:E[e].label,name:E[e].label},e)))}),t?(0,f.tZ)("div",{sx:{padding:"8px 10px"},children:(0,f.tZ)(a.zx,{"aria-label":o(C),onClick:()=>s(!n),layout:"iconTrailing",intensity:"quiet",size:"small",mood:"neutral",icon:n?"ActionHideFilled":"ActionRevealFilled",children:o(C)})}):null]})};var I=n(167748);const w="textarea--Ix1kh7fRYF",y="markdown--ARo1hBXSLa",T=s.w.SupportMarkdownInSecureNotes,v="webapp_secure_notes_form_content_label",x=({fieldRef:e,value:t,name:n,placeholder:i,disabled:s,readonly:o,isEditing:r,setContent:c,setIsEditing:_,onChange:p})=>{const[b,g]=(0,d.useState)(!1),{translate:E}=(0,l.Z)(),C=(0,m._)(),x=()=>C.status===h.rq.Success&&!!C.data[T],N=Boolean(C.data?.sharingVault_web_Secure_Notes_Revamp_dev);return(0,f.tZ)("div",{className:"content--AFh9bUjHyR",onClick:x()?()=>{_(!0)}:void 0,children:x()?!r&&t?(0,f.tZ)("div",{className:y,children:(0,f.tZ)(u(),{source:(0,I.z)(t),softBreak:"br"})}):(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",flexGrow:1},onClick:()=>{b&&g(!1)},children:[(0,f.tZ)(S,{content:t,setContent:c,fieldRef:e,isPreviewing:b,setIsPreviewing:e=>g(e)}),b?(0,f.tZ)("div",{className:y,children:(0,f.tZ)(u(),{source:(0,I.z)(t),softBreak:"br"})}):(0,f.tZ)(a.Kx,{label:E(v),ref:e,name:n,className:w,sx:{color:"ds.text.neutral.catchy"},placeholder:i,value:t||"",disabled:s,readOnly:o,onChange:e=>{p&&p(e)}})]}):N?(0,f.tZ)(a.Kx,{label:E(v),ref:e,name:n,className:w,sx:{color:"ds.text.neutral.catchy"},placeholder:i,value:t||"",disabled:s,readOnly:o,onChange:e=>p?.(e)}):(0,f.tZ)("textarea",{ref:e,name:n,className:w,sx:{color:"ds.text.neutral.catchy"},placeholder:i,value:t||"",disabled:s,readOnly:o,onChange:e=>p?.(e)})})};var N=n(71846);const O=({content:e,setContent:t,isEditing:n,setIsEditing:i,limitedPermissions:a,readonly:s})=>{const{translate:o}=(0,l.Z)(),[r,c]=(0,d.useState)(!1),p=(0,d.useRef)(null);return(0,f.BX)(f.HY,{children:[(0,f.tZ)(x,{fieldRef:p,placeholder:o(s?"webapp_secure_notes_edition_disabled_label":"webapp_secure_notes_addition_field_placeholder_no_content"),value:e,disabled:a,readonly:s,onChange:({target:{value:n}})=>{const i=n.length>e.length,a=e.length>=Pe;if(i&&a)return;const s=i&&n.length>Pe,o=s?e:n;c(s),t(o)},isEditing:n,setIsEditing:i,setContent:t}),r&&(0,f.tZ)("div",{className:"alertContainer--aKDAFWKb1l",children:(0,f.tZ)(N.n,{id:Math.floor(1e6*Math.random()),message:o("webapp_secure_notes_addition_field_copy_past_error"),onHide:()=>{c(!1)},severity:_.BLW.WARNING})})]})};var R=n(210994),A=n(221119),D=n(86498),Z=n(589923),L=n(671785),k=n(317086);var B=n(700033),P=n(45272),U=n(923206),F=n(837527);const G="webapp_secure_file_error_unknown",X="webapp_secure_file_delete_button_title",z="webapp_secure_file_download_button_title",H={cursor:"pointer",margin:"0px 10px",padding:"5px",border:"1px solid transparent","&:hover":{border:`1px solid ${_.colors.grey05}`},borderRadius:"4px"},V={opacity:.6},M=({attachment:e,disableActions:t,handleFileInfoDetached:n,onModalDisplayStateChange:i,parentId:a,parentType:s})=>{const{translate:o}=(0,l.Z)(),{translateWithMarkup:r}=(0,Z.Y)(),c=(0,D.V)(),[p,u]=(0,d.useState)(!1),m=(0,d.useCallback)((()=>c.showAlert(r(G),_.BLW.ERROR)),[c,r]),{deleteFile:h}=(0,L.vN)(e.id,m,s,n),b=()=>{u(!0),i?.(!0)},g=()=>{u(!1),i?.(!1)};return(0,f.BX)(f.HY,{children:[(0,f.tZ)(_.ua7,{placement:"left",trigger:"hover",content:r(t?"webapp_secure_file_delete_button_tooltip_content_disable":"webapp_secure_file_delete_button_tooltip_content_enable"),children:(0,f.tZ)("div",{role:"button","aria-label":o(X),sx:t?(0,_.jMf)([H,V]):H,tabIndex:0,onKeyDown:e=>{13===e.keyCode&&b()},onClick:b,children:(0,f.tZ)(_.XHJ,{color:_.colors.dashGreen00,"aria-hidden":"true",title:o(X),"aria-label":o(X)})})}),(0,f.BX)(_.VqE,{isOpen:p&&!t,onClose:g,closeIconName:"CloseIcon",modalContentClassName:F.jK,children:[(0,f.BX)(_.a7O,{children:[(0,f.tZ)(_.X6q,{size:"small",sx:{margin:"16px 0px",fontWeight:"bolder"},children:r("webapp_secure_file_delete_confirm_dialog_heading")}),(0,f.tZ)(_.nvN,{sx:{margin:"8px 0px"},color:_.colors.grey00,children:r("webapp_secure_file_delete_confirm_dialog_paragraph")})]}),(0,f.tZ)(_.cNS,{primaryButtonTitle:r("webapp_secure_file_delete_confirm_dialog_action_primary_button_title"),primaryButtonOnClick:()=>{a&&(0,P.Kz)(new B.UserUpdateVaultItemAttachmentEvent({attachmentAction:B.Action.Delete,itemId:a,itemType:s})),h(),c.showAlert(o("webapp_secure_file_delete_success",{fileName:(0,U.K)(e.filename)}),_.BLW.SUCCESS),u(!1)},secondaryButtonTitle:r("webapp_secure_file_delete_confirm_dialog_action_secondary_button_title"),secondaryButtonOnClick:g,intent:"danger"})]})]})},W=({attachment:e,disableActions:t,setDisableActions:n,progress:i,parentId:a,parentType:s})=>{const{translate:o}=(0,l.Z)(),{translateWithMarkup:r}=(0,Z.Y)(),c=(0,D.V)(),p=(0,d.useCallback)((()=>c.showAlert(r(G),_.BLW.ERROR)),[c,r]),{download:u}=(0,L.gF)(e,p,s),m=()=>{a&&(0,P.Kz)(new B.UserDownloadVaultItemAttachmentEvent({itemId:a,itemType:s})),u()};return(0,d.useEffect)((()=>{switch(i?.status){case A.wL.Downloading:n(!0);break;case A.wL.TransferComplete:case A.wL.Error:n(!1)}}),[i,n,r]),(0,f.tZ)(_.ua7,{placement:"left",trigger:"hover",content:r(t?"webapp_secure_file_download_button_tooltip_content_disable":"webapp_secure_file_download_button_tooltip_content_enable"),children:(0,f.tZ)("div",{role:"link","aria-label":o(z),sx:t?(0,_.jMf)([H,V]):H,tabIndex:0,onKeyDown:t?void 0:e=>{13===e.keyCode&&m()},onClick:t?void 0:m,children:(0,f.tZ)(_._8t,{sx:t?V:void 0,color:_.colors.dashGreen00,"aria-hidden":"true","aria-label":o(z),title:o(z)})})})},K=e=>{const t=(0,L.Ce)(e.attachment.downloadKey);return(0,f.BX)(_.Ejs,{alignItems:"center",justifyContent:"flex-end",children:[(0,f.tZ)(W,{progress:t,...e}),(0,f.tZ)(M,{...e})]})},Y=n(816583),j={color:`${_.colors.grey00}`,minHeight:"60px",position:"relative","&:hover":{"& > *:last-child":{opacity:1}}},q={width:36,minWidth:36,height:36,borderRadius:"50%",border:"1px solid rgba(0, 0, 0, 0.1)",background:_.colors.dashGreen06},J={padding:"0px 8px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontWeight:"bold"},$=e=>Y(e,{decimalPlaces:0,unitSeparator:" "}),Q=({attachment:e,isSecureNoteRevampEnabled:t})=>(0,f.BX)(_.Ejs,{alignItems:"center",flexWrap:"nowrap",children:[(0,f.tZ)(_.Ejs,{sx:q,alignItems:"center",justifyContent:"center",children:(0,f.tZ)(_.Ujz,{size:25,color:_.colors.midGreen00})}),(0,f.BX)("div",{sx:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,f.tZ)(a.nv,{sx:J,children:e.filename}),t&&(0,f.tZ)(a.nv,{color:"ds.text.neutral.quiet",sx:{fontSize:"ds.body.helper.regular",padding:"0px 8px"},children:$(e.localSize)})]})]}),ee=e=>{const{attachment:t,isSecureNoteRevampEnabled:n}=e,{translate:i}=(0,l.Z)();return(e=>{const{showAlert:t}=(0,D.V)(),{translateWithMarkup:n}=(0,Z.Y)(),i=(0,L.Ce)(e.downloadKey);(0,d.useEffect)((()=>{var a,s;const o=e=>t((0,k.b)(n(e)),_.BLW.SUBTLE,!1);if(i?.status)switch(i.status){case A.wL.Downloading:o({key:"webapp_secure_file_download_progress_downloading_markup",params:{fileName:e.filename,progress:Math.round(null!=(a=(null!=(s=100*i?.bytesReceived)?s:0)/i?.contentLength)?a:1)}});break;case A.wL.Deciphering:o({key:"webapp_secure_file_download_progress_deciphering_markup",params:{fileName:e.filename}});break;case A.wL.TransferComplete:t(n({key:"webapp_secure_file_download_progress_success_markup",params:{fileName:e.filename}}),_.BLW.SUCCESS);break;case A.wL.Error:t(n({key:"webapp_secure_file_error_unknown"}),_.BLW.ERROR)}}),[alert,e,i,n])})(t),(0,f.BX)(_.Ejs,{fullWidth:!0,alignItems:"center",sx:j,children:[(0,f.tZ)(_.k$b,{sx:{width:n?"60%":"45%"},children:(0,f.tZ)(Q,{...e})}),(0,f.tZ)(_.k$b,{sx:{width:n?"20%":"25%"},children:i.shortDate((0,R.Z)(t.creationDatetime))}),!n&&(0,f.tZ)(_.k$b,{sx:{width:"10%"},children:$(t.localSize)}),e.isAttachmentEnabled?(0,f.tZ)(K,{parentType:B.ItemType.SecureNote,parentId:e.noteId,...e}):null]})};var te=n(341571);const ne=n(816583);var ie=n(468037);const ae=({children:e,isSecureNoteRevampEnabled:t})=>{const{translate:n}=(0,l.Z)();return t?(0,f.tZ)(ie.u,{title:n("webapp_secure_file_attachment_title"),children:e}):e},se=({currentValues:e,additionalProps:t,isSecureNoteRevampEnabled:n})=>{const{translate:i}=(0,l.Z)(),s=(0,L.aV)(),[o,r]=(0,d.useState)(!1),c=(0,te.I)(),p=c.max>0&&c.remaining<78643200&&s,u={padding:!n&&"16px 16px 16px 0px",borderBottom:`1px solid ${_.colors.grey06}`,color:"ds.text.neutral.quiet",alignSelf:"center",fontSize:"12px",textTransform:"uppercase"},m=e.attachments;return(0,d.useEffect)((()=>{r(t.isUploading)}),[t.isUploading]),(0,f.tZ)(ae,{isSecureNoteRevampEnabled:n,children:(0,f.BX)(_.Ejs,{flexDirection:"column",sx:{padding:"12px 0px",flex:1,overflow:"hidden"},children:[(0,f.BX)(_.Ejs,{flexDirection:"column",alignItems:"center",fullWidth:!0,sx:{flex:1,overflowY:"auto",flexWrap:"nowrap"},children:[m?.length>0?(0,f.BX)(_.Ejs,{fullWidth:!0,alignItems:"center",sx:n?{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"4px",padding:"0px 4px",height:"28px"}:{},children:[(0,f.tZ)(a.nv,{sx:{...u,width:n?"60%":"45%"},children:i("webapp_secure_notes_addition_field_tab_attachments_table_title_name")}),(0,f.tZ)(a.nv,{sx:{...u,width:n?"40%":"25%"},children:i("webapp_secure_notes_addition_field_tab_attachments_table_title_creation_date")}),!n&&(0,f.tZ)(a.nv,{sx:{...u,width:"30%"},children:i("webapp_secure_notes_addition_field_tab_attachments_table_title_file_size")})]}):(0,f.BX)(_.Ejs,{justifyContent:"center",flexDirection:"column",alignItems:"center",sx:{flex:1},children:[(0,f.tZ)(_.Ujz,{size:70,color:_.colors.dashGreen04,sx:{marginBottom:"24px"}}),(0,f.tZ)(a.nv,{sx:{textAlign:"center",color:"ds.text.neutral.catchy"},children:i.markup("webapp_secure_file_empty_attachments_markup")})]}),m?m.map((e=>(0,f.tZ)(ee,{attachment:e,handleFileInfoDetached:t?.handleFileInfoDetached,isAttachmentEnabled:s,isSecureNoteRevampEnabled:n,disableActions:o,setDisableActions:r,onModalDisplayStateChange:t.onModalDisplayStateChange,noteId:t?.noteId},e.id))):null]}),p?(0,f.tZ)(a.ke,{mood:"danger",title:i("webapp_secure_file_storage_quota_info",(h=c.remaining,b=c.max,{usedQuota:ne(h,{decimalPlaces:0,unitSeparator:" "}),maxQuota:ne(b,{decimalPlaces:0,unitSeparator:" "})})),sx:{flex:0,marginTop:"16px"}}):null]})});var h,b};var oe=n(383849),le=n.n(oe);const re=({maxAuthorizedSize:e,currentSize:t})=>{const{translate:n}=(0,l.Z)(),i=.95*e,a=.995*e,s=e-t,o=t>e?n("webapp_secure_notes_edition_field_text_over_limit",{overLimit:-s}):n("webapp_secure_notes_edition_field_text_max_size_reached",{charLeft:s});return t>=i?(0,f.tZ)("div",{className:le()("greyWarningCharLeft--kX7GKkrKTa",t>=a?"redWarningCharLeft--XWRHnpjz2e":{}),children:o}):null};function ce(e,t){return{label:t,value:("credential"===e?"":"noCategory")||""}}function de(e,t,n,i){const a=t.find((e=>e.label===n));return null!=a?a:ce(e,i)}const _e=["BLUE","GRAY","PURPLE","PINK","RED","BROWN","GREEN","ORANGE","YELLOW"];function pe(e,t,n){return t.filter((t=>e[t])).map((t=>({icon:n,label:`${e[t]}`,value:t})))}function ue(e,t){const n=pe(e,[t],null);return n.length?n[0]:{}}var me=n(351575);const he=e=>(0,f.tZ)("span",{className:"icon--eBGJiUqyZ5",style:{backgroundColor:(0,me.Z)(e)}});var fe=n(167406),be=n(504085),ge=n(868819),Ee=n(830894),Ce=n(433988),Se=n(154350);const Ie={NO_CATEGORY:"webapp_secure_notes_addition_no_category",CATEGORY_LABEL:"webapp_secure_notes_addition_field_tab_option_category_label",COLOR_LABEL:"webapp_secure_notes_addition_field_tab_option_color_label",SECURITY_LABEL:"webapp_secure_notes_addition_field_tab_option_security_label",SECURITY_TITLE:"webapp_secure_notes_addition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_addition_field_tab_option_security_description",COLORS:{BLUE:"webapp_secure_notes_addition_field_type_option_blue",BROWN:"webapp_secure_notes_addition_field_type_option_brown",GRAY:"webapp_secure_notes_addition_field_type_option_gray",GREEN:"webapp_secure_notes_addition_field_type_option_green",ORANGE:"webapp_secure_notes_addition_field_type_option_orange",PINK:"webapp_secure_notes_addition_field_type_option_pink",PURPLE:"webapp_secure_notes_addition_field_type_option_purple",RED:"webapp_secure_notes_addition_field_type_option_red",YELLOW:"webapp_secure_notes_addition_field_type_option_yellow"}},we={NO_CATEGORY:"webapp_secure_notes_edition_no_category",CATEGORY_LABEL:"webapp_secure_notes_edition_field_tab_option_category_label",COLOR_LABEL:"webapp_secure_notes_edition_field_tab_option_color_label",SECURITY_LABEL:"webapp_secure_notes_edition_field_tab_option_security_label",SECURITY_TITLE:"webapp_secure_notes_edition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_edition_field_tab_option_security_description",COLORS:{BLUE:"webapp_secure_notes_edition_field_type_option_blue",BROWN:"webapp_secure_notes_edition_field_type_option_brown",GRAY:"webapp_secure_notes_edition_field_type_option_gray",GREEN:"webapp_secure_notes_edition_field_type_option_green",ORANGE:"webapp_secure_notes_edition_field_type_option_orange",PINK:"webapp_secure_notes_edition_field_type_option_pink",PURPLE:"webapp_secure_notes_edition_field_type_option_purple",RED:"webapp_secure_notes_edition_field_type_option_red",YELLOW:"webapp_secure_notes_edition_field_type_option_yellow"},CHANGE_SECURED_SETTING_ON:"webapp_secure_notes_edition_unlocker_on_success",CHANGE_SECURED_SETTING_OFF:"webapp_secure_notes_edition_unlocker_off_success"},ye={title:"webapp_secure_notes_edition_unlocker_title_on",subtitle:"webapp_secure_notes_edition_unlocker_description_on"},Te={title:"webapp_secure_notes_edition_unlocker_title_off",subtitle:"webapp_secure_notes_edition_unlocker_description_off"},ve=({noteCategories:e,disabled:t,data:n,isNewItem:i,saveSecureNoteOptions:s})=>{var o,r,c,p;const{translate:u}=(0,l.Z)(),m=(0,D.V)(),{areProtectedItemsUnlocked:h,openProtectedItemsUnlocker:b}=(0,Ee.tY)(),g=(0,Ce.F)(),{isMPLessUser:E}=(0,Se.Z)(),C=!g&&!E,S=i?Ie:we,I=u(S.NO_CATEGORY),[w,y]=(0,d.useState)(null!=(o=n?.category)?o:I),[T,v]=(0,d.useState)(null!=(r=n?.type)?r:"BLUE"),[x,N]=(0,d.useState)(null!=(c=n?.spaceId)?c:""),[O,R]=(0,d.useState)(null!=(p=n?.secured)&&p),A=(e=>e.map((e=>({name:e.CategoryName,id:e.Id}))))(e),Z=function(e,t,n){const i=t.map((e=>({label:e.name,value:e.id})));return[ce("note",n)].concat(i)}(0,A,I),L=e.find((e=>e.Id===w)),k=L?L.CategoryName:I,B=_e.reduce(((e,t)=>(e[t]=u(S.COLORS[t]),e)),{}),P=pe(B,_e,he(T)),U=e=>{R(e),s({category:w,type:T,spaceId:x,secured:e}),m.showAlert(u(e?we.CHANGE_SECURED_SETTING_ON:we.CHANGE_SECURED_SETTING_OFF),_.BLW.SUCCESS)};return(0,f.BX)(_.Ejs,{flexDirection:"column",children:[e&&e.length>1?(0,f.tZ)(be.Z,{disabled:t,label:u(S.CATEGORY_LABEL),placeholder:"",dataName:"category",options:Z,defaultOption:de("note",Z,k,I),onChange:e=>{y(e.currentTarget.value),s({category:e.currentTarget.value,type:T,spaceId:x,secured:O})}},k):null,(0,f.tZ)(fe.M,{labelSx:fe.e,spaceId:null!=x?x:"",onChange:e=>{N(e),s({category:w,type:T,secured:O,spaceId:e})},disabled:t}),(0,f.tZ)(be.Z,{disabled:t,label:u(S.COLOR_LABEL),placeholder:"",dataName:"type",options:P,defaultOption:ue(B,T),onChange:e=>{v(e.currentTarget.value),s({category:w,type:e.currentTarget.value,spaceId:x,secured:O})}},T),C?(0,f.BX)(_.Ejs,{sx:{mt:"12px"},flexDirection:"row",flexWrap:"nowrap",children:[(0,f.tZ)(_.k$b,{sx:{fontWeight:"600",width:"173px",textAlign:"right",fontSize:"16px",justifyContent:"flex-end",pr:"24px"},as:a.nv,innerAs:"label",htmlFor:"securityToggle",size:"medium",children:u(S.SECURITY_LABEL)}),(0,f.BX)(_.Ejs,{flexDirection:"row",gap:"8px",flexWrap:"nowrap",children:[(0,f.BX)(_.Ejs,{as:_.dDn,flexDirection:"column",children:[(0,f.tZ)(a.nv,{children:u(S.SECURITY_TITLE)}),(0,f.tZ)(a.nv,{color:"ds.text.neutral.quiet",children:u(S.SECURITY_DESCRIPTION)})]}),(0,f.tZ)(a.ZD,{id:"securityToggle",disabled:t,checked:O,onChange:()=>{const e=!O;h||i?U(e):((0,Ee.jF)(),b({itemType:ge.R.SecureNoteSetting,options:{fieldsKeys:e?ye:Te,translated:!1},successCallback:()=>U(e)}))}})]})]}):null]})};var xe=n(978892),Ne=n(806697);const Oe={NO_CATEGORY:"webapp_secure_notes_addition_no_category",PERSONAL_SPACE:"webapp_form_field_personal_space",INFO_BOX_ATTACHMENTS:"webapp_secure_notes_infobox_has_attachments",INFO_BOX_SHARED:"webapp_secure_notes_infobox_shared",SECURITY_LABEL:"webapp_secure_notes_addition_field_tab_option_security_label",CONTENT_NOTE_DETAILS:"webapp_secure_notes_form_content_note_details",CONTENT_NOTE_DETAILS_TITLE:"webapp_secure_notes_form_content_note_details_title",CONTENT_ITEM_ORGANIZATION:"webapp_secure_notes_form_content_item_organization",CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION:"webapp_credential_edition_field_force_categorized",CONTENT_ITEM_ORGANIZATION_COLOR:"webapp_secure_notes_form_content_item_organization_color",CONTENT_PREFERENCES:"webapp_secure_notes_form_content_preferences",SECURITY_TITLE:"webapp_secure_notes_addition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_addition_field_tab_option_security_description",CHANGE_SECURED_SETTING_ON:"webapp_secure_notes_edition_unlocker_on_success",CHANGE_SECURED_SETTING_OFF:"webapp_secure_notes_edition_unlocker_off_success",COLORS:{BLUE:"webapp_secure_notes_addition_field_type_option_blue",BROWN:"webapp_secure_notes_addition_field_type_option_brown",GRAY:"webapp_secure_notes_addition_field_type_option_gray",GREEN:"webapp_secure_notes_addition_field_type_option_green",ORANGE:"webapp_secure_notes_addition_field_type_option_orange",PINK:"webapp_secure_notes_addition_field_type_option_pink",PURPLE:"webapp_secure_notes_addition_field_type_option_purple",RED:"webapp_secure_notes_addition_field_type_option_red",YELLOW:"webapp_secure_notes_addition_field_type_option_yellow"}},Re={title:"webapp_secure_notes_edition_unlocker_title_on",subtitle:"webapp_secure_notes_edition_unlocker_description_on"},Ae={title:"webapp_secure_notes_edition_unlocker_title_off",subtitle:"webapp_secure_notes_edition_unlocker_description_off"},De=({title:e,color:t,spaceId:n,content:i,isSecured:s,isNewItem:o,isEditing:r,isShared:c,isAdmin:_,isDisabled:p,isDisableSecureNotesFFActive:u,isSecureNoteAttachmentEnabled:h,hasAttachment:b,data:g,onModifyData:E,setCollectionsToUpdate:C,setColor:S,setSpaceId:I,setIsEditing:w,setTitle:y,setContent:T,setIsSecured:v,setHasDialogsOpenedByChildren:x})=>{const{translate:N}=(0,l.Z)(),{showToast:R}=(0,a.pm)(),A=(0,Ce.F)(),{isMPLessUser:D}=(0,Se.Z)(),Z=(0,d.useRef)(null),{areProtectedItemsUnlocked:L,openProtectedItemsUnlocker:k}=(0,Ee.tY)(),B=Z.current?.getVaultItemCollections(),{shouldShowFrozenStateDialog:P}=(0,Ne.Ub)(),U=(0,m._)(),F=Boolean(U.data?.sharingVault_web_Secure_Notes_in_Collections_dev),G=!A&&!D,X=pe(_e.reduce(((e,t)=>(e[t]=N(Oe.COLORS[t]),e)),{}),_e,he(t)),z=e=>{v(e),R({description:N(e?Oe.CHANGE_SECURED_SETTING_ON:Oe.CHANGE_SECURED_SETTING_OFF),closeActionLabel:N("_common_dialog_dismiss_button")})},H=Boolean(B?.some((e=>e.isShared)))||p;return(0,f.BX)(f.HY,{children:[h&&(c||b)&&(0,f.tZ)(a.ke,{mood:"neutral",size:"small",title:N(c?Oe.INFO_BOX_SHARED:Oe.INFO_BOX_ATTACHMENTS),sx:{margin:"10px 0px"}}),(0,f.BX)(ie.u,{title:N(Oe.CONTENT_NOTE_DETAILS),additionalSx:{marginBottom:"16px"},children:[(0,f.tZ)(a.qo,{label:N(Oe.CONTENT_NOTE_DETAILS_TITLE),value:e,onChange:e=>y(e.target.value)}),(0,f.tZ)(O,{content:i,setContent:T,isEditing:r,setIsEditing:w,limitedPermissions:c&&!_,readonly:p||u}),(0,f.tZ)(re,{maxAuthorizedSize:1e4,currentSize:i.length})]}),(0,f.BX)(ie.u,{title:N(Oe.CONTENT_ITEM_ORGANIZATION),additionalSx:{marginBottom:"16px"},children:[(0,f.tZ)(a.mg,{value:t,"data-name":"colorSelect",label:N(Oe.CONTENT_ITEM_ORGANIZATION_COLOR),onChange:S,disabled:p,sx:{marginBottom:"8px"},children:X.map((e=>(0,f.tZ)(a.$m,{value:e.value,children:e.label},e.value)))}),(0,f.tZ)(a.u,{content:N(Oe.CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION,{space:n}),passThrough:!H,children:(0,f.tZ)(fe.M,{spaceId:null!=n?n:"",disabled:H,onChange:I,defaultSpaceId:null!=n?n:"",isUsingNewDesign:!0})}),F?(0,f.tZ)(xe.p,{hasLabel:!1,vaultItem:{spaceId:null!=n?n:"",vaultItemId:g.id,vaultItemTitle:e,isSharedWithLimitedRights:g.limitedPermissions},ref:Z,signalEditedValues:E,isAddCollectionDisabled:!!P||b,setHasOpenedDialogs:x,setCollectionsToUpdate:C}):null]}),G?(0,f.tZ)(ie.u,{title:N(Oe.CONTENT_PREFERENCES),additionalSx:{marginBottom:"16px"},children:(0,f.tZ)(a.XZ,{id:"securityToggle",label:N(Oe.SECURITY_TITLE),description:N(Oe.SECURITY_DESCRIPTION),checked:s,onChange:()=>{const e=!s;L||o?z(e):((0,Ee.jF)(),k({itemType:ge.R.SecureNoteSetting,options:{fieldsKeys:e?Re:Ae,translated:!1},successCallback:()=>z(e)}))}})}):null]})},{CONTENT:Ze,DOCUMENT_STORAGE:Le,MORE_OPTIONS:ke,SHARED_ACCESS:Be}=c.SecureNoteTabs,Pe=1e4,Ue=({activeTab:e,data:t,content:n,setContent:c,handleFileInfoDetached:d,hasAttachment:_,isAdmin:p,isSecureNoteAttachmentEnabled:u,isSecureNoteRevampEnabled:m,isShared:h,isUploading:b,isEditing:g,isDisabled:E,setIsEditing:C,noteCategories:S,onModifyData:I,onModalDisplayStateChange:w,saveSecureNoteOptions:y,setCollectionsToUpdate:T,setHasDialogsOpenedByChildren:v,...x})=>{var N;const{translate:R}=(0,l.Z)(),A=(0,o.w)(s.w.DisableSecureNotes);return(0,f.BX)(f.HY,{children:[e===Ze&&(m?(0,f.tZ)(De,{data:t,content:n,isNewItem:!1,isEditing:g,isAdmin:p,isShared:h,isDisabled:E,isDisableSecureNotesFFActive:A,isSecureNoteAttachmentEnabled:u,hasAttachment:_,setIsEditing:C,setContent:c,setCollectionsToUpdate:T,onModifyData:I,setHasDialogsOpenedByChildren:v,...x}):(0,f.BX)(f.HY,{children:[(0,f.tZ)("div",{className:"formContent--TCNgoQopo1",children:(0,f.tZ)(O,{content:n,setContent:e=>{I(),c(e)},isEditing:g,setIsEditing:C,limitedPermissions:h&&!p,readonly:E||A})}),(0,f.tZ)(re,{maxAuthorizedSize:Pe,currentSize:n.length}),u&&(h||_)&&(0,f.tZ)(a.ke,{mood:"neutral",size:"small",title:R(h?"webapp_secure_notes_infobox_shared":"webapp_secure_notes_infobox_has_attachments"),sx:{margin:"0px 32px 0px 8px"}})]})),e===Be&&(0,f.tZ)(r.u,{isAdmin:p,id:t.id}),e===Le&&(0,f.tZ)(se,{isSecureNoteRevampEnabled:m,currentValues:(0,i.pick)(["attachments"],t),additionalProps:{handleFileInfoDetached:e=>{d(e)},onModalDisplayStateChange:w,noteId:t.id,isUploading:b}}),m?null:e===ke&&(0,f.tZ)(ve,{data:{category:t.category,spaceId:null!=(N=t.spaceId)?N:"",type:t.type,secured:t.secured},noteCategories:S,isNewItem:!1,saveSecureNoteOptions:e=>{y(e)},disabled:!!E})]})}},285163:(e,t,n)=>{"use strict";n.d(t,{Q:()=>p});var i=n(361607),a=n(482598),s=n(172721),o=n(982466),l=n(299074),r=n(96862),c=n(914662);const d=e=>!e.initiallyExisting&&!e.hasBeenDeleted,_=e=>e.initiallyExisting&&!e.hasBeenDeleted,p=()=>{const e=(0,i._)(),t=Boolean(e.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(e.data?.sharingVault_web_Collection_Item_Permissions_prod),{createCollection:n,updateCollection:p}=(0,a.u)(l.v),{addItemToCollections:u,removeItemFromCollections:m}=(0,a.u)(s.a);return{addNoteToCollections:async(e,i)=>{const a=[],s=[];for(const u of i){var l;_(u)||(u.isShared?d(u)?a.push({collectionId:u.id,permission:t?null!=(l=u.itemPermission)?l:o.y3.Limited:o.y3.Admin}):s.push(u.id):(u.vaultItems=[{id:e,type:c.dJ.KWSecureNote}],u.id?await p({id:u.id,collection:u,operationType:u.hasBeenDeleted?r.C.SUBSTRACT_VAULT_ITEMS:r.C.APPEND_VAULT_ITEMS}):await n({content:u})))}a.length&&await u({collectionPermissions:a,itemId:e,shouldSkipSync:s.length>0}),s.length&&await m({collectionIds:s,itemId:e})}}}},979808:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var i=n(799852),a=n(348958);const s=e=>(0,i.k)(a.X,"sharedAccessForItem",{itemId:e})},555449:(e,t,n)=>{"use strict";n.d(t,{u:()=>Z});var i,a,s=n(696832),o=n(310789),l=n(361607),r=n(482598),c=n(133354),d=n(172721),_=n(982466),p=n(287279),u=n(740300),m=n(488203),h=n(343194),f=n(448263),b=n(782579),g=n(232814),E=n(904967),C=n(873670),S=n(989572),I=n(58037),w=n(803322);const y=({cancelStatus:e,itemGroupId:t,setCancelStatus:n,recipientId:l})=>{const{translate:r}=(0,m.Z)(),c=e===f.V.Loading,d={type:"user",alias:l};(0,s.useEffect)((()=>{let t;return e===f.V.Failure&&(t=window.setTimeout((()=>n(null)),2e3)),()=>{clearTimeout(t)}}),[e,n]);const _=e?()=>n(null):()=>n(f.V.Confirm);return e===f.V.Failure?(0,w.BX)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"},children:[i||(i=(0,w.tZ)(o.aNP,{color:"ds.text.danger.standard"}))," ",r("webapp_shared_access_cancel_failure")]}):(0,w.BX)("div",{children:[(0,w.tZ)(b.zx,{intensity:e?"quiet":"supershy",disabled:c,onClick:_,size:"small",children:r(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")}),e?(0,w.tZ)(b.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:c,size:"small",onClick:()=>(async()=>{n(f.V.Loading);const e=await(async()=>{try{const{success:e}=await u.C.revokeSharing({itemGroupId:t,recipient:d});return e}catch(e){return!1}})();n(e?f.V.Success:f.V.Failure)})(),children:c?a||(a=(0,w.tZ)(o.HoD,{})):r("webapp_shared_access_confirm")}):null]})};var T;const v="webapp_sharing_permissions_full_rights",x="webapp_sharing_permissions_limited_rights",N=e=>{const{status:t,permission:n}=e;return"pending"===t?"webapp_shared_access_pending_invitation":"accepted"===t?"admin"===n?v:x:""},O=({itemGroupId:e,onUserSelected:t,openEditPermissionsDialog:n,member:i,isAdmin:a,isItemPermissionsEnabled:o=!1})=>{const[l,r]=(0,s.useState)(null),c=(0,I.j)()?.login,{translate:d}=(0,m.Z)();if(l===f.V.Success)return null;const{permission:p,status:u,recipientType:h}=i,O=c===i.recipientId,R=a&&c!==i.recipientId,A="pending"===u?(0,w.tZ)(y,{recipientId:i.recipientId,itemGroupId:e,cancelStatus:l,setCancelStatus:r}):(0,w.tZ)(C.M,{disabled:o&&!a||!o&&i.recipientType===_.IP.Collection,icon:"ActionEditOutlined",layout:"iconLeading",intensity:"supershy",onClick:()=>{t&&t(i.recipientId),n(i,p,h)},content:d("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"},size:"small",children:d("webapp_shared_access_edit_permissions")});return(0,w.tZ)("li",{sx:{alignItems:"center",display:"flex",minHeight:"48px",position:"relative"},children:(0,w.tZ)(E.r,{infoAction:R?A:null,logo:i.recipientType===_.IP.Group?T||(T=(0,w.tZ)(S.Z,{})):(0,w.tZ)(g.q,{email:i.recipientName,size:36}),text:o?void 0:N(i)?d(N(i)):d("webapp_shared_permissions_dialog_revoke_success_title"),title:i.recipientName,permissionBadge:o?(0,w.tZ)(b.Ct,{mood:"admin"===p?"brand":"danger",label:d("admin"===p?v:x)}):void 0,disabled:l===f.V.Loading,titleLogo:O?(0,w.tZ)(b.Ct,{label:d("webapp_shared_access_you_badge").toUpperCase(),layout:"labelOnly",sx:{marginLeft:"4px"}}):null})},i.recipientId)};var R=n(979808),A=n(468037),D=n(814341);const Z=({id:e,isAdmin:t})=>{const{translate:n}=(0,m.Z)(),[i,a]=(0,s.useState)(!1),[b,g]=(0,s.useState)(null),[E,C]=(0,s.useState)(void 0),S=(0,l._)(),{data:I,status:y}=(0,R.r)(e),{updatePermissionForCollectionItem:T,removeItemFromCollections:v}=(0,r.u)(d.a),x=Boolean(S.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(S.data?.sharingVault_web_Collection_Item_Permissions_prod);if(y!==c.rq.Success)return(0,w.tZ)(o.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});if(!I)return null;const{itemGroupId:N,users:Z,groups:L,collections:k}=I,B=e=>{b&&g({...b,step:e})},P=async()=>{if(!b)return;const{recipient:t,permission:n,recipientType:i}=b;a(!0);const s="revoke"===n?await(async(t,n)=>{try{if(n===_.IP.Collection){const n=await v({collectionIds:[t.recipientId],itemId:e});return!!(0,p.d6)(n)}const{success:i}=await u.C.revokeSharing({itemGroupId:null!=N?N:"",recipient:(0,D.d)(t)});return i}catch(e){return!1}})(t,i):await(async(e,t,n)=>{try{if(n===_.IP.Collection){const n=await T({groupId:N,collection:{collectionId:e.recipientId,permission:t}});return!!(0,p.d6)(n)}{const{success:n}=await u.C.updateSharingPermission({itemGroupId:null!=N?N:"",recipient:(0,D.d)(e),permission:t});return n}}catch(e){return!1}})(t,n,i);if(s){const e="revoke"===n?f.PermissionDialogStep.RevokeSuccess:f.PermissionDialogStep.Success;B(e)}else B(f.PermissionDialogStep.Failure);a(!1)},U=(e,t,n)=>{const i={recipient:e,recipientType:n,permission:t,originPermission:t,step:f.PermissionDialogStep.Permission,name:e.recipientName};g(i)},F=L?.length>0,G=k?.length>0,X=Z?.length>0,z=!(E&&Z.find((e=>e.recipientId!==E&&e.permission===_.y3.Admin)))&&b?.recipient.recipientType===_.IP.User,H="collection"===b?.recipientType;return(0,w.BX)("div",{sx:{flex:"1",overflowY:"auto"},children:[(0,w.BX)("ul",{sx:{flex:"1"},children:[G?(0,w.tZ)(A.u,{title:n("webapp_shared_access_collections"),additionalSx:{marginBottom:"16px"},children:k.map((e=>(0,w.tZ)(O,{isItemPermissionsEnabled:x,isAdmin:t,member:e,itemGroupId:null!=N?N:"",openEditPermissionsDialog:U},e.recipientId)))}):null,F?(0,w.tZ)(A.u,{title:n("webapp_shared_access_groups_card_title"),additionalSx:{marginBottom:"16px"},children:L.map((e=>(0,w.tZ)(O,{isAdmin:t,member:e,itemGroupId:null!=N?N:"",openEditPermissionsDialog:U},e.recipientId)))}):null,X?(0,w.tZ)(A.u,{title:n("webapp_shared_access_individuals_card_title"),children:Z.map((e=>(0,w.tZ)(O,{isAdmin:t,member:e,onUserSelected:e=>C(e),itemGroupId:null!=N?N:"",openEditPermissionsDialog:U},e.recipientId)))}):null]}),b&&(0,w.tZ)(h.E,{isOpen:!0,isCollectionItemPermission:H,shouldRevokeBeDisabled:z||void 0,loading:i,onCancelRevoke:()=>{b&&g({...b,step:f.PermissionDialogStep.Permission})},onConfirmRevoke:P,onDismiss:()=>g(null),onSelectPermission:e=>{b&&g({...b,permission:e})},onValidatePermission:()=>{"revoke"===b?.permission?g({...b,step:f.PermissionDialogStep.ConfirmRevoke}):P()},permission:b.permission,recipient:b.recipient,step:b.step})]})}},855541:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i={left:"left--jltGqC2ld6",right:"right--r4mXfTZRXo",select:"select--ivbO452zoA",disable:"disable--F2KcdR2ssV",label:"label--EhkwVb63v9"}},102730:(e,t,n)=>{var i=n(696832);function a(e){return i.createElement("svg",e,i.createElement("g",{fill:"none",fillRule:"evenodd"},[i.createElement("path",{className:"tooltip-modern-icon-stroke",d:"M.5 8.5a8 8 0 1 1 16 0 8 8 0 0 1-16 0zm8-1v5",key:0}),i.createElement("path",{className:"tooltip-modern-icon-fill",d:"M9.5 4.5a1 1 0 1 0-2 0 1 1 0 1 0 2 0",key:1})]))}a.defaultProps={width:"17",height:"17"},e.exports=a,a.default=a},15567:(e,t,n)=>{var i=n(696832);function a(e){return i.createElement("svg",e,i.createElement("path",{d:"M6.547 7.25c0-1 1-2 2.5-2s2.5.75 2.5 2c0 1-.5 1.5-1.5 2.25s-1 1.25-1 1.75m-8.5-1.5a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Zm9 4a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",className:"tooltip-modern-icon-stroke"}))}a.defaultProps={width:"17",height:"17",viewBox:"0 0 19 19",fill:"none"},e.exports=a,a.default=a},221119:(e,t,n)=>{"use strict";var i,a,s;n.d(t,{XX:()=>s,tA:()=>i,wL:()=>a}),function(e){e.MAX_CONTENT_LENGTH_EXCEEDED="MAX_CONTENT_LENGTH_EXCEEDED",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.INVALID_FILE_TYPE="INVALID_FILE_TYPE",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.FILE_NOT_FOUND="FILE_NOT_FOUND"}(i||(i={})),function(e){e.Initial="Initial",e.Downloading="Downloading",e.Deciphering="Deciphering",e.Error="Error",e.ChunkReady="ChunkReady",e.ChunkDownloaded="ChunkDownloaded",e.TransferComplete="TransferComplete"}(a||(a={})),function(e){e.None="None",e.Initial="Initial",e.Uploading="Uploading",e.Ciphering="Ciphering",e.Done="Done",e.Error="Error"}(s||(s={}))}}]);