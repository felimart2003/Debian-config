"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7785],{431738:(e,t,a)=>{a.r(t),a.d(t,{BankAccountAddView:()=>E});var n=a(696832),o=a(482598),r=a(287279),c=a(448430),s=a(575257),i=a(382706),u=a(310789),l=a(700033),d=a(86498),m=a(276376),_=a(739649),p=a(177650),f=a(488203),S=a(45272),b=a(692077),y=a(806697),g=a(376452),h=a(908940),k=a(860062),w=a(799852),N=a(224652);const I=e=>{const{data:t}=(0,w.k)(c.L,"query",{vaultItemTypes:[i.U.Identity],propertyFilters:null!==e?[{property:"spaceId",value:e}]:void 0,propertySorting:{property:"lastUse",direction:N.S.Descend}});return t&&t.identitiesResult.matchCount?(e=>{var t;const{firstName:a,lastName:n}=null!=(t=e.filter(Boolean).find((e=>""!==e.firstName.trim()||""!==e.lastName.trim())))?t:{firstName:"",lastName:""};return[a,n].join(" ").trim()})(t.identitiesResult.items):""};var v,B=a(803322);const C="_common_generic_error",E=({lee:e})=>{var t;const[a,w]=(0,n.useState)(!1),[N,E]=(0,n.useState)(!1),[R,V]=(0,n.useState)(new Set),L=(0,n.useRef)(null),{createVaultItem:A}=(0,o.u)(c.L),{routes:T}=(0,m.Xo)(),{openDialog:U,shouldShowFrozenStateDialog:Z}=(0,y.Ub)();(0,n.useEffect)((()=>{(0,S.Nc)(l.PageView.ItemBankStatementCreate);const e=setTimeout((()=>{L.current?.focus()}),p.sc);return()=>clearTimeout(e)}),[]),(0,n.useEffect)((()=>{Z&&U()}),[U,Z]);const[P,D]=(0,n.useState)({bankCode:"",country:s.c[e.globalState.locale.country]||s.c.US,IBAN:"",BIC:"",accountName:"",ownerName:"",spaceId:null!=(t=(0,_.B)(e.globalState))?t:""}),O=I(P.spaceId),W=""!==O;(0,n.useEffect)((()=>{""!==O&&D((e=>({...e,owner:O})))}),[W]);const{translate:z}=(0,f.Z)(),{showAlert:F}=(0,d.V)(),X=()=>{(0,S.Nc)(l.PageView.ItemPaymentList),(0,b.uX)(T.userPayments)};return(0,B.tZ)(g.zI,{isViewingExistingItem:!1,itemHasBeenEdited:a,formId:"bank-account-add-form",onNavigateOut:X,onSubmit:async()=>{if(N)return;const e=(0,h.e)(P);if(!e.isValid)return V(e.errorSet);E(!0);try{const e=await A({vaultItemType:i.U.BankAccount,content:P});(0,r.d6)(e)?(F(P.accountName?z("webapp_payment_edition_bank_account_name_save_alert",{accountName:P.accountName}):z("webapp_payment_edition_bank_account_generic_save_alert"),u.BLW.SUCCESS),X()):(F(z(C),u.BLW.ERROR),E(!1))}catch(e){F(z(C),u.BLW.ERROR),E(!1)}},header:(0,B.tZ)(g.V9,{icon:v||(v=(0,B.tZ)(k.L,{})),iconBackgroundColor:u.colors.dashGreen06,title:z("webapp_payment_edition_header_add_bank_account")}),children:(0,B.tZ)(h.o,{bankAccount:P,errors:R,ref:L,signalEditedValues:(e,t=!1)=>{D(e),t||w(!0)},variant:"add"})})}}}]);