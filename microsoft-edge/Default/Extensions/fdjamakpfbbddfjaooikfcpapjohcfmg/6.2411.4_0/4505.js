"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4505],{249570:(e,t,i)=>{i.r(t),i.d(t,{CredentialEditPanel:()=>Te});var a,n=i(799852),s=i(995445),l=i(133354),r=i(448430),o=i(382706),d=i(348958),c=i(982466),p=i(846097),_=i(569029),u=i(718108),m=i(466424),h=i(830894),b=i(696832),k=i(526849),w=i(914662),x=i(361607),g=i(482598),S=i(172721),y=i(310789),f=i(299074),C=i(96862),v=i(86498),Z=i(488203),L=i(692077),D=i(806697),I=i(73875),A=i(376452),E=i(682994),U=i(133659),P=i(762042),T=i(99822),B=i(625078),R=i(555449),q=i(810291),W=i(696397),z=i(760790),N=i(117534),V=i(782579),O=i(684985),X=i(468037),M=i(803322);const F=b.memo((({credential:e,onClose:t,openWithNewUrlField:i,onUpdateLinkedWebsitesAddedByUser:n,hasLimitedRights:s,dashlaneDefinedLinkedWebsites:l})=>{const{translate:r}=(0,Z.Z)(),[o,d]=b.useState(e.linkedURLs),[c,p]=b.useState(i);return b.useEffect((()=>{const t=e.linkedURLs,i=!(t.length===o.length&&t.every(((e,t)=>o[t]===e)));p(i),n(o)}),[o]),(0,M.BX)("div",{"data-testid":"linked-websites-tab",children:[(0,M.tZ)(V.zx,{"data-testid":"back-button",layout:"iconLeading",mood:"neutral",intensity:"supershy",onClick:t,icon:a||(a=(0,M.tZ)(V.JO,{name:"ArrowLeftOutlined"})),children:r("webapp_credential_linked_websites_title")}),(0,M.tZ)(X.u,{title:r("webapp_credential_linked_websites_section_primary"),description:r("webapp_credential_linked_websites_section_primary_description"),additionalSx:{marginTop:"24px"},children:(0,M.tZ)(O.a,{linkedWebsitesList:[e.URL],areItemsLocked:s,credentialId:e.id,isEditing:!1})}),(0,M.tZ)(X.u,{title:r("webapp_credential_linked_websites_section_added_by_user"),additionalSx:{marginTop:"16px"},children:(0,M.tZ)(O.a,{linkedWebsitesList:o,areItemsLocked:s,credentialId:e.id,isListEditable:!s,isEditing:c,showUrlProtocol:!0,updateLinkedWebsitesList:d})}),l&&l.length>1?(0,M.tZ)(X.u,{title:r("webapp_credential_linked_websites_section_added_by_dashlane"),description:r("webapp_credential_linked_websites_section_added_by_dashlane_description"),additionalSx:{marginTop:"16px"},children:(0,M.tZ)(O.a,{linkedWebsitesList:l,areItemsLocked:!0,credentialId:e.id,isEditing:!1})}):null]})})),G=({onClose:e,setDisplayLinkedWebsitesDataSavedAlert:t})=>{const{translate:i}=(0,Z.Z)();return(0,b.useRef)(null).current=window.setTimeout((()=>t(!1)),5e3),(0,M.tZ)(y.YcA,{children:(0,M.tZ)(y.bZj,{size:y.k3y.SMALL,severity:y.BLW.SUCCESS,closeIconName:i("_common_alert_dismiss_button"),onClose:e,children:i("_common_toast_changes_saved")})})};var H=i(717676);const j=({onCancel:e,onLeavePageWithoutSaving:t})=>{const{translate:i}=(0,Z.Z)();return(0,M.tZ)(H.o,{isOpen:!0,showCloseIcon:!0,title:i("webapp_credential_linked_websites_discard_dialog_title"),onRequestClose:e,footer:(0,M.BX)(y.Ejs,{justifyContent:"end",gap:"8px",children:[(0,M.tZ)(y.zxk,{type:"button",nature:"secondary",onClick:e,children:i("webapp_credential_linked_websites_discard_dialog_cancel")}),(0,M.tZ)(y.zxk,{type:"button",onClick:t,children:i("webapp_credential_linked_websites_discard_dialog_discard")})]}),children:(0,M.tZ)(y.Ejs,{flexDirection:"column",gap:"8px",sx:{width:"576px"},children:(0,M.tZ)(y.nvN,{children:i.markup("webapp_credential_linked_websites_discard_dialog_description_markup")})})})},K=({duplicateData:e,onCancel:t,onSave:i})=>{const{translate:a}=(0,Z.Z)(),n=e.length>1,s=n?a("webapp_credential_linked_websites_duplicate_prevention_dialog_title_multiple"):a("webapp_credential_linked_websites_duplicate_prevention_dialog_title_one",{url:e[0].linkedWebsite}),l=n?a("webapp_credential_linked_websites_duplicate_prevention_dialog_description_multiple"):a("webapp_credential_linked_websites_duplicate_prevention_dialog_description_one",{credentialName:e[0].credentialName}),r=a(n?"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_multiple":"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_one");return(0,M.tZ)(H.o,{isOpen:!0,showCloseIcon:!0,title:s,onRequestClose:t,footer:(0,M.BX)(y.Ejs,{justifyContent:"end",gap:"8px",children:[(0,M.tZ)(y.zxk,{type:"button",nature:"secondary",onClick:t,children:a("webapp_credential_linked_websites_duplicate_prevention_dialog_cancel")}),(0,M.tZ)(y.zxk,{type:"button",onClick:i,children:r})]}),children:(0,M.BX)("div",{children:[(0,M.tZ)("p",{children:l}),n?(0,M.tZ)("ul",{className:"duplicatesList--SwGmL5ftwe",children:e.map((e=>(0,M.tZ)("li",{className:"duplicateItem--mPX5urdfL2",children:e.linkedWebsite},e.linkedWebsite)))}):null]})})};var J=i(740300);const Y="webapp_password_history_detailed_password_view_button",$=({credentialId:e})=>{const{translate:t}=(0,Z.Z)(),{routes:i}=(0,L.Xo)(),a=i.userPasswordHistoryFilteredByCredential(e),[n,s]=(0,b.useState)(!1);return(0,b.useEffect)((()=>{J.C.getHasPasswordHistory(e).then((e=>{e&&s(!0)}))}),[e]),n?(0,M.tZ)("div",{children:(0,M.tZ)(L.rU,{to:a,tabIndex:-1,children:(0,M.tZ)(V.zx,{mood:"neutral",intensity:"supershy",title:t(Y),icon:"HistoryBackupOutlined",layout:"iconLeading",children:t(Y)})})}):null};var Q=i(72133),ee=i(924058),te=i(157668),ie=i(671738),ae=i(139632);const ne={exit:"exit--p4spwlkedE",exitActive:"exitActive--BIpaDF7MkX",exitDone:"exitDone--KzowOK4h4K",appear:"appear--OcvlWdq5He",appearActive:"appearActive--HVwCcEJzKz",appearDone:"appearDone--KgBJPzbyTA"},se=b.memo((({onPrimaryClick:e})=>{const{translate:t}=(0,Z.Z)(),[i,a]=b.useState(!1);return(0,M.tZ)(ae.Z,{appear:!0,in:!i,timeout:600,classNames:ne,onExited:e,children:(0,M.tZ)("div",{sx:{backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,M.tZ)(V.ke,{title:t("webapp_credential_edition_health_box_excluded_title"),description:t("webapp_credential_edition_health_box_excluded_description"),mood:"warning",size:"large",actions:[(0,M.tZ)(V.zx,{mood:"brand",intensity:"quiet",onClick:e=>{e.preventDefault(),a(!0)},size:"small",type:"button",children:t("webapp_credential_edition_health_box_include")},"primaryAction")]})})})}));var le=i(504253),re=i(365580);const oe={appear:"appear--MMCjEcRU3u",appearActive:"appearActive--LG103cUrNZ",appearDone:"appearDone--tuYaN3WTGO"},de=b.memo((({onPrimaryClick:e,onSecondaryClick:t,isLimitedSharingPassword:i,corruptionData:a})=>{const{translate:n}=(0,Z.Z)();if(!a)return null;const s=((e,t)=>{const{riskType:i}=e;switch(i){case le.gI.Compromised:return{title:t("webapp_credential_edition_health_box_compromised_title"),description:t("webapp_credential_edition_health_box_compromised_description"),secondary:t("webapp_credential_edition_health_box_view_compromised")};case le.gI.Reused:return{title:t("webapp_credential_edition_health_box_reused_title"),description:t.markup("webapp_credential_edition_health_box_reused_description_markup",{count:e.reuseCount}),secondary:t("webapp_credential_edition_health_box_view_reused")};case le.gI.Weak:return{title:t("webapp_credential_edition_health_box_weak_title"),description:t("webapp_credential_edition_health_box_weak_description"),secondary:t("webapp_credential_edition_health_box_view_weak")};default:return(0,re.U)(i)}})(a,n),l=a.severity===le.bp.STRONG?"warning":"brand";return(0,M.tZ)(ae.Z,{in:!0,appear:!0,timeout:600,classNames:oe,children:(0,M.tZ)("div",{sx:{position:"relative",backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,M.tZ)(V.ke,{title:s.title,description:s.description,mood:l,size:"large",actions:[(0,M.tZ)(V.zx,{onClick:t,intensity:"quiet",size:"small",children:s.secondary},"view_health"),(0,M.tZ)(y.ua7,{passThrough:!i,content:n("webapp_credential_edition_health_box_change_limited"),placement:"left",sx:{maxWidth:"312px",fontSize:2},children:(0,M.tZ)(V.zx,{size:"small",onClick:e,disabled:i,children:n("webapp_credential_edition_health_box_change_password")})},"change_password")]})})})})),ce=JSON.parse('{"v":"5.7.0","fr":30,"ip":0,"op":26,"w":240,"h":240,"nm":"Loading Light Theme","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Null 4","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[120,122,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"load","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.05490196078,0.2078431373,0.2392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":12.5,"s":[42]},{"t":25,"s":[10]}],"ix":2},"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.2],"y":[0]},"t":0,"s":[-19]},{"t":25,"s":[341]}],"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"load 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.9058823529,0.9215686275,0.9254901961,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":".","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0}],"markers":[]}'),pe=({credentialId:e,isShared:t,hasLimitedPermission:i})=>{const a=(0,L.k6)(),{routes:s}=(0,L.Xo)(),{updateIsCredentialExcluded:l}=(0,ee.$)(),{healthData:r}=(e=>{const{data:t}=(0,n.k)(te.d,"credentialHealthData",{credentialId:e});return{healthData:t}})(e),[o,d]=(0,b.useState)(null);return null===r?null:r?(0,M.BX)("div",{sx:{position:"relative"},children:[o?(0,M.tZ)(ie.R,{credentialId:o,dismissCallback:()=>d(null)}):null,r.excluded?(0,M.tZ)(se,{onPrimaryClick:()=>{l(e,!1)}}):(0,M.tZ)(de,{onPrimaryClick:t=>{t.preventDefault(),d(e)},onSecondaryClick:e=>{e.preventDefault(),a.push(s.userPasswordHealth)},isLimitedSharingPassword:t&&i,corruptionData:r.corruptionData})]}):(0,M.tZ)("div",{sx:{marginBottom:"24px"},children:(0,M.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:(0,M.tZ)(Q.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:ce}})})})};var _e=i(164718),ue=i(285473),me=i(626555),he=i(662667),be=i(979808);const{SHARED_ACCESS:ke,ACCOUNT_DETAILS:we}=he.CredentialTabs,xe=({activeTab:e,credential:t,displayTabs:i,changeTab:a})=>{const{translate:n}=(0,Z.Z)(),{data:s,status:r}=(0,be.r)(t.id),o=r===l.rq.Success?s?.count:0,d=[{active:e===we,label:n("webapp_credential_edition_account_details"),onClick:()=>a(we)},{active:e===ke,label:`${n("webapp_credential_edition_shared_access")} (${o})`,onClick:()=>a(ke)}];return(0,M.tZ)(A.V9,{icon:(0,M.tZ)(me.h,{title:t.itemName,size:ue.o.LARGE,domain:new _e.Y(t.URL).getRootDomain()}),title:t.itemName,tabs:i?d:void 0})};var ge=i(245636),Se=i(690056),ye=i(397855);const fe=({rank:e,content:t,title:i})=>(0,M.BX)(y.T5p,{as:"li",gap:"16px",gridTemplateColumns:"35px 1fr",alignItems:"center",justifyContent:"flex-start",sx:{width:"100%",padding:"6px 0"},children:[(0,M.tZ)(y.dDn,{alignSelf:"flex-start",children:(0,M.tZ)(ye.m,{rank:e})}),(0,M.BX)(y.dDn,{children:[(0,M.tZ)(V.nv,{sx:{a:{color:"ds.text.brand.standard"},"a:hover":{color:"ds.text.brand.standard",textDecoration:"underline"}},color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:i}),t?(0,M.tZ)(V.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t}):null]})]});var Ce;const ve=({credentialId:e,title:t,url:i,setHasDataBeenModified:a,onClose:n,onSubmit:s})=>{const{translate:r}=(0,Z.Z)(),[o,d]=(0,b.useState)(""),c=(0,ge.v6)(o),{setupOtpCode:p}=(()=>{const{setupOtpCodeForCredential:e}=(0,g.u)(Se.i);return{setupOtpCode:async(t,i)=>{try{return await e({credentialId:t,otpUrl:i}),!0}catch{return!1}}}})(),{showToast:_}=(0,V.pm)(),u=!!o&&c.status===l.rq.Error,m=c.status!==l.rq.Success;return(0,M.BX)("div",{"data-testid":"linked-websites-tab",children:[(0,M.tZ)(V.zx,{"data-testid":"back-button",layout:"iconLeading",mood:"neutral",intensity:"supershy",size:"large",onClick:n,icon:Ce||(Ce=(0,M.tZ)(V.JO,{name:"ArrowLeftOutlined"})),children:(0,M.tZ)(V.nv,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:r("webapp_credential_otp_setup_sublevel_header")})}),(0,M.BX)(X.u,{additionalSx:{marginTop:"16px"},children:[(0,M.BX)(y.Ejs,{as:"ol",gap:"16px",children:[(0,M.tZ)(V.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:r("webapp_credential_otp_setup_title")}),(0,M.tZ)(fe,{rank:1,content:r("webapp_credential_otp_setup_step1_description"),title:r.markup("webapp_credential_otp_setup_step1_title_markup",{title:t,url:i},{linkTarget:"_blank"})},"2fa-settings"),(0,M.tZ)(fe,{rank:2,content:r("webapp_credential_otp_setup_step2_description"),title:r("webapp_credential_otp_setup_step2_title")},"2fa-turn-on"),(0,M.tZ)(fe,{rank:3,content:r("webapp_credential_otp_setup_step3_description"),title:r("webapp_credential_otp_setup_step3_title")},"enter-setup-code")]}),(0,M.BX)(y.Ejs,{sx:{mt:"16px",backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"16px",borderRadius:"8px"},gap:"8px",flexDirection:"column",children:[(0,M.tZ)(V.Kx,{error:u,feedback:u?r("webapp_credential_otp_setup_incorrect_setup_code_error"):"",label:r("webapp_credential_otp_setup_code_label"),onChange:e=>{e.preventDefault(),e.stopPropagation(),a(!0),d(e.target.value)}}),(0,M.tZ)(V.zx,{fullsize:!0,onClick:async()=>{c.status===l.rq.Success&&(await p(e,c.data.url)?(s(),_({description:r("webapp_credential_otp_code_success_toast")})):_({mood:"danger",description:r("_common_generic_error")}))},disabled:m,tooltip:r("webapp_credential_otp_setup_submit_button_disabled_tooltip"),children:r("webapp_credential_otp_setup_submit_button")})]})]}),(0,M.tZ)(V.ke,{sx:{mt:"16px"},title:r("webapp_credential_otp_code_cant_find_code_title"),description:r("webapp_credential_otp_code_cant_find_code_description")})]})},Ze=()=>{const{translate:e}=(0,Z.Z)();return(0,M.tZ)("div",{sx:{position:"relative",backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,M.tZ)(V.ke,{title:e("webapp_credential_edition_frozen_limited_rights_title"),description:e("webapp_credential_edition_frozen_limited_rights_description"),mood:"warning",size:"medium"})})};var Le;const{SHARED_ACCESS:De,ACCOUNT_DETAILS:Ie,LINKED_WEBSITES:Ae,OTP_SETUP:Ee}=he.CredentialTabs,Ue=({location:e,activeSpaces:t,credential:i,credentialPreferences:a,onClose:n,protectedItemsUnlockerShown:s,dashlaneDefinedLinkedWebsites:l,areProtectedItemsUnlocked:d,openProtectedItemsUnlocker:u,isShared:m,isAdmin:h,isSharedViaUserGroup:V,isItemInCollection:O,isLastAdmin:X})=>{const{translate:H}=(0,Z.Z)(),J=(0,x._)(),{routes:Y}=(0,L.Xo)(),Q=(0,v.V)(),ee=(()=>{const{updateLinkedWebsites:e}=(0,g.u)(p.G);return async(t,i)=>{e({credentialId:t,updatedLinkedWebsitesList:i})}})(),{updateVaultItem:te}=(0,g.u)(r.L),{createCollection:ie,updateCollection:ae}=(0,g.u)(f.v),{addItemToCollections:ne,removeItemFromCollections:se}=(0,g.u)(S.a),{updateCredentialPreferences:le}=(0,g.u)(_.I),{shouldShowFrozenStateDialog:re}=(0,D.Ub)(),oe=(0,I.l)(),de=Boolean(J.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(J.data?.sharingVault_web_Collection_Item_Permissions_prod),ce=(0,b.createRef)(),_e=()=>{var e,t,n;return{alternativeUsername:null!=(e=i.alternativeUsername)?e:"",email:i.email,itemName:i.itemName,linkedURLs:i.linkedURLs,note:i.note,otpURL:null!=(t=i.otpURL)?t:"",otpSecret:null!=(n=i.otpSecret)?n:"",password:i.password,spaceId:i.spaceId,URL:i.URL,username:i.username,onlyAutofillExactDomain:a.onlyAutofillExactDomain,requireMasterPassword:a.requireMasterPassword,useAutoLogin:a.useAutoLogin}},[ue,me]=(0,b.useState)(_e()),[he,be]=(0,b.useState)((()=>{var e;const t=(0,L.CN)();return z.A0[null!=(e=t.get("tab"))?e:"account-details"]})()),[ke,we]=(0,b.useState)(Ie),[ge,Se]=(0,b.useState)(!1),[ye,fe]=(0,b.useState)(!1),[Ce,Ue]=(0,b.useState)(i.linkedURLs),[Pe,Te]=(0,b.useState)(!1),[Be,Re]=(0,b.useState)(!1),[qe,We]=(0,b.useState)([]),[ze,Ne]=(0,b.useState)(!1),[Ve,Oe]=(0,b.useState)(!1),[Xe,Me]=(0,b.useState)(!1),[Fe,Ge]=(0,b.useState)(!1),[He,je]=(0,b.useState)(!1),[Ke,Je]=(0,b.useState)(!1),{current:Ye}=(0,b.useRef)({confirmDeleteConfirm:H("webapp_credential_edition_delete_confirm"),confirmDeleteDismiss:H("webapp_credential_edition_delete_dismiss"),confirmDeleteSubtitle:H("webapp_credential_edition_confirm_delete_subtitle"),confirmDeleteTitle:H("webapp_credential_edition_confirm_delete_title"),lastAdminActionLabel:H("webapp_credential_edition_change_permissions"),lastAdminTitle:H("webapp_credential_edition_last_admin_title"),lastAdminSubtitle:H("webapp_credential_edition_last_admin_subtitle"),groupSharingTitle:H("webapp_credential_edition_group_sharing_title"),groupSharingSubtitle:H("webapp_credential_edition_group_sharing_subtitle"),collectionSharingTitle:H("webapp_credential_edition_collection_sharing_title"),collectionSharingSubtitle:H("webapp_credential_edition_collection_sharing_subtitle")});if((0,b.useEffect)((()=>{(0,N.SJ)(Ce,i.linkedURLs)&&Se(!0)}),[Ce,i.linkedURLs]),(0,b.useEffect)((()=>{he===Ie&&me(_e())}),[he]),(0,b.useEffect)((()=>{const{onlyAutofillExactDomain:e,requireMasterPassword:t,useAutoLogin:i,...a}=ue,{onlyAutofillExactDomain:n,requireMasterPassword:s,useAutoLogin:l,...r}=_e(),o=!(0,k.equals)(ue,_e());Se(o),Je(!(0,k.equals)(a,r))}),[ue]),null===re||null===oe)return null;const $e=()=>{const e=m&&!h;return{id:i.id,forceCategorizedSpace:(0,z.UC)(i,t),isDiscontinuedUser:re,limitedPermissions:e,linkedURLs:i.linkedURLs}},Qe=e=>{ge?(we(e),Oe(!0)):be(e)},et=()=>{Oe(!1),Ne(!1),We([])},tt=()=>{be(Ie),Se(!1),et()},it=e=>{e?.preventDefault(),ge?(we(Ie),Ne(!0)):tt()},at=()=>{ee(i.id,Ce),Me(!0),(0,N.Bq)(i,Ce),tt()},nt=e=>!e.initiallyExisting&&!e.hasBeenDeleted,st=e=>e.initiallyExisting&&!e.hasBeenDeleted,lt=()=>{e?.state?.entity?(0,B.d)({routes:Y,location:e}):n()},rt=()=>{if(ye)return we(Ie),void Oe(!0);be(Ie)},ot=Be||s,dt=oe&&$e().limitedPermissions;return(0,M.BX)(A.zI,{isUsingNewDesign:!0,isViewingExistingItem:!0,itemHasBeenEdited:ge,isSomeDialogOpen:ze||qe.length>0||Ve||He||Be,onSubmit:async()=>{if(he===Ae)return void(async()=>{const e=await(0,N.wb)(i,Ce);We(e),he!==Ae||e.length||at()})();if(!ce.current?.isFormValid())return;const e=ce.current?.getVaultItemCollections();if(!ge||e){var t;Ge(!0),a&&ue.requireMasterPassword&&ue.requireMasterPassword!==a.requireMasterPassword&&(0,q.ih)(ue.requireMasterPassword,i.id,i.URL,null!=(t=ue.spaceId)?t:void 0);try{const{onlyAutofillExactDomain:t,useAutoLogin:n,requireMasterPassword:s,...l}=ue,r=t!==a.onlyAutofillExactDomain||n!==a.useAutoLogin||s!==a.requireMasterPassword,d=[];Ke&&d.push(te({vaultItemType:o.U.Credential,content:l,id:i.id,shouldSkipSync:!!r})),r&&d.push(le({credentialId:i.id,credentialUrl:i.URL,onlyAutofillExactDomain:t,useAutoLogin:n,requireMasterPassword:s,shouldSkipSync:e?.some((e=>e.isShared&&!st(e)))})),e&&d.push((async(e,t,i)=>{const a=[],n=[];for(const l of t){var s;st(l)||(l.isShared?nt(l)?a.push({collectionId:l.id,permission:de?null!=(s=l.itemPermission)?s:c.y3.Limited:c.y3.Admin}):n.push(l.id):(l.vaultItems=[{id:e,type:w.dJ.KWAuthentifiant,url:i}],l.id?await ae({id:l.id,collection:l,operationType:l.hasBeenDeleted?C.C.SUBSTRACT_VAULT_ITEMS:C.C.APPEND_VAULT_ITEMS}):await ie({content:l})))}a.length&&await ne({collectionPermissions:a,itemId:e,shouldSkipSync:n.length>0}),n.length&&await se({collectionIds:n,itemId:e})})(i.id,e,i.URL)),await Promise.all(d)}catch(e){return Q.showAlert(H("_common_generic_error"),y.BLW.ERROR),void n()}Q.showAlert(H("_common_toast_changes_saved"),y.BLW.SUCCESS),n()}},secondaryActions:he===Ae?[]:[(0,M.tZ)($,{credentialId:i.id},"pwhist"),(0,M.tZ)(P._,{id:i.id,isShared:m,isAdmin:h,isDiscontinuedUser:re,getSharing:T.Ei},"shareaction")],onNavigateOut:(e,t)=>{he!==Ae?he!==Ee?lt():rt():it(t)},onClickDelete:()=>Re(!0),withoutDeleteButton:he===Ae,withoutConfirmationDialog:he===Ae,withoutCloseButton:he===Ee,ignoreCloseOnEscape:ot,formId:"edit_credential_panel",submitPending:Fe,header:(0,M.tZ)(xe,{activeTab:he,credential:i,displayTabs:m,changeTab:Qe}),children:[m&&he===De?(0,M.tZ)(R.u,{isAdmin:h,id:i.id}):null,he===Ie?(0,M.BX)("div",{sx:{flex:1,flexDirection:"column",position:"relative"},children:[dt?Le||(Le=(0,M.tZ)(Ze,{})):(0,M.tZ)(pe,{credentialId:i.id,isShared:m,hasLimitedPermission:!h}),(0,M.tZ)("div",{sx:{overflowY:"initial",overflowX:"visible"},children:(0,M.tZ)(W.S,{ref:ce,activeSpaces:t,editableValues:ue,setEditableValues:me,readonlyValues:$e(),signalEditedValues:e=>{Se(e)},dashlaneDefinedLinkedWebsites:l,areProtectedItemsUnlocked:d,openProtectedItemsUnlocker:u,protectedItemsUnlockerShown:s,onClickAddNewWebsite:()=>(Te(!0),void Qe(Ae)),onClickSetup2FAToken:()=>{Qe(Ee)},setHasOpenedDialogs:je})})]}):null,he===Ae?(0,M.tZ)(F,{credential:i,dashlaneDefinedLinkedWebsites:l,onClose:it,openWithNewUrlField:Pe,onUpdateLinkedWebsitesAddedByUser:Ue,hasLimitedRights:m&&!h}):null,he===Ee?(0,M.tZ)(ve,{credentialId:i.id,title:i.itemName,url:i.URL,onClose:rt,onSubmit:()=>{fe(!1),be(Ie)},setHasDataBeenModified:fe}):null,(0,M.tZ)(E.s,{isVisible:Be,itemId:i.id,closeConfirmDeleteDialog:()=>Re(!1),goToSharingAccess:()=>{Qe(De)},onDeletionSuccess:lt,isShared:m,isSharedViaUserGroup:V,translations:Ye,vaultItemType:o.U.Credential,isLastAdmin:X,isItemInCollection:O}),ze?(0,M.tZ)(j,{onCancel:()=>Ne(!1),onLeavePageWithoutSaving:tt}):null,qe.length>0?(0,M.tZ)(K,{duplicateData:qe,onCancel:()=>We([]),onSave:at}):null,Ve?(0,M.tZ)(U.a,{onDismissClick:()=>Oe(!1),onConfirmClick:()=>{be(ke),Se(!1),fe(!1),et()}}):null,Xe?(0,M.tZ)(G,{onClose:()=>Me(!1),setDisplayLinkedWebsitesDataSavedAlert:Me}):null]})},Pe=e=>{const{credential:t}=e,i=(0,u.E)(),a=(0,h.tY)(),r=(0,m.B)([t.id]),o=(0,n.k)(p.G,"getDashlaneDefinedLinkedWebsites",{url:t.URL}),b=(0,n.k)(_.I,"getPreferencesForCredentials",{credentialIds:[t.id]}),{getPermissionForItem:k,getSharingStatusForItem:w,getIsLastAdminForItem:x}=(0,s.Y)(d.X,{getPermissionForItem:{queryParam:{itemId:t.id}},getSharingStatusForItem:{queryParam:{itemId:t.id}},getIsLastAdminForItem:{queryParam:{itemId:t.id}}},[]);if(b.status!==l.rq.Success||o.status!==l.rq.Success||k.status!==l.rq.Success||w.status!==l.rq.Success||i.status!==l.rq.Success||x.status!==l.rq.Success)return null;const{isShared:g,isSharedViaUserGroup:S}=w.data,{isLastAdmin:y}=x.data,f=!!r.length;return(0,M.tZ)(Ue,{...e,...a,activeSpaces:i.data,dashlaneDefinedLinkedWebsites:o.data,credentialPreferences:b.data[0],isShared:g,isAdmin:g&&k.data.permission===c.y3.Admin,isSharedViaUserGroup:S,isItemInCollection:f,isLastAdmin:y})},Te=e=>{const{data:t,status:i}=(0,n.k)(r.L,"query",{vaultItemTypes:[o.U.Credential],ids:[`{${e.match.params.uuid}}`]});return i===l.rq.Loading?null:t?.credentialsResult.items.length?(0,M.tZ)(Pe,{...e,credential:t.credentialsResult.items[0]}):(e.onClose(),null)}}}]);