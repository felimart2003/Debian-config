import{E as Q,a as K}from"./chunk-3HBOA5LN.js";import{c as v}from"./chunk-3GYLW4KZ.js";var O=v(w=>{"use strict";Object.defineProperty(w,"__esModule",{value:!0});w.getSiteData=void 0;function X(o){var n,t,a,r,e={Magento:{applySelectors:"#discount-coupon-form button:contains(Apply), .button.applyCoupon",inputSelectors:"#coupon_code, .discount-form input.input-box",checkoutIdentifier:"\\/checkout",confirmationIdentifiers:"\\/checkout/onepage/success/"},WooCommerce:{applySelectors:'[value="Apply coupon"], [value="Apply Promocode"], [value="Apply"], button.coupon-submit-button, [name="apply_coupon"], #swell_coupon_submit, [id*=coupon_submit]',inputSelectors:'#coupon_code, #coupontext, .checkout_promo_code_input, [placeholder="Coupon Code"], [name="coupon_code"]',checkoutIdentifier:"\\/checkout",confirmationIdentifiers:"/order-received"},Squarespace:{applySelectors:'[data-test="apply-gift-or-promo-code-button"]',inputSelectors:'[data-test="gift-and-promo-code-input"]',checkoutIdentifier:"\\/checkout",confirmationIdentifiers:"\\/order-confirmed"},BigCommerce:{applySelectors:"#couponSubmit, .coupon-code .button, #applyRedeemableButton, .cart-form .btn",inputSelectors:"#couponCode, #couponcode, [name=redeemableCode]",checkoutIdentifier:"\\/checkout",confirmationIdentifiers:"\\/checkout\\/order-confirmation"}},u={checkoutPage:y(((n=e?.[o])===null||n===void 0?void 0:n.checkoutIdentifier)||""),confirmationPage:{identifiers:{and:[{type:"url",value:((t=e?.[o])===null||t===void 0?void 0:t.confirmationIdentifiers)||""}]},data:{}},roo:{script:{promoApplyAction:((a=e?.[o])===null||a===void 0?void 0:a.applySelectors)||"",promoInputSelector:((r=e?.[o])===null||r===void 0?void 0:r.inputSelectors)||"",cartTotalSelector:""}}};return u}function y(o){return{identifiers:{or:[{type:"url",value:o}]}}}function _(o){return o===void 0&&(o="\\/confirmation"),{identifiers:{or:[{type:"url",value:o}]}}}function Y(o,n){var t,a={Shopify:{checkoutPage:{data:{coupons:[{parsers:[],selector:".applied-reduction-code__information",type:"text"},{parsers:[{type:"regex",regex:`([^ 
]+)`}],selector:".tags-list .tag",type:"text"},{parsers:[],selector:'ul[aria-label="Gift card or discount code"], ul[aria-label="Discount code or gift card"]',type:"text"}],order_total:[{parsers:[{type:"price"}],selector:".payment-due__price",type:"text"}]},identifiers:{and:[{type:"element",value:"#checkout_reduction_code, #checkout_discount_code, input[name=reductions], #discount_code"},{type:"element",value:".order-summary__section--discount, #discount.order-summary__section, form input[name=reductions], .order_summary"},{type:"element",value:".payment-due__price, abbr ~ strong, #totalLabel"}]},triggers:[{selector:".applied-reduction-code__information, .tags-list .tag",trigger:"exists",action:"run_data",repeat:"uniq"}]},confirmationPage:{identifiers:{and:[{type:"url",value:"\\.[a-z]{2,9}\\/\\d{4,11}\\/checkouts\\/[0-9a-f]{32}\\/thank_you"}]},data:{},triggers:[{trigger:"url",action:"run_all",delay:"100"}]}},FastSpring:{checkoutPage:y("\\/order\\/"),confirmationPage:_("\\/confirmation\\/")},FoxyCart:{checkoutPage:y("\\/checkout"),confirmationPage:_()},PoweredByGps:{checkoutPage:y("\\/Checkout\\/"),confirmationPage:{identifiers:{or:[{type:"url",value:"\\/itinerary-receipt"},{type:"url",value:"\\/Confirmation-Flight"},{type:"url",value:"HotelBookingConfirmation"},{type:"url",value:"\\/MultiItemBookingConfirmation"},{type:"url",value:"\\/ConfirmationSuccess"},{type:"url",value:"\\/FlightBookingConfirmation"}]}}},Stripe:{checkoutPage:y("\\/c\\pay\\/"),confirmationPage:_()},Teachable:{checkoutPage:y("\\/checkout\\/"),confirmationPage:_()},Chargify:{checkoutPage:y("\\/subscribe\\/"),confirmationPage:_()}},r=new Set(["Magento","WooCommerce","BigCommerce","Squarespace"]);if(r.has(o)){var e=X(o);a[o]=e}return(t=a?.[o])===null||t===void 0?void 0:t[n]}w.getSiteData=Y});var F=v(p=>{"use strict";var T=p&&p.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(p,"__esModule",{value:!0});p.getSeparateCheckoutDomain=p.getShopifyDomain=void 0;var i=T(K()),P=T(Q());function Z(o){var n,t=o.domain,a=o.getWindowVariable,r=document.URL,e=r.match(/shopify\.com\/\d+/);if(e&&!r.match(/myshopify\.com|pay\.shopify\.com/))return e[0];var u=window.location.hostname.match(/pay\.shopify\.com/)||window.location.hostname.match(/^shop\.app$/);if(u){if(document.querySelector("[name=configuration]")){var d=JSON.parse(document.querySelector("[name=configuration]").getAttribute("content"));return d.primary_domain}else if(document.querySelector('[aria-label="Cart"], #cart-link')){var s=document.querySelector('[aria-label="Cart"], #cart-link').getAttribute("href"),c=i.default.get(s.match(/\b[\w-]+\.com/),"[0]")||i.default.get(P.default.parse(s),"hostname");return c}else if(document.querySelector('[name="serialized-post-purchase-changesets-endpoint"], [name="serialized-login-url"]')){var l=document.querySelector('[name="serialized-post-purchase-changesets-endpoint"], [name="serialized-login-url"]').getAttribute("content"),h=i.default.get(l.match(/\b[\w-]+\.(com|ca)\b/),"[0]");return h}var g=JSON.parse(document.querySelector('[name="serialized-shop-pay-config"]').getAttribute("content")),S=i.default.get(g,"web_url"),C=i.default.get(S.match(/\b[\w-]+\.com/),"[0]")||i.default.get(P.default.parse(S),"hostname");return C}if(document.querySelector("#checkout_reduction_code")&&document.querySelector(".payment-due__price")&&document.querySelector(".order-summary__section--discount")&&!r.match(/myshopify\.com/)||document.querySelector('[name="reductions"]')&&document.querySelector("abbr ~ strong")&&r.match(/\/checkouts\/(c|co|cn|do)\/\w+/)&&!r.match(/myshopify\.com/))return t;var x=r.match(/\/a\/secure\/checkout\//);if(x)return t;var E=r.match(/\/apps\/secure-checkout\/\w+/);if(E)return t;var J=!!(r.match(/r\/checkout\?myshopify|myshopify\.com/)||document.querySelector(".recharge_checkout_option, #recharge_payment_method_nonce"));if(J)if(t==="rechargeapps.com"){if(r.match(/r\/checkout/)){var D=Array.from(document.querySelectorAll("a")).reduce(function(q,L){return L.textContent.match(/Return to cart/i)&&(q=L.href),q},"");return P.default.getDomain(D)}var b=document.querySelector(".footer__copyright a");if(b){var D=b?.href;return P.default.getDomain(D)}}else if(t.match(/myshopify\.com/)){var M=void 0,k=document.querySelector(".breadcrumb__item a, .breadcrumb__link");if(k)M=i.default.get(k?.href.match(/https*:\/\/(.+)\//),"[1]");else{var N=a("Shopify.Checkout.allowlistedUrls"),A=i.default.find(N,function(q){return!q.match(/shopify\.com/)});A&&(M=i.default.get(A.match(/https*:\/\/(.+)\/*/),"[1]"))}return M||t}else return t;var V=!!document.querySelector(".shopemoji")&&r.match(/\/checkouts\/\w+/);if(V)return t;var $=r.match(/shipearlyapp\.com/);if($)return i.default.get((n=document.querySelector(".heading-color"))===null||n===void 0?void 0:n.href.match(/\b[\w-]+\.(com|ca)\b/),"[0]");var B=r.match(/chronotrack\.com\/r\/\d+/);if(B)return B[0];var R=document.querySelector("script.analytics");if(R){var j=R.innerHTML.match(/:\{"shopId":(\d+)\}/);if(j)return"shopify.com/".concat(j[1])}}p.getShopifyDomain=Z;function ee(o){var n,t,a,r,e,u;try{var d=document.URL,s=void 0,c=void 0;if(d.match(/\.fastspring\.com/)){s="FastSpring";var l=(n=document.querySelector(".store-order-action-more .store-action-command"))===null||n===void 0?void 0:n.href;c=i.default.get(l.match(/\w+\.(com|ca)/),"[0]",o)}else if(d.match(/\.foxycart\.com/)){s="FoxyCart";var h=(t=document.querySelector(".fc-cancel-continue-shopping a"))===null||t===void 0?void 0:t.href;c=i.default.get(h.match(/\w+\.(com|ca)/),"[0]",o)}else if(d.match(/poweredbygps\.com\/Checkout/)){s="PoweredByGps";var g=(a=document.querySelector(".logo-div a.header-logo"))===null||a===void 0?void 0:a.href;c=i.default.get(g.match(/\w+\.(com|ca)/),"[0]",o)}else if(d.match(/checkout\.stripe\.com|billing\.stripe\.com/)){s="Stripe";var S=(r=document.querySelector('.Header-businessLink, [data-testid="return-to-business-link"]'))===null||r===void 0?void 0:r.href;c=i.default.get(S.match(/\w+\.(com|ca)/),"[0]",o)}else if(d.match(/sso\.teachable\.com/)){s="Teachable";var g=(e=document.querySelector(".header-logo"))===null||e===void 0?void 0:e.href;c=i.default.get(g.match(/\w+\.(com|ca)/),"[0]",o)}else if(d.match(/chargifypay\.com/)){s="Chargify";var C=(u=document.querySelector(".header__logo a, .disclaimer a"))===null||u===void 0?void 0:u.href;c=i.default.get(C.match(/\w+\.(com|ca)/),"[0]",o)}return{separatePlatform:s,separatePlatformDomain:c}}catch{return{separatePlatform:void 0,separatePlatformDomain:void 0}}}p.getSeparateCheckoutDomain=ee});var z=v(I=>{"use strict";Object.defineProperty(I,"__esModule",{value:!0});function te(o){return new Promise(function(n){setTimeout(n,o)})}I.default=te});var H=v(f=>{"use strict";var oe=f&&f.__awaiter||function(o,n,t,a){function r(e){return e instanceof t?e:new t(function(u){u(e)})}return new(t||(t=Promise))(function(e,u){function d(l){try{c(a.next(l))}catch(h){u(h)}}function s(l){try{c(a.throw(l))}catch(h){u(h)}}function c(l){l.done?e(l.value):r(l.value).then(d,s)}c((a=a.apply(o,n||[])).next())})},re=f&&f.__generator||function(o,n){var t={label:0,sent:function(){if(e[0]&1)throw e[1];return e[1]},trys:[],ops:[]},a,r,e,u;return u={next:d(0),throw:d(1),return:d(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(c){return function(l){return s([c,l])}}function s(c){if(a)throw new TypeError("Generator is already executing.");for(;u&&(u=0,c[0]&&(t=0)),t;)try{if(a=1,r&&(e=c[0]&2?r.return:c[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,c[1])).done)return e;switch(r=0,e&&(c=[c[0]&2,e.value]),c[0]){case 0:case 1:e=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,r=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(e=t.trys,!(e=e.length>0&&e[e.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!e||c[1]>e[0]&&c[1]<e[3])){t.label=c[1];break}if(c[0]===6&&t.label<e[1]){t.label=e[1],e=c;break}if(e&&t.label<e[2]){t.label=e[2],t.ops.push(c);break}e[2]&&t.ops.pop(),t.trys.pop();continue}c=n.call(o,t)}catch(l){c=[6,l],r=0}finally{a=e=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ce=f&&f.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(f,"__esModule",{value:!0});f.getPlatform=void 0;var U=ce(z());function ae(o){var n=o.hasFeature;return oe(this,void 0,void 0,function(){var t,r,a,r;return re(this,function(e){switch(e.label){case 0:if(n("woo_coup_on")&&(document.URL.includes("/checkout")||document.URL.includes("/cart")||document.URL.includes("/shopping-cart"))&&document.querySelector("[class*=woocommerce]")&&(document.querySelector("#coupon_code, #cfw-promo-code")||document.querySelector("[class*=promo_code], .woocommerce-form-coupon input")))return[2,"WooCommerce"];if(n("square_coup_on")&&document.querySelector("[id*=sqs]")&&document.URL.includes("/checkout")&&document.querySelector("#sqs-standard-checkout"))return[2,"Squarespace"];if(!(n("mag_coup_on")&&(document.URL.includes("/checkout")||document.URL.includes("onestepcheckout")||document.querySelector(".sliding-cart-modal")&&document.querySelector("#product-addtocart-button"))))return[3,4];if(!(document.querySelector("#discount-coupon-form")||document.querySelector(".checkout-onepage-index")||document.documentElement.outerHTML.match(/magento/i)))return[3,4];if(t=document.querySelector("#coupon_code, .checkout-container, .discount-form .input-box, .sliding-cart-discount, #discount-code, #coupon_code_onestepcheckout, #remove-coupon"),!(n("magento_delay_test")&&document.URL.includes("/cart")))return[3,3];r=0,e.label=1;case 1:return!t&&r<30?[4,(0,U.default)(100)]:[3,3];case 2:return e.sent(),r+=1,t=document.querySelector("#coupon_code, .checkout-container, .discount-form .input-box, .sliding-cart-discount, #discount-code, #coupon_code_onestepcheckout, #remove-coupon"),[3,1];case 3:if(t||document.querySelector(".action.primary.checkout"))return[2,"Magento"];e.label=4;case 4:if(!(n("big_coup_on")&&(document.URL.includes("/checkout")||document.URL.includes("/cart"))))return[3,8];if(!document.documentElement.outerHTML.match(/bigcommerce/i))return[3,8];if(a=document.querySelector('#couponcode, .redeemable-label, #applyRedeemableButton, .coupon-code-add, .cart-total-label a, [data-test=cart-price-code], [data-tid=discount-code-link], [data-test="redeemable-label"], .coupons .mat-input-element'),!(n("big_commerce_delay_test")&&document.URL.includes("/checkout")))return[3,7];r=0,e.label=5;case 5:return!a&&r<30?[4,(0,U.default)(100)]:[3,7];case 6:return e.sent(),r+=1,a=document.querySelector('#couponcode, .redeemable-label, #applyRedeemableButton, .coupon-code-add, .cart-total-label a, [data-test=cart-price-code], [data-tid=discount-code-link], [data-test="redeemable-label"], .coupons .mat-input-element'),[3,5];case 7:return[2,a&&"BigCommerce"];case 8:return[2]}})})}f.getPlatform=ae});var ue=v(m=>{"use strict";Object.defineProperty(m,"__esModule",{value:!0});m.getPlatform=m.getSeparateCheckoutDomain=m.getShopifyDomain=m.getSiteData=void 0;var W=O();Object.defineProperty(m,"getSiteData",{enumerable:!0,get:function(){return W.getSiteData}});var G=F();Object.defineProperty(m,"getShopifyDomain",{enumerable:!0,get:function(){return G.getShopifyDomain}});Object.defineProperty(m,"getSeparateCheckoutDomain",{enumerable:!0,get:function(){return G.getSeparateCheckoutDomain}});var ne=H();Object.defineProperty(m,"getPlatform",{enumerable:!0,get:function(){return ne.getPlatform}});m.default=W.getSiteData});export{ue as a};
