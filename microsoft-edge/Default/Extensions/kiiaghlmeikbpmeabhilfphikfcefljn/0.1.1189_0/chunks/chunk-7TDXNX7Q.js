import{a as y,b as A}from"./chunk-LWZ5KU7R.js";import{a as R}from"./chunk-SBTRYJIA.js";import{a as _}from"./chunk-RQD6OPCK.js";import{F as v,X as C,j as u,l as h,n as g,o as b,p as w}from"./chunk-XRJW3LFT.js";import{a as D}from"./chunk-MV4HDL2S.js";import{a as k}from"./chunk-2MCFUH3Z.js";import{a as S}from"./chunk-5Q7VJYCY.js";import{c as e,e as l,l as d,m as p}from"./chunk-JJTF2C25.js";import{a as P,c as U}from"./chunk-3HBOA5LN.js";import{e as f}from"./chunk-3GYLW4KZ.js";var c=f(P());var L=f(U());window.__wb_timing.cashbackRequireAt=performance.now();var i;function x(){return L.default.all([D(),k(),v(),R(),y()]).spread((t,r,o,s,a)=>{_(t),e.merge({siteAPIData:r}),e.merge({cashback:o}),e.set("lifetimeSavings",s),e.set("sameTabSuppressedDomains",a)})}var n=!1;async function I(t=!1){n=t,await x();let r=e.get("siteAPIData"),o=c.default.get(r,"tld"),s=["macys.com","jcpenney.com","kohls.com","walgreens.com","groupon.com","loft.com","fanatics.com","samsung.com","ulta.com","overstock.com","wish.com"];if(p("ext_inc_v_2")&&s.includes(o))return c.default.noop;d(o);let a=e.get("cashback");if(e.set("cashbackVisible",!1),(b()||w())&&!e.get("hasActivatedCompetitor"))return!1;l({active:!!a,cashback:a});let m=await u("affiliateRedirect");if(m){let N=JSON.parse(m);if(e.set("affiliateRedirect",N),await h("affiliateRedirect"),g()){let M=window.location.href,O=e.get("pageViewId");A({resolvedUrl:M,domain:o,pageViewId:O})}}let V=e.get(["deweyResult"]);T(V),B()}async function B(){S.emitter.on("result",t=>{T(t)})}async function T(t){e.get("cashbackVisible")||!t||i||E(t)}function E(t){i&&!n||(i=!0,C(t,{devRewardTest:n}).then(()=>{i=e.get("cashbackVisible")}))}document.readyState!=="loading"?I():document.addEventListener("DOMContentLoaded",I);export{I as a};
