import{a as F}from"./chunk-YZTZIJSB.js";import{a as L}from"./chunk-65VGUSSD.js";import{a as me}from"./chunk-D2CCZ3BJ.js";import{a as c,c as s,k as P,l as W,m as h,o as B}from"./chunk-R5NGUZ66.js";import{m as M,s as _,t as H}from"./chunk-JJTF2C25.js";import{e as t}from"./chunk-3GYLW4KZ.js";var yo=t(c());var go=t(c()),g=t(c());var ao=t(c());var Le=t(c()),T=t(c());var E=t(c()),k=t(me());var f=t(s()),de=({isVisible:e=!0,setIsVisible:o,showLogo:r=!1,rightOffset:i="large",leftOffset:a,isDraggable:m=!1,dragSelector:p,onDragEnd:C,onDismiss:n,HeaderComponent:d,headerClassName:l="",children:y,translateX:ee="0",width:oe=240,rounded:re=!0,top:te="large"})=>{let[ne,ie]=(0,E.useState)(!1);return(0,f.jsx)(k.Motion,{style:{opacity:M("ext_notif_appear_no_transition")?(0,k.spring)(e?1:0,{stiffness:400,damping:25}):(0,k.spring)(e?1:0,{stiffness:180,damping:20}),y:M("ext_notif_appear_no_transition")?e?0:-100:(0,k.spring)(e?0:-100,{stiffness:180,damping:20})},onRest:()=>{ie(!0)},children:({opacity:ae,y:se})=>(0,f.jsxs)(F,{isDraggable:m,animationCompleted:ne,dragSelector:p,onDragEnd:C,element:h,position:"fixed",zIndex:2147483647,top:te,left:a,right:i,width:oe,backgroundColor:"white",borderColor:"borderNeutralEmphasisLow",borderWidth:"thinnest",borderStyle:"solid",paddingTop:"tiny",paddingBottom:"large",rounded:re,style:{transform:`translate3d(${ee},${se}%,0)`,opacity:ae},children:[(0,f.jsx)(h,{display:"flex",justifyContent:"space-between",alignItems:"center",paddingLeft:"small",className:l,children:d||(0,f.jsxs)(E.default.Fragment,{children:[r&&(0,f.jsx)(P,{name:"c1_shop_primary_light",width:"logoWidth",height:"logoHeight",marginRight:"medium"}),(0,f.jsx)(h,{row:!0,children:n&&(0,f.jsx)(L,{height:20,onClick:()=>{n&&n(),o&&o(!1)}})})]})}),y]})})},D=de;var ce=(e,o)=>{H(e,o)},pe=(e,o)=>{_(e,o)},le={track:ce,pageView:pe},v=({eventType:e,eventName:o,data:r})=>{le[e](o,r)};var U=e=>{chrome.storage.local.set(e)};var V=t(s()),fe={componentName:"notification",Render({component:e}){let[o,r]=(0,T.useState)(!0),i=u(),{name:a,metrics:m,onLoad:p,...C}=e,n=()=>{if(p)for(let y of p)y.eventType==="storage"&&U(y.data);m&&m.onLoad&&v(m.onLoad)};(0,T.useEffect)(()=>{n()},[]),i.registerEvent({componentName:a,eventType:"dismiss",handler:()=>{r(!o)}});let d=y=>{m.onDismiss&&v(m.onDismiss)},l=R();return(0,V.jsx)(D,{showLogo:!0,onDismiss:d,isVisible:o,setIsVisible:r,...C,children:e.children&&e.children.map(l)})}},I=fe;var $e=t(c());var N=({url:e})=>{window.open(e)};var A=t(s()),$={openWindow:N},ve={componentName:"button",Render({component:e}){let o=u(),{text:r,onClick:i,metrics:a,...m}=e;return(0,A.jsx)(W,{onClick:C=>{for(let n of i){if(typeof $[n.eventType]<"u"){let l=$[n.eventType];l(n.data)}let d=o.getEventHandler(n.componentName,n.eventType);d&&d.handler(n.data)}a.onClick&&v(a.onClick)},...m,children:r})}},z=ve;var Je=t(c());var q=t(s()),O={openWindow:N},ue={componentName:"link",Render({component:e}){let o=u(),{value:r,onClick:i,metrics:a,...m}=e;return(0,q.jsx)("a",{onClick:C=>{for(let n of i){if(typeof O[n.eventType]<"u"){let l=O[n.eventType];l(n.data)}let d=o.getEventHandler(n.componentName,n.eventType);d&&d.handler(n.data)}a&&a.onClick&&v(a.onClick)},...m,children:r})}},X=ue;var eo=t(c());var K=t(s()),G={openWindow:N},ge={componentName:"img",Render({component:e}){let o=u(),{name:r,metrics:i,onClick:a=[],...m}=e;return(0,K.jsx)("img",{onClick:C=>{for(let n of a){if(typeof G[n.eventType]<"u"){let l=G[n.eventType];l(n.data)}let d=o.getEventHandler(n.componentName,n.eventType);d&&d.handler(n.data)}i&&i.onClick&&v(i.onClick)},alt:r,...m})}},J=ge;var b=t(s()),Ce={componentName:"container",Render({component:e}){let o=R(),{children:r,...i}=e;return(0,b.jsx)(h,{...i,children:r.map(o)})}},he={componentName:"text",Render({component:e}){let{value:o,...r}=e;return(0,b.jsx)(B,{...r,children:o})}},ke={renderNotification:I,renderContainer:Ce,renderText:he,imgRenderer:J,renderButton:z,linkRenderer:X},Q=ke;var Z=t(s()),S=(0,g.createContext)(void 0),Re={eventHandlers:[],registerEvent(e){this.eventHandlers.push(e)},getEventHandler(e,o){return this.eventHandlers.find(r=>r.eventType===o&&r.componentName===e)}},Y=({children:e})=>{let o=Object.values(Q).reduce((a,{componentName:m,Render:p})=>(a[m]=p,a),{}),i={eventMediator:(0,g.useRef)(Re).current,componentRenderers:o};return(0,Z.jsx)(S.Provider,{value:i,children:e})},u=()=>{let{eventMediator:e}=(0,g.useContext)(S);return e},R=()=>{let{componentRenderers:e}=(0,g.useContext)(S);return r=>{let{componentName:i,...a}=r;return e[i]({component:a})}};var j=t(c());var x=class extends j.Component{constructor(o){super(o)}componentDidCatch(o,r){H(this.props.eventName||"error",{name:this.props.errorName||"serverDrivenUiError",error:o.toString(),label:r.componentStack})}render(){return this.props.children}};var w=t(s()),Ne=({content:e})=>R()(e),To=({content:e})=>{let{ui:o,errorHandler:r}=e,i=r?r.eventName:"error",a=r?r.errorName:"serverDrivenUiError";return(0,w.jsx)(x,{eventName:i,errorName:a,children:(0,w.jsx)(Y,{children:(0,w.jsx)(Ne,{content:o})})})};export{To as a};
