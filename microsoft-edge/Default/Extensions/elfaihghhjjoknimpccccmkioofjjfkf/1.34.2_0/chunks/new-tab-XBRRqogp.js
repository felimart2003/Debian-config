import{f as k,o as n,g as d,l as f,i as o,h as E,K as q,L as j,M as H,c as v,r as T,k as c,j as e,S as B,w,F as D,N as W,O as z,P as S,Q as b,R as G,T as K,U as Z,V as Q,W as Y,X as J,Y as V,s as A,v as X,n as P,$ as ee,a0 as te,D as C,a1 as se,q as N,a2 as oe,_ as ae,A as ne,B as ie,I as $,C as re,Z as le,J as ce,H as de}from"./defineAppConfig-GTQ5Bvuh.js";import{_ as U,c as ue,d as pe,e as me,R as he}from"./useAddAppToIgnoreListDialogStore-Ki2J31d-.js";import{b as ge,_ as fe,r as _e,c as be}from"./recent-apps-provider-OWite7eM.js";import{u as ve}from"./useFocusModeStore-bWj63oGD.js";import{u as ye}from"./useGetSessionSummaries--e-QKgL-.js";import{I as we}from"./open-in-new-WGMeGzGm.js";import"./new-tab-light-6CDZBy0y.js";import"./schedules-jPLYWtFX.js";const Se={class:"flex-1 bg-base-100 relative"},ke={key:0,class:"fixed inset-0 z-10 pointer-events-none"},xe={class:"limit-content-width"},$e={class:"pointer-events-auto"},Ie={class:"relative h-full"},Ce={class:"limit-content-width flex flex-col pb-28"},Ee=k({name:"FullPageContentContainer",__name:"FullPageContentContainer",setup(a){return(t,s)=>(n(),d("div",Se,[f(" Overlay container over the content (it's width is also limitted, but it doesn't scroll) "),t.$slots.overlay?(n(),d("div",ke,[o("div",xe,[o("div",$e,[E(t.$slots,"overlay")])])])):f("v-if",!0),o("div",Ie,[o("div",Ce,[E(t.$slots,"default")])])]))}}),Te={class:"root"},Be=k({name:"FullPageLayout",__name:"FullPageLayout",setup(a){return(t,s)=>(n(),d("div",Te,[E(t.$slots,"content")]))}}),Ae="google",I={duck:{id:"duck",name:"DuckDuckGo",appId:"duckduckgo.com",searchUrl:"https://duckduckgo.com/?q={term}"},google:{id:"google",name:"Google",appId:"google.com",searchUrl:"https://www.google.com/search?q={term}"},bing:{id:"bing",name:"Bing",appId:"bing.com",searchUrl:"https://www.bing.com/search?q={term}"},ecosia:{id:"ecosia",name:"Ecosia",appId:"ecosia.org",searchUrl:"https://www.ecosia.org/search?q={term}"},yahoo:{id:"yahoo",name:"Yahoo",appId:"yahoo.com",searchUrl:"https://search.yahoo.com/search?p={term}"}},Ue={class:"relative shrink-0"},De={class:"absolute left-0 -bottom-2"},Le={class:"w-max py-1"},Me=["onClick"],Pe=o("div",{class:"w-0 h-0 absolute top-[-8px] left-[30px] border-x-8 border-b-8 border-x-transparent border-b-primary"},null,-1),Ne=k({name:"SearchEngineDialog",__name:"SearchEngineDialog",props:{searchEngineId:{required:!0}},emits:["update:searchEngineId"],setup(a){const t=q(a,"searchEngineId"),{baseDialogProps:s,show:p,dismiss:u}=j(),g=H("@stayfree/components/search-engine-dialog/defaults",{tooltipSeen:!1}),i=v(()=>I[t.value]);function y(l){I[l]&&(t.value=l,u())}const _=T();function r(){var l;(l=_.value)==null||l.classList.add("opacity-0"),setTimeout(()=>{g.value.tooltipSeen=!0},501)}return(l,m)=>(n(),d("div",Ue,[f(" Selected Search Engine Icon "),c(U,{class:"icon-lg rounded-full cursor-pointer",src:e(i),platform:e(B).Web,onClick:m[0]||(m[0]=()=>{e(p)(),r()})},null,8,["src","platform"]),f(" This div positions the in-place-dialog "),o("div",De,[c(ue,z({"align-horizontal":"left"},e(s)),{default:w(()=>[o("ul",Le,[(n(!0),d(D,null,W(e(I),h=>(n(),d("li",{class:"flex items-center py-1 pl-3 pr-6 cursor-pointer",key:h.id,onClick:x=>y(h.id)},[c(U,{class:"icon mr-2 rounded-full",src:h,platform:e(B).Web},null,8,["src","platform"]),o("span",null,b(h.name),1)],8,Me))),128))])]),_:1},16),e(g).tooltipSeen?f("v-if",!0):(n(),d("div",{key:0,ref_key:"tooltip",ref:_,class:"absolute top-[17px] left-[-22px] flex items-center gap-1 py-1 px-3 rounded-full bg-primary text-primary-content text-sm whitespace-nowrap cursor-pointer transition-opacity duration-500",onClick:r},[f(" TODO "),Pe,S(" "+b(l.$t("newtab.searchEngineTooltip"))+" ",1),c(e(pe),{class:"inline"})],512))])]))}});function He(){const{state:a}=me(),t=v(()=>({appIds:a.value??[],metricType:G.UsageTime})),{data:s}=ge(t),p=ve(),u=K(),g=v(()=>({startDate:u,endDate:u+Z})),{data:i,isLoading:y}=ye(Q.UsageTime,g);return{suggestedWebsites:v(()=>{const r=Y(s.value??[],"appId"),l=new Set(p.websites),m=J(i.value??[],"appId");return a.value.map(h=>{var L,M;const x=((L=m[h])==null?void 0:L.primaryMetricValue)??0,F=!!((M=r[h])!=null&&M.find(R=>R.currentDuration<=x)),O=p.isEnabled&&l.has(h);return{hostname:h,isBlockedByUsageLimit:F,isBlockedByFocusMode:O}})}),isLoading:y}}const We={class:"flex justify-center flex-wrap gap-2 my-10 mx-8"},Ve=["href","title"],Fe=k({name:"SuggestedWebsiteList",__name:"SuggestedWebsiteList",setup(a){const{t}=V(),{suggestedWebsites:s}=He();function p({hostname:u,isBlockedByUsageLimit:g,isBlockedByFocusMode:i}){return g?t("suggestedWebsiteList.blockedByLimit",{hostname:u}):i?t("suggestedWebsiteList.blockedByFocusMode",{hostname:u}):u}return(u,g)=>(n(),d("div",We,[(n(!0),d(D,null,W(e(s),i=>(n(),d("a",{class:A(["p-2 rounded-full bg-base-content bg-opacity-10",{"saturate-0 opacity-50":i.isBlockedByUsageLimit||i.isBlockedByFocusMode}]),key:i.hostname,href:`https://${i.hostname}`,title:p(i)},[c(U,{class:"w-8 rounded-full",src:{appId:i.hostname},platform:e(B).Web},null,8,["src","platform"])],10,Ve))),128))]))}}),Oe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Re=o("path",{fill:"currentColor",d:"M10 21v-2H6.41l4.5-4.5l-1.41-1.41l-4.5 4.5V14H3v7h7m4.5-10.09l4.5-4.5V10h2V3h-7v2h3.59l-4.5 4.5l1.41 1.41Z"},null,-1),qe=[Re];function je(a,t){return n(),d("svg",Oe,qe)}const ze={name:"mdi-arrow-expand",render:je},Ge={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Ke=o("path",{fill:"currentColor",d:"M19.5 3.09L15 7.59V4h-2v7h7V9h-3.59l4.5-4.5l-1.41-1.41M4 13v2h3.59l-4.5 4.5l1.41 1.41l4.5-4.5V20h2v-7H4Z"},null,-1),Ze=[Ke];function Qe(a,t){return n(),d("svg",Ge,Ze)}const Ye={name:"mdi-arrow-collapse",render:Qe},Je={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Xe=o("path",{fill:"currentColor",d:"M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5l-1.5 1.5l-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16A6.5 6.5 0 0 1 3 9.5A6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14S14 12 14 9.5S12 5 9.5 5Z"},null,-1),et=[Xe];function tt(a,t){return n(),d("svg",Je,et)}const st={name:"mdi-magnify",render:tt},ot={class:"flex items-center p-2 bg-base-100 dark:bg-base-content rounded-full w-full max-w-3xl"},at=["placeholder","onKeyup"],nt={class:"sf-tabs flex justify-center absolute bottom-0"},it=["href"],rt={class:"sf-tabs-content relative z-0"},lt=k({name:"NewTabIndex",__name:"NewTabIndex",setup(a){X();const{t}=V();document.title=t("newtab.title");const s=H("@stayfree/page/new-tab/defaults",{isHeaderSectionCollapsed:!0,searchEngineId:Ae}),p=v({get(){return s.value.searchEngineId},set(r){s.value.searchEngineId=r}}),u=v(()=>I[p.value]),g=T(),i=T();function y(){s.value.isHeaderSectionCollapsed=!s.value.isHeaderSectionCollapsed}function _(){var l,m;const r=(m=oe((l=i.value)==null?void 0:l.value))==null?void 0:m.toString();r&&(location.href=u.value.searchUrl.replace("{term}",r))}return(r,l)=>{const m=P("router-link"),h=P("router-view");return n(),d(D,null,[c(Be,null,{content:w(()=>[o("div",{ref_key:"headerSection",ref:g,class:A(["flex items-center justify-center relative md:sticky z-10 bg-base-300",{"md:top-0":e(s).isHeaderSectionCollapsed,"md:top-0 lg:h-[80vh] lg:top-[calc(304px-80vh)]":!e(s).isHeaderSectionCollapsed}])},[o("div",{class:A(["flex flex-col items-center my-16 mx-6 w-full",{"lg:sticky lg:top-16":!e(s).isHeaderSectionCollapsed}])},[o("div",ot,[f(" Search Engine Icon/Menu "),c(Ne,{searchEngineId:e(p),"onUpdate:searchEngineId":l[0]||(l[0]=x=>ee(p)?p.value=x:null)},null,8,["searchEngineId"]),f(" Search Input "),o("input",{ref_key:"searchbox",ref:i,type:"text",class:"outline-none mx-3 w-full bg-transparent dark:text-primary-content",placeholder:r.$t("newtab.searchboxPlaceholder",{searchEngineName:e(u).name}),onKeyup:te(_,["enter"])},null,40,at),f(" Search Submit Button "),c(e(st),{class:"icon-lg shrink-0 cursor-pointer opacity-50",onClick:_})]),c(Fe)],2),o("div",nt,[c(m,{key:"usage-stats",class:"sf-tab","active-class":"sf-tab-active",to:e(C).overview},{default:w(()=>[S(b(r.$t("newtab.usageStatsTab")),1)]),_:1},8,["to"]),c(m,{key:"usage-limits",class:"sf-tab","active-class":"sf-tab-active",to:e(C).limits},{default:w(()=>[S(b(r.$t("websiteLimits")),1)]),_:1},8,["to"]),c(m,{key:"focus-mode",class:"sf-tab","active-class":"sf-tab-active",to:e(C).focus},{default:w(()=>[S(b(r.$t("focusMode.title")),1)]),_:1},8,["to"]),o("a",{key:"dashboard",target:"_blank",class:"sf-tab sf-tab-link",href:e(se)("")},[S(b(r.$t("dashboard.statsTitle"))+" ",1),c(e(we),{class:"icon-sm mt-0.5 ml-1.5"})],8,it)])],2),o("div",rt,[c(h)]),o("div",{class:"fixed top-2 right-2 p-2 z-40 opacity-50 text-base-content cursor-pointer hidden lg:block",onClick:y},[e(s).isHeaderSectionCollapsed?(n(),N(e(ze),{key:0})):(n(),N(e(Ye),{key:1}))])]),_:1}),c(fe)],64)}}}),ct=ae(lt,[["__scopeId","data-v-3e4c6169"]]);function dt(a){window.document.title=ne.global.t("appName");const t=he(ct,["h-full"]),s=ie("new-tab",t,a,_e).component("page-layout-content-container",Ee).provide($.DefaultUsageLimitType,a.defaultUsageLimitType).provide($.InstalledAppsProvider,a.installedAppsProvider).provide($.IsNewTabPage,!0).provide($.DefaultAppPlatform,a.defaultAppPlatform);return{mount:s.mount.bind(s)}}const ut=re({context:"new-tab",defaultUsageLimitType:le.Web,installedAppsProvider:be(ce()),defaultAppPlatform:de.Web});dt(ut).mount("#app");
