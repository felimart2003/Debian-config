import{_ as R}from"./AppList.vue_vue_type_script_setup_true_lang-Fne50-yk.js";import{u as V,_ as j,a as G}from"./FocusModeReasonBanner.vue_vue_type_script_setup_true_lang-kmimbFYN.js";import{bh as q,b$ as Y,c as w,f as W,Y as N,as as I,a$ as z,b0 as Q,t as U,o as n,q as u,w as $,g as k,N as J,F as K,k as d,j as e,bd as X,bY as Z,z as ee,bU as A,n as te,i as a,Q as M,l as T}from"./defineAppConfig-GTQ5Bvuh.js";import{I as S}from"./new-tab-light-6CDZBy0y.js";import{j as se,b as oe}from"./useAddAppToIgnoreListDialogStore-Ki2J31d-.js";import{m as ae,n as ie,o as ne}from"./recent-apps-provider-OWite7eM.js";import{u as x}from"./useRequirePin-V8f6W3iF.js";import{I as ce}from"./plus-kS_YE9tP.js";import{_ as re}from"./ScheduleEntry.vue_vue_type_script_setup_true_lang-CQ3wr36S.js";import{u as de}from"./useWalkthrough-8G963d17.js";import{u as ue}from"./useFocusModeStore-bWj63oGD.js";import{I as le}from"./timer-ald2Cwco.js";import"./AppListItem.vue_vue_type_script_setup_true_lang-xBVAs2BQ.js";import"./useGetAppMetadataQuery-BcVr5ORk.js";import"./useVibrantColor-iCMxnPhp.js";import"./SfOptionsButton.vue_vue_type_script_setup_true_lang-34L7vER_.js";import"./chevron-down-r-m6rVAr.js";import"./pencil-outline-S-laxNsu.js";import"./sleep-9Kq7Tjeg.js";import"./useIsNewTabPage-kpgT7RUw.js";import"./schedules-jPLYWtFX.js";const B=q(()=>{const{state:l,...i}=Y(),s=w(()=>l.value.sort());return{...i,websites:s}}),pe=W({name:"FocusScheduleList",__name:"FocusScheduleList",props:{schedules:{},activeSchedules:{}},setup(l){const i=l,{t:s}=N(),p=se(),r=ae(),m=I(),g=oe(),{state:y}=z(),f=ie(),_=w(()=>y.value==Q.Hour24),{websites:h}=B(),{reportEvent:o}=U();function b(c,v,t,F){const O=F.map(H=>H.charAt(0).toUpperCase()).join("");return c?O+" - "+s("schedules.allDay"):O+` - ${A(v,{is24HourFormat:_.value})} - ${A(t,{is24HourFormat:_.value})}`}function E(){f.show({onSubmit:C})}const D=x(c=>{f.show({schedule:c,onSubmit:C})});function C(c){m.addFocusSchedule(c),o("FOCUS_MODE_ADD_SCHEDULE"),h.value.length||P()}const L=x(c=>{r.show({title:s("genericConfirmation"),positiveButtonText:s("delete"),negativeButtonText:s("cancel"),destructive:!0,async onClickPositive(){try{await m.removeFocusSchedule(c),o("FOCUS_MODE_REMOVE_SCHEDULE")}catch(v){Z(v),p.show({message:s("genericError")})}return!0}})});function P(){g.show(ee.FocusModeRequiredSitesWarning)}return(c,v)=>(n(),u(X,{tag:"ul",name:"fade",class:"grid grid-flow-row gap-4 sm:grid-cols-2",duration:300},{default:$(()=>[(n(!0),k(K,null,J(i.schedules,t=>(n(),u(re,{key:t.id,id:t.id,"schedule-name":t.name,"schedule-time":b(t.allDay,t.startTime,t.endTime,t.days),"is-active":i.activeSchedules.includes(t.id),onEdit:F=>e(D)(t),onDelete:F=>e(L)(t.id)},null,8,["id","schedule-name","schedule-time","is-active","onEdit","onDelete"]))),128)),(n(),k("button",{class:"h-14 flex items-center justify-center space-x-2 rounded-lg ring-1 ring-base-content ring-opacity-divider ring-inset clickable","data-testid":"add-schedule",key:e(s)("schedules.addSchedule"),onClick:E},[d(e(ce),{class:"icon text-base-content text-opacity-secondary"}),d(S,{tag:"p",keypath:"schedules.addSchedule"})]))]),_:1}))}});function me(){de("FocusMode","focusMode",[{stepName:"focusModeEnableManually",selector:"#activate-focus-mode-button",eventName:"FOCUS_MODE_ENABLE_MANUALLY",popoverOptions:{side:"left"}},{stepName:"focusModeSchedule",selector:'[data-testid="add-schedule"]',eventName:"FOCUS_MODE_SCHEDULE"},{stepName:"focusModeAddWebsites",selector:'[data-testid="add-website"]',eventName:"FOCUS_MODE_ADD_WEBSITES"}])}const fe={"data-testid":"focus-mode",class:"section section-sticky"},_e={class:"GenericPref flex space-x-4 py-4 pl-2 items-center"},he={class:"flex flex-col flex-1 space-y-1"},be={class:"text-base-content text-opacity-primary text-lg"},ve={class:"text-base-content text-opacity-secondary pr-8"},Se={class:"flex-shrink-0 pr-4 items-center content-center"},ge={key:1},ye=a("div",{class:"w-1 h-1 overflow-visible relative"},null,-1),Ee={class:"section"},De={class:"section"},Ge=W({name:"DashboardFocus",__name:"DashboardFocus",setup(l){const{t:i}=N(),{reportEvent:s}=U(),p=I(),r=ue();async function m(o){await p.addFocusWebsite(o),s("FOCUS_MODE_ADD_NEW_WEBSITE",{hostname:o})}const g=x(async o=>{await p.removeFocusWebsite(o),s("FOCUS_MODE_REMOVE_WEBSITE",{hostname:o})});me();const{websites:y}=B(),f=ne(),_=w(()=>y.value.map(o=>({appId:o,platform:f,disableAppGroups:!0}))),h=V();return(o,b)=>{const E=te("page-layout-content-container");return n(),u(E,null,{default:$(()=>[a("section",fe,[d(S,{tag:"h1",class:"dashboard-page-title",keypath:"focusMode.title"})]),a("div",_e,[a("div",he,[a("p",be,M(e(i)("focusMode.activateFocusMode")),1),a("p",ve,M(e(i)("focusMode.focusModeDescription")),1)]),a("div",Se,[e(r).activeSchedule?(n(),u(e(le),{key:0,class:"icon-lg text-primary"})):e(r).isEnabled?(n(),k("div",ge,[a("button",{"data-testid":"disable-button",class:"btn btn-neutral",onClick:b[0]||(b[0]=(...D)=>e(h)&&e(h)(...D))},M(e(i)("disable")),1),T(" This line has been added to make it the same size as the options button. "),ye])):(n(),u(j,{key:2}))])]),e(r).reason?(n(),u(G,{key:0})):T("v-if",!0),a("section",Ee,[d(S,{tag:"h2",keypath:"schedules.schedules",class:"section-title"}),d(pe,{schedules:e(r).schedules,"active-schedules":e(r).activeScheduleIds},null,8,["schedules","active-schedules"])]),a("section",De,[d(S,{tag:"h2",class:"section-title",keypath:"focusMode.blockedWebsites"}),d(R,{apps:e(_),"add-app-description":e(i)("focusMode.addWebsiteDescription"),"show-add-button":"",onAdd:m,onRemove:e(g)},null,8,["apps","add-app-description","onRemove"])])]),_:1})}}});export{Ge as default};
