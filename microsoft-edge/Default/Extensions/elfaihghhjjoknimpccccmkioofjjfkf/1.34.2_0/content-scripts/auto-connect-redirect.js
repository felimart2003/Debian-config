var or=Object.defineProperty;var ar=(c,m,A)=>m in c?or(c,m,{enumerable:!0,configurable:!0,writable:!0,value:A}):c[m]=A;var Q=(c,m,A)=>(ar(c,typeof m!="symbol"?m+"":m,A),A),ie=(c,m,A)=>{if(!m.has(c))throw TypeError("Cannot "+A)};var j=(c,m,A)=>(ie(c,m,"read from private field"),A?A.call(c):m.get(c)),D=(c,m,A)=>{if(m.has(c))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(c):m.set(c,A)},ye=(c,m,A,U)=>(ie(c,m,"write to private field"),U?U.call(c,A):m.set(c,A),A);var oe=(c,m,A)=>(ie(c,m,"access private method"),A);(function(){"use strict";var k,O,H,N,Y,Z,we,K,Ee;function c(e){return e}function m(...e){}function A(...e){B(e)}function U(...e){B(e)}function ae(...e){B(e);const{Bugsnag:r,excludeFuncFromStacktrace:s}=globalThis;r==null||r.notify(le(e),t=>{s==null||s(ae)(t),t.severity="warning"})}function ge(...e){B(e);const{Bugsnag:r,excludeFuncFromStacktrace:s}=globalThis;r==null||r.notify(le(e),t=>{s==null||s(ge)(t),t.severity="error"})}function B(e){const{Bugsnag:r}=globalThis;r==null||r.leaveBreadcrumb(typeof e[0]=="string"?e[0]:"(no message)",{args:W(e)},"log")}function le(e){return e.find(r=>r instanceof Error)??ve(e)}function ve(e){return e.map(r=>Se(r)?String(r):JSON.stringify(W(r))).join(" ")}function Se(e){return typeof e=="string"||typeof e=="boolean"||typeof e=="number"}function W(e){return e==null?e:e instanceof Error?{errorClass:e.name,errorMessage:e.message}:typeof e=="function"?"[Function]":Array.isArray(e)?e.map(W):typeof e=="object"?Object.entries(e).reduce((r,[s,t])=>(r[s]=W(t),r),{}):e}const Te={debug:m,log:A,info:U,warn:ae,error:ge},_e=[EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError,globalThis.DOMException,globalThis.AssertionError,globalThis.SystemError].filter(Boolean).map(e=>[e.name,e]),Pe=new Map(_e);class X extends Error{constructor(s){super(X._prepareSuperMessage(s));Q(this,"name","NonError")}static _prepareSuperMessage(s){try{return JSON.stringify(s)}catch{return String(s)}}}const Ce=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],ee=Symbol(".toJSON was called"),Me=e=>{e[ee]=!0;const r=e.toJSON();return delete e[ee],r},me=e=>Pe.get(e)??Error,re=({from:e,seen:r,to:s,forceEnumerable:t,maxDepth:d,depth:v,useToJSON:h,serialize:b})=>{if(!s)if(Array.isArray(e))s=[];else if(!b&&ce(e)){const g=me(e.name);s=new g}else s={};if(r.push(e),v>=d)return s;if(h&&typeof e.toJSON=="function"&&e[ee]!==!0)return Me(e);const u=g=>re({from:g,seen:[...r],forceEnumerable:t,maxDepth:d,depth:v,useToJSON:h,serialize:b});for(const[g,p]of Object.entries(e)){if(typeof Buffer=="function"&&Buffer.isBuffer(p)){s[g]="[object Buffer]";continue}if(p!==null&&typeof p=="object"&&typeof p.pipe=="function"){s[g]="[object Stream]";continue}if(typeof p!="function"){if(!p||typeof p!="object"){s[g]=p;continue}if(!r.includes(e[g])){v++,s[g]=u(e[g]);continue}s[g]="[Circular]"}}for(const{property:g,enumerable:p}of Ce)typeof e[g]<"u"&&e[g]!==null&&Object.defineProperty(s,g,{value:ce(e[g])?u(e[g]):e[g],enumerable:t?!0:p,configurable:!0,writable:!0});return s};function Oe(e,r={}){const{maxDepth:s=Number.POSITIVE_INFINITY,useToJSON:t=!0}=r;return typeof e=="object"&&e!==null?re({from:e,seen:[],forceEnumerable:!0,maxDepth:s,depth:0,useToJSON:t,serialize:!0}):typeof e=="function"?`[Function: ${e.name??"anonymous"}]`:e}function Re(e,r={}){const{maxDepth:s=Number.POSITIVE_INFINITY}=r;if(e instanceof Error)return e;if(ke(e)){const t=me(e.name);return re({from:e,seen:[],to:new t,maxDepth:s,depth:0,serialize:!1})}return new X(e)}function ce(e){return!!e&&typeof e=="object"&&"name"in e&&"message"in e&&"stack"in e}function ke(e){return!!e&&typeof e=="object"&&"message"in e&&!Array.isArray(e)}var Ne=Object.defineProperty,Ie=Object.defineProperties,$e=Object.getOwnPropertyDescriptors,Ae=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,ue=(e,r,s)=>r in e?Ne(e,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[r]=s,de=(e,r)=>{for(var s in r||(r={}))De.call(r,s)&&ue(e,s,r[s]);if(Ae)for(var s of Ae(r))Le.call(r,s)&&ue(e,s,r[s]);return e},fe=(e,r)=>Ie(e,$e(r)),Fe=(e,r,s)=>new Promise((t,d)=>{var v=u=>{try{b(s.next(u))}catch(g){d(g)}},h=u=>{try{b(s.throw(u))}catch(g){d(g)}},b=u=>u.done?t(u.value):Promise.resolve(u.value).then(v,h);b((s=s.apply(e,r)).next())});function je(e){let r,s={};function t(){Object.entries(s).length===0&&(r==null||r(),r=void 0)}let d=Math.floor(Math.random()*1e4);function v(){return d++}return{sendMessage(h,b,...u){return Fe(this,null,function*(){var g,p;const f={id:v(),type:h,data:b,timestamp:Date.now()};(g=e.logger)==null||g.debug(`[messaging] sendMessage {id=${f.id}} ─ᐅ`,f,...u);const _=yield e.sendMessage(f,...u),{res:R,err:C}=_??{err:new Error("No response")};if((p=e.logger)==null||p.debug(`[messaging] sendMessage {id=${f.id}} ᐊ─`,{res:R,err:C}),C!=null)throw Re(C);return R})},onMessage(h,b){var u,g,p;if(r==null&&((u=e.logger)==null||u.debug(`[messaging] "${h}" initialized the message listener for this context`),r=e.addRootListener(f=>{var _,R;if(typeof f.type!="string"||typeof f.timestamp!="number"){const w=Error(`[messaging] Unknown message format, must include the 'type' & 'timestamp' fields, received: ${JSON.stringify(f)}`);throw(_=e.logger)==null||_.error(w),w}(R=e==null?void 0:e.logger)==null||R.debug("[messaging] Received message",f);const C=s[f.type];if(C==null)return;const I=C(f);return Promise.resolve(I).then(w=>{var M;return(M=e==null?void 0:e.logger)==null||M.debug(`[messaging] onMessage {id=${f.id}} ─ᐅ`,{res:w}),{res:w}}).catch(w=>{var M;return(M=e==null?void 0:e.logger)==null||M.debug(`[messaging] onMessage {id=${f.id}} ─ᐅ`,{err:w}),{err:Oe(w)}})})),s[h]!=null){const f=Error(`[messaging] In this JS context, only one listener can be setup for ${h}`);throw(g=e.logger)==null||g.error(f),f}return s[h]=b,(p=e.logger)==null||p.log(`[messaging] Added listener for ${h}`),()=>{delete s[h],t()}},removeAllListeners(){Object.keys(s).forEach(h=>{delete s[h]}),t()}}}var Ue=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Be(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pe={exports:{}};(function(e,r){(function(s,t){t(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Ue,function(s){var t,d;if(!((d=(t=globalThis.chrome)==null?void 0:t.runtime)!=null&&d.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const v="The message port closed before a response was received.",h=b=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class g extends WeakMap{constructor(i,a=void 0){super(a),this.createItem=i}get(i){return this.has(i)||this.set(i,this.createItem(i)),super.get(i)}}const p=n=>n&&typeof n=="object"&&typeof n.then=="function",f=(n,i)=>(...a)=>{b.runtime.lastError?n.reject(new Error(b.runtime.lastError.message)):i.singleCallbackArg||a.length<=1&&i.singleCallbackArg!==!1?n.resolve(a[0]):n.resolve(a)},_=n=>n==1?"argument":"arguments",R=(n,i)=>function(l,...y){if(y.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${_(i.minArgs)} for ${n}(), got ${y.length}`);if(y.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${_(i.maxArgs)} for ${n}(), got ${y.length}`);return new Promise((E,S)=>{if(i.fallbackToNoCallback)try{l[n](...y,f({resolve:E,reject:S},i))}catch(o){console.warn(`${n} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),l[n](...y),i.fallbackToNoCallback=!1,i.noCallback=!0,E()}else i.noCallback?(l[n](...y),E()):l[n](...y,f({resolve:E,reject:S},i))})},C=(n,i,a)=>new Proxy(i,{apply(l,y,E){return a.call(y,n,...E)}});let I=Function.call.bind(Object.prototype.hasOwnProperty);const w=(n,i={},a={})=>{let l=Object.create(null),y={has(S,o){return o in n||o in l},get(S,o,T){if(o in l)return l[o];if(!(o in n))return;let x=n[o];if(typeof x=="function")if(typeof i[o]=="function")x=C(n,n[o],i[o]);else if(I(a,o)){let $=R(o,a[o]);x=C(n,n[o],$)}else x=x.bind(n);else if(typeof x=="object"&&x!==null&&(I(i,o)||I(a,o)))x=w(x,i[o],a[o]);else if(I(a,"*"))x=w(x,i[o],a["*"]);else return Object.defineProperty(l,o,{configurable:!0,enumerable:!0,get(){return n[o]},set($){n[o]=$}}),x;return l[o]=x,x},set(S,o,T,x){return o in l?l[o]=T:n[o]=T,!0},defineProperty(S,o,T){return Reflect.defineProperty(l,o,T)},deleteProperty(S,o){return Reflect.deleteProperty(l,o)}},E=Object.create(n);return new Proxy(E,y)},M=n=>({addListener(i,a,...l){i.addListener(n.get(a),...l)},hasListener(i,a){return i.hasListener(n.get(a))},removeListener(i,a){i.removeListener(n.get(a))}}),nr=new g(n=>typeof n!="function"?n:function(a){const l=w(a,{},{getContent:{minArgs:0,maxArgs:0}});n(l)}),he=new g(n=>typeof n!="function"?n:function(a,l,y){let E=!1,S,o=new Promise(F=>{S=function(P){E=!0,F(P)}}),T;try{T=n(a,l,S)}catch(F){T=Promise.reject(F)}const x=T!==!0&&p(T);if(T!==!0&&!x&&!E)return!1;const $=F=>{F.then(P=>{y(P)},P=>{let te;P&&(P instanceof Error||typeof P.message=="string")?te=P.message:te="An unexpected error occurred",y({__mozWebExtensionPolyfillReject__:!0,message:te})}).catch(P=>{console.error("Failed to send onMessage rejected reply",P)})};return $(x?T:o),!0}),tr=({reject:n,resolve:i},a)=>{b.runtime.lastError?b.runtime.lastError.message===v?i():n(new Error(b.runtime.lastError.message)):a&&a.__mozWebExtensionPolyfillReject__?n(new Error(a.message)):i(a)},be=(n,i,a,...l)=>{if(l.length<i.minArgs)throw new Error(`Expected at least ${i.minArgs} ${_(i.minArgs)} for ${n}(), got ${l.length}`);if(l.length>i.maxArgs)throw new Error(`Expected at most ${i.maxArgs} ${_(i.maxArgs)} for ${n}(), got ${l.length}`);return new Promise((y,E)=>{const S=tr.bind(null,{resolve:y,reject:E});l.push(S),a.sendMessage(...l)})},ir={devtools:{network:{onRequestFinished:M(nr)}},runtime:{onMessage:M(he),onMessageExternal:M(he),sendMessage:be.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:be.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},ne={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":ne},services:{"*":ne},websites:{"*":ne}},w(b,ir,u)};s.exports=h(chrome)}else s.exports=globalThis.browser})})(pe);var We=pe.exports;const L=Be(We);function Ve(e){return je(fe(de({},e),{sendMessage(r,s){return s==null?L.runtime.sendMessage(r):L.tabs.sendMessage(s,r)},addRootListener(r){const s=(t,d)=>r(typeof t=="object"?fe(de({},t),{sender:d}):t);return L.runtime.onMessage.addListener(s),()=>L.runtime.onMessage.removeListener(s)}}))}const{sendMessage:qe,onMessage:gr,removeAllListeners:lr}=Ve({logger:Te}),V="appId",q="platform",G="groupId",Ge="code",Je={stats:"/",overview:"/",limits:"/limits",focus:"/focus",devices:"/devices",lotg:"/lotg",youtubePlus:"/youtube-plus",devicesWith(e){const r=[];return e!=null&&e.code&&r.push(`${Ge}=${e.code}`),r.length===0?this.devices:`${this.devices}?${r.join("&")}`},settings:"/settings",backup:"/settings/backup",ignore:"/settings/ignore",help:"/help",appDetails:`/:${q}/:${V}`,appDetailsFor(e,r){return this.appDetails.replace(`:${q}`,e).replace(`:${V}`,r)},groupDetails:`/group/:${G}`,groupDetailsFor(e){return this.groupDetails.replace(`:${G}`,String(e))},groupAppDetails:`/group/:${G}/:${q}/:${V}`,groupAppDetailsFor(e,r,s){return this.groupAppDetails.replace(`:${G}`,String(e)).replace(`:${q}`,r).replace(`:${V}`,s)}};var se=L;function ze(e,r){let s=se.runtime.getURL("dashboard.html")+"#"+e;return r&&(s+=`?dateRange=${r.startDate},${r.endDate}`),s}function He(e){return ze(Je.devicesWith(e))}const Ye="https://stayfreeapps.com/extension-connect-device",Ze={matches:["*://*/*"],exclude:["ios"],main(){if(!location.href.startsWith(Ye))return;const e=new URL(window.location.href).searchParams.get("code")??void 0;qe("set-tab-url",{url:He({code:e})})}};var Ke={VITE_CJS_IGNORE_WARNING:"true",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1,MANIFEST_VERSION:3,BROWSER:"chrome",CHROME:!0,FIREFOX:!1,SAFARI:!1,EDGE:!1,OPERA:!1,COMMAND:"build",ENTRYPOINT:"auto-connect-redirect"};function J(e,...r){}var Qe={debug:(...e)=>J(console.debug,...e),log:(...e)=>J(console.log,...e),warn:(...e)=>J(console.warn,...e),error:(...e)=>J(console.error,...e)},Xe=(k=class extends Event{constructor(r,s){super(k.EVENT_NAME,{}),this.newUrl=r,this.oldUrl=s}},Q(k,"EVENT_NAME",xe("wxt:locationchange")),k);function xe(e){const r=typeof Ke>"u"?"build":"auto-connect-redirect";return`${se.runtime.id}:${r}:${e}`}function er(e){let r,s;return{run(){r==null&&(s=new URL(location.href),r=e.setInterval(()=>{let t=new URL(location.href);t.href!==s.href&&(window.dispatchEvent(new Xe(t,s)),s=t)},1e3))}}}var rr=(O=class{constructor(r,s){D(this,Z);D(this,K);D(this,H,window.self===window.top);D(this,N,void 0);D(this,Y,er(this));this.contentScriptName=r,this.options=s,ye(this,N,new AbortController),j(this,H)&&oe(this,Z,we).call(this),this.setTimeout(()=>{oe(this,K,Ee).call(this)})}get signal(){return j(this,N).signal}abort(r){return j(this,N).abort(r)}get isInvalid(){return se.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(r){return this.signal.addEventListener("abort",r),()=>this.signal.removeEventListener("abort",r)}block(){return new Promise(()=>{})}setInterval(r,s){const t=setInterval(()=>{this.isValid&&r()},s);return this.onInvalidated(()=>clearInterval(t)),t}setTimeout(r,s){const t=setTimeout(()=>{this.isValid&&r()},s);return this.onInvalidated(()=>clearTimeout(t)),t}requestAnimationFrame(r){const s=requestAnimationFrame((...t)=>{this.isValid&&r(...t)});return this.onInvalidated(()=>cancelAnimationFrame(s)),s}requestIdleCallback(r,s){const t=requestIdleCallback((...d)=>{this.signal.aborted||r(...d)},s);return this.onInvalidated(()=>cancelIdleCallback(t)),t}addEventListener(r,s,t,d){var v;s==="wxt:locationchange"&&this.isValid&&j(this,Y).run(),(v=r.addEventListener)==null||v.call(r,s.startsWith("wxt:")?xe(s):s,t,{...d,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Qe.debug(`Content script "${this.contentScriptName}" context invalidated`)}},H=new WeakMap,N=new WeakMap,Y=new WeakMap,Z=new WeakSet,we=function(){window.postMessage({event:O.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")},K=new WeakSet,Ee=function(){const r=s=>{var t,d;((t=s.data)==null?void 0:t.type)===O.SCRIPT_STARTED_MESSAGE_TYPE&&((d=s.data)==null?void 0:d.contentScriptName)===this.contentScriptName&&this.notifyInvalidated()};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))},Q(O,"SCRIPT_STARTED_MESSAGE_TYPE","wxt:content-script-started"),O);function z(e,...r){}var sr={debug:(...e)=>z(console.debug,...e),log:(...e)=>z(console.log,...e),warn:(...e)=>z(console.warn,...e),error:(...e)=>z(console.error,...e)};(async()=>{try{const{main:e,...r}=Ze,s=new rr("auto-connect-redirect",r);await e(s)}catch(e){sr.error('The content script "auto-connect-redirect" crashed on startup!',e)}})()})();
