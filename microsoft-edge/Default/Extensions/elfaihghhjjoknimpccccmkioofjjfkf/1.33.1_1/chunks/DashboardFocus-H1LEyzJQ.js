import{f as R,a0 as H,au as $,b0 as z,c as U,b1 as Q,t as V,o as n,q as u,w as l,g as N,Q as J,F as K,k as r,j as e,I as v,bd as X,bY as Z,A as P,bU as L,aS as ee,ah as M,n as te,i as d,U as m,T as I,ad as T,l as B}from"./defineAppConfig-_73fm9CR.js";import{u as q}from"./useSortedFocusModeWebsites-4hN7HDC4.js";import{i as se,b as Y}from"./useAddAppToIgnoreListDialogStore-gHGl-4Ba.js";import{m as oe,n as ae,o as ie,f as ne}from"./recent-apps-provider-H_KyoG2W.js";import{u as S}from"./useRequirePin-prOa10D6.js";import{I as ce}from"./plus-AonKDMmz.js";import{_ as de,a as re}from"./SfOptionsButton.vue_vue_type_script_setup_true_lang-sLoZr9ys.js";import{_ as le}from"./AppList.vue_vue_type_script_setup_true_lang-IEQyGgY1.js";import{u as j}from"./useFocusModeStore-AIskskB8.js";import{I as ue}from"./timer-Tx1ppbqt.js";import{u as pe}from"./useWalkthrough-19MmNOCw.js";import"./new-tab-light-diPYHp27.js";import"./pencil-outline-YZ9DKWrK.js";import"./chevron-down-V4TyRDK2.js";import"./AppListItem.vue_vue_type_script_setup_true_lang-nyh4YDtP.js";import"./useGetAppMetadataQuery-8068_Rw4.js";import"./useVibrantColor-SQN7_oFR.js";import"./schedules-4-rrdO9H.js";import"./sleep-9Kq7Tjeg.js";import"./useIsNewTabPage-b1xF2Z3f.js";const me=R({name:"FocusScheduleList",__name:"FocusScheduleList",props:{schedules:{},activeSchedules:{}},setup(p){const t=p,{t:s}=H(),b=se(),a=oe(),E=$(),F=Y(),{state:k}=z(),f=ae(),_=U(()=>k.value==Q.Hour24),{websites:C}=q(),{reportEvent:g}=V();function O(c,o,i,h){const W=h.map(G=>G.charAt(0).toUpperCase()).join("");return c?W+" - "+s("schedules.allDay"):W+` - ${L(o,{is24HourFormat:_.value})} - ${L(i,{is24HourFormat:_.value})}`}function w(){f.show({onSubmit:D})}const y=S(c=>{f.show({schedule:c,onSubmit:D})});function D(c){E.addFocusSchedule(c),g("FOCUS_MODE_ADD_SCHEDULE"),C.value.length||x()}const A=S(c=>{a.show({title:s("genericConfirmation"),positiveButtonText:s("delete"),negativeButtonText:s("cancel"),destructive:!0,async onClickPositive(){try{await E.removeFocusSchedule(c),g("FOCUS_MODE_REMOVE_SCHEDULE")}catch(o){Z(o),b.show({message:s("genericError")})}return!0}})});function x(){F.show(P.FocusModeRequiredSitesWarning)}return(c,o)=>(n(),u(X,{tag:"ul",name:"fade",class:"grid grid-flow-row gap-4 sm:grid-cols-2",duration:300},{default:l(()=>[(n(!0),N(K,null,J(t.schedules,i=>(n(),u(de,{key:i.id,id:i.id,"schedule-name":i.name,"schedule-time":O(i.allDay,i.startTime,i.endTime,i.days),"is-active":t.activeSchedules.includes(i.id),onEdit:h=>e(y)(i),onDelete:h=>e(A)(i.id)},null,8,["id","schedule-name","schedule-time","is-active","onEdit","onDelete"]))),128)),(n(),N("button",{class:"h-14 flex items-center justify-center space-x-2 rounded-lg ring-1 ring-on-background ring-opacity-divider ring-inset clickable","data-testid":"add-schedule",key:e(s)("schedules.addSchedule"),onClick:w},[r(e(ce),{class:"icon text-on-background text-opacity-secondary"}),r(v,{tag:"p",keypath:"schedules.addSchedule"})]))]),_:1}))}});function fe(){const p=j();return()=>{const t=p.activeSchedule;if(!t)return;const s={...ee(p.schedules)};delete s[t.id],p.schedules=s}}function _e(){pe("FocusMode","focusMode",[{stepName:"focusModeEnableManually",selector:"#activate-focus-mode-button",eventName:"FOCUS_MODE_ENABLE_MANUALLY",popoverOptions:{side:"left"}},{stepName:"focusModeSchedule",selector:'[data-testid="add-schedule"]',eventName:"FOCUS_MODE_SCHEDULE"},{stepName:"focusModeAddWebsites",selector:'[data-testid="add-website"]',eventName:"FOCUS_MODE_ADD_WEBSITES"}])}const he={"data-testid":"focus-mode",class:"section section-sticky"},ve={class:"GenericPref flex space-x-4 py-4 pl-2 items-center"},Se={class:"flex flex-col flex-1 space-y-1"},be={class:"text-on-background text-opacity-primary text-lg"},Ee={class:"text-on-background text-opacity-secondary pr-8"},ge={class:"flex-shrink-0 pr-4 items-center content-center"},ye={key:1},De=d("div",{class:"w-1 h-1 overflow-visible relative"},null,-1),Me={class:"section"},Fe={class:"section"},je=R({name:"DashboardFocus",__name:"DashboardFocus",setup(p){const{t}=H(),{reportEvent:s}=V(),b=$(),a=j(),E=Y();function F(){s("ENABLED_FOCUS_MODE_INDEFINITELY"),a.enableIndefinitely(),f.value&&_()}function k(o){s("ENABLED_FOCUS_MODE_FOR_DURATION",{durationInHours:o/M}),a.enableForDuration(o),f.value&&_()}const f=U(()=>a.isEnabled&&!a.websites.length);function _(){E.show(P.FocusModeRequiredSitesWarning)}async function C(o){await b.addFocusWebsite(o),s("FOCUS_MODE_ADD_NEW_WEBSITE",{hostname:o})}const g=S(async o=>{await b.removeFocusWebsite(o),s("FOCUS_MODE_REMOVE_WEBSITE",{hostname:o})}),O=fe(),w=S(()=>{O(),s("FOCUS_MODE_REMOVE_ACTIVE_SCHEDULE")}),y=S(()=>{a.disable(),s("FOCUS_MODE_DISABLE_MANUALLY")}),D=[{display:t("focusMode.option1"),value:1*M},{display:t("focusMode.option2"),value:2*M},{display:t("focusMode.option3"),value:3*M}];_e();const{websites:A}=q(),x=ie(),c=U(()=>A.value.map(o=>({appId:o,platform:x,disableAppGroups:!0})));return(o,i)=>{const h=te("page-layout-content-container");return n(),u(h,null,{default:l(()=>[d("section",he,[r(v,{tag:"h1",class:"dashboard-page-title",keypath:"focusMode.title"})]),d("div",ve,[d("div",Se,[d("p",be,m(e(t)("focusMode.activateFocusMode")),1),d("p",Ee,m(e(t)("focusMode.focusModeDescription")),1)]),d("div",ge,[e(a).activeSchedule?(n(),u(e(ue),{key:0,class:"icon-lg text-primary"})):e(a).isEnabled?(n(),N("div",ye,[r(T,{"data-testid":"disable-button",color:"transparent",class:"clickable",onClick:e(y)},{default:l(()=>[I(m(e(t)("disable")),1)]),_:1},8,["onClick"]),B(" This line has been added to make it the same size as the options button. "),De])):(n(),u(re,{key:2,id:"activate-focus-mode-button","button-text":e(t)("focusMode.activate"),"dropdown-title":e(t)("focusMode.optionTitle"),items:D,onClick:F,onClickOption:k},null,8,["button-text","dropdown-title"]))])]),e(a).reason?(n(),u(ne,{key:0,type:"info"},{default:l(()=>[r(v,{tag:"span",keypath:"focusMode.status"},{default:l(()=>[d("strong",null,m(e(a).reason),1)]),_:1})]),buttons:l(()=>[e(a).activeSchedule?(n(),u(T,{key:0,color:"blue",onClick:e(w)},{default:l(()=>[I(m(e(t)("deleteSchedule")),1)]),_:1},8,["onClick"])):(n(),u(T,{key:1,color:"blue",onClick:e(y)},{default:l(()=>[I(m(e(t)("disableNow")),1)]),_:1},8,["onClick"]))]),_:1})):B("v-if",!0),d("section",Me,[r(v,{tag:"h2",keypath:"schedules.schedules",class:"section-title"}),r(me,{schedules:e(a).schedules,"active-schedules":e(a).activeScheduleIds},null,8,["schedules","active-schedules"])]),d("section",Fe,[r(v,{tag:"h2",class:"section-title",keypath:"focusMode.blockedWebsites"}),r(le,{apps:e(c),"add-app-description":e(t)("focusMode.addWebsiteDescription"),"show-add-button":"",onAdd:C,onRemove:e(g)},null,8,["apps","add-app-description","onRemove"])])]),_:1})}}});export{je as default};
