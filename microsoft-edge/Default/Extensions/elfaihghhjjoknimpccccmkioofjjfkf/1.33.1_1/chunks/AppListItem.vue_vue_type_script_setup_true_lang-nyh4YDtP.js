import{u as U}from"./useGetAppMetadataQuery-8068_Rw4.js";import{ai as M,aR as V,ar as B,c as p,bk as k,L as o,f as C,a0 as D,r as $,aU as S,o as _,g as h,k as j,j as c,i as a,U as y,l as A,h as L,aD as P}from"./defineAppConfig-_73fm9CR.js";import{u as Q}from"./useVibrantColor-SQN7_oFR.js";import{_ as W}from"./useAddAppToIgnoreListDialogStore-gHGl-4Ba.js";function z(l,e=V()){return M(["app-groups",l],()=>e.getAppGroups({installId:l}))}function E(l,e){const I=B(),{data:i}=z(I.value);return p(()=>{var u,v,f,b;const r=k(l);switch(k(e)){case o.AppGroup:{const s=Number(r);return(u=i.value)==null?void 0:u.find(n=>n.brand_id===s)}case o.Web:return(v=i.value)==null?void 0:v.find(s=>s.websites.includes(r));case o.Android:return(f=i.value)==null?void 0:f.find(s=>s.android_apps.find(n=>n.id===r));case o.Desktop:return(b=i.value)==null?void 0:b.find(s=>{var n;return(n=s.desktop_apps)==null?void 0:n.find(g=>g.name===r)})}})}const R={class:"flex items-center space-x-2 p-2 bg-surface rounded-lg shadow"},q={class:"flex-1 min-w-0"},F={class:"flex justify-between items-center"},H={class:"min-w-0"},J=["title"],K={key:0,class:"text-opacity-secondary text-sm"},O={key:0,class:"flex space-x-1"},T={key:0},X={class:"pt-2 pr-2 pb-1"},Y={class:"flex justify-between"},Z={class:"text-opacity-50 text-xs"},ee={class:"text-opacity-50 text-xs"},te={class:"flex flex-row space-x-2 items-center pt-1"},ae={class:"relative h-1 flex-1 bg-black bg-opacity-[0.15] theme-dark:bg-opacity-30 rounded-sm"},pe=C({name:"AppListItem",__name:"AppListItem",props:{appId:{},subtitle:{},platform:{},disableAppGroups:{type:Boolean},limit:{},usage:{}},setup(l){const e=l,{t:I}=D(),{data:i}=U(p(()=>({appIds:[e.appId]}))),r=E(()=>e.appId,()=>e.platform),u=p(()=>{var t,d,m;if(!e.disableAppGroups&&r.value||e.platform===o.AppGroup)return((t=r.value)==null?void 0:t.name)||e.appId;if(e.platform===o.Web)return e.appId;if(e.platform===o.Android){const x=(m=(d=i.value)==null?void 0:d[e.appId])==null?void 0:m.displayName;if(x)return x}return e.appId}),v=p(()=>{var t,d;if(!e.disableAppGroups&&r.value||e.platform===o.AppGroup)return r.value??{appId:e.appId};if(e.platform===o.Web)return{appId:e.appId};if(e.platform===o.Android){const m=(d=(t=i.value)==null?void 0:t[e.appId])==null?void 0:d.iconUrl;if(m)return{url:m}}return{appId:e.appId}}),f=$(),b=t=>{f.value=t},s=p(()=>{const t=(e.usage||0)/(e.limit||0)*100;return isNaN(t)?100:Math.min(Math.max(t,0),100)}),{isVibrantLoaded:n,vibrantColor:g}=Q(f,{disableDarkModifier:!0}),w=p(()=>n?g.value??"rgb(var(--color-secondary))":"transparent"),G=p(()=>`background-color: ${w.value}; right: ${100-(n.value?s.value:0)}%`),N=p(()=>{const t=S(e.usage??0);return I("dashboard.todaysUsage",{duration:t})});return(t,d)=>(_(),h("li",R,[j(W,{class:"rounded-md object-contain w-8 h-8 mr-2",src:c(v),platform:t.platform,onUrlChanged:b},null,8,["src","platform"]),a("div",q,[a("div",F,[a("div",H,[a("h6",{class:"overflow-ellipsis whitespace-nowrap overflow-hidden truncate",title:c(u)},y(c(u)),9,J),t.subtitle?(_(),h("p",K,y(t.subtitle),1)):A("v-if",!0)]),t.$slots.default?(_(),h("div",O,[L(t.$slots,"default")])):A("v-if",!0)]),t.limit||t.limit===0?(_(),h("div",T,[a("div",X,[a("div",Y,[a("p",Z,y(c(N)),1),a("p",ee,y(t.$t("percent",{integer:Math.floor(c(s))})),1)]),a("div",te,[a("div",ae,[a("div",{class:"absolute left-0 top-0 bottom-0 rounded-sm transition-all ease-linear bg-secondary",style:P(c(G))},null,4)])])])])):A("v-if",!0)])]))}});export{pe as _,E as u};
