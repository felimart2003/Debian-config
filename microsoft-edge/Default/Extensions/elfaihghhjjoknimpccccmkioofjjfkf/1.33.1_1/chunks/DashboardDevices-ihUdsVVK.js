import{_ as H}from"./ConnectDeviceFab.vue_vue_type_script_setup_true_lang-ae6WnP6c.js";import{f as x,r as L,o as d,g as f,l as r,i as e,k as a,j as t,w as p,F as b,U as n,Q as R,aX as M,a0 as g,c as w,T as D,I as G,p as W,m as Y,_ as J,aT as U,ar as X,aM as Z,q as y,bd as ee,aK as se,al as te,E as oe,cn as ne,s as ae,co as ie,az as ce,A as $,t as re,n as le,ad as de}from"./defineAppConfig-_73fm9CR.js";import{l as v,n as T,N as ue,r as pe,D as me,O as fe,i as q,s as B,b as _e,j as ve}from"./useAddAppToIgnoreListDialogStore-gHGl-4Ba.js";import{u as ge}from"./useRemoveDeviceMutation-FQzp2knV.js";import{b as ye,C as A,q as xe,d as he,m as be,i as ke,s as we,e as De,t as Ce,v as Se,f as $e}from"./recent-apps-provider-H_KyoG2W.js";import{I as Ee}from"./more-vert-qXoaOiMG.js";import{S as Ie}from"./new-tab-light-diPYHp27.js";import"./FloatingActionButton.vue_vue_type_script_setup_true_lang-kOJ_1X5S.js";const Pe={class:"py-2 w-max min-w-[12rem]"},Ae=["onClick"],Le=x({name:"OverflowMenu",__name:"OverflowMenu",props:{items:{}},setup(u){const s=L(!1);function l(o){s.value=!1,o.onClick()}return(o,i)=>(d(),f("div",null,[r(" Button "),e("div",{class:"w-12 h-12 cursor-pointer rounded-full p-3 box-border clickable",onClick:i[0]||(i[0]=c=>s.value=!0),"data-testid":"menu"},[a(t(Ee),{class:"icon opacity-icon"})]),r(" Drop down "),a(ye,{class:"float-right",visible:t(s),onDismiss:i[1]||(i[1]=c=>s.value=!1),onClick:i[2]||(i[2]=M(()=>{},["stop"]))},{default:p(()=>[e("ul",Pe,[(d(!0),f(b,null,R(o.items,c=>(d(),f("li",{key:c.title,class:"cursor-pointer px-6 py-3 clickable",onClick:_=>l(c)},n(c.title),9,Ae))),128))])]),_:1},8,["visible"])]))}}),Re={class:"group flex items-center space-x-4 px-4 py-2 rounded-lg ring-hover"},Me={class:"flex flex-col flex-grow"},Ge={class:"text-on-background text-lg"},Ue={key:0,class:"text-xs uppercase py-0.5 px-1 rounded-sm font-bold bg-secondary text-on-secondary"},Te={class:"text-on-background text-opacity-secondary font-mono pb-1 text-sm"},qe=x({name:"DeviceListItem",__name:"DeviceListItem",props:{name:{},installId:{},isCurrentDevice:{type:Boolean}},emits:["remove"],setup(u,{emit:s}){const l=u,{t:o}=g(),i=w(()=>[{title:o("devices.unlink"),onClick:()=>s("remove",l.installId)}]);return(c,_)=>(d(),f("li",Re,[r(" Platform Icon "),a(v,{class:"icon opacity-icon shrink-0",platform:c.name},null,8,["platform"]),e("div",Me,[r(" Details "),e("p",Ge,[D(n(c.name.trim()||t(o)("devices.unknownDeviceName"))+" ",1),c.isCurrentDevice?(d(),f("span",Ue,n(t(o)("devices.thisDevice")),1)):r("v-if",!0)]),e("p",Te,n(c.installId),1)]),r(" Overflow menu "),a(Le,{items:t(i),class:"flex-shrink-0"},null,8,["items"])]))}}),Be="/assets/cross-platform-preview-H8K9yvlA.svg",Ne="/assets/usage-limits-preview-RSz5b05S.svg",E=u=>(W("data-v-cf55709f"),u=u(),Y(),u),Ve={class:"space-y-16"},Oe={class:"grid w-full min-w-[500px]"},Ke={class:"img1"},Qe={class:"border-2 border-background-inverse border-opacity-secondary rounded-lg overflow-hidden"},je=["src"],ze=E(()=>e("div",{class:"line1 w-32px h-[2px] bg-background-inverse bg-opacity-secondary self-center"},null,-1)),Fe={class:"p1 p-4 bg-background-inverse text-on-background-inverse bg-opacity-secondary rounded-lg min-w-0"},He={class:"img2"},We={class:"border-2 border-background-inverse border-opacity-secondary rounded-lg overflow-hidden"},Ye=["src"],Je=E(()=>e("div",{class:"line2 w-32px h-[2px] bg-background-inverse bg-opacity-secondary self-center"},null,-1)),Xe={class:"p2 p-4 bg-background-inverse text-on-background-inverse bg-opacity-secondary rounded-lg min-w-0"},Ze={class:"text-2xl mb-4"},es=E(()=>e("a",{href:"https://stayfreeapps.com/?download",target:"_blank"}," stayfreeapps.com",-1)),ss={class:"bg-background-inverse bg-opacity-secondary text-on-background-inverse py-2 text-center font-medium rounded-t-lg"},ts={class:"border-x-2 border-b-2 border-background-inverse border-opacity-secondary border-dashed rounded-b-lg flex justify-around p-2 flex-wrap gap-2 overflow-x-hidden"},os={class:"flex gap-2"},ns={class:"text-on-background flex flex-col items-center gap-2 p-2 min-w-[64px]"},as={class:"text-on-background flex flex-col items-center gap-2 p-2 min-w-[64px]"},is={class:"flex gap-2"},cs={class:"text-on-background flex flex-col items-center gap-2 p-2 min-w-[64px]"},rs={class:"text-on-background flex flex-col items-center gap-2 p-2 min-w-[64px]"},ls={class:"text-on-background flex flex-col items-center gap-2 p-2 min-w-[64px]"},ds={class:"flex gap-2"},us={class:"text-on-background flex flex-col items-center gap-2 p-2 min-w-[64px]"},ps={class:"text-on-background flex flex-col items-center gap-2 p-2 min-w-[64px]"},ms={class:"text-on-background flex flex-col items-center gap-2 p-2 min-w-[64px]"},fs=x({__name:"CrossPlatformPreview",setup(u){const{t:s}=g();return(l,o)=>(d(),f("div",Ve,[r(" Graphic "),e("div",Oe,[e("div",Ke,[e("div",Qe,[e("img",{"data-theme":"dark",class:"bg-background z-0",src:t(Be)},null,8,je)])]),ze,e("p",Fe,n(t(s)("devices.empty.usagePreview")),1),e("div",He,[e("div",We,[e("img",{"data-theme":"dark",class:"bg-background z-0",src:t(Ne)},null,8,Ye)])]),Je,e("p",Xe,n(t(s)("devices.empty.limitsPreview")),1)]),r(" Steps "),e("div",null,[e("h3",Ze,n(t(s)("devices.empty.connectTitle")),1),a(xe,null,{default:p(()=>[r(" eslint-disable @intlify/vue-i18n/no-raw-text "),a(A,null,{default:p(()=>[a(G,{keypath:"devices.empty.connectStep1",tag:"span"},{default:p(()=>[es]),_:1})]),_:1}),r(" eslint-enable @intlify/vue-i18n/no-raw-text "),a(A,null,{default:p(()=>[D(n(t(s)("devices.empty.connectStep2")),1)]),_:1})]),_:1})]),r(" Platforms "),e("div",null,[e("h4",ss,n(t(s)("devices.empty.platformsTitle")),1),e("ul",ts,[r(" Mobile "),e("ul",os,[e("li",ns,[a(v,{class:"icon-lg opacity-secondary",platform:"android"}),e("p",null,n(t(s)("devices.platform.android")),1)]),e("li",as,[a(v,{class:"icon-lg opacity-secondary",platform:"ios"}),e("p",null,n(t(s)("devices.platform.ios")),1)])]),r(" Desktop "),e("ul",is,[e("li",cs,[a(v,{class:"icon-lg opacity-secondary",platform:"windows"}),e("p",null,n(t(s)("devices.platform.windows")),1)]),e("li",rs,[a(v,{class:"icon-lg opacity-secondary",platform:"mac"}),e("p",null,n(t(s)("devices.platform.mac")),1)]),e("li",ls,[a(v,{class:"icon-lg opacity-secondary",platform:"linux"}),e("p",null,n(t(s)("devices.platform.linux")),1)])]),r(" Extensions "),e("ul",ds,[e("li",us,[a(v,{class:"icon-lg opacity-secondary",platform:"chrome"}),e("p",null,n(t(s)("devices.platform.chrome")),1)]),e("li",ps,[a(v,{class:"icon-lg opacity-secondary",platform:"firefox"}),e("p",null,n(t(s)("devices.platform.firefox")),1)]),e("li",ms,[a(v,{class:"icon-lg opacity-secondary",platform:"safari"}),e("p",null,n(t(s)("devices.platform.safari")),1)])])])])]))}}),_s=J(fs,[["__scopeId","data-v-cf55709f"]]),vs={key:0,class:"mx-auto py-48"},gs=x({name:"DeviceList",__name:"DeviceList",setup(u){const{t:s}=g(),l=T(),{deviceGroup:o}=U(l),{mutateAsync:i}=ue();l.useRemoteDataWatcher();const c=X(),{data:_,isFetching:h,isError:C,refetch:S}=pe(o),{data:N}=he(L({isCrossPlatform:!0})),V=w(()=>{var m;return((m=N.value)==null?void 0:m.length)??0>0}),O=w(()=>{let m=s("devices.removeConfirmationMessage");return V.value&&(m+=`

`,m+=s("devices.removeWithUsageLimit")),m}),K=be();function Q(m){K.show({title:s("genericConfirmation"),message:O.value,positiveButtonText:s("devices.unlink"),onClickPositive(){return o.value!=null&&z(m).catch(I=>se("[device-list] Failed to remove device from device group",I)),!0},negativeButtonText:s("cancel"),destructive:!0})}const j=Z();async function z(m){o.value!=null&&(await F({installIdToRemove:m,deviceGroupKey:o.value.key}),await i(!1)),j.invalidateQueries({queryKey:me})}const{mutateAsync:F}=ge();return(m,I)=>{var P;return d(),f(b,null,[r(" Error "),t(C)?(d(),y(ke,{key:0,class:"mx-auto py-48",onRetry:t(S)},null,8,["onRetry"])):(P=t(_))!=null&&P.length?r("v-if",!0):(d(),f(b,{key:1},[r(" Loading "),t(h)?(d(),f("div",vs,[a(Ie)])):(d(),f(b,{key:1},[r(" Empty "),a(_s,{class:"py-8"})],2112))],64)),r(" Main list "),a(ee,{tag:"ul",name:"fade",duration:300,class:"space-y-2"},{default:p(()=>[(d(!0),f(b,null,R(t(_),k=>(d(),y(qe,{key:k.install_id,name:k.name,"install-id":k.install_id,"is-current-device":t(c)===k.install_id,onRemove:Q},null,8,["name","install-id","is-current-device"]))),128))]),_:1})],64)}}});function ys(){const u=te(oe.LastSyncedAtStorageKey),s=u?fe(u,null):void 0,{t:l}=g(),{state:o}=(s==null?void 0:s())??{},i=ne(()=>o==null?void 0:o.value);return w(()=>o!=null&&o.value?i.value:l("devices.neverSynced"))}const xs=["onClick"],hs=x({__name:"SyncUsageMessage",setup(u){const{t:s}=g(),l=ys(),{mutate:o,isLoading:i}=we(),c=q();function _(){i.value||o(void 0,{onError(h){c.show({message:B(h),title:s("genericError")})}})}return(h,C)=>(d(),y(G,{class:"text-on-background",keypath:"devices.lastSyncedAt"},{default:p(()=>[e("span",null,n(t(l)),1),e("a",{href:"#",onClick:M(_,["stop","prevent"]),class:ae({"text-on-background text-opacity-disabled pointer-events-none cursor-not-allowed":t(i)})},n(t(s)(t(i)?"devices.syncingUsage":"devices.syncNow")),11,xs)]),_:1}))}});function bs(){const s=De().query[ie],{mutate:l}=Ce(),o=_e(),i=q(),{t:c}=g();ce(()=>{s&&(o.show($.Loading),l(s,{onError:_=>{o.hide($.Loading),i.show({title:c("connectDevice.failedToConnect"),message:c("genericErrorWithMessage",{message:B(_)})})},onSuccess:()=>{o.hide($.Loading),i.show({title:c("connectDevice.success.title"),message:c("connectDevice.success.message")})}}))})}const ks={class:"dashboard-page-title"},As=x({name:"DashboardDevices",__name:"DashboardDevices",setup(u){const{reportEvent:s}=re();s("OPENED_DASHBOARD_DEVICES_PAGE");const{t:l}=g(),{storeUrl:o}=ve(),i=Se();function c(){window.open(o,"_blank")}const{deviceGroup:_}=U(T());return bs(),(h,C)=>{const S=le("page-layout-content-container");return d(),y(S,null,{default:p(()=>[e("h1",ks,n(t(l)("manageDevices")),1),t(i)?(d(),y($e,{key:0,type:"error"},{default:p(()=>[D(n(t(l)("devices.upgradeRequired")),1)]),buttons:p(()=>[a(de,{color:"red",onClick:c},{default:p(()=>[D(n(t(l)("upgrade")),1)]),_:1})]),_:1})):r("v-if",!0),a(gs),t(_)?(d(),y(hs,{key:1})):r("v-if",!0)]),overlay:p(()=>[a(H)]),_:1})}}});export{As as default};
