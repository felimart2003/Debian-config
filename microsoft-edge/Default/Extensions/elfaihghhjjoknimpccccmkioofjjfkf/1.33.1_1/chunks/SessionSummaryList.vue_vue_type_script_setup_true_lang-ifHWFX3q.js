import{z as v,s as A}from"./useAddAppToIgnoreListDialogStore-gHGl-4Ba.js";import{f as M,t as B,ar as P,c as l,aS as c,bF as b,y as C,X as E,bD as F,j as t,o as a,g as o,U as p,F as T,Q as $,i as L,l as O,Y as U,aU as x,q as G,R as N,aA as R}from"./defineAppConfig-_73fm9CR.js";import{S as V}from"./useFiltersStore-Dxp0K-pF.js";import{u as j}from"./useGetSessionSummaries-MLl_K4v8.js";import{c as w}from"./useDateRange-Oe37YC1c.js";const H={key:0,class:"text-error font-bold py-12"},Y={key:1,class:"text-center self-center py-12"},q={key:2},z={key:3,class:"flex-1 py-12 flex flex-col items-center justify-center space-y-2"},Q={class:"text-center"},X={key:0,class:"text-center"},te=M({name:"SessionSummaryList",__name:"SessionSummaryList",props:{startDate:{},endDate:{},primaryMetric:{},installIds:{},platformFilter:{},popup:{type:Boolean},appIds:{},disableAppGroups:{type:Boolean}},setup(u){const e=u,{reportEvent:d}=B(),y=v({interval:R}),f=P(),D=l(()=>({startDate:e.startDate,endDate:e.endDate,installIds:c(e.installIds),platformFilter:e.platformFilter,appIds:c(e.appIds),disableAppGroups:e.disableAppGroups,myInstallId:f.value})),{isLoading:S,isError:_,data:n,error:g}=j(b(e,"primaryMetric"),D),I=l(()=>A(g.value)),k=w();C(n,s=>{if(e.primaryMetric===U.UsageTime){const i=s.map(r=>r.primaryMetricValue).reduce((r,m)=>r+m,0);k(x(i))}},{immediate:!0});const h=l(()=>e.endDate-e.startDate<=E&&F(y.value)===e.startDate);return(s,i)=>t(_)?(a(),o("p",H,p(s.$t("errorColon",{message:t(I)})),1)):t(S)&&t(n).length===0?(a(),o("p",Y,p(s.$t("loadingEllipsis")),1)):t(n).length>0?(a(),o("ul",q,[(a(!0),o(T,null,$(t(n),r=>(a(),G(V,N(r,{key:r.key,onClick:i[0]||(i[0]=m=>s.popup&&t(d)("POPUP_OPEN_DASHBOARD",{to:"app_details"}))}),null,16))),128))])):(a(),o("div",z,[L("p",Q,p(s.$t("popup.noHistory")),1),t(h)?(a(),o("p",X,p(s.$t("popup.noHistoryToday")),1)):O("v-if",!0)]))}});export{te as _};
