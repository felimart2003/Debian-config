import{f as S,o as a,g as d,l as _,i as o,h as E,N as j,O as G,P as W,c as v,r as T,k as l,j as e,S as B,w as k,F as D,Q as P,R as O,T as w,U as b,V as z,W as K,X as Z,Y as Q,Z as Y,$ as X,a0 as V,s as U,v as J,n as N,a1 as ee,a2 as te,D as I,a3 as se,q as H,a4 as oe,_ as ae,B as ne,C as re,E as C,G as ie,K as ce,M as le}from"./defineAppConfig-_73fm9CR.js";import{_ as L,c as de,d as ue,R as pe}from"./useAddAppToIgnoreListDialogStore-gHGl-4Ba.js";import{b as me,d as ge,_ as he,r as _e,c as fe}from"./recent-apps-provider-H_KyoG2W.js";import{u as be}from"./useFocusModeStore-AIskskB8.js";import{u as ve}from"./useGetSessionSummaries-MLl_K4v8.js";import{I as ye}from"./open-in-new-guWx93NA.js";import"./new-tab-light-diPYHp27.js";import"./schedules-4-rrdO9H.js";const ke={class:"flex-1 bg-background relative"},we={key:0,class:"fixed inset-0 z-10 pointer-events-none"},Se={class:"limit-content-width"},xe={class:"pointer-events-auto"},$e={class:"relative h-full"},Ie={class:"limit-content-width flex flex-col pb-28"},Ce=S({name:"FullPageContentContainer",__name:"FullPageContentContainer",setup(n){return(t,s)=>(a(),d("div",ke,[_(" Overlay container over the content (it's width is also limitted, but it doesn't scroll) "),t.$slots.overlay?(a(),d("div",we,[o("div",Se,[o("div",xe,[E(t.$slots,"overlay")])])])):_("v-if",!0),o("div",$e,[o("div",Ie,[E(t.$slots,"default")])])]))}}),Ee={class:"root"},Te=S({name:"FullPageLayout",__name:"FullPageLayout",setup(n){return(t,s)=>(a(),d("div",Ee,[E(t.$slots,"content")]))}}),Be="google",$={duck:{id:"duck",name:"DuckDuckGo",appId:"duckduckgo.com",searchUrl:"https://duckduckgo.com/?q={term}"},google:{id:"google",name:"Google",appId:"google.com",searchUrl:"https://www.google.com/search?q={term}"},bing:{id:"bing",name:"Bing",appId:"bing.com",searchUrl:"https://www.bing.com/search?q={term}"},ecosia:{id:"ecosia",name:"Ecosia",appId:"ecosia.org",searchUrl:"https://www.ecosia.org/search?q={term}"},yahoo:{id:"yahoo",name:"Yahoo",appId:"yahoo.com",searchUrl:"https://search.yahoo.com/search?p={term}"}},Ue={class:"relative shrink-0"},Le={class:"absolute left-0 -bottom-2"},De={class:"w-max py-1"},Ae=["onClick"],Me=o("div",{class:"w-0 h-0 absolute top-[-8px] left-[30px] border-x-8 border-b-8 border-x-transparent border-b-[rgb(var(--color-primary))]"},null,-1),Ne=S({name:"SearchEngineDialog",__name:"SearchEngineDialog",props:{searchEngineId:{required:!0}},emits:["update:searchEngineId"],setup(n){const t=j(n,"searchEngineId"),{baseDialogProps:s,show:p,dismiss:u}=G(),h=W("@stayfree/components/search-engine-dialog/defaults",{tooltipSeen:!1}),r=v(()=>$[t.value]);function y(c){$[c]&&(t.value=c,u())}const f=T();function i(){var c;(c=f.value)==null||c.classList.add("opacity-0"),setTimeout(()=>{h.value.tooltipSeen=!0},501)}return(c,m)=>(a(),d("div",Ue,[_(" Selected Search Engine Icon "),l(L,{class:"icon-lg rounded-full cursor-pointer",src:e(r),platform:e(B).Web,onClick:m[0]||(m[0]=()=>{e(p)(),i()})},null,8,["src","platform"]),_(" This div positions the in-place-dialog "),o("div",Le,[l(me,O({"align-horizontal":"left"},e(s)),{default:k(()=>[o("ul",De,[(a(!0),d(D,null,P(e($),g=>(a(),d("li",{class:"flex items-center py-1 pl-3 pr-6 cursor-pointer",key:g.id,onClick:x=>y(g.id)},[l(L,{class:"icon mr-2 rounded-full",src:g,platform:e(B).Web},null,8,["src","platform"]),o("span",null,b(g.name),1)],8,Ae))),128))])]),_:1},16),e(h).tooltipSeen?_("v-if",!0):(a(),d("div",{key:0,ref_key:"tooltip",ref:f,class:"absolute top-[17px] left-[-22px] flex items-center gap-1 py-1 px-3 rounded-full bg-primary text-on-primary text-sm whitespace-nowrap cursor-pointer transition-opacity duration-500",onClick:i},[Me,w(" "+b(c.$t("newtab.searchEngineTooltip"))+" ",1),l(e(de),{class:"inline"})],512))])]))}});function He(){const{state:n}=ue(),t=v(()=>({appIds:n.value??[],metricType:z.UsageTime})),{data:s}=ge(t),p=be(),u=K(),h=v(()=>({startDate:u,endDate:u+Z})),{data:r,isLoading:y}=ve(Q.UsageTime,h);return{suggestedWebsites:v(()=>{const i=Y(s.value??[],"appId"),c=new Set(p.websites),m=X(r.value??[],"appId");return n.value.map(g=>{var A,M;const x=((A=m[g])==null?void 0:A.primaryMetricValue)??0,F=!!((M=i[g])!=null&&M.find(q=>q.currentDuration<=x)),R=p.isEnabled&&c.has(g);return{hostname:g,isBlockedByUsageLimit:F,isBlockedByFocusMode:R}})}),isLoading:y}}const We={class:"flex justify-center flex-wrap gap-2 my-10 mx-8"},Pe=["href","title"],Ve=S({name:"SuggestedWebsiteList",__name:"SuggestedWebsiteList",setup(n){const{t}=V(),{suggestedWebsites:s}=He();function p({hostname:u,isBlockedByUsageLimit:h,isBlockedByFocusMode:r}){return h?t("suggestedWebsiteList.blockedByLimit",{hostname:u}):r?t("suggestedWebsiteList.blockedByFocusMode",{hostname:u}):u}return(u,h)=>(a(),d("div",We,[(a(!0),d(D,null,P(e(s),r=>(a(),d("a",{class:U(["p-2 rounded-full bg-on-background bg-opacity-10",{"saturate-0 opacity-50":r.isBlockedByUsageLimit||r.isBlockedByFocusMode}]),key:r.hostname,href:`https://${r.hostname}`,title:p(r)},[l(L,{class:"w-8 rounded-full",src:{appId:r.hostname},platform:e(B).Web},null,8,["src","platform"])],10,Pe))),128))]))}}),Fe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Re=o("path",{fill:"currentColor",d:"M10 21v-2H6.41l4.5-4.5l-1.41-1.41l-4.5 4.5V14H3v7h7m4.5-10.09l4.5-4.5V10h2V3h-7v2h3.59l-4.5 4.5l1.41 1.41Z"},null,-1),qe=[Re];function je(n,t){return a(),d("svg",Fe,qe)}const Ge={name:"mdi-arrow-expand",render:je},Oe={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ze=o("path",{fill:"currentColor",d:"M19.5 3.09L15 7.59V4h-2v7h7V9h-3.59l4.5-4.5l-1.41-1.41M4 13v2h3.59l-4.5 4.5l1.41 1.41l4.5-4.5V20h2v-7H4Z"},null,-1),Ke=[ze];function Ze(n,t){return a(),d("svg",Oe,Ke)}const Qe={name:"mdi-arrow-collapse",render:Ze},Ye={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Xe=o("path",{fill:"currentColor",d:"M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5l-1.5 1.5l-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16A6.5 6.5 0 0 1 3 9.5A6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14S14 12 14 9.5S12 5 9.5 5Z"},null,-1),Je=[Xe];function et(n,t){return a(),d("svg",Ye,Je)}const tt={name:"mdi-magnify",render:et},st={class:"flex items-center p-2 bg-background theme-dark:bg-on-background rounded-full w-full max-w-3xl"},ot=["placeholder","onKeyup"],at={class:"tabs flex justify-center absolute bottom-0"},nt=["href"],rt={class:"tabs-content relative z-0"},it=S({name:"NewTabIndex",__name:"NewTabIndex",setup(n){J();const{t}=V();document.title=t("newtab.title");const s=W("@stayfree/page/new-tab/defaults",{isHeaderSectionCollapsed:!0,searchEngineId:Be}),p=v({get(){return s.value.searchEngineId},set(i){s.value.searchEngineId=i}}),u=v(()=>$[p.value]),h=T(),r=T();function y(){s.value.isHeaderSectionCollapsed=!s.value.isHeaderSectionCollapsed}function f(){var c,m;const i=(m=oe((c=r.value)==null?void 0:c.value))==null?void 0:m.toString();i&&(location.href=u.value.searchUrl.replace("{term}",i))}return(i,c)=>{const m=N("router-link"),g=N("router-view");return a(),d(D,null,[l(Te,null,{content:k(()=>[o("div",{ref_key:"headerSection",ref:h,class:U(["flex items-center justify-center relative md:sticky z-10 bg-input",{"md:top-0":e(s).isHeaderSectionCollapsed,"md:top-0 lg:h-[80vh] lg:top-[calc(304px-80vh)]":!e(s).isHeaderSectionCollapsed}])},[o("div",{class:U(["flex flex-col items-center my-16 mx-6 w-full",{"lg:sticky lg:top-16":!e(s).isHeaderSectionCollapsed}])},[o("div",st,[_(" Search Engine Icon/Menu "),l(Ne,{searchEngineId:e(p),"onUpdate:searchEngineId":c[0]||(c[0]=x=>ee(p)?p.value=x:null)},null,8,["searchEngineId"]),_(" Search Input "),o("input",{ref_key:"searchbox",ref:r,type:"text",class:"outline-none mx-3 w-full bg-transparent theme-dark:text-on-primary",placeholder:i.$t("newtab.searchboxPlaceholder",{searchEngineName:e(u).name}),onKeyup:te(f,["enter"])},null,40,ot),_(" Search Submit Button "),l(e(tt),{class:"icon-lg shrink-0 cursor-pointer opacity-50",onClick:f})]),l(Ve)],2),o("div",at,[l(m,{key:"usage-stats",class:"tab","active-class":"tab-active",to:e(I).overview},{default:k(()=>[w(b(i.$t("newtab.usageStatsTab")),1)]),_:1},8,["to"]),l(m,{key:"usage-limits",class:"tab","active-class":"tab-active",to:e(I).limits},{default:k(()=>[w(b(i.$t("websiteLimits")),1)]),_:1},8,["to"]),l(m,{key:"focus-mode",class:"tab","active-class":"tab-active",to:e(I).focus},{default:k(()=>[w(b(i.$t("focusMode.title")),1)]),_:1},8,["to"]),o("a",{key:"dashboard",target:"_blank",class:"tab tab-link",href:e(se)("")},[w(b(i.$t("dashboard.statsTitle"))+" ",1),l(e(ye),{class:"icon-sm mt-0.5 ml-1.5"})],8,nt)])],2),o("div",rt,[l(g)]),o("div",{class:"fixed top-2 right-2 p-2 z-40 opacity-50 text-on-background cursor-pointer hidden lg:block",onClick:y},[e(s).isHeaderSectionCollapsed?(a(),H(e(Ge),{key:0})):(a(),H(e(Qe),{key:1}))])]),_:1}),l(he)],64)}}}),ct=ae(it,[["__scopeId","data-v-fa0b4997"]]);function lt(n){window.document.title=ne.global.t("appName");const t=pe(ct,["h-full"]),s=re("new-tab",t,n,_e).component("page-layout-content-container",Ce).provide(C.DefaultUsageLimitType,n.defaultUsageLimitType).provide(C.InstalledAppsProvider,n.installedAppsProvider).provide(C.IsNewTabPage,!0);return{mount:s.mount.bind(s)}}const dt=ie({context:"new-tab",defaultUsageLimitType:ce.Web,installedAppsProvider:fe(le())});lt(dt).mount("#app");
