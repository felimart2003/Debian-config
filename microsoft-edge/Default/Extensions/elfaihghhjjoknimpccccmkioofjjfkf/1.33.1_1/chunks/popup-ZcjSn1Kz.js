import{f as C,o as i,g as y,l as k,i as c,h as P,F as H,aT as K,r as E,b as Z,a$ as ae,c as x,X as T,a0 as w,t as R,D as O,n as X,U as p,q as m,w as a,j as e,T as $,k as l,s as M,aU as le,ad as g,aA as Y,bi as re,N as ce,b3 as ue,bj as de,ak as V,_ as pe,W as me,a1 as A,v as fe,B as _e,C as ve,E as be,G as he}from"./defineAppConfig-_73fm9CR.js";import{n as ke,C as ye,a as Se,z as J,I as Ce,k as $e,c as xe,B as De,R as Pe}from"./useAddAppToIgnoreListDialogStore-gHGl-4Ba.js";import{u as Q}from"./useRequirePin-prOa10D6.js";import{u as j}from"./useFocusModeStore-AIskskB8.js";import{I as ge}from"./cog-w7taEnRH.js";import{I as Me,u as we,_ as Be}from"./useFiltersStore-Dxp0K-pF.js";import{I as ee}from"./timer-Tx1ppbqt.js";import{u as Ie}from"./useSortedFocusModeWebsites-4hN7HDC4.js";import{u as Te}from"./useAllowedDateRange-JsVHnaPb.js";import{i as Fe,p as Ae,a as Oe}from"./useDateRange-Oe37YC1c.js";import{_ as Ee}from"./SessionSummaryList.vue_vue_type_script_setup_true_lang-ifHWFX3q.js";import{u as te}from"./useReviewPromptStore-YD3P9EIY.js";import{u as se}from"./useScheduleCallPromptStore-dfXMc94b.js";import{D as Re,o as Le}from"./links-u9LD1l4y.js";import"./schedules-4-rrdO9H.js";import"./useVibrantColor-SQN7_oFR.js";import"./useAddIgnoredAppMutation-CH2IvljW.js";import"./useGetSessionSummaries-MLl_K4v8.js";import"./min-search-date-s1KccwK4.js";const Ue={class:"w-[28rem] h-[24rem] flex flex-col"},Ne={class:"flex flex-col space-y-2 p-4 overflow-auto grow"},oe=C({name:"PopupScaffold",__name:"PopupScaffold",setup(s){return(t,o)=>(i(),y(H,null,[k(" Fixed size content "),c("div",Ue,[c("div",Ne,[P(t.$slots,"top-bar"),P(t.$slots,"content")]),P(t.$slots,"bottom")]),P(t.$slots,"snackbar"),P(t.$slots,"overlay")],64))}}),Ve=T;function W(s){const{deviceGroup:t}=K(ke()),{state:o,mutateAsync:n}=ye(),{state:r}=Se(),u=E(!1);Z(()=>{u.value=!0},(s==null?void 0:s.autoShowTimeout)??1e3);const d=J({interval:ae}),f=x(()=>u.value&&!o.value&&t.value==null&&r.value!=null&&d.value>=r.value+Ve);function b(){return n(!0)}return{isVisible:f,neverAutoShowAgain:b}}const He={class:"flex items-center space-x-2"},je={class:"text-xl grow inline"},We={class:"flex space-x-1"},Ge=["title"],qe=["title"],ne=C({name:"PopupTopBar",__name:"PopupTopBar",props:{title:{},isDashboardHidden:{type:Boolean},isFilterHidden:{type:Boolean},isFocusModeHidden:{type:Boolean},isDevicesHidden:{type:Boolean},isSettingsHidden:{type:Boolean}},emits:["clickFilter"],setup(s,{emit:t}){const o=s,{t:n}=w(),{reportEvent:r}=R(),u=j(),d=x(()=>u.isEnabled?n("focusMode.disableFocusMode"):n("focusMode.activateFocusMode")),f=O.overview,b=O.settings,h=O.devices;function _(){r("POPUP_OPEN_DASHBOARD",{to:"home"})}function D(){r("POPUP_OPEN_DASHBOARD",{to:"devices"})}function B(){r("POPUP_OPEN_DASHBOARD",{to:"settings"})}const{isVisible:v}=W({autoShowTimeout:250});function S(){u.enableIndefinitely()}const L=Q(u.disable);return(I,F)=>{const U=X("router-link");return i(),y(H,null,[k(" Top header "),c("div",He,[c("h1",je,p(o.title),1),c("div",We,[I.isDashboardHidden?k("v-if",!0):(i(),m(U,{key:0,to:e(f),onClick:_,class:"font-bold popup-clickable-icon hover:no-underline px-3"},{default:a(()=>[$(p(e(n)("dashboard.statsTitle")),1)]),_:1},8,["to"])),I.isFilterHidden?k("v-if",!0):(i(),y("div",{key:1,class:"popup-clickable-icon",title:e(n)("filter"),onClick:F[0]||(F[0]=ie=>t("clickFilter"))},[l(e(Me),{class:"icon-sm"})],8,Ge)),I.isDevicesHidden?k("v-if",!0):(i(),m(U,{key:2,to:e(h),onClick:D,class:M({"popup-clickable-icon":!e(v),"popup-clickable-icon-primary":e(v)}),title:e(n)("devices.connectDeviceTitle")},{default:a(()=>[l(e(Ce),{class:"icon-sm"})]),_:1},8,["to","class","title"])),I.isFocusModeHidden?k("v-if",!0):(i(),y("div",{key:3,onClick:F[1]||(F[1]=ie=>e(u).isEnabled?e(L)():S()),title:e(d),class:M({"popup-clickable-icon":!e(u).isEnabled,"popup-clickable-icon-primary":e(u).isEnabled})},[l(e(ee),{class:"icon-sm"})],10,qe)),I.isSettingsHidden?k("v-if",!0):(i(),m(U,{key:4,to:e(b),onClick:B,class:"popup-clickable-icon",title:e(n)("settings")},{default:a(()=>[l(e(ge),{class:"icon-sm"})]),_:1},8,["to","title"]))])])],2112)}}}),ze={key:0,class:"text-opacity-secondary text-xs"},Ke={class:"flex-1 flex flex-col items-center justify-center"},Ze={key:1,class:"space-y-2"},Xe={class:"text-opacity-secondary text-xs uppercase"},Ye={class:"flex items-center gap-2"},Je={class:"text-5xl text-on-surface font-mono font-light"},Qe={key:2,class:"space-y-2 mt-3"},et={class:"text-center text-error"},tt={class:"flex justify-center space-x-4"},st=C({name:"PopupFocusMode",__name:"PopupFocusMode",setup(s){const{t}=w(),{reportEvent:o}=R(),n=j(),r=O.focus,u=J({interval:Y}),{websites:d}=Ie(),f=x(()=>{if(!n.enabledUntil)return;const B=n.enabledUntil-u.value;return le(B)}),b=x(()=>f.value===void 0);function h(){o("POPUP_OPEN_DASHBOARD",{to:"focus"})}const _=x(()=>!d.value.length),D=Q(()=>{n.disable()});return(B,v)=>{const S=X("router-link");return i(),m(oe,null,{"top-bar":a(()=>[l(ne,{title:e(t)("focusMode.title"),"is-filter-hidden":!0,"is-devices-hidden":!0},null,8,["title"])]),content:a(()=>[e(n).reason?(i(),y("p",ze,p(e(t)("focusMode.shortStatus",{reason:e(n).reason})),1)):k("v-if",!0),c("div",Ke,[e(b)?(i(),m(g,{key:0,class:"w-52 h-12 text-lg rounded-lg",onClick:v[0]||(v[0]=L=>e(D)())},{default:a(()=>[$(p(e(t)("focusMode.disableFocusMode")),1)]),_:1})):(i(),y("div",Ze,[c("p",Xe,p(e(t)("focusMode.timeRemaining")),1),c("div",Ye,[l(e(ee),{class:"icon-lg text-primary"}),c("span",Je,p(e(f)),1)])])),e(_)?(i(),y("div",Qe,[c("p",et,p(e(t)("focusMode.popupSiteListEmptyWarning")),1)])):k("v-if",!0)]),c("div",tt,[l(S,{to:e(r),onClick:h},{default:a(()=>[l(g,{color:"transparent",type:"submit"},{default:a(()=>[$(p(e(t)("focusMode.settings")),1)]),_:1})]),_:1},8,["to"]),!e(b)&&!e(n).activeSchedule?(i(),m(g,{key:0,color:"transparent",onClick:v[1]||(v[1]=L=>e(n).disable())},{default:a(()=>[$(p(e(t)("focusMode.disableFocusMode")),1)]),_:1})):k("v-if",!0),!e(b)&&e(n).activeSchedule?(i(),m(S,{key:1,to:e(r),onClick:h},{default:a(()=>[l(g,{color:"transparent",type:"submit"},{default:a(()=>[$(p(e(t)("schedules.editSchedule")),1)]),_:1})]),_:1},8,["to"])):k("v-if",!0)])]),_:1})}}});var q=0/0,ot="[object Symbol]",nt=/^\s+|\s+$/g,it=/^[-+]0x[0-9a-f]+$/i,at=/^0b[01]+$/i,lt=/^0o[0-7]+$/i,rt=parseInt,ct=Object.prototype,ut=ct.toString;function dt(s,t,o){return s===s&&(o!==void 0&&(s=s<=o?s:o),t!==void 0&&(s=s>=t?s:t)),s}function z(s){var t=typeof s;return!!s&&(t=="object"||t=="function")}function pt(s){return!!s&&typeof s=="object"}function mt(s){return typeof s=="symbol"||pt(s)&&ut.call(s)==ot}function N(s){if(typeof s=="number")return s;if(mt(s))return q;if(z(s)){var t=typeof s.valueOf=="function"?s.valueOf():s;s=z(t)?t+"":t}if(typeof s!="string")return s===0?s:+s;s=s.replace(nt,"");var o=at.test(s);return o||lt.test(s)?rt(s.slice(2),o?2:8):it.test(s)?q:+s}function ft(s,t,o){return o===void 0&&(o=t,t=void 0),o!==void 0&&(o=N(o),o=o===o?o:0),t!==void 0&&(t=N(t),t=t===t?t:0),dt(N(s),t,o)}var _t=ft;const vt=re(_t),bt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ht=c("path",{fill:"currentColor",d:"M18.41 7.41L17 6l-6 6l6 6l1.41-1.41L13.83 12l4.58-4.59m-6 0L11 6l-6 6l6 6l1.41-1.41L7.83 12l4.58-4.59Z"},null,-1),kt=[ht];function yt(s,t){return i(),y("svg",bt,kt)}const St={name:"mdi-chevron-double-left",render:yt},Ct={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},$t=c("path",{fill:"currentColor",d:"M5.59 7.41L7 6l6 6l-6 6l-1.41-1.41L10.17 12L5.59 7.41m6 0L13 6l6 6l-6 6l-1.41-1.41L16.17 12l-4.58-4.59Z"},null,-1),xt=[$t];function Dt(s,t){return i(),y("svg",Ct,xt)}const Pt={name:"mdi-chevron-double-right",render:Dt},gt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Mt=c("path",{fill:"currentColor",d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42Z"},null,-1),wt=[Mt];function Bt(s,t){return i(),y("svg",gt,wt)}const It={name:"mdi-chevron-left",render:Bt},Tt={class:"flex justify-center items-center py-2 space-x-4 px-4"},Ft=["title"],At=["title"],Ot={class:"flex-1 flex flex-col items-center space-y-1"},Et={class:"font-bold"},Rt={class:"font-mono text-sm text-opacity-secondary"},Lt=["title"],Ut=["title"],Nt=C({name:"DateInputBar",__name:"DateInputBar",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(s){const t=ce(s,"modelValue"),{minDate:o,maxDate:n}=Te();function r(h){const _=t.value+h*T;t.value=vt(_,o.value,n.value)}const u=x(()=>ue(t.value)),d=Fe(),f=x(()=>t.value+T>n.value),b=x(()=>t.value-T<o.value);return(h,_)=>(i(),y("div",Tt,[c("div",{title:h.$t("popup.back1Week")},[l(e(St),{class:M(["icon-button text-on-surface text-opacity-secondary",{disabled:e(b)}]),onClick:_[0]||(_[0]=D=>r(-7))},null,8,["class"])],8,Ft),c("div",{title:h.$t("popup.back1Day")},[l(e(It),{class:M(["icon-button text-on-surface text-opacity-secondary",{disabled:e(b)}]),onClick:_[1]||(_[1]=D=>r(-1))},null,8,["class"])],8,At),c("div",Ot,[c("h4",Et,p(e(u)),1),c("h5",Rt,p(e(d)),1)]),c("div",{title:h.$t("popup.forward1Day")},[l(e($e),{class:M(["icon-button text-on-surface text-opacity-secondary",{disabled:e(f)}]),onClick:_[2]||(_[2]=D=>r(1))},null,8,["class"])],8,Lt),c("div",{title:h.$t("popup.forward1Week")},[l(e(Pt),{class:M(["icon-button text-on-surface text-opacity-secondary",{disabled:e(f)}]),onClick:_[3]||(_[3]=D=>r(7))},null,8,["class"])],8,Ut)]))}}),Vt={class:"bg-primary p-2 flex gap-2 items-center"},Ht={class:"flex-1 text-ellipsis pl-2 text-on-primary"},jt={class:"flex flex-shrink-0 gap-2"},G=C({name:"SnackbarContainer",__name:"SnackbarContainer",emits:["clickDismiss"],setup(s,{emit:t}){return(o,n)=>(i(),y("div",Vt,[c("p",Ht,[P(o.$slots,"title")]),c("div",jt,[P(o.$slots,"buttons")]),c("div",{class:"p-2 rounded-full clickable cursor-pointer",onClick:n[0]||(n[0]=r=>t("clickDismiss"))},[l(e(xe),{class:"icon text-on-primary"})])]))}}),Wt=C({name:"CrossPlatformSnackbar",__name:"CrossPlatformSnackbar",setup(s){const{t}=w(),{reportEvent:o}=R(),{neverAutoShowAgain:n}=W();function r(){n(),o("CROSS_PLATFORM_SNACKBAR_CLICKED"),window.open(de())}function u(){n(),o("CROSS_PLATFORM_SNACKBAR_DISMISSED")}return(d,f)=>(i(),m(G,{onClickDismiss:u},{title:a(()=>[$(p(e(t)("crossPlatformPrompt.title")),1)]),buttons:a(()=>[l(g,{color:"bg",onClick:r},{default:a(()=>[$(p(e(t)("crossPlatformPrompt.learnMoreButton")),1)]),_:1})]),_:1}))}}),Gt=C({name:"ReviewSnackbar",__name:"ReviewSnackbar",setup(s){const{t}=w(),o=te();return(n,r)=>(i(),m(G,{onClickDismiss:e(o).dismiss},{title:a(()=>[$(p(e(t)("reviewPrompt.title")),1)]),buttons:a(()=>[l(g,{color:"bg",onClick:e(o).submitReview},{default:a(()=>[$(p(e(t)("reviewPrompt.callToAction")),1)]),_:1},8,["onClick"])]),_:1},8,["onClickDismiss"]))}}),qt=C({name:"ScheduleCallSnackbar",__name:"ScheduleCallSnackbar",setup(s){const{t}=w(),o=se();return(n,r)=>(i(),m(G,{onClickDismiss:e(o).dismiss},{title:a(()=>[$(p(e(t)("scheduleCallPrompt.title")),1)]),buttons:a(()=>[l(g,{color:"bg",onClick:e(o).scheduleCall},{default:a(()=>[$(p(e(t)("scheduleCallPrompt.callButton")),1)]),_:1},8,["onClick"])]),_:1},8,["onClickDismiss"]))}}),zt={key:0,class:"bg-primary relative min-h-[56px]"},Kt=C({name:"PopupSnackbarManager",__name:"PopupSnackbarManager",setup(s){const t=te(),o=se(),{isVisible:n}=W({autoShowTimeout:250}),r=x(()=>{let d=0;return t.isVisible&&d++,n.value&&d++,o.isVisible&&d++,d}),u=E(!1);return Z(()=>{u.value=!0},.25*Y,{immediate:!0}),(d,f)=>(i(),m(V,{name:"fade"},{default:a(()=>[e(r)>0?(i(),y("div",zt,[l(V,{name:"slide-left-right",css:e(u)},{default:a(()=>[e(t).isVisible?(i(),m(Gt,{key:"review"})):e(n)?(i(),m(Wt,{key:"cross-platform"})):e(o).isVisible?(i(),m(qt,{key:"schedule-call"})):k("v-if",!0)]),_:1},8,["css"])])):k("v-if",!0)]),_:1}))}}),Zt=pe(Kt,[["__scopeId","data-v-c278d2d7"]]),Xt={key:0,class:"fixed inset-0 bg-background flex"},Yt=C({name:"PopupStats",__name:"PopupStats",setup(s){const{t}=w(),{reportEvent:o}=R();Ae();const n=E(me()),r=x(()=>n.value+T),u=x(()=>({startDate:n.value,endDate:r.value}));Oe(u);const{selectedMetric:d,platformFilter:f,selectedDevices:b}=K(we()),h=E(!1);function _(){o("OPENED_POPUP_FILTER"),h.value=!0}function D(){h.value=!1}return(B,v)=>(i(),m(oe,null,{"top-bar":a(()=>[l(ne,{title:e(t)("appName"),onClickFilter:_},null,8,["title"])]),content:a(()=>[l(Ee,{"start-date":e(n),"end-date":e(r),"primary-metric":e(d),"platform-filter":e(f),"install-ids":e(b),popup:""},null,8,["start-date","end-date","primary-metric","platform-filter","install-ids"])]),bottom:a(()=>[l(Nt,{class:"flex-shrink-0 bg-input",modelValue:e(n),"onUpdate:modelValue":v[0]||(v[0]=S=>A(n)?n.value=S:null)},null,8,["modelValue"])]),snackbar:a(()=>[k(" Dynamic Size Content "),l(Zt)]),overlay:a(()=>[l(V,{name:"fade"},{default:a(()=>[e(h)?(i(),y("div",Xt,[l(Be,{class:"w-72 m-auto","primary-metric":e(d),"onUpdate:primaryMetric":v[1]||(v[1]=S=>A(d)?d.value=S:null),"install-ids":e(b),"onUpdate:installIds":v[2]||(v[2]=S=>A(b)?b.value=S:null),"platform-filter":e(f),"onUpdate:platformFilter":v[3]||(v[3]=S=>A(f)?f.value=S:null),onCancel:D,onSubmit:D},null,8,["primary-metric","install-ids","platform-filter"])])):k("v-if",!0)]),_:1})]),_:1}))}}),Jt=C({name:"PopupGlobalDialogs",__name:"PopupGlobalDialogs",setup(s){return(t,o)=>(i(),m(De))}}),Qt=C({name:"PopupIndex",__name:"PopupIndex",setup(s){fe();const t=j();return(o,n)=>(i(),y(H,null,[e(t).isEnabled?(i(),m(st,{key:0})):(i(),m(Yt,{key:1})),l(Jt)],64))}});function es(s){window.document.title=_e.global.t("appName");const t=Pe(Qt,["w-[28rem]","h-[20rem]"]),o=ve("popup",t,s).provide(be.IsPopup,!0).component("router-link",Re(s.onClickDashboardLink));return s.analytics.reportEvent("OPENED_POPUP"),{mount:o.mount.bind(o)}}const ts=he({context:"popup",onClickDashboardLink:Le});es(ts).mount("#app");
