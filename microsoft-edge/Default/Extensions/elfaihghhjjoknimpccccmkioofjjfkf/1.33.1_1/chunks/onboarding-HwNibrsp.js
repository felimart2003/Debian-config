import{a0 as H,c as R,b8 as fe,f as T,N as _e,r as w,o as m,g as I,a6 as he,aH as ve,i as d,F as se,Q as ie,q as N,w as a,U as f,T as C,j as e,a1 as L,k as o,ad as D,ae,t as E,au as re,y as le,b9 as be,as as ye,ar as ke,at as we,O as ce,I as b,l as B,R as ue,b4 as de,aX as Ce,aK as Y,ba as Ie,h as X,al as Oe,E as F,a as K,u as xe,v as me,n as Ne,D as W,s as z,ak as Te,bb as $e,bc as q,aA as j,az as Ae,ay as Se,bd as De,aD as Re,_ as Be,aj as Pe,aB as Ee,aQ as Ve,B as He,C as Ye,aR as Le,x as Me,aE as Ue,am as Ge,J as Z,ap as ee,ah as te,be as pe,a$ as Q,bf as oe,G as We}from"./defineAppConfig-_73fm9CR.js";import{b as Fe,c as ze,d as M,a as J,u as qe,I as je,n as Ke,e as Qe,_ as Xe,S as Ze}from"./new-tab-light-diPYHp27.js";import{D as Je,o as et}from"./links-u9LD1l4y.js";import{r as tt}from"./min-search-date-s1KccwK4.js";const ot="/assets/onboarding-illustration-U-FlrgYc.svg";function nt(g){const t=new Date().getFullYear(),{t:n}=H();function i(c){return t-c<100}function s(c){return c<t}function r(){if(!g.value.trim())return{message:void 0,isValid:!1};if(g.value.length!==4)return{message:n("onboarding.birthYear.errors.length"),isValid:!1};const u=Number(g.value);return isNaN(u)?{message:n("onboarding.birthYear.errors.nan"),isValid:!1}:s(u)?i(u)?{isValid:!0,isOver18:fe(u),int:u}:{message:n("onboarding.birthYear.errors.ageMax"),isValid:!1}:{message:n("onboarding.birthYear.errors.ageMin"),isValid:!1}}return R(r)}const st={class:"relative flex justify-center"},it=["aria-label"],at=T({name:"BirthYearInput",__name:"BirthYearInput",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(g){const t=_e(g,"modelValue"),n=w(),{digits:i}=Fe({inputLength:4,inputRef:n,inputValue:t,focusOnMount:!0});return(s,r)=>(m(),I("div",st,[he(d("input",{ref_key:"input",ref:n,class:"absolute left-0 bottom-0 w-0 h-0 text-black","aria-label":s.$t("onboarding.birthYear.inputLabel"),type:"text","onUpdate:modelValue":r[0]||(r[0]=c=>t.value=c)},null,8,it),[[ve,t.value]]),d("ul",{class:"flex space-x-2 cursor-text",onClick:r[1]||(r[1]=c=>{var u;return(u=e(n))==null?void 0:u.focus()})},[(m(!0),I(se,null,ie(e(i),(c,u)=>(m(),N(ze,{key:u,index:u,focused:c.focused},{default:a(()=>[C(f(c.value),1)]),_:2},1032,["index","focused"]))),128))])]))}}),rt=T({name:"ConfirmBirthYearDialogContent",__name:"ConfirmBirthYearDialogContent",emits:["continue","createUser","declinePrivacyPolicy"],setup(g,{emit:t}){const{t:n}=H(),i=w(!0),s=w();M(s);function r(){i.value?t("createUser"):t("declinePrivacyPolicy"),t("continue")}return(c,u)=>(m(),N(ae,{class:"w-108"},{title:a(()=>[C(f(e(n)("onboarding.birthYear.confirmDialog.title")),1)]),body:a(()=>[o(J,{modelValue:e(i),"onUpdate:modelValue":u[0]||(u[0]=p=>L(i)?i.value=p:null),label:e(n)("onboarding.birthYear.confirmDialog.confirmLabel")},null,8,["modelValue","label"])]),buttons:a(()=>[o(D,{ref_key:"continueButton",ref:s,onClick:r},{default:a(()=>[C(f(e(n)("continue")),1)]),_:1},512)]),_:1}))}}),lt={class:"onboarding-link",href:"https://stayfreeapps.com/terms",target:"_blank"},ct={key:0,class:"text-error text-sm text-center"},ut=T({name:"BirthYearSlide",__name:"BirthYearSlide",emits:["continue"],setup(g,{emit:t}){const{t:n}=H(),{reportEvent:i}=E(),s=re(),r=qe(),c=w(""),u=nt(c);le(c,async S=>{S.length===4&&await y()});const p=w(!1),y=be(async()=>{p.value=!0,u.value.isValid&&(u.value.isOver18?await l():await x(),await s.setBirthYear(u.value.int).catch(S=>Y("[birth-year-slide] Error setting birth year in storage",S)),i("ONBOARDING_ENTERED_BIRTH_YEAR"),i("ONBOARDING_BIRTH_YEAR_CONTINUE"),t("continue"))},200);function _(){i("ONBOARDING_SKIPPED_BIRTH_YEAR"),i("ONBOARDING_BIRTH_YEAR_CONTINUE"),t("continue")}const O=ye(),$=ke(),v=we();function l(){O.canUploadData&&v.createDevice({installId:$.value,appId:r}),i("ONBOARDING_BIRTH_YEAR_OVER_18")}async function x(){await s.setAcceptedDataCollection("declined").catch(S=>Y("[privacy-slide] Failed to decline data collection",S)),await s.setAskTosAgain(!0),i("ONBOARDING_BIRTH_YEAR_UNDER_18")}const k=R(()=>{if(!(!p.value||u.value.isValid))return u.value.message}),{baseDialogProps:V,show:U}=ce();return(S,P)=>(m(),I("form",{"data-testid":"birth-year-page",class:"pager-slide",onSubmit:P[1]||(P[1]=Ce((...h)=>e(y)&&e(y)(...h),["prevent"]))},[o(b,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.birthYear.cardTitle"},{default:a(()=>[d("a",lt,f(S.$t("termsOfService").toLowerCase()),1)]),_:1}),o(b,{tag:"p",keypath:"onboarding.birthYear.cardMessage"}),o(b,{tag:"p",keypath:"onboarding.birthYear.confirm"}),o(at,{modelValue:e(c),"onUpdate:modelValue":P[0]||(P[0]=h=>L(c)?c.value=h:null)},null,8,["modelValue"]),e(k)?(m(),I("p",ct,f(e(k)),1)):B("v-if",!0),o(D,{class:"self-end",color:"transparent",onClick:e(U)},{default:a(()=>[C(f(e(n)("skip")),1)]),_:1},8,["onClick"]),o(de,ue(e(V),{"dismiss-disabled":""}),{default:a(()=>[o(rt,{onContinue:_,onCreateUser:l,onDeclinePrivacyPolicy:x})]),_:1},16)],32))}}),dt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},mt=d("path",{fill:"currentColor",d:"M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2m-7.2 2l1.2-1.2V4h4v8.8l1.2 1.2H8.8Z"},null,-1),pt=[mt];function gt(g,t){return m(),I("svg",dt,pt)}const ft={name:"mdi-pin-outline",render:gt},_t={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ht=d("path",{fill:"currentColor",d:"M20.5 11H19V7a2 2 0 0 0-2-2h-4V3.5A2.5 2.5 0 0 0 10.5 1A2.5 2.5 0 0 0 8 3.5V5H4a2 2 0 0 0-2 2v3.8h1.5c1.5 0 2.7 1.2 2.7 2.7c0 1.5-1.2 2.7-2.7 2.7H2V20a2 2 0 0 0 2 2h3.8v-1.5c0-1.5 1.2-2.7 2.7-2.7c1.5 0 2.7 1.2 2.7 2.7V22H17a2 2 0 0 0 2-2v-4h1.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5Z"},null,-1),vt=[ht];function bt(g,t){return m(),I("svg",_t,vt)}const yt={name:"mdi-puzzle",render:bt},kt={class:"px-4 py-4 rounded-md space-y-4 w-80 flex flex-col fixed right-5 top-5 bg-on-primary shadow-xl z-10"},wt={class:"flex flex-row justify-between content-center"},Ct={class:"text-lg font-bold"},It=d("div",{class:"hidden lg:block h-px bg-on-background bg-opacity-divider"},null,-1),Ot=T({name:"ActionRequiredScaffold",__name:"ActionRequiredScaffold",props:{title:{}},setup(g){const t=g;return(n,i)=>(m(),I("div",kt,[d("div",wt,[d("h2",Ct,f(t.title),1),o(Ie,{class:"w-7 h-7",src:"icon-48.png"})]),It,d("h3",null,[X(n.$slots,"description")]),X(n.$slots,"button")]))}}),xt=T({name:"ActionRequiredPinToolbar",__name:"ActionRequiredPinToolbar",emits:["click"],setup(g){return(t,n)=>(m(),N(Ot,{title:t.$t("onboarding.pinToolbar.title")},{description:a(()=>[o(b,{keypath:"onboarding.pinToolbar.message"},{default:a(()=>[o(e(yt),{class:"inline"}),o(e(ft),{class:"inline"})]),_:1})]),button:a(()=>[o(D,{color:"transparent",onClick:n[0]||(n[0]=i=>t.$emit("click"))},{default:a(()=>[C(f(t.$t("close")),1)]),_:1})]),_:1},8,["title"]))}});function Nt(){return Oe(F.OnboardingCloseWindow)}const Tt={"data-testid":"overview-page",class:"pager-slide"},$t={class:"bullet-points"},At=["href"],St=["href"],Dt={key:0,class:"flex flex-col p-4 w-108 rounded-lg bg-on-primary"},Rt={class:"text-lg font-bold"},Bt={class:"flex items-center justify-between"},Pt=["src"],Et={class:"flex flex-row items-center space-x-5"},Vt={class:"text-left space-y-2"},Ht={class:"text-opacity-secondary font-bold"},Yt={class:"text-opacity-secondary text-sm"},Lt={class:"onboarding-button-bar"},Mt=T({name:"OverviewSlide",__name:"OverviewSlide",setup(g){const{t}=H(),n=K("OnboardingPinToToolbar")&&!0,i=w(!1),s=$e(),r=w(!1),{state:c}=xe(),u=me(),{reportEvent:p}=E();le(c,v=>{p("ONBOARDING_TRY_NEW_TAB_PAGE",{value:v})});const y=w();M(y);const _=K("NewTabPreference"),O=K("FocusMode"),$=Nt();return(v,l)=>{const x=Ne("router-link");return m(),I("div",Tt,[o(b,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.overview.title"}),o(b,{tag:"p",keypath:"onboarding.overview.message"}),d("ul",$t,[e(n)?(m(),N(b,{key:0,keypath:"onboarding.overview.pin",tag:"li"},{default:a(()=>[d("a",{class:"cursor-pointer",onClick:l[0]||(l[0]=k=>i.value=!0)},f(e(t)("onboarding.overview.pinLink")),1)]),_:1})):B("v-if",!0),o(b,{keypath:"onboarding.overview.connect",tag:"li"},{default:a(()=>[d("a",{class:"cursor-pointer",href:e(s).android,target:"_blank",onClick:l[1]||(l[1]=k=>e(p)("ONBOARDING_LINK_ANDROID"))},f(e(t)("devices.platform.android")),9,At),d("a",{class:"cursor-pointer",href:e(s).ios,target:"_blank",onClick:l[2]||(l[2]=k=>e(p)("ONBOARDING_LINK_IOS"))},f(e(t)("devices.platform.ios")),9,St),o(x,{class:"cursor-pointer",to:e(W).devicesWith(),onClick:l[3]||(l[3]=k=>e(p)("ONBOARDING_LINK_CONNECT_DEVICE"))},{default:a(()=>[C(f(e(t)("onboarding.overview.connectLink")),1)]),_:1},8,["to"])]),_:1}),o(b,{keypath:"onboarding.overview.usageLimit",tag:"li"},{default:a(()=>[o(x,{class:"cursor-pointer",to:e(W).limits,onClick:l[4]||(l[4]=k=>e(p)("ONBOARDING_LINK_WEBSITE_LIMIT"))},{default:a(()=>[C(f(e(t)("onboarding.overview.usageLimitLink")),1)]),_:1},8,["to"])]),_:1}),e(O)?(m(),N(b,{key:1,keypath:"onboarding.overview.focusMode",tag:"li"},{default:a(()=>[o(x,{class:"cursor-pointer",to:e(W).focus,onClick:l[5]||(l[5]=k=>e(p)("ONBOARDING_LINK_FOCUS_MODE"))},{default:a(()=>[C(f(e(t)("onboarding.overview.focusModeLink")),1)]),_:1},8,["to"])]),_:1})):B("v-if",!0)]),e(_)?(m(),I("div",Dt,[d("h4",Rt,[d("div",Bt,[C(f(e(t)("onboarding.newTabPromotion.title"))+" ",1),d("div",null,[o(e(je),{class:z(["icon-xl",{"popup-clickable-icon":!e(r),"popup-clickable-icon-primary":e(r)}]),onClick:l[6]||(l[6]=k=>r.value=!e(r))},null,8,["class"]),o(Te,{name:"fade-up"},{default:a(()=>[e(r)?(m(),I("img",{key:0,class:"w-[20rem] absolute mt-[-320px] ml-[-320px] pointer-events-none",src:e(u)?e(Ke):e(Qe)},null,8,Pt)):B("v-if",!0)]),_:1})])])]),d("div",Et,[d("div",Vt,[d("h2",Ht,f(e(t)("onboarding.newTabPromotion.description")),1),d("h3",Yt,f(e(t)("onboarding.newTabPromotion.subDescription")),1)]),d("div",null,[o(Xe,{modelValue:e(c),"onUpdate:modelValue":l[7]||(l[7]=k=>L(c)?c.value=k:null)},null,8,["modelValue"])])])])):B("v-if",!0),d("div",Lt,[o(x,{to:e(W).stats},{default:a(()=>[o(D,{ref_key:"dashboardButton",ref:y,onClick:e($)},{default:a(()=>[C(f(e(t)("onboarding.overview.openDashboard")),1)]),_:1},8,["onClick"])]),_:1},8,["to"]),o(D,{"data-testid":"close",color:"transparent",onClick:e($)},{default:a(()=>[C(f(e(t)("onboarding.overview.close")),1)]),_:1},8,["onClick"])]),e(i)?(m(),N(xt,{key:1,onClick:l[8]||(l[8]=k=>i.value=!1)})):B("v-if",!0)])}}}),Ut={"data-testid":"privacy-page",class:"pager-slide"},Gt={class:"onboarding-link",href:"https://stayfreeapps.com/terms",target:"_blank"},Wt={class:"onboarding-link",href:"https://stayfreeapps.com/privacy",target:"_blank"},Ft={class:"bullet-points"},zt={class:"onboarding-button-bar"},qt=T({name:"PrivacySlide",__name:"PrivacySlide",emits:["continue"],setup(g,{emit:t}){const{reportEvent:n}=E(),i=re(),s=w(!0),r=w(!0),c=q(async()=>{await i.setAcceptedTos(!0).catch(p=>Y("[tos-slide] Failed to accept ToS",p)),n("ONBOARDING_ACCEPTED_TOS"),r.value?(await i.setAcceptedDataCollection("accepted").catch(p=>Y("[privacy-slide] Failed to accept data collection",p)),n("ONBOARDING_ACCEPTED_PRIVACY_POLICY")):(await i.setAcceptedDataCollection("declined").catch(p=>Y("[privacy-slide] Failed to decline data collection",p)),n("ONBOARDING_DECLINE_PRIVACY_POLICY")),t("continue")},j),u=w();return M(u),(p,y)=>(m(),I("div",Ut,[o(b,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.privacy.title"}),o(b,{tag:"p",keypath:"onboarding.privacy.message"}),o(J,{modelValue:e(s),"onUpdate:modelValue":y[0]||(y[0]=_=>L(s)?s.value=_:null)},{default:a(()=>[o(b,{tag:"p",keypath:"onboarding.privacy.tosMessage"},{default:a(()=>[d("a",Gt,f(p.$t("termsOfService").toLowerCase()),1)]),_:1})]),_:1},8,["modelValue"]),o(J,{modelValue:e(r),"onUpdate:modelValue":y[1]||(y[1]=_=>L(r)?r.value=_:null),"data-testid":"privacy-checkbox"},{default:a(()=>[o(b,{tag:"p",keypath:"onboarding.privacy.permission"},{default:a(()=>[d("a",Wt,f(p.$t("privacyPolicy").toLowerCase()),1)]),_:1})]),_:1},8,["modelValue"]),o(b,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.privacy.keyPoints"}),d("ul",Ft,[o(b,{tag:"li",keypath:"onboarding.privacy.keyPoint1"}),o(b,{tag:"li",keypath:"onboarding.privacy.keyPoint2"}),o(b,{tag:"li",keypath:"onboarding.privacy.keyPoint3"}),o(b,{tag:"li",keypath:"onboarding.privacy.keyPoint4"}),o(b,{tag:"li",keypath:"onboarding.privacy.keyPoint5"})]),d("div",zt,[o(D,{disabled:!e(s),ref_key:"continueButton",ref:u,"data-testid":"continue",class:"self-end",onClick:e(c)},{default:a(()=>[C(f(p.$t("continue")),1)]),_:1},8,["disabled","onClick"])])]))}}),jt={class:"flex flex-col items-center space-y-2"},Kt={class:"self-center flex items-center space-x-1 h-3"},Qt=T({name:"ViewPager",__name:"ViewPager",props:{pageCount:{},currentIndex:{}},setup(g){const t=g,n=R(()=>{const _=[];for(let O=0;O<t.pageCount;O++){const $=["circle"];O<t.currentIndex&&$.push("prev"),O===t.currentIndex&&$.push("current"),_.push($.join(" "))}return _}),i=w(),s=w(),r=w("max-height: 0;min-height: 0"),c=w(0);function u(){if(s.value==null)return;const _=s.value.clientHeight;_!==c.value&&(c.value=_,r.value=`max-height: ${_}px;min-height: ${_}px`),p.value&&requestAnimationFrame(u)}const p=w(!1),y=w(!1);return Ae(()=>{p.value=!0,u(),setTimeout(()=>{y.value=!0},300)}),Se(()=>{p.value=!1}),(_,O)=>(m(),I("div",jt,[d("div",{ref_key:"setHeight",ref:i,class:z(["w-full overflow-hidden",{"animate-height":e(y)}]),style:Re(e(r))},[d("div",{ref_key:"sizer",ref:s,class:"w-full relative p-1"},[o(De,{name:"slide"},{default:a(()=>[X(_.$slots,"default",{},void 0,!0)]),_:3})],512)],6),d("div",Kt,[(m(!0),I(se,null,ie(e(n),($,v)=>(m(),I("div",{key:v},[d("div",{class:z($)},null,2)]))),128))])]))}}),Xt=Be(Qt,[["__scopeId","data-v-3639d8d4"]]),Zt={"data-testid":"welcome-page",class:"pager-slide"},Jt={class:"onboarding-button-bar"},eo=T({name:"WelcomeSlide",__name:"WelcomeSlide",emits:["continue"],setup(g,{emit:t}){const{reportEvent:n}=E(),i=q(()=>{n("ONBOARDING_WELCOME_CONTINUE"),t("continue")},j),s=w();return M(s),(r,c)=>(m(),I("div",Zt,[o(b,{tag:"p",keypath:"onboarding.welcome"}),d("div",Jt,[o(D,{ref_key:"continueButton",ref:s,"data-testid":"continue",class:"self-end",onClick:e(i)},{default:a(()=>[C(f(r.$t("continue")),1)]),_:1},8,["onClick"])])]))}});function ge(){return Pe(F.OnboardingCustomSlides)??[]}const to=T({props:{currentCustomSlide:{type:Number,required:!0}},emits:["continue"],setup(){return{slides:ge()}},render(){return Ee(this.slides[this.currentCustomSlide],{onContinue:()=>this.$emit("continue")})}}),oo=T({__name:"OnboardingSlides",setup(g){const{reportEvent:t}=E();t("ONBOARDING_STARTED");const i=4+ge().length,s=w(0),r=q(()=>{s.value++},200),c=R(()=>s.value-3),u=R(()=>s.value===0),p=R(()=>s.value===1),y=R(()=>s.value===2),_=R(()=>s.value>=3&&s.value<i-1),O=R(()=>s.value===i-1);return($,v)=>(m(),N(Xt,{class:"w-full max-w-[32rem] flex flex-row","page-count":i,"current-index":e(s)},{default:a(()=>[e(u)?(m(),N(eo,{key:"welcome",onContinue:e(r)},null,8,["onContinue"])):e(p)?(m(),N(qt,{key:"privacy",onContinue:e(r)},null,8,["onContinue"])):e(y)?(m(),N(ut,{key:"birth-year",onContinue:e(r)},null,8,["onContinue"])):e(_)?(m(),N(e(to),{key:"custom","current-custom-slide":e(c),onContinue:e(r)},null,8,["current-custom-slide","onContinue"])):e(O)?(m(),N(Mt,{key:4})):B("v-if",!0)]),_:1},8,["current-index"]))}}),no="set-wide-slide-layout";function so(g){Ve(no,g)}const io={class:"p-8 h-screen flex flex-col space-y-8 justify-center"},ao={class:"flex flex-col items-center justify-center lg:space-y-8 lg:flex-row-reverse lg:space-x-24 lg:space-x-reverse"},ro=["src"],lo=T({name:"OnboardingIndex",__name:"OnboardingIndex",setup(g){me();const{t}=H();document.title=t("onboarding.title");const n=w(!1);return so(s=>{n.value=s}),(s,r)=>(m(),I("div",io,[o(b,{tag:"h1",class:"font-light text-4xl text-center",keypath:"onboarding.title"}),d("div",ao,[d("div",{class:z(["w-min-96 w-full p-8 flex items-center justify-center",{"max-w-[128rem]":e(n),"max-w-[32rem] ":!e(n)}])},[o(oo)],2),e(n)?B("v-if",!0):(m(),I("img",{key:0,class:"hidden lg:block max-w-[32rem] w-min-96 w-full",src:e(ot)},null,8,ro))])]))}});function co(g){window.document.title=He.global.t("appName");const t=Ye("onboarding",lo,g).component("router-link",Je(g.onClickDashboardLink)).provide(F.OnboardingCloseWindow,g.closeWindow).provide(F.OnboardingCustomSlides,g.customSlides);return{mount:t.mount.bind(t)}}const ne={"google.com":64,"youtube.com":533,"mail.google.com":136,"docs.google.com":144,"facebook.com":166,"instagram.com":118,"drive.google.com":78,"twitter.com":147,"reddit.com":125,"linkedin.com":107,"chat.openai.com":137,"calendar.google.com":106,"amazon.com":200,"wikipedia.org":104,"whatsapp.com":83,"netflix.com":952,"outlook.office.com":115,"stayfocusd.com":173,"microsoftonline.com":23,"github.com":77,"zoom.us":101,"discord.com":84,"quora.com":91,"nytimes.com":148,"en.wikipedia.org":90,"web.whatsapp.com":69,"meet.google.com":358,"tiktok.com":145,"messenger.com":86,"stackoverflow.com":72,"canva.com":114,"bing.com":91,"spotify.com":260,"translate.google.com":80,"twitch.tv":494,"notion.so":115,"openai.com":20,"login.microsoftonline.com":19,"pinterest.com":120,"outlook.live.com":111,"classroom.google.com":130,"chrome.google.com":38,"imdb.com":77,"mail.yahoo.com":147,"microsoft.com":91,"scholar.google.com":55,"photos.google.com":156,"teams.microsoft.com":167,"etsy.com":78,"duckduckgo.com":51,"chess.com":284,"keep.google.com":133,"espn.com":162,"medium.com":72,"ncbi.nlm.nih.gov":81,"paypal.com":54,"outlook.office365.com":92,"amazon.in":100,"ebay.com":80,"chase.com":48,"myaccount.google.com":36,"theguardian.com":127,"cnn.com":125,"roblox.com":178,"music.youtube.com":415,"dropbox.com":115,"sciencedirect.com":65,"live.com":25,"studio.youtube.com":82,"yahoo.com":120,"open.spotify.com":278,"zillow.com":153,"bbc.com":118,"slack.com":76,"researchgate.net":56,"msn.com":144,"apple.com":86,"indeed.com":87,"geeksforgeeks.org":79,"hulu.com":884,"goodreads.com":99,"pubmed.ncbi.nlm.nih.gov":55,"amazon.ca":129,"news.google.com":92,"quizlet.com":121,"sites.google.com":77,"bard.google.com":122,"getadblock.com":64,"disneyplus.com":933,"udemy.com":169,"imgur.com":55,"amazon.co.uk":206,"figma.com":79,"linktr.ee":17,"bbc.co.uk":281,"store.steampowered.com":87,"trello.com":127,"search.yahoo.com":61,"walmart.com":114,"onedrive.live.com":129},uo=T({name:"ImportHistoryDialogContent",__name:"ImportHistoryDialogContent",emits:["continue"],setup(g){const{t}=H(),{reportEvent:n}=E(),i=w(!0),s=Q,r=Le(),{remoteConfig:c,restoredPromise:u}=Me(),p=Ue();async function y(){var P;await u;const v=await Z.history.search({text:"",maxResults:c.value.importHistoryMaxResult,startTime:0}),l=[];for(const h of v){let A=(P=ee(h.url,{removeGenericPrefixes:!1}))==null?void 0:P.hostname;h.url==null||A==null||(A=A.startsWith("www.")?A.slice(4):A,l.push({...h,url:h.url,host:A}))}const x=[];for(const h of l){const A=await Z.history.getVisits({url:h.url});for(const G of A)G.visitTime&&x.push({...G,visitTime:Math.round(G.visitTime),host:h.host})}x.sort((h,A)=>h.visitTime-A.visitTime);const k=[];let V=0,U,S=Q;for(const h of x){const A=h.visitTime-V;!(h.host===U)&&A<=s?(_(k,h.visitTime),O(k,h)):A>s&&(_(k,V+S),O(k,h)),V=h.visitTime,U=h.host,h.host!==void 0&&Object.prototype.hasOwnProperty.call(ne,h.host)?S=ne[h.host]*j:S=Q}return _(k,V+S),k.filter(h=>h.startedAt!==h.endedAt)}function _(v,l){v[v.length-1]&&(l-v[v.length-1].startedAt>te&&(l=v[v.length-1].startedAt+te),v[v.length-1].endedAt=l)}function O(v,l){var k;const x=(k=ee(l.host))==null?void 0:k.hostname;x&&v.push({appId:x,startedAt:l.visitTime,imported:!0,generated:!0})}function $(){return pe("update-suggested-websites",void 0).catch()}return n("ONBOARDING_IMPORT_HISTORY_STARTED"),y().then(async v=>{await r.createSessions(v).catch()}).then(()=>tt(r,p)).then(()=>$()).then(()=>{n("ONBOARDING_IMPORT_HISTORY_SUCCESS"),i.value=!1}).catch(()=>{n("ONBOARDING_IMPORT_HISTORY_FAILURE"),i.value=!1}).finally(()=>n("ONBOARDING_IMPORT_HISTORY_FINISHED")),(v,l)=>(m(),N(ae,{"data-testid":"import-history-dialog-content",class:"w-108"},Ge({body:a(()=>[e(i)?(m(),N(Ze,{key:0,class:"self-center"})):B("v-if",!0)]),buttons:a(()=>[e(i)?(m(),N(D,{key:1,color:"transparent",onClick:l[1]||(l[1]=x=>v.$emit("continue"))},{default:a(()=>[C(f(e(t)("cancel")),1)]),_:1})):(m(),N(D,{key:0,onClick:l[0]||(l[0]=x=>v.$emit("continue"))},{default:a(()=>[C(f(e(t)("continue")),1)]),_:1}))]),_:2},[e(i)?{name:"title",fn:a(()=>[C(f(e(t)("onboarding.importHistory.title")),1)]),key:"0"}:{name:"title",fn:a(()=>[C(f(e(t)("onboarding.importHistory.completedText")),1)]),key:"1"}]),1024))}}),mo={"data-testid":"import-history-page",class:"pager-slide"},po={class:"onboarding-button-bar"},go=T({name:"ImportHistorySlide",__name:"ImportHistorySlide",emits:["continue"],setup(g,{emit:t}){const{reportEvent:n}=E();function i(){Z.permissions.request({permissions:["history"]}).then(y=>{y?p():(oe("Permission to access history was denied"),r())}).catch(oe)}function s(){n("ONBOARDING_IMPORT_HISTORY_SKIPPED"),r()}const r=q(()=>{n("ONBOARDING_COMPLETED"),t("continue")},j),c=w();M(c);const{baseDialogProps:u,show:p}=ce();return(y,_)=>(m(),I("div",mo,[o(b,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.importHistory.title"}),o(b,{tag:"p",keypath:"onboarding.importHistory.text"}),o(b,{tag:"p",keypath:"onboarding.importHistory.warning"}),d("div",po,[o(D,{onClick:_[0]||(_[0]=O=>i())},{default:a(()=>[C(f(y.$t("onboarding.importHistory.import")),1)]),_:1}),o(D,{ref_key:"skipButton",ref:c,"data-testid":"skip",color:"transparent",onClick:_[1]||(_[1]=O=>s())},{default:a(()=>[C(f(y.$t("onboarding.importHistory.skip")),1)]),_:1},512)]),o(de,ue(e(u),{"dismiss-disabled":""}),{default:a(()=>[o(uo,{onContinue:e(r)},null,8,["onContinue"])]),_:1},16)]))}}),fo=We({context:"onboarding",onClickDashboardLink:et,customSlides:[go],closeWindow(){pe("close-this-tab",void 0)}});co(fo).mount("#app");
