import{Y as V,c as D,b7 as be,f as $,K as fe,r as w,o as d,g as C,a4 as L,aE as he,i as o,F as se,N as ie,q as N,w as h,Q as g,P as B,j as e,b8 as U,$ as M,a6 as F,ac as ae,t as P,as as re,x as le,b9 as _e,aq as ve,ap as ye,ar as ke,L as ce,k as l,l as R,O as ue,b3 as de,aV as we,aH as Y,ba as Ce,h as X,aj as Ie,I as z,a as Z,u as xe,v as me,n as Oe,D as W,s as j,a_ as Ne,bb as $e,bc as q,ax as K,aw as Te,ag as Ae,bd as Se,aA as De,_ as Re,ai as Be,ay as Pe,aN as Ee,A as Ve,B as He,aR as Ye,aB as Le,ak as Me,G as J,an as ee,af as te,be as pe,aZ as Q,bf as oe,C as Ue}from"./defineAppConfig-GTQ5Bvuh.js";import{b as Ge,_ as We,a as Fe,I as k,c as ze,n as je,d as qe,u as Ke,S as Ze}from"./new-tab-light-6CDZBy0y.js";import{D as Qe,o as Xe}from"./links-PC8v_o69.js";import{r as Je}from"./min-search-date-m8ObA3He.js";const et="/assets/onboarding-illustration-U-FlrgYc.svg";function tt(b){const t=new Date().getFullYear(),{t:n}=V();function s(c){return t-c<100}function i(c){return c<t}function r(){if(!b.value.trim())return{message:void 0,isValid:!1};if(b.value.length!==4)return{message:n("onboarding.birthYear.errors.length"),isValid:!1};const u=Number(b.value);return isNaN(u)?{message:n("onboarding.birthYear.errors.nan"),isValid:!1}:i(u)?s(u)?{isValid:!0,isOver18:be(u),int:u}:{message:n("onboarding.birthYear.errors.ageMax"),isValid:!1}:{message:n("onboarding.birthYear.errors.ageMin"),isValid:!1}}return D(r)}const ot={class:"relative flex justify-center"},nt=["aria-label"],st=$({name:"BirthYearInput",__name:"BirthYearInput",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(b){const t=fe(b,"modelValue"),n=w(),{digits:s}=Ge({inputLength:4,inputRef:n,inputValue:t,focusOnMount:!0});return(i,r)=>(d(),C("div",ot,[L(o("input",{ref_key:"input",ref:n,class:"absolute left-0 bottom-0 w-0 h-0 text-black","aria-label":i.$t("onboarding.birthYear.inputLabel"),type:"text","onUpdate:modelValue":r[0]||(r[0]=c=>t.value=c)},null,8,nt),[[he,t.value]]),o("ul",{class:"flex space-x-2 cursor-text",onClick:r[1]||(r[1]=c=>{var u;return(u=e(n))==null?void 0:u.focus()})},[(d(!0),C(se,null,ie(e(s),(c,u)=>(d(),N(We,{key:u,index:u,focused:c.focused},{default:h(()=>[B(g(c.value),1)]),_:2},1032,["index","focused"]))),128))])]))}}),it={class:"cursor-pointer label justify-start gap-4"},at={class:"label-text"},rt=$({name:"ConfirmBirthYearDialogContent",__name:"ConfirmBirthYearDialogContent",emits:["continue","createUser","declinePrivacyPolicy"],setup(b,{emit:t}){const{t:n}=V(),s=w(!0),i=w();U(i);function r(){s.value?t("createUser"):t("declinePrivacyPolicy"),t("continue")}return(c,u)=>(d(),N(ae,{class:"w-108"},{title:h(()=>[B(g(e(n)("onboarding.birthYear.confirmDialog.title")),1)]),body:h(()=>[o("label",it,[L(o("input",{type:"checkbox","onUpdate:modelValue":u[0]||(u[0]=m=>M(s)?s.value=m:null),class:"checkbox checkbox-primary checkbox-sm"},null,512),[[F,e(s)]]),o("span",at,g(e(n)("onboarding.birthYear.confirmDialog.confirmLabel")),1)])]),buttons:h(()=>[o("button",{class:"btn btn-primary",ref_key:"continueButton",ref:i,onClick:r},g(e(n)("continue")),513)]),_:1}))}}),lt={class:"link link-secondary",href:"https://stayfreeapps.com/terms",target:"_blank"},ct={key:0,class:"text-error text-sm text-center"},ut=$({name:"BirthYearSlide",__name:"BirthYearSlide",emits:["continue"],setup(b,{emit:t}){const{t:n}=V(),{reportEvent:s}=P(),i=re(),r=Fe(),c=w(""),u=tt(c);le(c,async A=>{A.length===4&&await v()});const m=w(!1),v=_e(async()=>{m.value=!0,u.value.isValid&&(u.value.isOver18?await a():await x(),await i.setBirthYear(u.value.int).catch(A=>Y("[birth-year-slide] Error setting birth year in storage",A)),s("ONBOARDING_ENTERED_BIRTH_YEAR"),s("ONBOARDING_BIRTH_YEAR_CONTINUE"),t("continue"))},200);function p(){s("ONBOARDING_SKIPPED_BIRTH_YEAR"),s("ONBOARDING_BIRTH_YEAR_CONTINUE"),t("continue")}const I=ve(),O=ye(),y=ke();function a(){I.canUploadData&&y.createDevice({installId:O.value,appId:r}),s("ONBOARDING_BIRTH_YEAR_OVER_18")}async function x(){await i.setAcceptedDataCollection("declined").catch(A=>Y("[privacy-slide] Failed to decline data collection",A)),await i.setAskTosAgain(!0),s("ONBOARDING_BIRTH_YEAR_UNDER_18")}const _=D(()=>{if(!(!m.value||u.value.isValid))return u.value.message}),{baseDialogProps:E,show:H}=ce();return(A,S)=>(d(),C("form",{"data-testid":"birth-year-page",class:"pager-slide",onSubmit:S[2]||(S[2]=we((...f)=>e(v)&&e(v)(...f),["prevent"]))},[l(k,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.birthYear.cardTitle"},{default:h(()=>[o("a",lt,g(A.$t("termsOfService").toLowerCase()),1)]),_:1}),l(k,{tag:"p",keypath:"onboarding.birthYear.cardMessage"}),l(k,{tag:"p",keypath:"onboarding.birthYear.confirm"}),l(st,{modelValue:e(c),"onUpdate:modelValue":S[0]||(S[0]=f=>M(c)?c.value=f:null)},null,8,["modelValue"]),e(_)?(d(),C("p",ct,g(e(_)),1)):R("v-if",!0),o("button",{class:"self-end btn btn-ghost btn-sm",onClick:S[1]||(S[1]=(...f)=>e(H)&&e(H)(...f))},g(e(n)("skip")),1),l(de,ue(e(E),{"dismiss-disabled":""}),{default:h(()=>[l(rt,{onContinue:p,onCreateUser:a,onDeclinePrivacyPolicy:x})]),_:1},16)],32))}}),dt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},mt=o("path",{fill:"currentColor",d:"M16 12V4h1V2H7v2h1v8l-2 2v2h5.2v6h1.6v-6H18v-2l-2-2m-7.2 2l1.2-1.2V4h4v8.8l1.2 1.2H8.8Z"},null,-1),pt=[mt];function gt(b,t){return d(),C("svg",dt,pt)}const bt={name:"mdi-pin-outline",render:gt},ft={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},ht=o("path",{fill:"currentColor",d:"M20.5 11H19V7a2 2 0 0 0-2-2h-4V3.5A2.5 2.5 0 0 0 10.5 1A2.5 2.5 0 0 0 8 3.5V5H4a2 2 0 0 0-2 2v3.8h1.5c1.5 0 2.7 1.2 2.7 2.7c0 1.5-1.2 2.7-2.7 2.7H2V20a2 2 0 0 0 2 2h3.8v-1.5c0-1.5 1.2-2.7 2.7-2.7c1.5 0 2.7 1.2 2.7 2.7V22H17a2 2 0 0 0 2-2v-4h1.5a2.5 2.5 0 0 0 2.5-2.5a2.5 2.5 0 0 0-2.5-2.5Z"},null,-1),_t=[ht];function vt(b,t){return d(),C("svg",ft,_t)}const yt={name:"mdi-puzzle",render:vt},kt={class:"px-4 py-4 rounded-md space-y-4 w-80 flex flex-col fixed right-5 top-5 bg-base-300 shadow-xl z-10"},wt={class:"flex flex-row justify-between content-center"},Ct={class:"text-lg font-bold"},It=o("div",{class:"hidden lg:block h-px bg-base-content bg-opacity-divider"},null,-1),xt=$({name:"ActionRequiredScaffold",__name:"ActionRequiredScaffold",props:{title:{}},setup(b){const t=b;return(n,s)=>(d(),C("div",kt,[o("div",wt,[o("h2",Ct,g(t.title),1),l(Ce,{class:"w-7 h-7",src:"icon-48.png"})]),It,o("h3",null,[X(n.$slots,"description")]),X(n.$slots,"button")]))}}),Ot=$({name:"ActionRequiredPinToolbar",__name:"ActionRequiredPinToolbar",emits:["click"],setup(b){return(t,n)=>(d(),N(xt,{title:t.$t("onboarding.pinToolbar.title")},{description:h(()=>[l(k,{keypath:"onboarding.pinToolbar.message"},{default:h(()=>[l(e(yt),{class:"inline"}),l(e(bt),{class:"inline"})]),_:1})]),button:h(()=>[o("button",{class:"btn btn-neutral",onClick:n[0]||(n[0]=s=>t.$emit("click"))},g(t.$t("close")),1)]),_:1},8,["title"]))}});function Nt(){return Ie(z.OnboardingCloseWindow)}const $t={"data-testid":"overview-page",class:"pager-slide"},Tt={class:"bullet-points"},At=["href"],St=["href"],Dt={key:0,class:"flex flex-col p-4 w-108 rounded-lg bg-base-300"},Rt={class:"text-lg font-bold"},Bt={class:"flex items-center justify-between"},Pt=["src"],Et={class:"flex flex-row items-center space-x-5"},Vt={class:"text-left space-y-2"},Ht={class:"text-opacity-secondary font-bold"},Yt={class:"text-opacity-secondary text-sm"},Lt={class:"onboarding-button-bar"},Mt=$({name:"OverviewSlide",__name:"OverviewSlide",setup(b){const{t}=V(),n=Z("OnboardingPinToToolbar")&&!0,s=w(!1),i=$e(),r=w(!1),{state:c}=xe(),u=me(),{reportEvent:m}=P();le(c,y=>{m("ONBOARDING_TRY_NEW_TAB_PAGE",{value:y})});const v=w();U(v);const p=Z("NewTabPreference"),I=Z("FocusMode"),O=Nt();return(y,a)=>{const x=Oe("router-link");return d(),C("div",$t,[l(k,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.overview.title"}),l(k,{tag:"p",keypath:"onboarding.overview.message"}),o("ul",Tt,[e(n)?(d(),N(k,{key:0,keypath:"onboarding.overview.pin",tag:"li"},{default:h(()=>[o("button",{class:"link link-secondary",onClick:a[0]||(a[0]=_=>s.value=!0)},g(e(t)("onboarding.overview.pinLink")),1)]),_:1})):R("v-if",!0),l(k,{keypath:"onboarding.overview.connect",tag:"li"},{default:h(()=>[o("a",{class:"link link-secondary",href:e(i).android,target:"_blank",onClick:a[1]||(a[1]=_=>e(m)("ONBOARDING_LINK_ANDROID"))},g(e(t)("devices.platform.android")),9,At),o("a",{class:"link link-secondary",href:e(i).ios,target:"_blank",onClick:a[2]||(a[2]=_=>e(m)("ONBOARDING_LINK_IOS"))},g(e(t)("devices.platform.ios")),9,St),l(x,{class:"link link-secondary",to:e(W).devicesWith(),onClick:a[3]||(a[3]=_=>e(m)("ONBOARDING_LINK_CONNECT_DEVICE"))},{default:h(()=>[B(g(e(t)("onboarding.overview.connectLink")),1)]),_:1},8,["to"])]),_:1}),l(k,{keypath:"onboarding.overview.usageLimit",tag:"li"},{default:h(()=>[l(x,{class:"link link-secondary",to:e(W).limits,onClick:a[4]||(a[4]=_=>e(m)("ONBOARDING_LINK_WEBSITE_LIMIT"))},{default:h(()=>[B(g(e(t)("onboarding.overview.usageLimitLink")),1)]),_:1},8,["to"])]),_:1}),e(I)?(d(),N(k,{key:1,keypath:"onboarding.overview.focusMode",tag:"li"},{default:h(()=>[l(x,{class:"link link-secondary",to:e(W).focus,onClick:a[5]||(a[5]=_=>e(m)("ONBOARDING_LINK_FOCUS_MODE"))},{default:h(()=>[B(g(e(t)("onboarding.overview.focusModeLink")),1)]),_:1},8,["to"])]),_:1})):R("v-if",!0)]),e(p)?(d(),C("div",Dt,[o("h4",Rt,[o("div",Bt,[B(g(e(t)("onboarding.newTabPromotion.title"))+" ",1),o("div",null,[o("button",{class:j(["btn btn-square",{"btn-ghost":!e(r),"btn-primary":e(r)}]),onClick:a[6]||(a[6]=_=>r.value=!e(r))},[l(e(ze),{class:"icon"})],2),l(Ne,{name:"fade-up"},{default:h(()=>[e(r)?(d(),C("img",{key:0,class:"w-[20rem] absolute mt-[-320px] ml-[-320px] pointer-events-none shadow-md",src:e(u)?e(je):e(qe)},null,8,Pt)):R("v-if",!0)]),_:1})])])]),o("div",Et,[o("div",Vt,[o("h2",Ht,g(e(t)("onboarding.newTabPromotion.description")),1),o("h3",Yt,g(e(t)("onboarding.newTabPromotion.subDescription")),1)]),o("div",null,[L(o("input",{class:"toggle toggle-primary",type:"checkbox","onUpdate:modelValue":a[7]||(a[7]=_=>M(c)?c.value=_:null)},null,512),[[F,e(c)]])])])])):R("v-if",!0),o("div",Lt,[l(x,{to:e(W).stats},{default:h(()=>[o("button",{ref_key:"dashboardButton",ref:v,class:"btn btn-primary",onClick:a[8]||(a[8]=(..._)=>e(O)&&e(O)(..._))},g(e(t)("onboarding.overview.openDashboard")),513)]),_:1},8,["to"]),o("button",{"data-testid":"close",class:"btn btn-neutral",onClick:a[9]||(a[9]=(..._)=>e(O)&&e(O)(..._))},g(e(t)("onboarding.overview.close")),1)]),e(s)?(d(),N(Ot,{key:1,onClick:a[10]||(a[10]=_=>s.value=!1)})):R("v-if",!0)])}}}),Ut={"data-testid":"privacy-page",class:"pager-slide"},Gt={class:"cursor-pointer label justify-start gap-4"},Wt={class:"link link-secondary",href:"https://stayfreeapps.com/terms",target:"_blank"},Ft={class:"cursor-pointer label justify-start gap-4"},zt={class:"link link-secondary",href:"https://stayfreeapps.com/privacy",target:"_blank"},jt={class:"bullet-points"},qt={class:"onboarding-button-bar"},Kt=["disabled"],Zt=$({name:"PrivacySlide",__name:"PrivacySlide",emits:["continue"],setup(b,{emit:t}){const{reportEvent:n}=P(),s=re(),i=w(!0),r=w(!0),c=q(async()=>{await s.setAcceptedTos(!0).catch(m=>Y("[tos-slide] Failed to accept ToS",m)),n("ONBOARDING_ACCEPTED_TOS"),r.value?(await s.setAcceptedDataCollection("accepted").catch(m=>Y("[privacy-slide] Failed to accept data collection",m)),n("ONBOARDING_ACCEPTED_PRIVACY_POLICY")):(await s.setAcceptedDataCollection("declined").catch(m=>Y("[privacy-slide] Failed to decline data collection",m)),n("ONBOARDING_DECLINE_PRIVACY_POLICY")),t("continue")},K),u=w();return U(u),(m,v)=>(d(),C("div",Ut,[l(k,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.privacy.title"}),l(k,{tag:"p",keypath:"onboarding.privacy.message"}),o("div",null,[o("label",Gt,[L(o("input",{type:"checkbox","onUpdate:modelValue":v[0]||(v[0]=p=>M(i)?i.value=p:null),class:"checkbox checkbox-primary checkbox-sm"},null,512),[[F,e(i)]]),l(k,{class:"label-text",tag:"span",keypath:"onboarding.privacy.tosMessage"},{default:h(()=>[o("a",Wt,g(m.$t("termsOfService").toLowerCase()),1)]),_:1})]),o("label",Ft,[L(o("input",{type:"checkbox","onUpdate:modelValue":v[1]||(v[1]=p=>M(r)?r.value=p:null),class:"checkbox checkbox-primary checkbox-sm"},null,512),[[F,e(r)]]),l(k,{"data-testid":"privacy-checkbox",class:"label-text",tag:"span",keypath:"onboarding.privacy.permission"},{default:h(()=>[o("a",zt,g(m.$t("privacyPolicy").toLowerCase()),1)]),_:1})])]),l(k,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.privacy.keyPoints"}),o("ul",jt,[l(k,{tag:"li",keypath:"onboarding.privacy.keyPoint1"}),l(k,{tag:"li",keypath:"onboarding.privacy.keyPoint2"}),l(k,{tag:"li",keypath:"onboarding.privacy.keyPoint3"}),l(k,{tag:"li",keypath:"onboarding.privacy.keyPoint4"}),l(k,{tag:"li",keypath:"onboarding.privacy.keyPoint5"})]),o("div",qt,[o("button",{class:"btn btn-primary self-end",disabled:!e(i),ref_key:"continueButton",ref:u,"data-testid":"continue",onClick:v[2]||(v[2]=(...p)=>e(c)&&e(c)(...p))},g(m.$t("continue")),9,Kt)])]))}}),Qt={class:"flex flex-col items-center space-y-2"},Xt={class:"self-center flex items-center space-x-1 h-3"},Jt=$({name:"ViewPager",__name:"ViewPager",props:{pageCount:{},currentIndex:{}},setup(b){const t=b,n=D(()=>{const p=[];for(let I=0;I<t.pageCount;I++){const O=["circle"];I<t.currentIndex&&O.push("prev"),I===t.currentIndex&&O.push("current"),p.push(O.join(" "))}return p}),s=w(),i=w(),r=w("max-height: 0;min-height: 0"),c=w(0);function u(){if(i.value==null)return;const p=i.value.clientHeight;p!==c.value&&(c.value=p,r.value=`max-height: ${p}px;min-height: ${p}px`),m.value&&requestAnimationFrame(u)}const m=w(!1),v=w(!1);return Te(()=>{m.value=!0,u(),setTimeout(()=>{v.value=!0},300)}),Ae(()=>{m.value=!1}),(p,I)=>(d(),C("div",Qt,[o("div",{ref_key:"setHeight",ref:s,class:j(["w-full overflow-hidden",{"animate-height":e(v)}]),style:De(e(r))},[o("div",{ref_key:"sizer",ref:i,class:"w-full relative p-1"},[l(Se,{name:"slide"},{default:h(()=>[X(p.$slots,"default",{},void 0,!0)]),_:3})],512)],6),o("div",Xt,[(d(!0),C(se,null,ie(e(n),(O,y)=>(d(),C("div",{key:y},[o("div",{class:j(O)},null,2)]))),128))])]))}}),eo=Re(Jt,[["__scopeId","data-v-1a95718f"]]),to={"data-testid":"welcome-page",class:"pager-slide"},oo={class:"onboarding-button-bar"},no=$({name:"WelcomeSlide",__name:"WelcomeSlide",emits:["continue"],setup(b,{emit:t}){const{reportEvent:n}=P(),s=q(()=>{n("ONBOARDING_WELCOME_CONTINUE"),t("continue")},K),i=w();return U(i),(r,c)=>(d(),C("div",to,[l(k,{tag:"p",keypath:"onboarding.welcome"}),o("div",oo,[o("button",{ref_key:"continueButton",ref:i,"data-testid":"continue",class:"btn btn-primary self-end",onClick:c[0]||(c[0]=(...u)=>e(s)&&e(s)(...u))},g(r.$t("continue")),513)])]))}});function ge(){return Be(z.OnboardingCustomSlides)??[]}const so=$({props:{currentCustomSlide:{type:Number,required:!0}},emits:["continue"],setup(){return{slides:ge()}},render(){return Pe(this.slides[this.currentCustomSlide],{onContinue:()=>this.$emit("continue")})}}),io=$({__name:"OnboardingSlides",setup(b){const{reportEvent:t}=P();t("ONBOARDING_STARTED");const s=4+ge().length,i=w(0),r=q(()=>{i.value++},200),c=D(()=>i.value-3),u=D(()=>i.value===0),m=D(()=>i.value===1),v=D(()=>i.value===2),p=D(()=>i.value>=3&&i.value<s-1),I=D(()=>i.value===s-1);return(O,y)=>(d(),N(eo,{class:"w-full max-w-[32rem] flex flex-row","page-count":s,"current-index":e(i)},{default:h(()=>[e(u)?(d(),N(no,{key:"welcome",onContinue:e(r)},null,8,["onContinue"])):e(m)?(d(),N(Zt,{key:"privacy",onContinue:e(r)},null,8,["onContinue"])):e(v)?(d(),N(ut,{key:"birth-year",onContinue:e(r)},null,8,["onContinue"])):e(p)?(d(),N(e(so),{key:"custom","current-custom-slide":e(c),onContinue:e(r)},null,8,["current-custom-slide","onContinue"])):e(I)?(d(),N(Mt,{key:4})):R("v-if",!0)]),_:1},8,["current-index"]))}}),ao="set-wide-slide-layout";function ro(b){Ee(ao,b)}const lo={class:"p-8 h-screen flex flex-col space-y-8 justify-center"},co={class:"flex flex-col items-center justify-center lg:space-y-8 lg:flex-row-reverse lg:space-x-24 lg:space-x-reverse"},uo=["src"],mo=$({name:"OnboardingIndex",__name:"OnboardingIndex",setup(b){me();const{t}=V();document.title=t("onboarding.title");const n=w(!1);return ro(i=>{n.value=i}),(i,r)=>(d(),C("div",lo,[l(k,{tag:"h1",class:"font-light text-4xl text-center",keypath:"onboarding.title"}),o("div",co,[o("div",{class:j(["w-min-96 w-full p-8 flex items-center justify-center",{"max-w-[128rem]":e(n),"max-w-[32rem] ":!e(n)}])},[l(io)],2),e(n)?R("v-if",!0):(d(),C("img",{key:0,class:"hidden lg:block max-w-[32rem] w-min-96 w-full",src:e(et)},null,8,uo))])]))}});function po(b){window.document.title=Ve.global.t("appName");const t=He("onboarding",mo,b).component("router-link",Qe(b.onClickDashboardLink)).provide(z.OnboardingCloseWindow,b.closeWindow).provide(z.OnboardingCustomSlides,b.customSlides);return{mount:t.mount.bind(t)}}const ne={"google.com":64,"youtube.com":533,"mail.google.com":136,"docs.google.com":144,"facebook.com":166,"instagram.com":118,"drive.google.com":78,"twitter.com":147,"reddit.com":125,"linkedin.com":107,"chat.openai.com":137,"calendar.google.com":106,"amazon.com":200,"wikipedia.org":104,"whatsapp.com":83,"netflix.com":952,"outlook.office.com":115,"stayfocusd.com":173,"microsoftonline.com":23,"github.com":77,"zoom.us":101,"discord.com":84,"quora.com":91,"nytimes.com":148,"en.wikipedia.org":90,"web.whatsapp.com":69,"meet.google.com":358,"tiktok.com":145,"messenger.com":86,"stackoverflow.com":72,"canva.com":114,"bing.com":91,"spotify.com":260,"translate.google.com":80,"twitch.tv":494,"notion.so":115,"openai.com":20,"login.microsoftonline.com":19,"pinterest.com":120,"outlook.live.com":111,"classroom.google.com":130,"chrome.google.com":38,"imdb.com":77,"mail.yahoo.com":147,"microsoft.com":91,"scholar.google.com":55,"photos.google.com":156,"teams.microsoft.com":167,"etsy.com":78,"duckduckgo.com":51,"chess.com":284,"keep.google.com":133,"espn.com":162,"medium.com":72,"ncbi.nlm.nih.gov":81,"paypal.com":54,"outlook.office365.com":92,"amazon.in":100,"ebay.com":80,"chase.com":48,"myaccount.google.com":36,"theguardian.com":127,"cnn.com":125,"roblox.com":178,"music.youtube.com":415,"dropbox.com":115,"sciencedirect.com":65,"live.com":25,"studio.youtube.com":82,"yahoo.com":120,"open.spotify.com":278,"zillow.com":153,"bbc.com":118,"slack.com":76,"researchgate.net":56,"msn.com":144,"apple.com":86,"indeed.com":87,"geeksforgeeks.org":79,"hulu.com":884,"goodreads.com":99,"pubmed.ncbi.nlm.nih.gov":55,"amazon.ca":129,"news.google.com":92,"quizlet.com":121,"sites.google.com":77,"bard.google.com":122,"getadblock.com":64,"disneyplus.com":933,"udemy.com":169,"imgur.com":55,"amazon.co.uk":206,"figma.com":79,"linktr.ee":17,"bbc.co.uk":281,"store.steampowered.com":87,"trello.com":127,"search.yahoo.com":61,"walmart.com":114,"onedrive.live.com":129},go=$({name:"ImportHistoryDialogContent",__name:"ImportHistoryDialogContent",emits:["continue"],setup(b){const{t}=V(),{reportEvent:n}=P(),s=w(!0),i=Q,r=Ye(),{remoteConfig:c,restoredPromise:u}=Ke(),m=Le();async function v(){var S;await u;const y=await J.history.search({text:"",maxResults:c.value.importHistoryMaxResult,startTime:0}),a=[];for(const f of y){let T=(S=ee(f.url,{removeGenericPrefixes:!1}))==null?void 0:S.hostname;f.url==null||T==null||(T=T.startsWith("www.")?T.slice(4):T,a.push({...f,url:f.url,host:T}))}const x=[];for(const f of a){const T=await J.history.getVisits({url:f.url});for(const G of T)G.visitTime&&x.push({...G,visitTime:Math.round(G.visitTime),host:f.host})}x.sort((f,T)=>f.visitTime-T.visitTime);const _=[];let E=0,H,A=Q;for(const f of x){const T=f.visitTime-E;!(f.host===H)&&T<=i?(p(_,f.visitTime),I(_,f)):T>i&&(p(_,E+A),I(_,f)),E=f.visitTime,H=f.host,f.host!==void 0&&Object.prototype.hasOwnProperty.call(ne,f.host)?A=ne[f.host]*K:A=Q}return p(_,E+A),_.filter(f=>f.startedAt!==f.endedAt)}function p(y,a){y[y.length-1]&&(a-y[y.length-1].startedAt>te&&(a=y[y.length-1].startedAt+te),y[y.length-1].endedAt=a)}function I(y,a){var _;const x=(_=ee(a.host))==null?void 0:_.hostname;x&&y.push({appId:x,startedAt:a.visitTime,imported:!0,generated:!0})}function O(){return pe("update-suggested-websites",void 0).catch()}return n("ONBOARDING_IMPORT_HISTORY_STARTED"),v().then(async y=>{await r.createSessions(y).catch()}).then(()=>Je(r,m)).then(()=>O()).then(()=>{n("ONBOARDING_IMPORT_HISTORY_SUCCESS"),s.value=!1}).catch(()=>{n("ONBOARDING_IMPORT_HISTORY_FAILURE"),s.value=!1}).finally(()=>n("ONBOARDING_IMPORT_HISTORY_FINISHED")),(y,a)=>(d(),N(ae,{"data-testid":"import-history-dialog-content",class:"w-108"},Me({body:h(()=>[e(s)?(d(),N(Ze,{key:0,class:"self-center"})):R("v-if",!0)]),buttons:h(()=>[e(s)?(d(),C("button",{key:1,class:"btn btn-neutral",onClick:a[1]||(a[1]=x=>y.$emit("continue"))},g(e(t)("cancel")),1)):(d(),C("button",{key:0,class:"btn btn-primary",onClick:a[0]||(a[0]=x=>y.$emit("continue"))},g(e(t)("continue")),1))]),_:2},[e(s)?{name:"title",fn:h(()=>[B(g(e(t)("onboarding.importHistory.title")),1)]),key:"0"}:{name:"title",fn:h(()=>[B(g(e(t)("onboarding.importHistory.completedText")),1)]),key:"1"}]),1024))}}),bo={"data-testid":"import-history-page",class:"pager-slide"},fo={class:"onboarding-button-bar"},ho=$({name:"ImportHistorySlide",__name:"ImportHistorySlide",emits:["continue"],setup(b,{emit:t}){const{reportEvent:n}=P();function s(){J.permissions.request({permissions:["history"]}).then(v=>{v?m():(oe("Permission to access history was denied"),r())}).catch(oe)}function i(){n("ONBOARDING_IMPORT_HISTORY_SKIPPED"),r()}const r=q(()=>{n("ONBOARDING_COMPLETED"),t("continue")},K),c=w();U(c);const{baseDialogProps:u,show:m}=ce();return(v,p)=>(d(),C("div",bo,[l(k,{tag:"h2",class:"onboarding-subtitle",keypath:"onboarding.importHistory.title"}),l(k,{tag:"p",keypath:"onboarding.importHistory.text"}),l(k,{tag:"p",keypath:"onboarding.importHistory.warning"}),o("div",fo,[o("button",{class:"btn btn-primary",onClick:p[0]||(p[0]=I=>s())},g(v.$t("onboarding.importHistory.import")),1),o("button",{ref_key:"skipButton",ref:c,"data-testid":"skip",class:"btn btn-neutral",onClick:p[1]||(p[1]=I=>i())},g(v.$t("onboarding.importHistory.skip")),513)]),l(de,ue(e(u),{"dismiss-disabled":""}),{default:h(()=>[l(go,{onContinue:e(r)},null,8,["onContinue"])]),_:1},16)]))}}),_o=Ue({context:"onboarding",onClickDashboardLink:Xe,customSlides:[ho],closeWindow(){pe("close-this-tab",void 0)}});po(_o).mount("#app");
