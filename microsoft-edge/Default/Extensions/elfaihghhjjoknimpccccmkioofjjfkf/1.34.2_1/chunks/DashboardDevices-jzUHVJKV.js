import{_ as H}from"./ConnectDeviceFab.vue_vue_type_script_setup_true_lang-kn97nerI.js";import{f as h,r as L,o as d,g as m,l as r,i as e,k as c,j as t,w as f,F as b,Q as n,N as R,aV as G,Y as g,c as k,P as I,p as Y,m as J,_ as W,aO as M,ap as X,aJ as Z,q as y,bd as ee,aH as se,aj as te,I as oe,cn as ne,s as ae,co as ie,aw as ce,z as S,t as re,n as le}from"./defineAppConfig-GTQ5Bvuh.js";import{c as de,m as v,o as U,P as pe,D as ue,Q as me,j as T,t as V,b as fe,k as _e,s as ve}from"./useAddAppToIgnoreListDialogStore-Ki2J31d-.js";import{C as A,p as ge,h as ye,b as he,m as xe,g as be,q as we,d as ke,s as De,t as Ce}from"./recent-apps-provider-OWite7eM.js";import{u as Se}from"./useRemoveDeviceMutation-zhMNlmXK.js";import{I as Ie}from"./more-vert-ui1bvY1Z.js";import{I as q,S as $e}from"./new-tab-light-6CDZBy0y.js";import"./FloatingActionButton.vue_vue_type_script_setup_true_lang-iV3s1viX.js";const Ee={class:"py-2 w-max min-w-[12rem]"},Pe=["onClick"],Ae=h({name:"OverflowMenu",__name:"OverflowMenu",props:{items:{}},setup(p){const s=L(!1);function l(o){s.value=!1,o.onClick()}return(o,a)=>(d(),m("div",null,[r(" Button "),e("div",{class:"w-12 h-12 cursor-pointer rounded-full p-3 box-border clickable",onClick:a[0]||(a[0]=i=>s.value=!0),"data-testid":"menu"},[c(t(Ie),{class:"icon opacity-icon"})]),r(" Drop down "),c(de,{class:"float-right",visible:t(s),onDismiss:a[1]||(a[1]=i=>s.value=!1),onClick:a[2]||(a[2]=G(()=>{},["stop"]))},{default:f(()=>[e("ul",Ee,[(d(!0),m(b,null,R(o.items,i=>(d(),m("li",{key:i.title,class:"cursor-pointer px-6 py-3 clickable",onClick:_=>l(i)},n(i.title),9,Pe))),128))])]),_:1},8,["visible"])]))}}),Le={class:"group flex items-center space-x-4 px-4 py-2 rounded-lg ring-hover"},Re={class:"flex flex-col flex-grow"},Ge={class:"text-base-content text-lg"},Me={key:0,class:"text-xs uppercase py-0.5 px-1 rounded-sm font-bold bg-secondary text-secondary-content"},Ue={class:"text-base-content text-opacity-secondary font-mono pb-1 text-sm"},Te=h({name:"DeviceListItem",__name:"DeviceListItem",props:{name:{},installId:{},isCurrentDevice:{type:Boolean}},emits:["remove"],setup(p,{emit:s}){const l=p,{t:o}=g(),a=k(()=>[{title:o("devices.unlink"),onClick:()=>s("remove",l.installId)}]);return(i,_)=>(d(),m("li",Le,[r(" Platform Icon "),c(v,{class:"icon opacity-icon shrink-0",platform:i.name},null,8,["platform"]),e("div",Re,[r(" Details "),e("p",Ge,[I(n(i.name.trim()||t(o)("devices.unknownDeviceName"))+" ",1),i.isCurrentDevice?(d(),m("span",Me,n(t(o)("devices.thisDevice")),1)):r("v-if",!0)]),e("p",Ue,n(i.installId),1)]),r(" Overflow menu "),c(Ae,{items:t(a),class:"flex-shrink-0"},null,8,["items"])]))}}),Ve="/assets/cross-platform-preview-H8K9yvlA.svg",qe="/assets/usage-limits-preview-RSz5b05S.svg",$=p=>(Y("data-v-0bfb3b70"),p=p(),J(),p),Be={class:"space-y-16"},Ne={class:"grid w-full min-w-[500px]"},Oe={class:"img1"},Qe={class:"border-2 border-base-content border-opacity-secondary rounded-lg overflow-hidden"},je=["src"],Ke=$(()=>e("div",{class:"line1 w-32px h-[2px] bg-base-content bg-opacity-secondary self-center"},null,-1)),ze={class:"p1 p-4 bg-base-content text-base-100 bg-opacity-secondary rounded-lg min-w-0"},Fe={class:"img2"},He={class:"border-2 border-base-content border-opacity-secondary rounded-lg overflow-hidden"},Ye=["src"],Je=$(()=>e("div",{class:"line2 w-32px h-[2px] bg-base-content bg-opacity-secondary self-center"},null,-1)),We={class:"p2 p-4 bg-base-content text-base-100 bg-opacity-secondary rounded-lg min-w-0"},Xe={class:"text-2xl mb-4"},Ze=$(()=>e("a",{href:"https://stayfreeapps.com/?download",class:"link link-secondary",target:"_blank"}," stayfreeapps.com",-1)),es={class:"bg-base-content bg-opacity-secondary text-base-100 py-2 text-center font-medium rounded-t-lg"},ss={class:"border-x-2 border-b-2 border-base-content border-opacity-secondary border-dashed rounded-b-lg flex justify-around p-2 flex-wrap gap-2 overflow-x-hidden"},ts={class:"flex gap-2"},os={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},ns={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},as={class:"flex gap-2"},is={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},cs={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},rs={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},ls={class:"flex gap-2"},ds={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},ps={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},us={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},ms=h({__name:"CrossPlatformPreview",setup(p){const{t:s}=g();return(l,o)=>(d(),m("div",Be,[r(" Graphic "),e("div",Ne,[e("div",Oe,[e("div",Qe,[e("img",{"data-theme":"dark",class:"bg-base-100 z-0",src:t(Ve)},null,8,je)])]),Ke,e("p",ze,n(t(s)("devices.empty.usagePreview")),1),e("div",Fe,[e("div",He,[e("img",{"data-theme":"dark",class:"bg-base-100 z-0",src:t(qe)},null,8,Ye)])]),Je,e("p",We,n(t(s)("devices.empty.limitsPreview")),1)]),r(" Steps "),e("div",null,[e("h3",Xe,n(t(s)("devices.empty.connectTitle")),1),c(ge,null,{default:f(()=>[r(" eslint-disable @intlify/vue-i18n/no-raw-text "),c(A,null,{default:f(()=>[c(q,{keypath:"devices.empty.connectStep1",tag:"span"},{default:f(()=>[Ze]),_:1})]),_:1}),r(" eslint-enable @intlify/vue-i18n/no-raw-text "),c(A,null,{default:f(()=>[I(n(t(s)("devices.empty.connectStep2")),1)]),_:1})]),_:1})]),r(" Platforms "),e("div",null,[e("h4",es,n(t(s)("devices.empty.platformsTitle")),1),e("ul",ss,[r(" Mobile "),e("ul",ts,[e("li",os,[c(v,{class:"icon-lg opacity-secondary",platform:"android"}),e("p",null,n(t(s)("devices.platform.android")),1)]),e("li",ns,[c(v,{class:"icon-lg opacity-secondary",platform:"ios"}),e("p",null,n(t(s)("devices.platform.ios")),1)])]),r(" Desktop "),e("ul",as,[e("li",is,[c(v,{class:"icon-lg opacity-secondary",platform:"windows"}),e("p",null,n(t(s)("devices.platform.windows")),1)]),e("li",cs,[c(v,{class:"icon-lg opacity-secondary",platform:"mac"}),e("p",null,n(t(s)("devices.platform.mac")),1)]),e("li",rs,[c(v,{class:"icon-lg opacity-secondary",platform:"linux"}),e("p",null,n(t(s)("devices.platform.linux")),1)])]),r(" Extensions "),e("ul",ls,[e("li",ds,[c(v,{class:"icon-lg opacity-secondary",platform:"chrome"}),e("p",null,n(t(s)("devices.platform.chrome")),1)]),e("li",ps,[c(v,{class:"icon-lg opacity-secondary",platform:"firefox"}),e("p",null,n(t(s)("devices.platform.firefox")),1)]),e("li",us,[c(v,{class:"icon-lg opacity-secondary",platform:"safari"}),e("p",null,n(t(s)("devices.platform.safari")),1)])])])])]))}}),fs=W(ms,[["__scopeId","data-v-0bfb3b70"]]),_s={key:0,class:"mx-auto py-48"},vs=h({name:"DeviceList",__name:"DeviceList",setup(p){const{t:s}=g(),l=U(),{deviceGroup:o}=M(l),{mutateAsync:a}=pe();l.useRemoteDataWatcher();const i=X(),{data:_,isFetching:x,isError:D,refetch:C}=ye(o),{data:B}=he(L({isCrossPlatform:!0})),N=k(()=>{var u;return((u=B.value)==null?void 0:u.length)??0>0}),O=k(()=>{let u=s("devices.removeConfirmationMessage");return N.value&&(u+=`

`,u+=s("devices.removeWithUsageLimit")),u}),Q=xe();function j(u){Q.show({title:s("genericConfirmation"),message:O.value,positiveButtonText:s("devices.unlink"),onClickPositive(){return o.value!=null&&z(u).catch(E=>se("[device-list] Failed to remove device from device group",E)),!0},negativeButtonText:s("cancel"),destructive:!0})}const K=Z();async function z(u){o.value!=null&&(await F({installIdToRemove:u,deviceGroupKey:o.value.key}),await a(!1)),K.invalidateQueries({queryKey:ue})}const{mutateAsync:F}=Se();return(u,E)=>{var P;return d(),m(b,null,[r(" Error "),t(D)?(d(),y(be,{key:0,class:"mx-auto py-48",onRetry:t(C)},null,8,["onRetry"])):(P=t(_))!=null&&P.length?r("v-if",!0):(d(),m(b,{key:1},[r(" Loading "),t(x)?(d(),m("div",_s,[c($e)])):(d(),m(b,{key:1},[r(" Empty "),c(fs,{class:"py-8"})],2112))],64)),r(" Main list "),c(ee,{tag:"ul",name:"fade",duration:300,class:"space-y-2"},{default:f(()=>[(d(!0),m(b,null,R(t(_),w=>(d(),y(Te,{key:w.install_id,name:w.name,"install-id":w.install_id,"is-current-device":t(i)===w.install_id,onRemove:j},null,8,["name","install-id","is-current-device"]))),128))]),_:1})],64)}}});function gs(){const p=te(oe.LastSyncedAtStorageKey),s=p?me(p,null):void 0,{t:l}=g(),{state:o}=(s==null?void 0:s())??{},a=ne(()=>o==null?void 0:o.value);return k(()=>o!=null&&o.value?a.value:l("devices.neverSynced"))}const ys=["onClick"],hs=h({__name:"SyncUsageMessage",setup(p){const{t:s}=g(),l=gs(),{mutate:o,isLoading:a}=we(),i=T();function _(){a.value||o(void 0,{onError(x){i.show({message:V(x),title:s("genericError")})}})}return(x,D)=>(d(),y(q,{class:"text-base-content",keypath:"devices.lastSyncedAt"},{default:f(()=>[e("span",null,n(t(l)),1),e("a",{href:"#",class:ae(["link link-hover",{"link-secondary":!t(a)}]),onClick:G(_,["stop","prevent"])},n(t(s)(t(a)?"devices.syncingUsage":"devices.syncNow")),11,ys)]),_:1}))}});function xs(){const s=ke().query[ie],{mutate:l}=De(),o=fe(),a=T(),{t:i}=g();ce(()=>{s&&(o.show(S.Loading),l(s,{onError:_=>{o.hide(S.Loading),a.show({title:i("connectDevice.failedToConnect"),message:i("genericErrorWithMessage",{message:V(_)})})},onSuccess:()=>{o.hide(S.Loading),a.show({title:i("connectDevice.success.title"),message:i("connectDevice.success.message")})}}))})}const bs={class:"dashboard-page-title"},Ps=h({name:"DashboardDevices",__name:"DashboardDevices",setup(p){const{reportEvent:s}=re();s("OPENED_DASHBOARD_DEVICES_PAGE");const{t:l}=g(),{storeUrl:o}=_e(),a=Ce();function i(){window.open(o,"_blank")}const{deviceGroup:_}=M(U());return xs(),(x,D)=>{const C=le("page-layout-content-container");return d(),y(C,null,{default:f(()=>[e("h1",bs,n(t(l)("manageDevices")),1),t(a)?(d(),y(ve,{key:0,type:"error"},{default:f(()=>[I(n(t(l)("devices.upgradeRequired")),1)]),buttons:f(()=>[e("button",{class:"btn btn-error",onClick:i},n(t(l)("upgrade")),1)]),_:1})):r("v-if",!0),c(vs),t(_)?(d(),y(hs,{key:1})):r("v-if",!0)]),overlay:f(()=>[c(H)]),_:1})}}});export{Ps as default};
