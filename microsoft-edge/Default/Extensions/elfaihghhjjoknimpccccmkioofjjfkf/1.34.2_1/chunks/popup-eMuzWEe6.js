import{bj as tt,o as i,g,i as n,f as h,K as et,c as v,b2 as st,U as P,k as l,s as S,j as o,Q as u,F as B,aO as E,r as x,b as U,aZ as ot,h as F,Y as $,t as j,q as p,w as d,P as y,bk as nt,l as k,a_ as L,ax as at,_ as H,n as A,D as M,v as it,T as rt,$ as ct,A as lt,B as ut,I as dt,C as mt}from"./defineAppConfig-GTQ5Bvuh.js";import{l as pt,E as _t,F as ft,o as vt,G as bt,a as ht,B as kt,d as gt,s as Ct,R as Dt}from"./useAddAppToIgnoreListDialogStore-Ki2J31d-.js";import{l as St,I as yt}from"./cog-kC_IiSfW.js";import{u as Pt}from"./useAllowedDateRange-sflFr8h-.js";import{i as $t,p as xt,a as wt}from"./useDateRange-7L57LI-8.js";import{u as G}from"./useReviewPromptStore-M82eMrYS.js";import{u as K}from"./useScheduleCallPromptStore-xaa1QQRy.js";import{_ as At,a as Mt}from"./FocusModeReasonBanner.vue_vue_type_script_setup_true_lang-kmimbFYN.js";import{_ as Bt}from"./SessionSummaryList.vue_vue_type_script_setup_true_lang-Z9Yh3mCs.js";import{u as Ot}from"./useFiltersStore-XGjXa_py.js";import{u as Rt}from"./useFocusModeStore-bWj63oGD.js";import{D as It,o as Tt}from"./links-PC8v_o69.js";import"./min-search-date-m8ObA3He.js";import"./SfOptionsButton.vue_vue_type_script_setup_true_lang-34L7vER_.js";import"./chevron-down-r-m6rVAr.js";import"./useRequirePin-V8f6W3iF.js";import"./useGetSessionSummaries--e-QKgL-.js";import"./useVibrantColor-iCMxnPhp.js";import"./useAddIgnoredAppMutation-OJF7vhrO.js";import"./schedules-jPLYWtFX.js";var V=0/0,Ft="[object Symbol]",Lt=/^\s+|\s+$/g,Vt=/^[-+]0x[0-9a-f]+$/i,Nt=/^0b[01]+$/i,Et=/^0o[0-7]+$/i,Ut=parseInt,jt=Object.prototype,Ht=jt.toString;function Gt(t,e,s){return t===t&&(s!==void 0&&(t=t<=s?t:s),e!==void 0&&(t=t>=e?t:e)),t}function N(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Kt(t){return!!t&&typeof t=="object"}function qt(t){return typeof t=="symbol"||Kt(t)&&Ht.call(t)==Ft}function w(t){if(typeof t=="number")return t;if(qt(t))return V;if(N(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=N(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=t.replace(Lt,"");var s=Nt.test(t);return s||Et.test(t)?Ut(t.slice(2),s?2:8):Vt.test(t)?V:+t}function Zt(t,e,s){return s===void 0&&(s=e,e=void 0),s!==void 0&&(s=w(s),s=s===s?s:0),e!==void 0&&(e=w(e),e=e===e?e:0),Gt(w(t),e,s)}var Wt=Zt;const zt=tt(Wt),Yt={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},Qt=n("path",{fill:"currentColor",d:"M18.41 7.41L17 6l-6 6l6 6l1.41-1.41L13.83 12l4.58-4.59m-6 0L11 6l-6 6l6 6l1.41-1.41L7.83 12l4.58-4.59Z"},null,-1),Jt=[Qt];function Xt(t,e){return i(),g("svg",Yt,Jt)}const te={name:"mdi-chevron-double-left",render:Xt},ee={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},se=n("path",{fill:"currentColor",d:"M5.59 7.41L7 6l6 6l-6 6l-1.41-1.41L10.17 12L5.59 7.41m6 0L13 6l6 6l-6 6l-1.41-1.41L16.17 12l-4.58-4.59Z"},null,-1),oe=[se];function ne(t,e){return i(),g("svg",ee,oe)}const ae={name:"mdi-chevron-double-right",render:ne},ie={viewBox:"0 0 24 24",width:"1.2em",height:"1.2em"},re=n("path",{fill:"currentColor",d:"M15.41 16.58L10.83 12l4.58-4.59L14 6l-6 6l6 6l1.41-1.42Z"},null,-1),ce=[re];function le(t,e){return i(),g("svg",ie,ce)}const ue={name:"mdi-chevron-left",render:le},de={class:"flex justify-center items-center py-2 space-x-4 px-4"},me=["title"],pe=["title"],_e={class:"flex-1 flex flex-col items-center space-y-1"},fe={class:"font-bold"},ve={class:"font-mono text-sm text-opacity-secondary"},be=["title"],he=["title"],ke=h({name:"DateInputBar",__name:"DateInputBar",props:{modelValue:{required:!0}},emits:["update:modelValue"],setup(t){const e=et(t,"modelValue"),{minDate:s,maxDate:r}=Pt();function a(_){const f=e.value+_*P;e.value=zt(f,s.value,r.value)}const c=v(()=>st(e.value)),m=$t(),b=v(()=>e.value+P>r.value),C=v(()=>e.value-P<s.value);return(_,f)=>(i(),g("div",de,[n("div",{title:_.$t("popup.back1Week")},[l(o(te),{class:S(["icon-button text-neutral-content text-opacity-secondary",{disabled:o(C)}]),onClick:f[0]||(f[0]=D=>a(-7))},null,8,["class"])],8,me),n("div",{title:_.$t("popup.back1Day")},[l(o(ue),{class:S(["icon-button text-neutral-content text-opacity-secondary",{disabled:o(C)}]),onClick:f[1]||(f[1]=D=>a(-1))},null,8,["class"])],8,pe),n("div",_e,[n("h4",fe,u(o(c)),1),n("h5",ve,u(o(m)),1)]),n("div",{title:_.$t("popup.forward1Day")},[l(o(pt),{class:S(["icon-button text-neutral-content text-opacity-secondary",{disabled:o(b)}]),onClick:f[2]||(f[2]=D=>a(1))},null,8,["class"])],8,be),n("div",{title:_.$t("popup.forward1Week")},[l(o(ae),{class:S(["icon-button text-neutral-content text-opacity-secondary",{disabled:o(b)}]),onClick:f[3]||(f[3]=D=>a(7))},null,8,["class"])],8,he)]))}}),ge=h({name:"PopupGlobalDialogs",__name:"PopupGlobalDialogs",setup(t){return(e,s)=>(i(),g(B,null,[l(_t),l(ft)],64))}}),Ce=P;function q(t){const{deviceGroup:e}=E(vt()),{state:s,mutateAsync:r}=bt(),{state:a}=ht(),c=x(!1);U(()=>{c.value=!0},(t==null?void 0:t.autoShowTimeout)??1e3);const m=kt({interval:ot}),b=v(()=>c.value&&!s.value&&e.value==null&&a.value!=null&&m.value>=a.value+Ce);function C(){return r(!0)}return{isVisible:b,neverAutoShowAgain:C}}const De={class:"bg-primary p-2 flex gap-2 items-center"},Se={class:"flex-1 text-ellipsis pl-2 text-primary-content"},ye={class:"flex flex-shrink-0 gap-2"},O=h({name:"SnackbarContainer",__name:"SnackbarContainer",emits:["clickDismiss"],setup(t,{emit:e}){return(s,r)=>(i(),g("div",De,[n("p",Se,[F(s.$slots,"title")]),n("div",ye,[F(s.$slots,"buttons")]),n("div",{class:"p-2 rounded-full clickable cursor-pointer",onClick:r[0]||(r[0]=a=>e("clickDismiss"))},[l(o(gt),{class:"icon text-primary-content"})])]))}}),Pe=h({name:"CrossPlatformSnackbar",__name:"CrossPlatformSnackbar",setup(t){const{t:e}=$(),{reportEvent:s}=j(),{neverAutoShowAgain:r}=q();function a(){r(),s("CROSS_PLATFORM_SNACKBAR_CLICKED"),window.open(nt())}function c(){r(),s("CROSS_PLATFORM_SNACKBAR_DISMISSED")}return(m,b)=>(i(),p(O,{onClickDismiss:c},{title:d(()=>[y(u(o(e)("crossPlatformPrompt.title")),1)]),buttons:d(()=>[n("button",{class:"btn",onClick:a},u(o(e)("crossPlatformPrompt.learnMoreButton")),1)]),_:1}))}}),$e=h({name:"ReviewSnackbar",__name:"ReviewSnackbar",setup(t){const{t:e}=$(),s=G();return(r,a)=>(i(),p(O,{onClickDismiss:o(s).dismiss},{title:d(()=>[y(u(o(e)("reviewPrompt.title")),1)]),buttons:d(()=>[n("button",{class:"btn",onClick:a[0]||(a[0]=(...c)=>o(s).submitReview&&o(s).submitReview(...c))},u(o(e)("reviewPrompt.callToAction")),1)]),_:1},8,["onClickDismiss"]))}}),xe=h({name:"ScheduleCallSnackbar",__name:"ScheduleCallSnackbar",setup(t){const{t:e}=$(),s=K();return(r,a)=>(i(),p(O,{onClickDismiss:o(s).dismiss},{title:d(()=>[y(u(o(e)("scheduleCallPrompt.title")),1)]),buttons:d(()=>[n("button",{class:"btn",onClick:a[0]||(a[0]=(...c)=>o(s).scheduleCall&&o(s).scheduleCall(...c))},u(o(e)("scheduleCallPrompt.callButton")),1)]),_:1},8,["onClickDismiss"]))}}),we={key:0,class:"bg-primary relative min-h-[56px]"},Ae=h({name:"PopupSnackbarManager",__name:"PopupSnackbarManager",setup(t){const e=G(),s=K(),{isVisible:r}=q({autoShowTimeout:250}),a=v(()=>{let m=0;return e.isVisible&&m++,r.value&&m++,s.isVisible&&m++,m}),c=x(!1);return U(()=>{c.value=!0},.25*at,{immediate:!0}),(m,b)=>(i(),p(L,{name:"fade"},{default:d(()=>[o(a)>0?(i(),g("div",we,[l(L,{name:"slide-left-right",css:o(c)},{default:d(()=>[o(e).isVisible?(i(),p($e,{key:"review"})):o(r)?(i(),p(Pe,{key:"cross-platform"})):o(s).isVisible?(i(),p(xe,{key:"schedule-call"})):k("v-if",!0)]),_:1},8,["css"])])):k("v-if",!0)]),_:1}))}}),Me=H(Ae,[["__scopeId","data-v-c278d2d7"]]),Be={class:"mt-5 text-base-content"},Oe=h({name:"PopupFocusMode",__name:"PopupFocusMode",props:{openFocusMode:{type:Function},isFocusModeActive:{type:Boolean}},setup(t){const{t:e}=$();return(s,r)=>{const a=A("router-link"),c=A("i18n-t");return i(),g(B,null,[s.isFocusModeActive?(i(),p(Mt,{key:0})):(i(),p(Ct,{key:1,type:"plain"},{default:d(()=>[n("strong",null,u(o(e)("focusMode.title")),1),n("div",null,u(o(e)("focusMode.focusModeShortDescription")),1)]),buttons:d(()=>[l(At)]),_:1})),n("div",Be,[l(c,{keypath:`focusMode.popupVisitSettingsFooter${s.isFocusModeActive?"Enabled":"Disabled"}`},{default:d(()=>[l(a,{class:"link link-secondary",to:o(M).focus,onClick:s.openFocusMode},{default:d(()=>[y(u(o(e)("focusMode.settings")),1)]),_:1},8,["to","onClick"])]),_:1},8,["keypath"])])],64)}}}),Re=h({name:"PopupStats",__name:"PopupStats",props:{dateRange:{},openUsageLimits:{type:Function}},setup(t){const{selectedMetric:e,platformFilter:s,selectedDevices:r}=E(Ot());return(a,c)=>(i(),p(Bt,{"start-date":a.dateRange.startDate,"end-date":a.dateRange.endDate,"primary-metric":o(e),"platform-filter":o(s),"install-ids":o(r),popup:""},null,8,["start-date","end-date","primary-metric","platform-filter","install-ids"]))}}),Ie={class:"w-[28rem] h-[28rem] flex flex-col"},Te={class:"flex flex-col flex-1"},Fe={class:"flex items-center gap-4 p-2"},Le={class:"text-lg font-medium grow"},Ve=["src"],Ne={class:"flex items-center gap-2"},Ee={role:"tablist",class:"tabs tabs-bordered"},Ue={class:"p-4 max-h-[18rem] overflow-y-auto h-full"},je=h({name:"PopupIndex",__name:"PopupIndex",setup(t){const{t:e}=$(),{reportEvent:s}=j();it(),xt();const r=Rt(),a=v(()=>!!r.reason),c=x(),m=v(()=>c.value??(a.value?"focusmode":"usagestats")),b=v(()=>m.value=="usagestats"),C=v(()=>m.value=="focusmode"),_=x(rt()),f=v(()=>_.value+P),D=v(()=>({startDate:_.value,endDate:f.value}));wt(D);function Z(){c.value="usagestats"}function W(){c.value="focusmode"}function z(){s("POPUP_OPEN_DASHBOARD",{to:"home"})}function Y(){s("POPUP_OPEN_DASHBOARD",{to:"usage_limits"})}function Q(){s("POPUP_OPEN_DASHBOARD",{to:"focus"})}function J(){s("POPUP_OPEN_DASHBOARD",{to:"settings"})}return(R,I)=>{const T=A("router-link");return i(),g(B,null,[k(" Fixed size content "),n("div",Ie,[k(" Top content "),n("div",Te,[k(" Header "),n("div",Fe,[n("h1",Le,[n("img",{src:o(St),class:"icon inline-block mx-1"},null,8,Ve),y(" "+u(o(e)("appName")),1)]),n("div",Ne,[l(T,{class:"btn btn-neutral",to:o(M).overview,onClick:z},{default:d(()=>[y(u(o(e)("dashboard.statsTitle")),1)]),_:1},8,["to"]),l(T,{class:"btn btn-neutral btn-square",to:o(M).settings,title:o(e)("settings"),onClick:J},{default:d(()=>[l(o(yt),{class:"icon-sm"})]),_:1},8,["to","title"])])]),n("div",Ee,[n("div",{class:S(["tab",{"tab-active":o(b)}]),role:"tab",onClick:Z},u(R.$t("newtab.usageStatsTab")),3),n("div",{class:S(["tab",{"tab-active":o(C)}]),role:"tab",onClick:W},u(R.$t("focusMode.title")),3)]),k(" Content "),n("div",Ue,[o(b)?(i(),p(Re,{key:0,"date-range":o(D),"open-usage-limits":Y},null,8,["date-range"])):o(C)?(i(),p(Oe,{key:1,"open-focus-mode":Q,"is-focus-mode-active":o(a)},null,8,["is-focus-mode-active"])):k("v-if",!0)])]),k(" Bottom content "),o(b)?(i(),p(ke,{key:0,class:"flex-shrink-0 bg-input",modelValue:o(_),"onUpdate:modelValue":I[0]||(I[0]=X=>ct(_)?_.value=X:null)},null,8,["modelValue"])):k("v-if",!0),l(Me),l(ge)])],2112)}}}),He=H(je,[["__scopeId","data-v-d7295362"]]);function Ge(t){window.document.title=lt.global.t("appName");const e=Dt(He,["w-[28rem]","h-[20rem]"]),s=ut("popup",e,t).provide(dt.IsPopup,!0).component("router-link",It(t.onClickDashboardLink));return t.analytics.reportEvent("OPENED_POPUP"),{mount:s.mount.bind(s)}}const Ke=mt({context:"popup",onClickDashboardLink:Tt});Ge(Ke).mount("#app");
