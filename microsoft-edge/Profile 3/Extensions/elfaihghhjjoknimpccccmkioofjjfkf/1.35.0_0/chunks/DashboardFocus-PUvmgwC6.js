import{_ as R}from"./AppList.vue_vue_type_script_setup_true_lang-eIwO1WOM.js";import{u as V,_ as j,a as G}from"./FocusModeReasonBanner.vue_vue_type_script_setup_true_lang-oQe0zSvy.js";import{bh as q,b_ as z,c as w,f as W,Y as N,as as I,a$ as Y,b0 as Q,t as U,o as c,q as u,w as B,g as k,N as X,F as J,k as d,j as e,bd as K,bX as Z,z as ee,bU as A,n as te,i as a,Q as M,l as T}from"./defineAppConfig-bSouF0-Z.js";import{I as S}from"./new-tab-light-H2_I1S9N.js";import{j as se,b as oe}from"./useAddAppToIgnoreListDialogStore-3TvFnIDf.js";import{m as ae,n as ie,o as ce}from"./recent-apps-provider-So7C9hQg.js";import{u as x}from"./useRequireSecurity-QcrLk1hI.js";import{I as ne}from"./plus-1Lu360WS.js";import{_ as re}from"./ScheduleEntry.vue_vue_type_script_setup_true_lang-za58xXGl.js";import{u as de}from"./useWalkthrough-P3Hrl8Zz.js";import{u as ue}from"./useFocusModeStore-V9pg4lJX.js";import{I as le}from"./timer-Q3fuddn_.js";import"./AppListItem.vue_vue_type_script_setup_true_lang-oxAodo1O.js";import"./useGetAppMetadataQuery-50d_JU5K.js";import"./useVibrantColor-lZfnBXxU.js";import"./SfOptionsButton.vue_vue_type_script_setup_true_lang-nwfY29cQ.js";import"./chevron-down-4XWJauDH.js";import"./pencil-outline-vSGnzihw.js";import"./sleep-9Kq7Tjeg.js";import"./useIsNewTabPage-fPhgc3yk.js";import"./schedules-I-CqJJm9.js";const $=q(()=>{const{state:l,...i}=z(),s=w(()=>l.value.sort());return{...i,websites:s}}),pe=W({name:"FocusScheduleList",__name:"FocusScheduleList",props:{schedules:{},activeSchedules:{}},setup(l){const i=l,{t:s}=N(),p=se(),r=ae(),m=I(),y=oe(),{state:g}=Y(),f=ie(),_=w(()=>g.value==Q.Hour24),{websites:h}=$(),{reportEvent:o}=U();function b(n,v,t,F){const O=F.map(P=>P.charAt(0).toUpperCase()).join("");return n?O+" - "+s("schedules.allDay"):O+` - ${A(v,{is24HourFormat:_.value})} - ${A(t,{is24HourFormat:_.value})}`}function E(){f.show({onSubmit:C})}const D=x(n=>{f.show({schedule:n,onSubmit:C})});function C(n){m.addFocusSchedule(n),o("FOCUS_MODE_ADD_SCHEDULE"),h.value.length||H()}const L=x(n=>{r.show({title:s("genericConfirmation"),positiveButtonText:s("delete"),negativeButtonText:s("cancel"),destructive:!0,async onClickPositive(){try{await m.removeFocusSchedule(n),o("FOCUS_MODE_REMOVE_SCHEDULE")}catch(v){Z(v),p.show({message:s("genericError")})}return!0}})});function H(){y.show(ee.FocusModeRequiredSitesWarning)}return(n,v)=>(c(),u(K,{tag:"ul",name:"fade",class:"grid grid-flow-row gap-4 sm:grid-cols-2",duration:300},{default:B(()=>[(c(!0),k(J,null,X(i.schedules,t=>(c(),u(re,{key:t.id,id:t.id,"schedule-name":t.name,"schedule-time":b(t.allDay,t.startTime,t.endTime,t.days),"is-active":i.activeSchedules.includes(t.id),onEdit:F=>e(D)(t),onDelete:F=>e(L)(t.id)},null,8,["id","schedule-name","schedule-time","is-active","onEdit","onDelete"]))),128)),(c(),k("button",{class:"h-14 flex items-center justify-center space-x-2 rounded-lg ring-1 ring-base-content ring-opacity-divider ring-inset clickable","data-testid":"add-schedule",key:e(s)("schedules.addSchedule"),onClick:E},[d(e(ne),{class:"icon text-base-content text-opacity-secondary"}),d(S,{tag:"p",keypath:"schedules.addSchedule"})]))]),_:1}))}});function me(){de("FocusMode","focusMode",[{stepName:"focusModeEnableManually",selector:"#activate-focus-mode-button",eventName:"FOCUS_MODE_ENABLE_MANUALLY",popoverOptions:{side:"left"}},{stepName:"focusModeSchedule",selector:'[data-testid="add-schedule"]',eventName:"FOCUS_MODE_SCHEDULE"},{stepName:"focusModeAddWebsites",selector:'[data-testid="add-website"]',eventName:"FOCUS_MODE_ADD_WEBSITES"}])}const fe={"data-testid":"focus-mode",class:"section section-sticky"},_e={class:"GenericPref flex space-x-4 py-4 pl-2 items-center"},he={class:"flex flex-col flex-1 space-y-1"},be={class:"text-base-content text-opacity-primary text-lg"},ve={class:"text-base-content text-opacity-secondary pr-8"},Se={class:"flex-shrink-0 pr-4 items-center content-center"},ye={key:1},ge=a("div",{class:"w-1 h-1 overflow-visible relative"},null,-1),Ee={class:"section"},De={class:"section"},Ge=W({name:"DashboardFocus",__name:"DashboardFocus",setup(l){const{t:i}=N(),{reportEvent:s}=U(),p=I(),r=ue();async function m(o){await p.addFocusWebsite(o),s("FOCUS_MODE_ADD_NEW_WEBSITE",{hostname:o})}const y=x(async o=>{await p.removeFocusWebsite(o),s("FOCUS_MODE_REMOVE_WEBSITE",{hostname:o})});me();const{websites:g}=$(),f=ce(),_=w(()=>g.value.map(o=>({appId:o,platform:f,disableAppGroups:!0}))),h=V();return(o,b)=>{const E=te("page-layout-content-container");return c(),u(E,null,{default:B(()=>[a("section",fe,[d(S,{tag:"h1",class:"dashboard-page-title",keypath:"focusMode.title"})]),a("div",_e,[a("div",he,[a("p",be,M(e(i)("focusMode.activateFocusMode")),1),a("p",ve,M(e(i)("focusMode.focusModeDescription")),1)]),a("div",Se,[e(r).activeSchedule?(c(),u(e(le),{key:0,class:"icon-lg text-primary"})):e(r).isEnabled?(c(),k("div",ye,[a("button",{"data-testid":"disable-button",class:"btn btn-neutral",onClick:b[0]||(b[0]=(...D)=>e(h)&&e(h)(...D))},M(e(i)("disable")),1),T(" This line has been added to make it the same size as the options button. "),ge])):(c(),u(j,{key:2}))])]),e(r).reason?(c(),u(G,{key:0})):T("v-if",!0),a("section",Ee,[d(S,{tag:"h2",keypath:"schedules.schedules",class:"section-title"}),d(pe,{schedules:e(r).schedules,"active-schedules":e(r).activeScheduleIds},null,8,["schedules","active-schedules"])]),a("section",De,[d(S,{tag:"h2",class:"section-title",keypath:"focusMode.blockedWebsites"}),d(R,{apps:e(_),"add-app-description":e(i)("focusMode.addWebsiteDescription"),"show-add-button":"",onAdd:m,onRemove:e(y)},null,8,["apps","add-app-description","onRemove"])])]),_:1})}}});export{Ge as default};
