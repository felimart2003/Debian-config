import{C as F}from"./useAddAppToIgnoreListDialogStore-3TvFnIDf.js";import{b4 as y,c0 as T,b_ as A,c1 as D,a$ as M,ax as g,c as u,b1 as r,b0 as I,Y as P,aS as j}from"./defineAppConfig-bSouF0-Z.js";import{i as x,g as C,a as O,b as R,c as U}from"./schedules-I-CqJJm9.js";function w(e,a,t){return a===!0||typeof a=="object"&&"until"in a&&e<a.until||x(e,t)}const N=y("focus-mode",()=>{const{state:e}=T(),{state:a}=A(),{state:t}=D(),{state:v}=M(),s=F({interval:g}),f=u(()=>C(s.value,t.value)),d=u(()=>O(s.value,t.value).map(i=>i.id)),n=u(()=>R(s.value,t.value)),c=u(()=>w(s.value,e.value,t.value)),o=u(()=>{if(n.value)return U(s.value,n.value)[1];if(typeof e.value=="object"&&"until"in e.value)return e.value.until}),m=u(()=>{if(o.value)return r(o.value,{is24HourFormat:v.value===I.Hour24})}),{t:l}=P(),b=u(()=>{if(c.value){if(e.value===!0)return l("focusMode.statusReasonIndefinitely");if(typeof e.value=="object"&&"until"in e.value){const i=e.value.until-s.value;return l("focusMode.statusReasonUntilTime",{timeLeft:j(i,{excludeTrailingZeros:!0})})}if(n.value&&o.value)return l("focusMode.statusReasonSchedule",{scheduleName:n.value.name,timeOfDay:r(o.value)})}});function S(){e.value=!0}function h(i){e.value={until:Date.now()+i}}function p(){e.value=!1}return{isEnabled:c,manuallyEnabled:e,websites:a,schedules:t,activeSchedule:f,lastActiveSchedule:n,enabledUntil:o,enabledUntilDisplay:m,reason:b,activeScheduleIds:d,enableIndefinitely:S,enableForDuration:h,disable:p}});export{N as u};
