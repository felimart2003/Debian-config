import{_ as Y}from"./ConnectDeviceFab.vue_vue_type_script_setup_true_lang-Ug_LIqDh.js";import{f as h,r as M,o as d,g as f,l as r,i as e,k as c,j as t,w as _,F as b,Q as n,N as U,aV as G,Y as g,c as S,P,p as J,m as W,_ as X,aO as q,ap as Z,aJ as T,q as y,bd as ee,aH as se,aj as te,I as oe,cm as ne,s as ae,cn as ie,aw as ce,z as I,t as re,n as le}from"./defineAppConfig-bSouF0-Z.js";import{c as de,m as v,o as Q,Q as ue,D as pe,S as me,j as V,t as B,b as fe,k as _e,s as ve}from"./useAddAppToIgnoreListDialogStore-3TvFnIDf.js";import{C as A,p as ge,h as ye,b as he,m as xe,g as be,q as we,s as Ce,d as ke,t as De,v as Se}from"./recent-apps-provider-So7C9hQg.js";import{u as Ie}from"./useRemoveDeviceMutation-bL47YFoH.js";import{I as Pe}from"./more-vert-pXNNtvnf.js";import{I as N,S as $e}from"./new-tab-light-H2_I1S9N.js";import{g as Ee}from"./useGetSessionSummariesQuery-T1BAMH4j.js";import"./FloatingActionButton.vue_vue_type_script_setup_true_lang-Hm8VVYOk.js";const Le={class:"py-2 w-max min-w-[12rem]"},Re=["onClick"],Ae=h({name:"OverflowMenu",__name:"OverflowMenu",props:{items:{}},setup(u){const s=M(!1);function l(o){s.value=!1,o.onClick()}return(o,a)=>(d(),f("div",null,[r(" Button "),e("div",{class:"w-12 h-12 cursor-pointer rounded-full p-3 box-border clickable",onClick:a[0]||(a[0]=i=>s.value=!0),"data-testid":"menu"},[c(t(Pe),{class:"icon opacity-icon"})]),r(" Drop down "),c(de,{class:"float-right",visible:t(s),onDismiss:a[1]||(a[1]=i=>s.value=!1),onClick:a[2]||(a[2]=G(()=>{},["stop"]))},{default:_(()=>[e("ul",Le,[(d(!0),f(b,null,U(o.items,i=>(d(),f("li",{key:i.title,class:"cursor-pointer px-6 py-3 clickable",onClick:p=>l(i)},n(i.title),9,Re))),128))])]),_:1},8,["visible"])]))}}),Me={class:"group flex items-center space-x-4 px-4 py-2 rounded-lg ring-hover"},Ue={class:"flex flex-col flex-grow"},Ge={class:"text-base-content text-lg"},qe={key:0,class:"text-xs uppercase py-0.5 px-1 rounded-sm font-bold bg-secondary text-secondary-content"},Te={class:"text-base-content text-opacity-secondary font-mono pb-1 text-sm"},Qe=h({name:"DeviceListItem",__name:"DeviceListItem",props:{name:{},installId:{},isCurrentDevice:{type:Boolean}},emits:["remove"],setup(u,{emit:s}){const l=u,{t:o}=g(),a=S(()=>[{title:o("devices.unlink"),onClick:()=>s("remove",l.installId)}]);return(i,p)=>(d(),f("li",Me,[r(" Platform Icon "),c(v,{class:"icon opacity-icon shrink-0",platform:i.name},null,8,["platform"]),e("div",Ue,[r(" Details "),e("p",Ge,[P(n(i.name.trim()||t(o)("devices.unknownDeviceName"))+" ",1),i.isCurrentDevice?(d(),f("span",qe,n(t(o)("devices.thisDevice")),1)):r("v-if",!0)]),e("p",Te,n(i.installId),1)]),r(" Overflow menu "),c(Ae,{items:t(a),class:"flex-shrink-0"},null,8,["items"])]))}}),Ve="/assets/cross-platform-preview-H8K9yvlA.svg",Be="/assets/usage-limits-preview-RSz5b05S.svg",$=u=>(J("data-v-0bfb3b70"),u=u(),W(),u),Ne={class:"space-y-16"},Ke={class:"grid w-full min-w-[500px]"},Oe={class:"img1"},je={class:"border-2 border-base-content border-opacity-secondary rounded-lg overflow-hidden"},ze=["src"],Fe=$(()=>e("div",{class:"line1 w-32px h-[2px] bg-base-content bg-opacity-secondary self-center"},null,-1)),He={class:"p1 p-4 bg-base-content text-base-100 bg-opacity-secondary rounded-lg min-w-0"},Ye={class:"img2"},Je={class:"border-2 border-base-content border-opacity-secondary rounded-lg overflow-hidden"},We=["src"],Xe=$(()=>e("div",{class:"line2 w-32px h-[2px] bg-base-content bg-opacity-secondary self-center"},null,-1)),Ze={class:"p2 p-4 bg-base-content text-base-100 bg-opacity-secondary rounded-lg min-w-0"},es={class:"text-2xl mb-4"},ss=$(()=>e("a",{href:"https://stayfreeapps.com/?download",class:"link link-secondary",target:"_blank"}," stayfreeapps.com",-1)),ts={class:"bg-base-content bg-opacity-secondary text-base-100 py-2 text-center font-medium rounded-t-lg"},os={class:"border-x-2 border-b-2 border-base-content border-opacity-secondary border-dashed rounded-b-lg flex justify-around p-2 flex-wrap gap-2 overflow-x-hidden"},ns={class:"flex gap-2"},as={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},is={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},cs={class:"flex gap-2"},rs={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},ls={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},ds={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},us={class:"flex gap-2"},ps={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},ms={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},fs={class:"text-base-content flex flex-col items-center gap-2 p-2 min-w-[64px]"},_s=h({__name:"CrossPlatformPreview",setup(u){const{t:s}=g();return(l,o)=>(d(),f("div",Ne,[r(" Graphic "),e("div",Ke,[e("div",Oe,[e("div",je,[e("img",{"data-theme":"dark",class:"bg-base-100 z-0",src:t(Ve)},null,8,ze)])]),Fe,e("p",He,n(t(s)("devices.empty.usagePreview")),1),e("div",Ye,[e("div",Je,[e("img",{"data-theme":"dark",class:"bg-base-100 z-0",src:t(Be)},null,8,We)])]),Xe,e("p",Ze,n(t(s)("devices.empty.limitsPreview")),1)]),r(" Steps "),e("div",null,[e("h3",es,n(t(s)("devices.empty.connectTitle")),1),c(ge,null,{default:_(()=>[r(" eslint-disable @intlify/vue-i18n/no-raw-text "),c(A,null,{default:_(()=>[c(N,{keypath:"devices.empty.connectStep1",tag:"span"},{default:_(()=>[ss]),_:1})]),_:1}),r(" eslint-enable @intlify/vue-i18n/no-raw-text "),c(A,null,{default:_(()=>[P(n(t(s)("devices.empty.connectStep2")),1)]),_:1})]),_:1})]),r(" Platforms "),e("div",null,[e("h4",ts,n(t(s)("devices.empty.platformsTitle")),1),e("ul",os,[r(" Mobile "),e("ul",ns,[e("li",as,[c(v,{class:"icon-lg opacity-secondary",platform:"android"}),e("p",null,n(t(s)("devices.platform.android")),1)]),e("li",is,[c(v,{class:"icon-lg opacity-secondary",platform:"ios"}),e("p",null,n(t(s)("devices.platform.ios")),1)])]),r(" Desktop "),e("ul",cs,[e("li",rs,[c(v,{class:"icon-lg opacity-secondary",platform:"windows"}),e("p",null,n(t(s)("devices.platform.windows")),1)]),e("li",ls,[c(v,{class:"icon-lg opacity-secondary",platform:"mac"}),e("p",null,n(t(s)("devices.platform.mac")),1)]),e("li",ds,[c(v,{class:"icon-lg opacity-secondary",platform:"linux"}),e("p",null,n(t(s)("devices.platform.linux")),1)])]),r(" Extensions "),e("ul",us,[e("li",ps,[c(v,{class:"icon-lg opacity-secondary",platform:"chrome"}),e("p",null,n(t(s)("devices.platform.chrome")),1)]),e("li",ms,[c(v,{class:"icon-lg opacity-secondary",platform:"firefox"}),e("p",null,n(t(s)("devices.platform.firefox")),1)]),e("li",fs,[c(v,{class:"icon-lg opacity-secondary",platform:"safari"}),e("p",null,n(t(s)("devices.platform.safari")),1)])])])])]))}}),vs=X(_s,[["__scopeId","data-v-0bfb3b70"]]),gs={key:0,class:"mx-auto py-48"},ys=h({name:"DeviceList",__name:"DeviceList",setup(u){const{t:s}=g(),l=Q(),{deviceGroup:o}=q(l),{mutateAsync:a}=ue();l.useRemoteDataWatcher();const i=Z(),{data:p,isFetching:w,isError:C,refetch:x}=ye(o),{data:k}=he(M({isCrossPlatform:!0})),E=S(()=>{var m;return((m=k.value)==null?void 0:m.length)??0>0}),K=S(()=>{let m=s("devices.removeConfirmationMessage");return E.value&&(m+=`

`,m+=s("devices.removeWithUsageLimit")),m}),O=xe();function j(m){O.show({title:s("genericConfirmation"),message:K.value,positiveButtonText:s("devices.unlink"),onClickPositive(){return o.value!=null&&F(m).catch(L=>se("[device-list] Failed to remove device from device group",L)),!0},negativeButtonText:s("cancel"),destructive:!0})}const z=T();async function F(m){o.value!=null&&(await H({installIdToRemove:m,deviceGroupKey:o.value.key}),await a(!1)),z.invalidateQueries({queryKey:pe})}const{mutateAsync:H}=Ie();return(m,L)=>{var R;return d(),f(b,null,[r(" Error "),t(C)?(d(),y(be,{key:0,class:"mx-auto py-48",onRetry:t(x)},null,8,["onRetry"])):(R=t(p))!=null&&R.length?r("v-if",!0):(d(),f(b,{key:1},[r(" Loading "),t(w)?(d(),f("div",gs,[c($e)])):(d(),f(b,{key:1},[r(" Empty "),c(vs,{class:"py-8"})],2112))],64)),r(" Main list "),c(ee,{tag:"ul",name:"fade",duration:300,class:"space-y-2"},{default:_(()=>[(d(!0),f(b,null,U(t(p),D=>(d(),y(Qe,{key:D.install_id,name:D.name,"install-id":D.install_id,"is-current-device":t(i)===D.install_id,onRemove:j},null,8,["name","install-id","is-current-device"]))),128))]),_:1})],64)}}});function hs(){const u=te(oe.LastSyncedAtStorageKey),s=u?me(u,null):void 0,{t:l}=g(),{state:o}=(s==null?void 0:s())??{},a=ne(()=>o==null?void 0:o.value);return S(()=>o!=null&&o.value?a.value:l("devices.neverSynced"))}const xs=["onClick"],bs=h({__name:"SyncUsageMessage",setup(u){const{t:s}=g(),l=hs(),{mutate:o,isLoading:a}=we(),{mutate:i,isLoading:p}=Ce(),w=T(),C=V();function x(){a.value||p.value||(i(void 0,{onSuccess(){w.invalidateQueries({queryKey:[Ee]})}}),o(void 0,{onError(k){C.show({message:B(k),title:s("genericError")})}}))}return(k,E)=>(d(),y(N,{class:"text-base-content",keypath:"devices.lastSyncedAt"},{default:_(()=>[e("span",null,n(t(l)),1),e("a",{href:"#",class:ae(["link link-hover",{"link-secondary":!t(a)&&!t(p)}]),onClick:G(x,["stop","prevent"])},n(t(s)(t(a)||t(p)?"devices.syncingUsage":"devices.syncNow")),11,xs)]),_:1}))}});function ws(){const s=ke().query[ie],{mutate:l}=De(),o=fe(),a=V(),{t:i}=g();ce(()=>{s&&(o.show(I.Loading),l(s,{onError:p=>{o.hide(I.Loading),a.show({title:i("connectDevice.failedToConnect"),message:i("genericErrorWithMessage",{message:B(p)})})},onSuccess:()=>{o.hide(I.Loading),a.show({title:i("connectDevice.success.title"),message:i("connectDevice.success.message")})}}))})}const Cs={class:"dashboard-page-title"},As=h({name:"DashboardDevices",__name:"DashboardDevices",setup(u){const{reportEvent:s}=re();s("OPENED_DASHBOARD_DEVICES_PAGE");const{t:l}=g(),{storeUrl:o}=_e(),a=Se();function i(){window.open(o,"_blank")}const{deviceGroup:p}=q(Q());return ws(),(w,C)=>{const x=le("page-layout-content-container");return d(),y(x,null,{default:_(()=>[e("h1",Cs,n(t(l)("manageDevices")),1),t(a)?(d(),y(ve,{key:0,type:"error"},{default:_(()=>[P(n(t(l)("devices.upgradeRequired")),1)]),buttons:_(()=>[e("button",{class:"btn btn-error",onClick:i},n(t(l)("upgrade")),1)]),_:1})):r("v-if",!0),c(ys),t(p)?(d(),y(bs,{key:1})):r("v-if",!0)]),overlay:_(()=>[c(Y)]),_:1})}}});export{As as default};
