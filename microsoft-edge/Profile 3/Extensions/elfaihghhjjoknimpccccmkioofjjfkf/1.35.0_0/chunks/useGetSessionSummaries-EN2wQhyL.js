import{Y as D,aO as C,c as a,bY as G,bZ as d,S as P,j as V,aS as x,ax as T}from"./defineAppConfig-bSouF0-Z.js";import{C as U,o as h}from"./useAddAppToIgnoreListDialogStore-3TvFnIDf.js";import{u as w}from"./useGetSessionSummariesQuery-T1BAMH4j.js";function L(u,l,i){const{t:o}=D(),n=U({interval:T}),{deviceGroup:m}=C(h()),{isLoading:y,isError:v,data:t,error:c}=w(l).remote,s=a(()=>{var r;return((r=t.value)==null?void 0:r.map(e=>G(e.sessions,n.value)))??[]}),f=a(()=>d(s.value)),M=a(()=>{var r;return((r=t.value)==null?void 0:r.map(e=>e.sessions.length))??[]}),g=a(()=>d(M.value)),S=a(()=>{var r;return((r=t.value)==null?void 0:r.map(e=>e.adCount))??[]}),I=a(()=>d(S.value)),A=a(()=>{var r;return((r=t.value)==null?void 0:r.map((e,p)=>({key:e.key,appId:e.appId,active:e.active,displayName:e.displayName,iconUrl:e.iconUrl,platform:e.platform,showPlatformIcon:!!m.value&&e.platform!==P.AppGroup,parentGroupId:i,...N(o,V(u),s.value[p],M.value[p],S.value[p],f.value||0,g.value||0,I.value||0)})).sort((e,p)=>p.primaryMetricValue-e.primaryMetricValue))??[]});return{isLoading:y,isError:v,error:c,data:A}}function N(u,l,i,o,n,m,y,v){const t=x(i),c=u("xSessions",o),s=u("xAds",n);switch(l){case"sessions":return{primaryMetricValue:o,primaryMetric:c,primaryMetricIntegerPercent:o/y*100,secondaryMetric:t,tertiaryMetric:s};case"ads":return{primaryMetricValue:n,primaryMetric:s,primaryMetricIntegerPercent:n/v*100,secondaryMetric:t,tertiaryMetric:c};default:return{primaryMetricValue:i,primaryMetric:t,primaryMetricIntegerPercent:i/m*100,secondaryMetric:c,tertiaryMetric:s}}}export{L as u};
