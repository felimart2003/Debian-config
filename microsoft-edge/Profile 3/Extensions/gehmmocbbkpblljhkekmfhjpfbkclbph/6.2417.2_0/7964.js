(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7964],{504085:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var n=i(696832),o=i(526849),s=i(383849),a=i.n(s),l=i(957459);var r=i(855541),d=i(524130);function c(e,t){const i=e.find((e=>String(e.value)===String(t)));return null!=i?i:null}class _ extends n.Component{constructor(e){super(e),this.select=n.createRef(),this.handleChange=e=>{const t=e.target;if(!t)return;const i=t.value,n=c(this.props.options,i);this.setState({optionSelected:n}),this.props.onChange&&this.props.onChange(e)},this.handleKeyDown=e=>{"Enter"===e.key&&e.preventDefault(),this.props.onFieldKeyDown?.(e)},this.handleFocus=()=>{this.setState({isSelectFocused:!0})},this.handleBlur=()=>{this.setState({isSelectFocused:!1})};let t=null;this.props.options.length&&(t=c(this.props.options,null===this.props.defaultOption?(0,o.head)(this.props.options).value:this.props.defaultOption.value)),this.state={fieldHtmlId:(0,l.Z)(),optionSelected:t,isSelectFocused:!1}}getValue(){if(!this.select.current)throw new Error("select ref not initialized");return this.select.current.value}render(){var e;const t=this.props.marginSide||"none",i=a()("selectContainer--mo5uz0qo56",r.Z[t],{"transparent--pz8wb74Jmh":this.props.isTransparent,"disabled--I9BAM7Vdre":this.props.disabled,"focused--ietgHqFLIm":this.state.isSelectFocused}),n=a()("selector--fgNHKzkAC3",this.props.classNames);let s;this.state.optionSelected?s=this.state.optionSelected.value:this.props.options.length&&(s=null===this.props.defaultOption?(0,o.head)(this.props.options).value:this.props.defaultOption.value);const l=this.state.optionSelected?this.state.optionSelected.selectedLabel?this.state.optionSelected.selectedLabel:this.state.optionSelected.label:this.props.placeholder;return(0,d.BX)("div",{className:"container--KChkEdb4YV",children:[this.props.label&&(0,d.tZ)("label",{className:r.Z.label,color:"ds.text.neutral.catchy",htmlFor:this.state.fieldHtmlId,title:this.props.label,children:this.props.label}),(0,d.BX)("div",{className:i,children:[(0,d.BX)("div",{className:n,children:[this.state.optionSelected&&this.state.optionSelected.icon&&(0,d.tZ)("span",{className:"icon--p3a7nsSbg9",children:this.state.optionSelected.icon}),(0,d.tZ)("span",{className:"text--SjkXyB7Kyp",sx:{color:"ds.text.neutral.catchy"},children:l})]}),(0,d.tZ)("select",{className:r.Z.select,ref:this.select,id:this.state.fieldHtmlId,value:s,name:this.props.name,disabled:this.props.disabled,"data-name":this.props.dataName,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onFocus:this.handleFocus,onBlur:this.handleBlur,"aria-label":null!=(e=this.props.ariaLabel)?e:this.props.label,children:this.props.options.map((e=>(0,d.tZ)("option",{disabled:e.disabled,value:String(e.value),children:e.label},e.value)))},this.state.fieldHtmlId)]})]})}}},978892:(e,t,i)=>{"use strict";i.d(t,{p:()=>L});var n=i(696832),o=i(812027),s=i(86970),a=i(926897),l=i(133354),r=i(45272),d=i(718108),c=i(50663),_=i(980936),p=i(524130);const u=(0,n.createContext)({}),h=(0,n.createContext)({}),b=({children:e,vaultItem:t,isAddCollectionDisabled:i,signalEditedValues:s,setHasOpenedDialogs:b,setCollectionsToUpdate:m})=>{const{vaultItemId:f,spaceId:C}=t,E=(0,d.E)(),[g,S]=(0,n.useState)(""),[T,I]=(0,n.useState)(!1),{allCollections:O}=(0,o.b)(),N=(0,_.I)(),w=N.status===l.rq.Success&&N.isDisabled,[y,v]=(0,n.useState)((()=>""===f?[]:O.flatMap((e=>e.vaultItems.some((e=>e.id===f))?{...e,initiallyExisting:!0,hasBeenDeleted:!1}:[])))),x=(e=>""!==e&&(E.status===l.rq.Success&&E.data.length>0?E?.data:[]).some((t=>t.teamId===e)))(C)?C:"",R=(0,n.useMemo)((()=>y.filter((e=>!e.hasBeenDeleted))),[y]),A=(0,n.useMemo)((()=>O.filter((e=>!R.some((t=>t.id===e.id))))),[O,R]),Z=e=>{const t=e(y);m?.(t),v(t)},D={setInput:S,setIsInputVisible:I,onSubmit:(e=g,t)=>{if((e=e.trim()).length<=0)return;const i=y.findIndex((t=>t.name===e&&(w||x===t.spaceId)));if(-1===i)Z((i=>{var n;const o=[...i],s=O.find((t=>t.name===e&&(w||t.spaceId===x)));return o.push({id:null!=(n=s?.id)?n:"",name:e,spaceId:x,isShared:s?.isShared,vaultItems:[],initiallyExisting:!1,hasBeenDeleted:!1,itemPermission:t}),(0,c.p)(o)}));else{const e=y[i];e.initiallyExisting&&e.hasBeenDeleted&&Z((e=>{const t=[...e];return t[i].hasBeenDeleted=!1,t}))}s?.(!0),S("")},onDelete:e=>{const t=y.findIndex((t=>t.name===e));if(-1===t)return;const i=y[t];Z((e=>{const n=[...e];return i.initiallyExisting?n[t].hasBeenDeleted=!0:n.splice(t,1),n})),(0,r.Nc)(a.PageView.CollectionDelete),s?.(!0)},clearVaultItemCollections:()=>Z((e=>e.flatMap((e=>e.initiallyExisting?{...e,hasBeenDeleted:!0}:[]))))};return(0,p.tZ)(u.Provider,{value:{input:g,itemSpaceId:x,isInputVisible:T,filteredCollections:A,vaultItemCollections:y,vaultItemCollectionsToDisplay:R,setHasOpenedDialogs:b,vaultItem:t,isAddCollectionDisabled:i},children:(0,p.tZ)(h.Provider,{value:D,children:e})})},m=()=>(0,n.useContext)(u),f=()=>(0,n.useContext)(h);var C,E=i(364438),g=i(361607),S=i(982466),T=i(488203),I=i(267678),O=i(333918),N=i(71951);const w=({id:e,hasCollections:t,setHasOpenedDialogs:i,isDisabled:o=!1})=>{var a;const{translate:l}=(0,T.Z)(),r=(0,n.useRef)(null),d=(0,g._)(),{isInputVisible:c,itemSpaceId:_,filteredCollections:u,input:h,vaultItem:b}=m(),{vaultItemTitle:w,isSharedWithLimitedRights:y}=b,v=Boolean(d.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(d.data?.sharingVault_web_Collection_Item_Permissions_prod),{openDialog:x,closeDialog:R}=(0,I.R)(),{setInput:A,setIsInputVisible:Z,onSubmit:D}=f(),L=(e,t)=>{D(t,e),R(),i?.(!1),r.current?.focus()},B=()=>{R(),i?.(!1)};return c?(0,p.tZ)(s.x5,{collections:u,id:e,input:h,inputRef:r,spaceId:_,selectionAsDropdown:!0,onSubmit:e=>{const t=u.find((t=>t.name===e&&t.spaceId===_));t?.isShared&&y?(x(a||(a=(0,p.tZ)(N.Q,{onClose:B}))),i?.(!0)):t?.isShared?(x((0,p.tZ)(O.B,{onSubmit:L,onClose:B,itemTitle:w,isItemPermissionsEnabled:v,collectionName:t.name})),i?.(!0)):L(S.y3.Admin,e)},setInput:A,onBlur:e=>{e.currentTarget.contains(e.relatedTarget)||window.setTimeout((()=>{Z(!1)}),100)}}):(0,p.tZ)(E.zx,{onClick:()=>Z(!0),layout:"iconLeading",intensity:"supershy",disabled:o,mood:"neutral",icon:C||(C=(0,p.tZ)(E.JO,{name:"ActionAddOutlined"})),children:l(t?"webapp_collections_input_placeholder_add_another":"webapp_collections_input_placeholder_add_new")})},y=e=>(0,p.tZ)("div",{sx:{flex:"1",display:"flex",flexDirection:"column"},...e});var v,x=i(660756);const R=({hasMultipleCollections:e,...t})=>{const{vaultItem:i}=m(),n=(0,x.b)(i.spaceId),{translate:o}=(0,T.Z)();return(0,p.tZ)("label",{sx:{display:"flex",width:"149px",justifyContent:"flex-end",fontWeight:"600",textAlign:"right"},...t,children:(0,p.BX)("span",{sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:[n&&(0,p.BX)(p.HY,{children:[`${n}`,v||(v=(0,p.tZ)("br",{}))]}),o(e?"webapp_credentials_header_row_category":"webapp_credential_edition_field_category")]})})},A=e=>(0,p.tZ)("div",{sx:{display:"flex",flexDirection:"row"},...e}),Z="collectionsFieldId",D=(0,n.forwardRef)((({hasLabel:e=!0},t)=>{const{vaultItemCollections:i,vaultItemCollectionsToDisplay:o,isAddCollectionDisabled:a,setHasOpenedDialogs:l}=m(),{onDelete:r,clearVaultItemCollections:d}=f(),c=o?.length>0;return(0,n.useImperativeHandle)(t,(()=>({getVaultItemCollections:()=>i,clearVaultItemCollections:d}))),(0,p.BX)(A,{sx:{gap:"24px",alignItems:!c&&"center"},children:[e?(0,p.tZ)(R,{hasMultipleCollections:o?.length>1,htmlFor:Z,sx:{marginTop:c&&"15px"}}):null,(0,p.BX)(y,{sx:{...c&&{gap:"8px",marginTop:"10px"}},children:[(0,p.tZ)(s.zT,{sx:{marginLeft:"16px"},collectionListItems:o.map((e=>(0,p.tZ)(s.cF,{children:(0,p.tZ)(s.KH,{onDismiss:()=>r(e.name),isShared:e.isShared,children:e.name})},`collections_field_li_${e.name}`)))}),(0,p.tZ)(w,{id:Z,hasCollections:c,setHasOpenedDialogs:l,isDisabled:a})]})]})})),L=(0,n.forwardRef)((({vaultItem:e,isAddCollectionDisabled:t,signalEditedValues:i,setHasOpenedDialogs:n,hasLabel:s,setCollectionsToUpdate:a},l)=>{const{isCollectionsLoading:r}=(0,o.b)();return r?null:(0,p.tZ)(b,{vaultItem:e,signalEditedValues:i,setHasOpenedDialogs:n,isAddCollectionDisabled:t,setCollectionsToUpdate:a,children:(0,p.tZ)(D,{ref:l,hasLabel:s})})}))},420684:(e,t,i)=>{"use strict";i.d(t,{P:()=>o});var n=i(740300);const o=async e=>await n.C.clearSecureFileState(null!=e?e:"")},86541:(e,t,i)=>{"use strict";i.d(t,{SecureNoteTabs:()=>n});let n=function(e){return e[e.CONTENT=0]="CONTENT",e[e.DOCUMENT_STORAGE=1]="DOCUMENT_STORAGE",e[e.MORE_OPTIONS=2]="MORE_OPTIONS",e[e.SHARED_ACCESS=3]="SHARED_ACCESS",e}({})},326239:(e,t,i)=>{"use strict";i.d(t,{h:()=>R});var n=i(310789),o=i(696832),s=i(383849),a=i.n(s),l=i(365580);var r,d,c=i(15567),_=i.n(c),p=i(102730),u=i.n(p),h=i(524130);const b=312,m="info";class f extends o.Component{constructor(e){super(e),this.showTooltip=()=>{this.setState({isTooltipVisible:!0})},this.hideTooltip=()=>{this.setState({isTooltipVisible:!1})},this.renderIcon=()=>{const{type:e=m}=this.props;switch(e){case"info":return r||(r=(0,h.tZ)(u(),{}));case"question":return d||(d=(0,h.tZ)(_(),{}));default:(0,l.U)(e)}return null},this.state={isTooltipVisible:!1}}render(){const{iconClassNames:e=[],maxWidth:t=b,children:i}=this.props,n=this.renderIcon();return(0,h.BX)("div",{className:"container--nIJjYvifKn",onMouseEnter:this.showTooltip,onMouseLeave:this.hideTooltip,children:[(0,h.tZ)("div",{className:a()("iconContainer--Qd32ya5v0T",...e),children:n}),(0,h.BX)("div",{className:a()("tooltipContainer--Yos9HnS8si",{"tooltipDisplayed--ibyWhutbpT":this.state.isTooltipVisible}),style:{maxWidth:`${t}px`},children:[i,(0,h.tZ)("div",{className:"triangle--n9NwQgxSAc"})]})]})}}var C=i(86541),E=i(351575),g=i(488203),S=i(671785),T=i(376452),I=i(573630);const O=({title:e,disabled:t=!1,onChange:i})=>{const{translate:n}=(0,g.Z)(),o=n("webapp_secure_notes_addition_field_placeholder_no_title");return(0,h.tZ)(I.Z,{sx:{display:"block",width:"100%"},tooltipText:e||o,children:(0,h.tZ)("input",{sx:{color:"ds.text.neutral.catchy",backgroundColor:"transparent",border:"none",fontSize:"24px",lineHeight:"30px",fontWeight:"600",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap",width:"100%",fontFamily:"'GT Walsheim Pro', 'Helvetica', 'Arial', 'sans-serif'","&:focus":{outline:"none",border:"none"}},placeholder:o,value:e||"",disabled:t,onChange:i})})};var N;const{CONTENT:w,DOCUMENT_STORAGE:y,MORE_OPTIONS:v,SHARED_ACCESS:x}=C.SecureNoteTabs,R=({activeTab:e,setActiveTab:t,backgroundColor:i,disabled:o,displayDocumentStorage:s,displaySharedAccess:a,displayMoreOptions:l,recipientsCount:r,title:d,setTitle:c})=>{const{translate:_}=(0,g.Z)(),p=(0,S.aV)(),u=[{active:e===w,label:_("webapp_secure_notes_edition_field_tab_title_details"),onClick:()=>t(w)}];if(a&&u.push({active:e===x,label:`${_("webapp_secure_notes_edition_field_tab_title_shared_access")} (${r})`,onClick:()=>t(x)}),s){const i=p?void 0:(0,h.tZ)(f,{children:(0,h.tZ)("p",{children:_("webapp_secure_notes_edition_field_tab_title_attachments_tooltips")})});u.push({active:e===y,label:_("webapp_secure_notes_edition_field_tab_title_attachments"),onClick:()=>t(y),tabIconElement:i})}return l&&u.push({active:e===v,label:_("webapp_secure_notes_edition_field_tab_title_options"),onClick:()=>t(v)}),(0,h.tZ)(T.V9,{icon:(0,h.tZ)("div",{className:"iconWrapper--d4t5P9vl4W",children:N||(N=(0,h.tZ)(n.uHY,{size:40,color:"white"}))}),iconBackgroundColor:(0,E.Z)(i),title:(0,h.tZ)(O,{title:d,disabled:o,onChange:e=>c(e.target.value)}),tabs:u})}},495795:(e,t,i)=>{"use strict";i.d(t,{i:()=>re,T:()=>de});var n=i(364438),o=i(65255),s=i(377377),a=i(488203),l=i(555449),r=i(86541),d=i(696832),c=i(310789),_=i(605961),p=i.n(_),u=i(361607),h=i(524130);let b=function(e){return e.BOLD="bold",e.CODE="code",e.ITALIC="italic",e.LINK="link",e.SUBSUBTITLE="subsubtitle",e.SUBTITLE="subtitle",e.TITLE="title",e}({});const m=e=>(t,i)=>{var n;const{formatPrefix:o,cursorOffsetStart:s,cursorOffsetEnd:a}=e,l=null!=(n=e.formatSuffix)?n:"",{start:r,end:d}=i,c=t.slice(r,d),_=((e,t,i)=>{const n=!i||e.endsWith(i);return e.startsWith(t)&&n})(c,o,l),p=((e,t,i,n)=>e.start===e.end?(e.start=e.start+i,e.end=e.end+i,e):(e.end=t?e.end-i-n:e.end+i+n,e))(i,_,s,a);return _?{updatedContent:[t.slice(0,r),t.slice(r+o.length,d-l.length),t.slice(d)].join(""),updatedSelectionRange:p}:{updatedContent:[t.slice(0,r),o,c,l,t.slice(d)].join(""),updatedSelectionRange:p}},f={[b.TITLE]:{icon:(0,h.tZ)(n.JO,{name:"FormattingHeading1Outlined"}),label:"Heading",format:m({formatPrefix:"# ",cursorOffsetStart:2,cursorOffsetEnd:0})},[b.SUBTITLE]:{icon:(0,h.tZ)(n.JO,{name:"FormattingHeading2Outlined"}),label:"Subheading",format:m({formatPrefix:"## ",cursorOffsetStart:3,cursorOffsetEnd:0})},[b.SUBSUBTITLE]:{icon:(0,h.tZ)(n.JO,{name:"FormattingHeading3Outlined"}),label:"Subsubheading",format:m({formatPrefix:"### ",cursorOffsetStart:4,cursorOffsetEnd:0})},[b.BOLD]:{icon:(0,h.tZ)(n.JO,{name:"FormattingBoldOutlined"}),label:"Bold",format:m({formatPrefix:"**",formatSuffix:"**",cursorOffsetStart:2,cursorOffsetEnd:2})},[b.ITALIC]:{icon:(0,h.tZ)(n.JO,{name:"FormattingItalicOutlined"}),label:"Italic",format:m({formatPrefix:"_",formatSuffix:"_",cursorOffsetStart:1,cursorOffsetEnd:1})},[b.CODE]:{icon:(0,h.tZ)(n.JO,{name:"FormattingCodeOutlined"}),label:"Code",format:m({formatPrefix:"`",formatSuffix:"`",cursorOffsetStart:1,cursorOffsetEnd:1})},[b.LINK]:{icon:(0,h.tZ)(n.JO,{name:"LinkOutlined"}),label:"Link",format:(e,t)=>{const{start:i,end:n}=t,o=e.slice(i,n),s=((e,t,i)=>(e.start===e.end?(e.start=e.start+1,e.end=e.end+1):(e.start=e.end+3,e.end=e.end+6),e))(t);return{updatedContent:[e.slice(0,i),"[",o,"](url)",e.slice(n)].join(""),updatedSelectionRange:s}}}},C="webapp_secure_notes_content_markdown_preview",E=({fieldRef:e,content:t,isPreviewing:i,setContent:o,setIsPreviewing:s})=>{const{translate:l}=(0,a.Z)(),r=i=>()=>{var n,s;const a=f[i].format,{updatedContent:l,updatedSelectionRange:r}=a(t,{start:null!=(n=e.current?.selectionStart)?n:0,end:null!=(s=e.current?.selectionEnd)?s:0});o(l),setTimeout((()=>{e.current&&(e.current.focus(),e.current.selectionStart=r.start,e.current.selectionEnd=r.end)}),200)};return(0,h.BX)("div",{sx:{display:"flex",height:"50px",justifyContent:"space-between",alignItems:"center",boxSizing:"border-box",marginTop:"16px",backgroundColor:"ds.background.alternate",borderRadius:"8px"},children:[(0,h.tZ)("div",{sx:{gap:"4px"},children:Object.keys(f).map((e=>(0,h.tZ)(n.zx,{mood:"neutral",intensity:"supershy",layout:"iconOnly",icon:f[e].icon,onClick:r(e),disabled:i,"aria-label":f[e].label,title:f[e].label,name:f[e].label},e)))}),t?(0,h.tZ)("div",{sx:{padding:"8px 10px"},children:(0,h.tZ)(n.zx,{"aria-label":l(C),onClick:()=>s(!i),layout:"iconTrailing",intensity:"quiet",size:"small",mood:"neutral",icon:i?"ActionHideFilled":"ActionRevealFilled",children:l(C)})}):null]})};var g=i(167748);const S="textarea--Ix1kh7fRYF",T=o.w.SupportMarkdownInSecureNotes,I="webapp_secure_notes_form_content_label",O=({fieldRef:e,value:t,name:i,placeholder:o,disabled:s,readonly:l,setContent:r,onChange:c})=>{const[_,b]=(0,d.useState)(!1),{translate:m}=(0,a.Z)(),f=(0,u._)(),C=Boolean(f.data?.sharingVault_web_Secure_Notes_Revamp_dev)||Boolean(f.data?.sharingVault_web_Secure_Notes_Revamp_prod),O=Boolean(f.data?.[T]);return(0,h.tZ)("div",{sx:{display:"flex",flex:"1 1",whiteSpace:"pre-wrap",wordWrap:"break-word",cursor:"text"},children:O?(0,h.BX)("div",{sx:{display:"flex",flexDirection:"column",flexGrow:1},children:[!s&&(0,h.tZ)(E,{content:t,setContent:r,fieldRef:e,isPreviewing:_,setIsPreviewing:e=>b(e)}),_?(0,h.tZ)("div",{className:"markdown--ARo1hBXSLa",children:(0,h.tZ)(p(),{source:(0,g.z)(t),softBreak:"br"})}):(0,h.tZ)(n.Kx,{label:m(I),ref:e,name:i,className:S,sx:{width:"100%",padding:"10px 0px"},placeholder:o,value:t||"",disabled:s,readOnly:l,onChange:e=>{c?.(e)}})]}):C?(0,h.tZ)(n.Kx,{label:m(I),ref:e,name:i,sx:{width:"100%",padding:"10px 0px"},placeholder:o,value:t||"",disabled:s,readOnly:l,onChange:e=>c?.(e)}):(0,h.tZ)("textarea",{ref:e,name:i,className:S,sx:{color:"ds.text.neutral.catchy"},placeholder:o,value:t||"",disabled:s,readOnly:l,onChange:e=>c?.(e)})})};var N=i(71846);const w=({content:e,setContent:t,limitedPermissions:i,readonly:n})=>{const{translate:o}=(0,a.Z)(),[s,l]=(0,d.useState)(!1),r=(0,d.useRef)(null);return(0,h.BX)(h.HY,{children:[(0,h.tZ)(O,{fieldRef:r,placeholder:o(n?"webapp_secure_notes_edition_disabled_label":"webapp_secure_notes_addition_field_placeholder_no_content"),value:e,readonly:n||i,onChange:({target:{value:i}})=>{const n=i.length>e.length,o=e.length>=re;if(n&&o)return;const s=n&&i.length>re,a=s?e:i;l(s),t(a)},setContent:t}),s&&(0,h.tZ)("div",{className:"alertContainer--aKDAFWKb1l",children:(0,h.tZ)(N.n,{id:Math.floor(1e6*Math.random()),message:o("webapp_secure_notes_addition_field_copy_past_error"),onHide:()=>{l(!1)},severity:c.BLW.WARNING})})]})};var y=i(383849),v=i.n(y);const x=({maxAuthorizedSize:e,currentSize:t})=>{const{translate:i}=(0,a.Z)(),n=.95*e,o=.995*e,s=e-t,l=t>e?i("webapp_secure_notes_edition_field_text_over_limit",{overLimit:-s}):i("webapp_secure_notes_edition_field_text_max_size_reached",{charLeft:s});return t>=n?(0,h.tZ)("div",{className:v()("greyWarningCharLeft--kX7GKkrKTa",t>=o?"redWarningCharLeft--XWRHnpjz2e":{}),children:l}):null};function R(e,t){return{label:t,value:("credential"===e?"":"noCategory")||""}}function A(e,t,i,n){const o=t.find((e=>e.label===i));return null!=o?o:R(e,n)}const Z=["BLUE","GRAY","PURPLE","PINK","RED","BROWN","GREEN","ORANGE","YELLOW"];function D(e,t,i){return t.filter((t=>e[t])).map((t=>({icon:i,label:`${e[t]}`,value:t})))}function L(e,t){const i=D(e,[t],null);return i.length?i[0]:{}}var B=i(351575);const P=e=>(0,h.tZ)("span",{className:"icon--eBGJiUqyZ5",style:{backgroundColor:(0,B.Z)(e)}});var k=i(167406),U=i(504085),F=i(868819),G=i(830894),H=i(86498),M=i(433988),Y=i(154350);const V={NO_CATEGORY:"webapp_secure_notes_addition_no_category",CATEGORY_LABEL:"webapp_secure_notes_addition_field_tab_option_category_label",COLOR_LABEL:"webapp_secure_notes_addition_field_tab_option_color_label",SECURITY_LABEL:"webapp_secure_notes_addition_field_tab_option_security_label",SECURITY_TITLE:"webapp_secure_notes_addition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_addition_field_tab_option_security_description",COLORS:{BLUE:"webapp_secure_notes_addition_field_type_option_blue",BROWN:"webapp_secure_notes_addition_field_type_option_brown",GRAY:"webapp_secure_notes_addition_field_type_option_gray",GREEN:"webapp_secure_notes_addition_field_type_option_green",ORANGE:"webapp_secure_notes_addition_field_type_option_orange",PINK:"webapp_secure_notes_addition_field_type_option_pink",PURPLE:"webapp_secure_notes_addition_field_type_option_purple",RED:"webapp_secure_notes_addition_field_type_option_red",YELLOW:"webapp_secure_notes_addition_field_type_option_yellow"}},z={NO_CATEGORY:"webapp_secure_notes_edition_no_category",CATEGORY_LABEL:"webapp_secure_notes_edition_field_tab_option_category_label",COLOR_LABEL:"webapp_secure_notes_edition_field_tab_option_color_label",SECURITY_LABEL:"webapp_secure_notes_edition_field_tab_option_security_label",SECURITY_TITLE:"webapp_secure_notes_edition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_edition_field_tab_option_security_description",COLORS:{BLUE:"webapp_secure_notes_edition_field_type_option_blue",BROWN:"webapp_secure_notes_edition_field_type_option_brown",GRAY:"webapp_secure_notes_edition_field_type_option_gray",GREEN:"webapp_secure_notes_edition_field_type_option_green",ORANGE:"webapp_secure_notes_edition_field_type_option_orange",PINK:"webapp_secure_notes_edition_field_type_option_pink",PURPLE:"webapp_secure_notes_edition_field_type_option_purple",RED:"webapp_secure_notes_edition_field_type_option_red",YELLOW:"webapp_secure_notes_edition_field_type_option_yellow"},CHANGE_SECURED_SETTING_ON:"webapp_secure_notes_edition_unlocker_on_success",CHANGE_SECURED_SETTING_OFF:"webapp_secure_notes_edition_unlocker_off_success"},W={title:"webapp_secure_notes_edition_unlocker_title_on",subtitle:"webapp_secure_notes_edition_unlocker_description_on"},X={title:"webapp_secure_notes_edition_unlocker_title_off",subtitle:"webapp_secure_notes_edition_unlocker_description_off"},K=({noteCategories:e,disabled:t,data:i,isNewItem:o,saveSecureNoteOptions:s})=>{var l,r,_,p;const{translate:u}=(0,a.Z)(),b=(0,H.V)(),{areProtectedItemsUnlocked:m,openProtectedItemsUnlocker:f}=(0,G.tY)(),C=(0,M.F)(),{isMPLessUser:E}=(0,Y.Z)(),g=!C&&!E,S=o?V:z,T=u(S.NO_CATEGORY),[I,O]=(0,d.useState)(null!=(l=i?.category)?l:T),[N,w]=(0,d.useState)(null!=(r=i?.type)?r:"BLUE"),[y,v]=(0,d.useState)(null!=(_=i?.spaceId)?_:""),[x,B]=(0,d.useState)(null!=(p=i?.secured)&&p),K=(e=>e.map((e=>({name:e.CategoryName,id:e.Id}))))(e),j=function(e,t,i){const n=t.map((e=>({label:e.name,value:e.id})));return[R("note",i)].concat(n)}(0,K,T),J=e.find((e=>e.Id===I)),q=J?J.CategoryName:T,$=Z.reduce(((e,t)=>(e[t]=u(S.COLORS[t]),e)),{}),Q=D($,Z,P(N)),ee=e=>{B(e),s({category:I,type:N,spaceId:y,secured:e}),b.showAlert(u(e?z.CHANGE_SECURED_SETTING_ON:z.CHANGE_SECURED_SETTING_OFF),c.BLW.SUCCESS)};return(0,h.BX)(c.Ejs,{flexDirection:"column",children:[e&&e.length>1?(0,h.tZ)(U.Z,{disabled:t,label:u(S.CATEGORY_LABEL),placeholder:"",dataName:"category",options:j,defaultOption:A("note",j,q,T),onChange:e=>{O(e.currentTarget.value),s({category:e.currentTarget.value,type:N,spaceId:y,secured:x})}},q):null,(0,h.tZ)(k.M,{labelSx:k.e,spaceId:null!=y?y:"",onChange:e=>{v(e),s({category:I,type:N,secured:x,spaceId:e})},disabled:t}),(0,h.tZ)(U.Z,{disabled:t,label:u(S.COLOR_LABEL),placeholder:"",dataName:"type",options:Q,defaultOption:L($,N),onChange:e=>{w(e.currentTarget.value),s({category:I,type:e.currentTarget.value,spaceId:y,secured:x})}},N),g?(0,h.BX)(c.Ejs,{sx:{mt:"12px"},flexDirection:"row",flexWrap:"nowrap",children:[(0,h.tZ)(c.k$b,{sx:{fontWeight:"600",width:"173px",textAlign:"right",fontSize:"16px",justifyContent:"flex-end",pr:"24px"},as:n.nv,innerAs:"label",htmlFor:"securityToggle",size:"medium",children:u(S.SECURITY_LABEL)}),(0,h.BX)(c.Ejs,{flexDirection:"row",gap:"8px",flexWrap:"nowrap",children:[(0,h.BX)(c.Ejs,{as:c.dDn,flexDirection:"column",children:[(0,h.tZ)(n.nv,{children:u(S.SECURITY_TITLE)}),(0,h.tZ)(n.nv,{color:"ds.text.neutral.quiet",children:u(S.SECURITY_DESCRIPTION)})]}),(0,h.tZ)(n.ZD,{id:"securityToggle",disabled:t,checked:x,onChange:()=>{const e=!x;m||o?ee(e):((0,G.jF)(),f({itemType:F.R.SecureNoteSetting,options:{fieldsKeys:e?W:X,translated:!1},successCallback:()=>ee(e)}))}})]})]}):null]})};var j=i(978892),J=i(468037),q=i(806697);const $={NO_CATEGORY:"webapp_secure_notes_addition_no_category",PERSONAL_SPACE:"webapp_form_field_personal_space",INFO_BOX_ATTACHMENTS:"webapp_secure_notes_infobox_has_attachments",INFO_BOX_SHARED:"webapp_secure_notes_infobox_shared",SECURITY_LABEL:"webapp_secure_notes_addition_field_tab_option_security_label",CONTENT_NOTE_DETAILS:"webapp_secure_notes_form_content_note_details",CONTENT_NOTE_DETAILS_TITLE:"webapp_secure_notes_form_content_note_details_title",CONTENT_ITEM_ORGANIZATION:"webapp_secure_notes_form_content_item_organization",CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION:"webapp_credential_edition_field_force_categorized",CONTENT_ITEM_ORGANIZATION_COLOR:"webapp_secure_notes_form_content_item_organization_color",CONTENT_PREFERENCES:"webapp_secure_notes_form_content_preferences",SECURITY_TITLE:"webapp_secure_notes_addition_field_tab_option_security_title",SECURITY_DESCRIPTION:"webapp_secure_notes_addition_field_tab_option_security_description",CHANGE_SECURED_SETTING_ON:"webapp_secure_notes_edition_unlocker_on_success",CHANGE_SECURED_SETTING_OFF:"webapp_secure_notes_edition_unlocker_off_success",COLORS:{BLUE:"webapp_secure_notes_addition_field_type_option_blue",BROWN:"webapp_secure_notes_addition_field_type_option_brown",GRAY:"webapp_secure_notes_addition_field_type_option_gray",GREEN:"webapp_secure_notes_addition_field_type_option_green",ORANGE:"webapp_secure_notes_addition_field_type_option_orange",PINK:"webapp_secure_notes_addition_field_type_option_pink",PURPLE:"webapp_secure_notes_addition_field_type_option_purple",RED:"webapp_secure_notes_addition_field_type_option_red",YELLOW:"webapp_secure_notes_addition_field_type_option_yellow"}},Q={title:"webapp_secure_notes_edition_unlocker_title_on",subtitle:"webapp_secure_notes_edition_unlocker_description_on"},ee={title:"webapp_secure_notes_edition_unlocker_title_off",subtitle:"webapp_secure_notes_edition_unlocker_description_off"},te=({title:e,color:t,spaceId:i,content:o,isSecured:s,isNewItem:l,isShared:r,isAdmin:c,isDisabled:_,isDisableSecureNotesFFActive:p,isSecureNoteAttachmentEnabled:b,hasAttachment:m,data:f,onModifyData:C,setCollectionsToUpdate:E,setColor:g,setSpaceId:S,setTitle:T,setContent:I,setIsSecured:O,setHasDialogsOpenedByChildren:N})=>{const{translate:y}=(0,a.Z)(),{showToast:v}=(0,n.pm)(),R=(0,M.F)(),{isMPLessUser:A}=(0,Y.Z)(),L=(0,d.useRef)(null),{areProtectedItemsUnlocked:B,openProtectedItemsUnlocker:U}=(0,G.tY)(),H=L.current?.getVaultItemCollections(),{shouldShowFrozenStateDialog:V}=(0,q.Ub)(),z=(0,u._)(),W=Boolean(z.data?.sharingVault_web_Secure_Notes_in_Collections_dev)||Boolean(z.data?.sharingVault_web_Secure_Notes_in_Collections_prod),X=!R&&!A,K=D(Z.reduce(((e,t)=>(e[t]=y($.COLORS[t]),e)),{}),Z,P(t)),te=e=>{O(e),v({description:y(e?$.CHANGE_SECURED_SETTING_ON:$.CHANGE_SECURED_SETTING_OFF),closeActionLabel:y("_common_dialog_dismiss_button")})},ie=Boolean(H?.some((e=>e.isShared))),ne=f.limitedPermissions,oe=ie||ne||_||r;return(0,h.BX)(h.HY,{children:[b&&(r||m)&&(0,h.tZ)(n.ke,{mood:"neutral",size:"small",title:y(r?$.INFO_BOX_SHARED:$.INFO_BOX_ATTACHMENTS),sx:{margin:"10px 0px"}}),(0,h.BX)(J.u,{title:y($.CONTENT_NOTE_DETAILS),additionalSx:{marginBottom:"16px"},children:[(0,h.tZ)(n.qo,{label:y($.CONTENT_NOTE_DETAILS_TITLE),value:e,disabled:_||r&&!c,onChange:e=>T(e.target.value)}),(0,h.tZ)(w,{content:o,setContent:I,limitedPermissions:r&&!c,readonly:_||p}),(0,h.tZ)(x,{maxAuthorizedSize:1e4,currentSize:o.length})]}),(0,h.BX)(J.u,{title:y($.CONTENT_ITEM_ORGANIZATION),additionalSx:{marginBottom:"16px"},children:[(0,h.tZ)(n.mg,{value:t,"data-name":"colorSelect",label:y($.CONTENT_ITEM_ORGANIZATION_COLOR),onChange:g,disabled:_,sx:{marginBottom:"8px"},children:K.map((e=>(0,h.tZ)(n.$m,{value:e.value,children:e.label},e.value)))}),(0,h.tZ)(n.u,{content:y($.CONTENT_ITEM_ORGANIZATION_FORCED_CATEGORIZATION,{space:i}),passThrough:!oe,children:(0,h.tZ)(k.M,{spaceId:null!=i?i:"",disabled:oe,onChange:e=>{i!==e&&(S(e),L.current?.clearVaultItemCollections())},defaultSpaceId:null!=i?i:"",isUsingNewDesign:!0})}),W?(0,h.tZ)(j.p,{hasLabel:!1,vaultItem:{spaceId:null!=i?i:"",vaultItemId:f.id,vaultItemTitle:e,isSharedWithLimitedRights:f.limitedPermissions},ref:L,signalEditedValues:C,isAddCollectionDisabled:!!V||m,setHasOpenedDialogs:N,setCollectionsToUpdate:E}):null]}),X?(0,h.tZ)(J.u,{title:y($.CONTENT_PREFERENCES),additionalSx:{marginBottom:"16px"},children:(0,h.tZ)(n.XZ,{id:"securityToggle",label:y($.SECURITY_TITLE),description:y($.SECURITY_DESCRIPTION),checked:s,onChange:()=>{const e=!s;B||l?te(e):((0,G.jF)(),U({itemType:F.R.SecureNoteSetting,options:{fieldsKeys:e?Q:ee,translated:!1},successCallback:()=>te(e)}))}})}):null]})};var ie=i(61014),ne=i(926897);const{CONTENT:oe,DOCUMENT_STORAGE:se,MORE_OPTIONS:ae,SHARED_ACCESS:le}=r.SecureNoteTabs,re=1e4,de=({activeTab:e,data:t,content:i,setContent:r,handleFileInfoDetached:d,hasAttachment:c,isAdmin:_,isSecureNoteAttachmentEnabled:p,isSecureNoteRevampEnabled:u,isShared:b,isUploading:m,isDisabled:f,noteCategories:C,onModifyData:E,onModalDisplayStateChange:g,saveSecureNoteOptions:S,setCollectionsToUpdate:T,setHasDialogsOpenedByChildren:I,...O})=>{var N;const{translate:y}=(0,a.Z)(),v=(0,s.w)(o.w.DisableSecureNotes);return(0,h.BX)(h.HY,{children:[e===oe&&(u?(0,h.tZ)(te,{data:t,content:i,isNewItem:!1,isAdmin:_,isShared:b,isDisabled:f,isDisableSecureNotesFFActive:v,isSecureNoteAttachmentEnabled:p,hasAttachment:c,setContent:r,setCollectionsToUpdate:T,onModifyData:E,setHasDialogsOpenedByChildren:I,...O}):(0,h.BX)(h.HY,{children:[(0,h.tZ)("div",{className:"formContent--TCNgoQopo1",children:(0,h.tZ)(w,{content:i,setContent:e=>{E(),r(e)},limitedPermissions:b&&!_,readonly:f||v})}),(0,h.tZ)(x,{maxAuthorizedSize:re,currentSize:i.length}),p&&(b||c)&&(0,h.tZ)(n.ke,{mood:"neutral",size:"small",title:y(b?"webapp_secure_notes_infobox_shared":"webapp_secure_notes_infobox_has_attachments"),sx:{margin:"0px 32px 0px 8px"}})]})),e===le&&(0,h.tZ)(l.u,{isAdmin:_,id:t.id}),e===se&&(0,h.tZ)(ie.P,{isDesignRevamped:u,attachments:t.attachments,additionalProps:{itemId:t.id,itemType:ne.ItemType.SecureNote,handleFileInfoDetached:e=>{d(e)},onModalDisplayStateChange:g,isUploading:m}}),u?null:e===ae&&(0,h.tZ)(K,{data:{category:t.category,spaceId:null!=(N=t.spaceId)?N:"",type:t.type,secured:t.secured},noteCategories:C,isNewItem:!1,saveSecureNoteOptions:e=>{S(e)},disabled:!!f})]})}},285163:(e,t,i)=>{"use strict";i.d(t,{Q:()=>p});var n=i(361607),o=i(482598),s=i(172721),a=i(982466),l=i(299074),r=i(96862),d=i(914662);const c=e=>!e.initiallyExisting&&!e.hasBeenDeleted,_=e=>e.initiallyExisting&&!e.hasBeenDeleted,p=()=>{const e=(0,n._)(),t=Boolean(e.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(e.data?.sharingVault_web_Collection_Item_Permissions_prod),{createCollection:i,updateCollection:p}=(0,o.u)(l.v),{addItemToCollections:u,removeItemFromCollections:h}=(0,o.u)(s.a);return{addNoteToCollections:async(e,n)=>{const o=[],s=[];for(const u of n){var l;_(u)||(u.isShared?c(u)?o.push({collectionId:u.id,permission:t?null!=(l=u.itemPermission)?l:a.y3.Limited:a.y3.Admin}):s.push(u.id):(u.vaultItems=[{id:e,type:d.dJ.KWSecureNote}],u.id?await p({id:u.id,collection:u,operationType:u.hasBeenDeleted?r.C.SUBSTRACT_VAULT_ITEMS:r.C.APPEND_VAULT_ITEMS}):await i({content:u})))}o.length&&await u({collectionPermissions:o,itemId:e,shouldSkipSync:s.length>0}),s.length&&await h({collectionIds:s,itemId:e})}}}},855541:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n={left:"left--jltGqC2ld6",right:"right--r4mXfTZRXo",select:"select--ivbO452zoA",disable:"disable--F2KcdR2ssV",label:"label--EhkwVb63v9"}},102730:(e,t,i)=>{var n=i(696832);function o(e){return n.createElement("svg",e,n.createElement("g",{fill:"none",fillRule:"evenodd"},[n.createElement("path",{className:"tooltip-modern-icon-stroke",d:"M.5 8.5a8 8 0 1 1 16 0 8 8 0 0 1-16 0zm8-1v5",key:0}),n.createElement("path",{className:"tooltip-modern-icon-fill",d:"M9.5 4.5a1 1 0 1 0-2 0 1 1 0 1 0 2 0",key:1})]))}o.defaultProps={width:"17",height:"17"},e.exports=o,o.default=o},15567:(e,t,i)=>{var n=i(696832);function o(e){return n.createElement("svg",e,n.createElement("path",{d:"M6.547 7.25c0-1 1-2 2.5-2s2.5.75 2.5 2c0 1-.5 1.5-1.5 2.25s-1 1.25-1 1.75m-8.5-1.5a8.5 8.5 0 1 1 17 0 8.5 8.5 0 0 1-17 0Zm9 4a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",className:"tooltip-modern-icon-stroke"}))}o.defaultProps={width:"17",height:"17",viewBox:"0 0 19 19",fill:"none"},e.exports=o,o.default=o}}]);