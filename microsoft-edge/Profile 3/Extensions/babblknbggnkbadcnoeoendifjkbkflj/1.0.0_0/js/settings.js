var Settings;
class Helper{static initSettings(a){Settings=a;void 0===Settings.hour12&&(Settings.hour12=!0);void 0===Settings.timePeriod&&(Settings.timePeriod=60);void 0===Settings.tts&&(Settings.tts={lang:chrome.i18n.getUILanguage()});Settings.tts.enqueue=!0;void 0===Settings.timeEnabled&&(Settings.timeEnabled=!0);void 0===Settings.badgeEnabled&&(Settings.badgeEnabled=!1);void 0===Settings.timeVoiceNotify&&(Settings.timeVoiceNotify=!0);void 0===Settings.timeSystemNotify&&(Settings.timeSystemNotify=!0);void 0===
Settings.timeDndLocked&&(Settings.timeDndLocked=!0);void 0===Settings.timeDndAudible&&(Settings.timeDndAudible=!0);void 0===Settings.timeDndFullscreen&&(Settings.timeDndFullscreen=!0);void 0===Settings.muteAll&&(Settings.muteAll=!1)}static settingsChanged(a,b){chrome.storage.local.get(null,function(c){Helper.initSettings(c);void 0!==a.timeEnabled&&(a.timeEnabled.newValue?Alarm.startTimeTimer():Alarm.stopTimeTimer());void 0!==a.timePeriod&&Settings.timeEnabled&&Alarm.startTimeTimer();void 0!==a.badgeEnabled&&
(a.badgeEnabled.newValue?Alarm.startBadgeTimer():Alarm.stopBadgeTimer());void 0!==a.hour12&&Settings.badgeEnabled&&updateBadge()})}static _startup(a){if(!Helper.init){Helper.init=!0;const b=Date.now();chrome.storage.local.get(null,function(c){Helper.initSettings(c);Settings.startupTime=b;startup()});chrome.storage.local.set({startupTime:b})}a&&("install"==a.reason?chrome.runtime.openOptionsPage():"chrome_update"==a.reason&&(Helper.updateTime=Date.now()))}static _onCommand(a){chrome.storage.local.get(null,
function(b){Helper.initSettings(b);onCommand(a)})}static _onAlarm(a){chrome.storage.local.get(null,function(b){Helper.initSettings(b);Alarm.onAlarm(a)})}}Helper.init=!1;function startup(){chrome.notifications.getAll(function(a){for(let b of Object.keys(a))chrome.notifications.clear(b)});chrome.alarms.clearAll(function(){Settings.timeEnabled?Alarm.startTimeTimer():Alarm.stopTimeTimer();Settings.badgeEnabled?Alarm.startBadgeTimer():Alarm.stopBadgeTimer();Alarm.forceStartDog();Task.startAll()})}Alarm.startDog();
chrome.notifications.onButtonClicked.addListener(onNotificationButtonClicked);chrome.alarms.onAlarm.addListener(Helper._onAlarm);chrome.runtime.onMessage.addListener(Task.onMessage);chrome.commands.onCommand.addListener(Helper._onCommand);chrome.storage.onChanged.addListener(Helper.settingsChanged);chrome.runtime.onInstalled.addListener(Helper._startup);chrome.runtime.onStartup.addListener(Helper._startup);
