"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7421,3076],{188134:(e,t,a)=>{a.d(t,{t:()=>R});var r=a(696832),i=a(926897),n=a(364438),l=a(482598),d=a(573623),o=a(448430),s=a(382706),c=a(692077),u=a(45272),_=a(488203),p=a(806697),m=a(386962),E=a(310789),b=a(524130);const f=({formId:e,handleCancel:t,hasDataBeenModified:a,isSubmitting:r})=>{const{translate:i}=(0,_.Z)();return(0,b.BX)(E.Ejs,{sx:{padding:"24px"},as:"footer",justifyContent:"flex-end",flexDirection:"row",flexWrap:"nowrap",children:[a?(0,b.tZ)(E.zxk,{type:"submit",form:e,disabled:r,children:i("webapp_panel_edition_generic_save_changes")}):null,(0,b.tZ)(E.zxk,{sx:{marginLeft:"16px"},nature:"secondary",onClick:t,type:"button",children:i("webapp_panel_edition_generic_cancel_changes")})]})},h="id-add-form",L={GENERIC_ERROR:"_common_generic_error"};function R({children:e,initialValues:t,listRoute:a,reportError:E,countryToKeys:R,header:y,type:g,requiredProperty:C="idNumber"}){const{translate:w}=(0,_.Z)(),{openDialog:I,shouldShowFrozenStateDialog:U}=(0,p.Ub)(),[A,N]=r.useState(!1),[T,D]=r.useState(!1),[S,B]=r.useState(t.country),{createVaultItem:Z}=(0,l.u)(o.L),{showToast:v}=(0,n.pm)();r.useEffect((()=>{const e={[s.U.DriversLicense]:i.PageView.ItemDriverLicenceCreate,[s.U.FiscalId]:i.PageView.ItemFiscalStatementCreate,[s.U.IdCard]:i.PageView.ItemIdCardCreate,[s.U.Passport]:i.PageView.ItemPassportCreate,[s.U.SocialSecurityId]:i.PageView.ItemSocialSecurityStatementCreate};(0,u.Nc)(e[g])}),[g]),r.useEffect((()=>{U&&I()}),[U]);const P=()=>{(0,u.Nc)(i.PageView.ItemIdList),(0,c.uX)(a)},x=()=>{v({description:w(L.GENERIC_ERROR),mood:"danger",isManualDismiss:!0})},M=r.useRef((e=>{if(null!==e){const{dirty:t,isSubmitting:a,values:r}=e;N(t),D(a),B(r.country)}}));return(0,b.BX)(b.HY,{children:[y(S),(0,b.tZ)(m.P,{formId:h,formRef:M.current,handleSubmit:async(e,{setSubmitting:t,setFieldError:a})=>{if(!e[C])return a(C,"");try{const a=await Z({vaultItemType:g,content:e});(0,d.d6)(a)?(v({description:w(R(S).success)}),P()):(t(!1),x(),E(new Error("[ids][add] Unable to add id"),a.error?.errorMessage))}catch(e){t(!1),x(),E(e,"[ids][add] Unexpected exception while add id")}},initialValues:t,variant:"add",children:t=>e({values:t})}),(0,b.tZ)(f,{formId:h,handleCancel:()=>{P()},hasDataBeenModified:A,isSubmitting:T})]})}},656490:(e,t,a)=>{a.r(t),a.d(t,{FiscalIdAddPanel:()=>p}),a(696832);var r,i=a(382706),n=a(488203),l=a(739649),d=a(188134),o=a(981506),s=a(566219),c=a(974910),u=a(524130);const _=()=>({title:"webapp_id_creation_fiscalid_title_default",success:"webapp_id_creation_fiscalid_alert_add_success_default"}),p=({lee:e,listRoute:t})=>{var a;const{translate:p}=(0,n.Z)(),m={fiscalNumber:"",teledeclarantNumber:"",country:(0,s.lt)(e.carbon.currentLocation),spaceId:null!=(a=(0,l.B)(e.globalState))?a:""};return(0,u.tZ)(d.t,{initialValues:m,listRoute:t,reportError:e.reportError,countryToKeys:_,type:i.U.FiscalId,requiredProperty:"fiscalNumber",header:e=>(0,u.tZ)(c.h,{title:p("webapp_id_creation_fiscalid_title_default"),country:e,type:i.U.FiscalId}),children:()=>r||(r=(0,u.tZ)(o.U,{variant:"add"}))})}},981506:(e,t,a)=>{a.d(t,{U:()=>p});var r,i=a(696832),n=a(488203),l=a(177650),d=a(321143),o=a(16792),s=a(865212),c=a(806697),u=a(524130);const _={...o.k,TELEDECLARANT_NUMBER_LABEL:"webapp_id_form_field_label_teledeclarant_number",TELEDECLARANT_NUMBER_PLACEHOLDER:"webapp_id_form_field_placeholder_teledeclarant_number",TAX_NUMBER_LABEL_DEFAULT:"webapp_id_form_field_label_tax_number"},p=i.memo((({variant:e,handleCopy:t})=>{const{translate:a}=(0,n.Z)(),{shouldShowFrozenStateDialog:o}=(0,c.Ub)(),p=i.useRef(null);return i.useEffect("add"===e?()=>{const e=setTimeout((()=>{p.current?.focus()}),l.sc);return()=>clearTimeout(e)}:()=>{},[]),(0,u.BX)(u.HY,{children:[(0,u.tZ)(s.G1,{name:"fiscalNumber",label:a(_.TAX_NUMBER_LABEL_DEFAULT),placeholder:a(_.ID_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0,ref:p,disabled:!!o}),(0,u.tZ)(s.xu,{name:"teledeclarantNumber",label:a(_.TELEDECLARANT_NUMBER_LABEL),placeholder:a(_.TELEDECLARANT_NUMBER_PLACEHOLDER),handleCopy:"edit"===e?t:void 0,disabled:!!o}),(0,u.tZ)(s.Dz,{name:"country",label:a(_.COUNTRY_LABEL),disabled:!!o}),r||(r=(0,u.tZ)(d.c,{height:24})),(0,u.tZ)(s.A0,{name:"spaceId",disabled:!!o})]})}))}}]);