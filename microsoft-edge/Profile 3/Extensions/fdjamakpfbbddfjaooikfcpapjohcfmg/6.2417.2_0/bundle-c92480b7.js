"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[5496],{187319:(e,t,n)=>{n.d(t,{Z:()=>s}),n(696832);var a=n(692077),i=n(454107),r=n(524130);function s({path:e}){return(0,r.tZ)(a.GB,{exact:!0,path:[e,`${e}/create`,`${e}/create/confirm`],children:(0,r.BX)(a.rs,{children:[(0,r.tZ)(a.l_,{exact:!0,from:`${e}/`,to:`${e}/create`}),(0,r.tZ)(i.Z,{path:`${e}/create`,options:{flowIndicator:"memberAccount"}})]})})}},990028:(e,t,n)=>{n.d(t,{t:()=>s}),n(696832);var a=n(488203);var i=n(524130);const r=({title:e,description:t,example:n})=>(0,i.BX)("section",{children:[(0,i.tZ)("h3",{className:"tipTitle--E1xwuwFYGQ",children:e}),(0,i.tZ)("div",{className:"tipDescription--F8jzGudxgL",children:t}),n?(0,i.tZ)("p",{className:"tipExample--OSKD8mHhgv",children:n}):null]}),s=()=>{const{translate:e}=(0,a.Z)();return(0,i.BX)(i.HY,{children:[(0,i.tZ)(r,{title:e("webapp_account_security_settings_passwordtips_general_rules_title"),description:(0,i.BX)("ul",{children:[(0,i.tZ)("li",{children:e("webapp_account_security_settings_passwordtips_general_rules_description_1")}),(0,i.tZ)("li",{children:e("webapp_account_security_settings_passwordtips_general_rules_description_2")}),(0,i.tZ)("li",{children:e("webapp_account_security_settings_passwordtips_general_rules_description_3")})]})}),(0,i.tZ)(r,{title:e("webapp_account_security_settings_passwordtips_story_method_title"),description:e("webapp_account_security_settings_passwordtips_story_method_description"),example:e("webapp_account_security_settings_passwordtips_story_method_example")}),(0,i.tZ)(r,{title:e("webapp_account_security_settings_passwordtips_series_words_title"),description:e("webapp_account_security_settings_passwordtips_series_words_description"),example:e("webapp_account_security_settings_passwordtips_series_words_example")}),(0,i.tZ)(r,{title:e("webapp_account_security_settings_passwordtips_letters_numbers_title"),description:e("webapp_account_security_settings_passwordtips_letters_numbers_description"),example:e("webapp_account_security_settings_passwordtips_letters_numbers_example")})]})}},829710:(e,t,n)=>{n.d(t,{k:()=>a});const a=6},152552:(e,t,n)=>{n.d(t,{i:()=>s});var a=n(56456),i=n(829710),r=n(524130);const s=({pincode:e,pinLength:t=i.k,onPincodeInputChange:n,displayMismatchError:s,mismatchErrorMessage:o,onSubmit:l,disabled:c})=>(0,r.tZ)(a.r,{sx:{marginTop:"12px"},"data-autofocus":!0,autoFocus:!0,value:e,maxLength:t,inputMode:"numeric",id:"pincode-input",onChange:n,feedbackType:s?"error":void 0,feedbackText:o,type:"password","data-testid":"pin-code-input",onKeyDown:n=>{l&&"Enter"===n.key&&e.length===t&&l()},disabled:c})},535412:(e,t,n)=>{var a=n(874534),i=n(459522),r=n(429705),s=(n(696832),n(140431)),o=n(182510),l=n(245094),c=n(133392),d=n(642346),u=n(176014),_=n(397769),m=(n(886730),n(241901)),p=n(197446),g=n(403092),h=n(140),b=n.n(h);const y=(0,n(435681).Z)("STATE_IN_URL",{}),x=(e,t)=>{if(t.length>0){const n=t[0];return n in e||(e[n]={}),x(e[n],t.slice(1))}return e},v=y.registerAction("RESTORE_DATA",((e,t)=>{const n={};return Object.keys(t).forEach((e=>{const a=e.split(".");x(n,a.slice(0,a.length-1))[a[a.length-1]]=t[e]})),b()({},e,n)})),{apply:S}=y,f=S,Z=function(e,t){const n=(0,g.parse)(e);return Object.keys(t).filter((e=>e in n)).map((e=>({urlValue:n[e],userValue:t[e]}))).map((({urlValue:e,userValue:t})=>"string"==typeof t?{[t]:e}:t(e)||{})).reduce(((e,t)=>(Object.keys(t).forEach((t=>{if(t in e)throw new Error("Some URL options conflict")})),Object.assign(e,t))),{})};var C=n(692077),T=n(373880),D=n(158649),k=n(554452),E=n(335396),w=n(249808),I=n(730583),N=n(182422),A=n(74929),M=n(75743),O=n(447614),L=n(158296),B=n(326021),R=n(780300),z=n(300572),P=n(303198),X=n(712369),j=n(500358),U=n(309937),q=n(144134),G=n(158432),F=n(524179);let $;function V(){return $||($=function(e){const t=[];r.bq&&t.push((0,F.createLogger)({timestamp:!1,collapsed:!0,diff:!0}));const n=(0,N.compose)((0,N.applyMiddleware)(...t),(window.devToolsExtension,e=>e))(N.createStore)(function(e){const t=(0,G.RC)(e);return function(e,n){return e=(0,N.combineReducers)({initialSyncProgress:q.Z.apply,notifications:M.Z.apply,carbon:A.ZP.apply,directorySyncKey:j.ZP.apply,cursor:(e={})=>e,locale:L.ZP.apply,logs:O.Z.apply,user:B.ZP.apply,webapp:z.ZP.apply,dialog:P.Z.apply,afterLogin:X.Z.apply,ieNotifications:U.Z.apply})(e,n),e=t(e,n),e=(0,R.Z)(e,n),f(e,n)}}(e));return n}(I.Z)),$}var H,W=n(160399),Y=n(524130);const K=n(851285),Q=document.getElementById("app"),J=window.location.host,ee=null!=(H=Q?.getAttribute("data-base"))?H:"",te=(Q?.getAttribute("data-build-type"),(0,m.q_)({basename:"/",hashType:"slash"}));let ne;(0,C.JB)(te);const ae="graphene-background-port";async function ie(e,t){const n=await async function(e){return await async function(e){await function(e){return Promise.all([(0,l.ZP)({store:e,storage:localStorage,whiteList:["locale/language","locale/country"]})])}(e),(0,o.Z)(e),(0,d.CA)(e),function(e,t,n,a){const i=Object.assign(Z("",a),Z(t,a));Object.keys(i).length>0&&n.dispatch(v(i))}(0,(0,C.NW)(),e,{login:e=>"dummy"===e?{"user.session.login":"dummy-login@example.com","user.session.uki":"dummy-uki","user.password":null}:{"user.session.login":e},password:"user.session.password",showBillingAdmin:"cursor.app.team.account.billing.admin._.showConfirm",uki:"user.session.uki"})}(e),await(0,_.yd)(e),new w.G(ae)}(e),{client:a}=(0,T.X)({appDefinition:E.R,channels:{background:new D.N(n)},channelsListener:k.y}),i=a["carbon-legacy"].queries.carbonState({path:"userSession.sync.status"});return await(0,W.z)(i),a}var re=n(303810),se=n(589789);((e,t)=>{if(re.isInsideIframe())throw new Error("Leeloo should not be run in an iframe");n(928058),n(853049),n(794383),(0,r.ZP)();const a=(0,se.r9)(e);(async(e,t)=>{const n=V();!function(e,t){e.addEventListener("error",(e=>{e.preventDefault(),"ResizeObserver loop limit exceeded"!==e.message?t.dispatch((0,p.Z)(e.message,e.error)):e.stopPropagation()})),e.onunhandledrejection=e=>{e.preventDefault&&e.preventDefault();const n=e.reason,a=n instanceof Error?n:new Error('Promise rejection reason is not an error, but is "'+JSON.stringify(n)+'" instead');t.dispatch((0,p.Z)(`Unhandled promise rejection: ${a}`,a))}}(window,n);const a=await(0,c.eG)(n);if(document.documentElement.lang=a.getLocale(),ne||(ne=await ie(n),(0,u.Q)(ne)),!ne)throw new Error;K.render((0,Y.tZ)(s.Z,{host:J,basePath:ee,history:te,store:n,translate:a,namedRoutes:t,routes:e,coreClient:ne}),Q)})(t(a,e),a),(()=>{const e=document.querySelectorAll("link.light-scheme-favicon"),t=document.querySelectorAll("link.dark-scheme-favicon"),n=window.matchMedia("(prefers-color-scheme: dark)");function a(){n.matches?(e.forEach((e=>e.remove())),t.forEach((e=>document.head.append(e)))):(t.forEach((e=>e.remove())),e.forEach((e=>document.head.append(e))))}n.addEventListener?n.addEventListener("change",a):n.addListener(a),a()})()})(i.vX.CLIENT,a.t)},429705:(e,t,n)=>{n.d(t,{ZP:()=>s,bq:()=>r,sY:()=>i});var a=n(403092);let i=!1,r=!1;function s(){const e="kw_verbose";"verbose"in(0,a.parseLocationParams)(window.location)&&sessionStorage.setItem(e,"true");const t="true"===sessionStorage.getItem(e);t&&console.info("~~~ Logs activated ~~~"),i=t,r=t,window.KW_LOG=i}},916631:(e,t,n)=>{n.d(t,{j:()=>m});var a=n(696832),i=n(310789),r=n(561605),s=n(692077),o=n(488203),l=n(119471);const c="activateSSOText--uGZ1mGdPI0";var d,u,_=n(524130);const m=({activateLink:e,onClose:t,localSsoRedirect:n,isNitroSSO:m,nitroLoginCommand:p})=>{const{translate:g}=(0,o.Z)(),[h,b]=a.useState(!0);return(0,_.tZ)(i.VqE,{closeIconName:g("_common_dialog_dismiss_button"),isOpen:h,onClose:()=>{b(!1),t()},disableOutsideClickClose:!0,children:(0,_.BX)("div",{className:"dialogContainer--R1vvi6YG8s",children:[(0,_.BX)(i.$N8,{children:[d||(d=(0,_.tZ)(i.HeP,{size:90})),(0,_.tZ)("h2",{className:"activateSSOTitle--TSG6RZuM4T",children:g("activate_sso_popup_title")})]}),(0,_.BX)(i.a7O,{children:[(0,_.tZ)("p",{className:c,children:g("activate_sso_popup_body")}),(0,_.tZ)("p",{className:c,children:g("activate_sso_popup_body_secondary")})]}),(0,_.tZ)(i.cNS,{primaryButtonOnClick:async()=>{if(n)return(0,s.uX)(e);m?p():(0,r.nL)(e)},primaryButtonTitle:g("activate_sso_popup_primary_button"),secondaryButtonOnClick:()=>(0,r.Yo)(l.n0),secondaryButtonTitle:(0,_.BX)(_.HY,{children:[u||(u=(0,_.tZ)(i.RTC,{size:20})),(0,_.tZ)("p",{className:"activateSSOTextWithIcon--p3VZNI9NKb",children:g("activate_sso_popup_secondary_button")})]})})]})})}},554283:(e,t,n)=>{n.d(t,{x:()=>l});var a=n(364438),i=n(506295),r=n(488203),s=n(379846),o=n(524130);const l=()=>{const{translate:e}=(0,r.Z)(),{unseen:t,setAsSeen:n}=(0,s.m)(i.O.MpToSsoMigrationDoneDialog);return(0,o.tZ)(a.Vq,{actions:{primary:{children:e("mp_to_sso_migration_done_dialog_cta"),onClick:n}},isOpen:t,closeActionLabel:e("_common_dialog_dismiss_button"),onClose:n,title:e("mp_to_sso_migration_done_dialog_title"),children:(0,o.tZ)(a.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:e("mp_to_sso_migration_done_dialog_description")})})}},328107:(e,t,n)=>{n.d(t,{S:()=>H});var a=n(103128),i=(n(429191),n(696832)),r=n(148038),s=n(828298),o=n(784995),l=n(929986),c=n(799852),d=n(192120),u=n(421548),_=n(72133),m=n(548122),p=n(13403),g=n(488203),h=n(740300),b=n(561605),y=n(210051),x=n(692077),v=n(459522),S=n(169340),f=n(119471),Z=n(127521),C=n(881391);let T=function(e){return e.ASK_FOR_MP="ASK_FOR_MP",e.ACCOUNT_CREATION="ACCOUNT_CREATION",e.D_SPINNER="D_SPINNER",e.CHANGE_MP_PROGRESS="CHANGE_MP_PROGRESS",e}({});var D=n(162864),k=n(781826);var E,w=n(524130);const I=({dispatchGlobal:e,onSubmit:t})=>(0,w.BX)("div",{className:"panelsContainer--jB02U43E37",children:[E||(E=(0,w.tZ)(D.w,{})),(0,w.tZ)(k.R,{dispatchGlobal:e,onSubmit:t})]});var N=n(364438);const A=({animation:e,shouldLoopAnimation:t=!1,progressValue:n=0})=>{const{translate:a}=(0,g.Z)();return(0,w.BX)(w.HY,{children:[(0,w.tZ)("div",{className:"logo--zwQR6n8P2E",children:(0,w.tZ)(N.TR,{height:40,name:"DashlaneLockup",title:a("_common_dashlane_logo_title")})}),(0,w.tZ)("div",{className:"progressContainer--uN3zEbYKRy",children:(0,w.BX)("div",{className:"content--g692RTJxEb",children:[(0,w.tZ)(_.Z,{height:96,width:96,animationParams:{renderer:"svg",animationData:e,loop:t,autoplay:!0}}),(0,w.tZ)("p",{className:"progressValue--EWZwTNi5yM",children:a("_common_generic_percentage",{number:n})}),(0,w.tZ)("h2",{className:"description--urcB98N4_F",children:a("webapp_sso_changemp_loading_desc")}),(0,w.tZ)("p",{className:"subDescription--dtFN1rQZIb",children:a("webapp_sso_changemp_loading_warning")})]})})]})};var M=n(966136),O=n(383849),L=n.n(O),B=n(89368),R=n(928136),z=n(599203),P=n(411538);const X="disclaimerCheckboxWrapper--H9bH4mWFEN",j="visible--tgv48_Tn6M",U="disclaimerCheckbox--I9w4KoQzGz";var q;const G=({error:e,isEu:t,memberEmail:n,onSubmit:a})=>{const r=null===t,s=i.useCallback((()=>Boolean(!!r||t)),[t,r]),{translate:o}=(0,g.Z)(),[l,c]=(0,i.useState)(!s()),[d,u]=(0,i.useState)(!1),[_,m]=(0,i.useState)(!1),p=i.createRef();(0,i.useEffect)((()=>{c(!s())}),[c,s]);const h=s()?o("member_account_creation_info_tips_and_offers_label"):o("member_account_creation_i_want_to_receive_spam_and_ads");return(0,w.BX)("div",{className:"inner--PRBfrJ8ztr",children:[(0,w.tZ)("h1",{className:L()("heading--xkXNXFnweh _headingBase--w98gFdP6ar","acceptHeading--bN5eLgP37u"),children:o("member_account_creation_accept_content_heading")}),r?q||(q=(0,w.tZ)(P.Z,{size:40})):(0,w.BX)("form",{className:"form--mbE1UdEyiO",children:[(0,w.tZ)(B.n,{isDisabled:!0,placeholder:o("member_account_creation_email_hint_text"),labelText:o("member_account_creation_email_floating_label"),ref:p,defaultValue:n}),e?(0,w.tZ)("div",{className:"errorText--kkUVthMMSK",children:e}):null,(0,w.tZ)("div",{className:L()(X,j,"consentCheckbox--OxdBTmWrRI"),children:(0,w.tZ)(R.Z,{label:h,labelClass:U,name:"emailsTipsAndOffers",onCheck:()=>{c(!l)},checked:l})}),s()&&(0,w.tZ)("div",{className:L()(X,j),children:(0,w.tZ)(R.Z,{label:(0,w.tZ)(w.HY,{children:o.markup("account_creation_confirm_terms_of_service_markup")}),labelClass:U,name:"termsAndConditions",onCheck:()=>{u(!d)},checked:d})}),(0,w.tZ)("div",{className:"formAction--_jE50Dey_6",children:(0,w.tZ)(z.Z,{size:"large",label:o("member_account_creation_accept_next"),disabled:Boolean(s()&&!d),onClick:()=>{const e={privacyPolicyAndToS:d,subscribed:l,isEu:s(),setIsLoading:m};a(e)},loading:_,classNames:["nextButton--v8loMwl8E9"]})}),s()?null:(0,w.tZ)("p",{className:"disclaimer--HdF8Agopgb",children:o.markup("member_account_creation_accept_tos_markup",{},{linkTarget:"_blank"})})]})]})},F=e=>{const{...t}=e,n={standardHeader:"standardHeader--mQMlxYDQNk",logoContainer:"logoContainer--U1og3U_Xxu",logo:"logo--I6WuRV58HI"},a=(0,w.tZ)("div",{onClick:()=>(0,x.uX)(v.SF)});return(0,w.BX)("div",{className:"wrapper--wU7M482wCS",children:[(0,w.tZ)(M.A,{classes:n,logoComponent:a}),(0,w.tZ)("div",{className:"content--HXxzOJoWsC",children:(0,w.tZ)(G,{...t})})]})},$="webapp_login_form_regsiter_fallback_browser_name",V=e=>{const t=(0,x.Xo)(),{login:n,ssoToken:a,key:D,exists:k,currentAuths:E,expectedAuths:N,inStore:M}=(0,C.Ae)(e),{lee:O}=e,L="true"===k,[B,R]=(0,i.useState)(L?T.D_SPINNER:T.ACCOUNT_CREATION),{translate:z}=(0,g.Z)(),[P,X]=(0,i.useState)(""),[j,U]=(0,i.useState)(0),q=(0,d.f)(),G=(0,c.k)(l.V,"getSsoUserSettings"),V=(0,y.vV)(n)?n:"",H=(0,r.K_)({live:h.C.liveChangeMasterPasswordStatus},[]);(0,i.useEffect)((()=>{M||V.length&&D.length&&a.length||(0,x.uX)(v.TT)}),[M,V,D,a]),(0,i.useEffect)((()=>{L&&G.status===r.rq.Success&&q.status===r.rq.Success&&(async()=>{E===s.hr.MP&&N===s.hr.SSO&&R(T.CHANGE_MP_PROGRESS);const i=e.lee.carbon.localAccounts?.find((e=>e.login===n&&"sso"===e.rememberMeType)),o=G.status===r.rq.Success&&G.data.rememberMeForSSOPreference||"true"===localStorage.getItem(m.MG),l=!i&&o&&q.status===r.rq.Success&&!q.data,c={deviceName:(0,S.M)(z($)),exist:!0,ssoServiceProviderKey:D,login:V,ssoToken:a,currentAuths:E,expectedAuths:N,inStore:M,requiredPermissions:(0,C.ox)(),shouldRememberMeForSSO:l};i&&t.store.dispatch((0,p.zi)(v.sL));const d=await h.C.loginViaSSO(c);if(d.success)N===s.hr.MP&&R(T.ASK_FOR_MP);else{if(d.error.code===s.E6.SSO_LOGIN_CORRUPT)return(0,x.uX)(v.Sm);(0,x.uX)(v.TT)}})()}),[L,G.status,q.status]),(0,i.useEffect)((()=>{if(H.status!==r.iD.Received||!H.data)return;const{value:e}=H.data;U(e)}),[H]);const W=async({password:e})=>{const t={newPassword:e,flow:o.pT.SSO_TO_MP};await(async e=>{if(R(T.CHANGE_MP_PROGRESS),!(await h.C.changeMasterPassword(e)).success)return(0,x.uX)(v.TT)})(t)},Y=async({isEu:e,privacyPolicyAndToS:t,setIsLoading:n,subscribed:i})=>{var r;if(e&&!t){const e=new Error("termsOfService set to false on accept submit");O.reportError(e),(0,x.uX)(v.rM)}n(!0);const o=[];if(e){const e={consentType:"privacyPolicyAndToS",status:t};o.push(e)}const l={consentType:"emailsOffersAndTips",status:i};o.push(l);const c={consents:o,deviceName:(0,S.M)(z($)),exist:!1,ssoServiceProviderKey:D,login:V,ssoToken:a,currentAuths:E,expectedAuths:N,inStore:!1,requiredPermissions:(0,C.ox)(),anonymousUserId:(0,Z.n5)(O.globalState),shouldRememberMeForSSO:"true"===localStorage.getItem(m.MG)};localStorage.removeItem(m.MG);const d=await h.C.loginViaSSO(c);if(n(!1),d.success){X("");let e=f.BJ;e=`${f.Mv}?email=${V}`,(0,b.nL)(e)}else{const e=V.slice(V.indexOf("@")+1);switch(d.error.code){case s.E6.SSO_VERIFICATION_FAILED:X(z("webapp_sso_page_create_account_error",{domain:e}));break;case s.E6.SSO_LOGIN_CORRUPT:(0,x.uX)(v.Sm);break;default:X(null!=(r=d.error.message)?r:"")}}},{isEu:K}=O.carbon.currentLocation;switch(B){case T.ACCOUNT_CREATION:return(0,w.tZ)(F,{isEu:K,onSubmit:Y,memberEmail:V,error:P});case T.ASK_FOR_MP:return(0,w.tZ)(I,{onSubmit:W,dispatchGlobal:O.dispatchGlobal});case T.CHANGE_MP_PROGRESS:return(0,w.tZ)(A,{animation:u,shouldLoopAnimation:!0,progressValue:j});case T.D_SPINNER:default:return(0,w.tZ)("div",{className:"loadingContainer--z9wx9Wo1ko",children:(0,w.tZ)(_.Z,{height:150,width:150,animationParams:{renderer:"svg",animationData:u,loop:!0,autoplay:!0}})})}},H=e=>{const{loading:t}=(0,a.G)();return t?null:(0,w.tZ)(V,{...e})}},881391:(e,t,n)=>{n.d(t,{$9:()=>s,Ae:()=>r,ox:()=>o});var a=n(342868),i=n(828298);const r=e=>{const{location:{search:t}}=e,n={login:"",ssoToken:"",key:"",exists:"",currentAuths:i.hr.SSO,expectedAuths:i.hr.SSO,inStore:!1};try{if(t?.includes("ssoToken"))return{...n,...(0,a.parse)(t)}}catch(e){return n}return n},s=()=>`/sso?${(0,a.stringify)({ssoToken:"inStore",key:"inStore",currentAuths:i.hr.MP,expectedAuths:i.hr.SSO,exists:!0,inStore:!0})}`,o=()=>window.location.host.startsWith("console")?"BILLING":null},435681:(e,t,n)=>{function a(e,t){const n={};return{apply:function(e=t,a){return n[a.type]?n[a.type](e,a.params):e},registerAction:function(t,a){const i=`${e}/${t}`;return n[i]=a,function(e){return{type:i,params:e}}}}}n.d(t,{Z:()=>a})},475239:(e,t,n)=>{n.d(t,{C:()=>d});var a=n(696832),i=n(148038),r=n(740300),s=n(264997),o=n(965454),l=n(803843);const c=e=>!(!e?.exp_year||!e?.exp_month)&&(0,l.Z)(new Date(e.exp_year,e.exp_month,0)),d=({b2c:e,handleCardUpdate:t,pollInterval:n=3e3,timeoutAmount:l=6e5})=>{const[d,u]=(0,a.useState)(!1),[_,m]=(0,a.useState)({}),[p,g]=(0,a.useState)(),h=(0,s.Z)(),b=h.status!==i.rq.Success||!h.data,y=h?.status===i.rq.Success&&h.data?h.data[e?"b2cSubscription":"b2bSubscription"]?.billingInformation:void 0,x=y?.last4?Number(y.last4).toLocaleString("en-US",{minimumIntegerDigits:4,useGrouping:!1}):void 0,v=y?.type?(0,o.v)(y.type):void 0,S=y?.exp_year,f=y?.exp_month,Z=S&&f?`${f}/${S.toString().substring(2)}`:"",C=(0,a.useCallback)((()=>{d&&u(!1),p&&clearTimeout(p)}),[d,p]);return(0,a.useEffect)((()=>C),[]),(0,a.useEffect)((()=>{if(d){const e=setInterval((()=>{r.C.refreshSubscriptionInformation()}),n);if(!p){const e=window.setTimeout(C,l);g(e)}return()=>clearInterval(e)}}),[n,d,C,l,p]),(0,a.useEffect)((()=>{if(d&&_){const e=_.last4DigitsFormatted!==x||_.expFormatted!==Z;if(e&&(C(),t)){const n=!_.last4DigitsFormatted;t(e,n)}}}),[d,x,Z,_,_.expFormatted,_.last4DigitsFormatted,C,t]),{loading:b,billingInformation:y,hasCreditCardPaymentMethod:!!y?.last4,last4Digits:y?.last4,last4DigitsFormatted:x,cardSvg:v,isExpired:c(y),expYear:y?.exp_year,expMonth:y?.exp_month,expFormatted:Z,pollUntilCardUpdate:()=>{u(!0),m({last4DigitsFormatted:x,expFormatted:Z})}}}},337466:(e,t,n)=>{n.d(t,{a:()=>s});var a=n(310789),i=n(411538),r=n(524130);const s=({scopedToPage:e=!1})=>(0,r.tZ)(a.Ejs,{justifyContent:"center",alignItems:"center",sx:{backgroundColor:"rgba(245, 247, 247, 0.7)",...e?{}:{position:"absolute",top:0,left:0,right:0,height:"100%"}},children:(0,r.tZ)(i.Z,{containerStyle:{marginTop:"-90px",...e?{position:"relative",height:"90vh"}:{}}})})},500358:(e,t,n)=>{n.d(t,{HK:()=>p,M2:()=>u,Qz:()=>d,ZP:()=>h,b3:()=>_,er:()=>g,vg:()=>m});var a=n(526849);const i=(0,n(435681).Z)("directory-sync-key",{displayDialog:!1,checkDirectorySyncKeyRequest:null,validationPostponed:!1});function r(e){return{...e,displayDialog:!1}}function s(e){return{...e,displayDialog:!0}}function o(e){return{...e,validationPostponed:!1}}function l(e,t){return{...e,checkDirectorySyncKeyRequest:t}}function c(e){return l(e,null)}const d=i.registerAction("CHECK_DIRECTORY_SYNC_KEY_REQUEST",((e,t)=>{if(!t)return e;const n=l(e,t);return e.validationPostponed?n:s(n)})),u=i.registerAction("KEY_VALIDATION_POSTPONED",(0,a.pipe)(r,(function(e){return{...e,validationPostponed:!0}}))),_=i.registerAction("REOPEN_DIALOG",(0,a.pipe)(s,o)),m=i.registerAction("CLOSE_NOTIFICATION",o),p=(i.registerAction("KEY_VALIDATED",(0,a.pipe)(r,o,c)),i.registerAction("KEY_REJECTED",(0,a.pipe)(r,o,c)),i.registerAction("HIDE_DIALOG",r)),g=i.registerAction("TERMINATE_REQUEST",(0,a.pipe)(o,c)),h=i},78060:(e,t,n)=>{n.d(t,{m:()=>s});var a=n(799852),i=n(133354),r=n(240581);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"isTeamCreator");return t===i.rq.Loading?{status:t}:t===i.rq.Error?{status:i.rq.Success,isTeamCreator:!1}:null===e?{status:i.rq.Loading}:{status:t,isTeamCreator:e}}},728207:(e,t,n)=>{n.d(t,{u:()=>s});var a=n(799852),i=n(133354),r=n(240581);const s=()=>{const{data:e,status:t}=(0,a.k)(r.o,"getTeamCreationDateUnix");return t!==i.rq.Success?{status:t}:null===e?{status:i.rq.Loading}:{status:t,teamCreationDate:e}}},309937:(e,t,n)=>{n.d(t,{Z:()=>r,w:()=>i});const a=(0,n(435681).Z)("ie-drop-notification",{displayIeDropNotification:!0}),i=a.registerAction("IE_DROP_NOTIFICATION",(()=>({displayIeDropNotification:!1}))),r=a},403090:(e,t,n)=>{n.d(t,{e:()=>a});const a=({refusedMembers:e={}}={})=>Object.keys(e).length>0},893383:(e,t,n)=>{n.d(t,{Jo:()=>h,Rb:()=>g,S2:()=>d,VW:()=>_,Wq:()=>l,ZP:()=>y,bh:()=>c,bj:()=>u,eY:()=>b,lp:()=>p,vE:()=>m,xF:()=>o});var a=n(233377),i=n(158432),r=n(438042);const s=(0,i.SP)("members",{members:a.Maybe.nothing(),totalSeatCount:a.Maybe.nothing(),isFreeTrial:a.Maybe.nothing(),teamName:a.Maybe.nothing(),teamSecurityScore:a.Maybe.nothing()}),o=s.action("status-loaded",(({param:e})=>({isFreeTrial:a.Maybe.just(e.isFreeTrial),totalSeatCount:a.Maybe.just(e.membersNumber+e.extraFreeSlots),teamName:a.Maybe.maybe(e.teamName),teamSecurityScore:a.Maybe.maybe(e.teamSecurityScore)}))),l=s.action("members-loaded",(({param:e})=>({members:a.Maybe.just(e.members)}))),c=s.action("user-resent-invitation",(({param:e,state:t})=>({members:t.members.map((t=>t.map((t=>t.login===e.login?Object.assign({},t,{status:"pending",isChecked:!1,isTeamCaptain:!1,isGroupManager:!1}):t))))}))),d=s.action("user-resent-invitation-failed",(({param:e,state:t})=>({members:t.members.map((t=>t.map((t=>t.login===e.login?e:t))))}))),u=s.action("user-demoted-captain",(({state:e,param:t})=>({members:e.members.fmap((e=>e.map((e=>Object.assign({},e,{isTeamCaptain:e.login!==t.login&&e.isTeamCaptain})))))}))),_=s.action("user-promoted-captain",(({state:e,param:t})=>({members:e.members.map((e=>e.map((e=>Object.assign({},e,{isTeamCaptain:e.login===t.login||e.isTeamCaptain})))))}))),m=s.action("user-removed-group-manager",(({state:e,param:t})=>({members:e.members.fmap((e=>e.map((e=>Object.assign({},e,{isGroupManager:e.login!==t.login&&e.isGroupManager})))))}))),p=s.action("user-added-group-manager",(({state:e,param:t})=>({members:e.members.map((e=>e.map((e=>Object.assign({},e,{isGroupManager:e.login===t.login||e.isGroupManager})))))}))),g=s.action("user-revoked-single-member",(({state:e,param:t})=>({members:e.members.map((e=>e.map((e=>e.login===t.login?Object.assign({},e,{revokedDateUnix:(0,r.Z)(new Date),status:"removed"}):e)).filter((e=>Boolean(e)))))}))),h=s.action("user-revoked-single-member-failed",(({state:e,param:t})=>({members:e.members.map((e=>[...e.filter((e=>e.login!==t.login)),t]))}))),b=s.action("members-proposed",(({state:e,param:t})=>({members:a.Maybe.just(e.members.valueOr([]).concat(t.map((e=>({login:e,status:"pending",isTeamCaptain:!1,isGroupManager:!1,lastUpdateDateUnix:(0,r.Z)(new Date)}))))),totalSeatCount:e.totalSeatCount.map((n=>Math.max(n,t.length+e.members.valueOr([]).filter((e=>"removed"!==e.status)).length)))}))),y=s},501093:(e,t,n)=>{n.d(t,{c:()=>D});var a=n(696832),i=n(364438),r=n(926897),s=n(777550),o=n(488203),l=n(68691),c=n(45272),d=n(692077),u=n(806135),_=n(524130);const m={CONTAINER:{display:"flex",padding:"16px 8px",justifyContent:"space-between",alignItems:"center"},ITEM:{display:"flex",gap:"16px",alignItems:"flex-start"}},p=({title:e,description:t,iconName:n,button:a})=>{const{content:r,onClick:s,isUpgradeButton:o,isRoleLink:l}=a;return(0,_.BX)("div",{sx:m.CONTAINER,children:[(0,_.BX)("div",{sx:m.ITEM,children:[(0,_.tZ)(i.JO,{name:n,size:"large",color:"ds.text.neutral.standard"}),(0,_.BX)("div",{sx:{gap:" 4px",maxWidth:"320px"},children:[(0,_.tZ)(i.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.catchy",children:e}),(0,_.tZ)(i.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:t})]})]}),(0,_.tZ)(i.zx,{mood:o?"brand":"neutral",intensity:"quiet",icon:o?"PremiumOutlined":void 0,layout:o?"iconLeading":void 0,role:l?"link":void 0,onClick:s,size:"small",children:r})]})},g=()=>(0,_.tZ)("hr",{sx:{border:"0",borderTop:"1px solid ds.border.neutral.quiet.idle",height:"1px",width:"100%",mt:"8px",mb:"8px"}});var h=n(561605),b=n(119471);let y=function(e){return e.SECURITY_GUIDANCE="security_guidance",e.TRAINING="training",e.SEND_MESSAGE="send_message",e}({});const x={[y.SECURITY_GUIDANCE]:b.mA,[y.TRAINING]:b.J0,[y.SEND_MESSAGE]:b.hc},v={[y.SECURITY_GUIDANCE]:r.CallToAction.RequestDemo,[y.TRAINING]:r.CallToAction.RegisterWebinar,[y.SEND_MESSAGE]:r.CallToAction.SendEmail},S=(e,t)=>{const n=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];n.push(t?r.CallToAction.ContactPhoneSupport:r.CallToAction.RequestUpgrade),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:n,chosenAction:v[e],hasChosenNoAction:!1})),(0,h.Yo)(x[e])};var f,Z,C,T;const D=({onDismiss:e})=>{var t;const{translate:n}=(0,o.Z)(),{routes:m}=(0,d.Xo)(),x=(0,s.B)(),v=(0,l.C)(),D=(0,u.S)(),k=null===D||null===v,E=null!=(t=D?.phoneSupport.enabled)&&t;return(0,a.useEffect)((()=>{(0,c.Nc)(r.PageView.TacModalContactSupport)}),[]),(0,_.tZ)(i.Vq,{isOpen:!0,onClose:()=>((e,t)=>{const n=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];n.push(t?r.CallToAction.ContactPhoneSupport:r.CallToAction.RequestUpgrade),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:n,hasChosenNoAction:!0})),e()})(e,E),closeActionLabel:n("_common_dialog_dismiss_button"),title:n("team_contact_support_dialog_title"),children:k?(0,_.tZ)(i.nv,{sx:{textAlign:"center"},children:f||(f=(0,_.tZ)(i.ZX,{size:44}))}):(0,_.BX)(_.HY,{children:[(0,_.tZ)(i.nv,{sx:{marginBottom:"16px"},children:n("team_contact_support_dialog_text")}),(0,_.BX)("div",{sx:{gap:"8px"},children:[(0,_.tZ)(p,{title:n("team_contact_support_phone_support_title"),description:n("team_contact_support_phone_support_subtitle"),iconName:"ItemPhoneHomeOutlined",button:{content:n(E?"team_contact_support_request_call":"team_contact_support_upgrade_to_business_cta"),onClick:()=>((e,t,n,a,i)=>{const s=[r.CallToAction.SendEmail,r.CallToAction.RequestDemo,r.CallToAction.RegisterWebinar,r.CallToAction.Dismiss];return e?(s.push(r.CallToAction.ContactPhoneSupport),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.ContactPhoneSupport,hasChosenNoAction:!1})),void(0,h.Yo)(b.$b)):e||!n&&!a?(s.push(r.CallToAction.RequestUpgrade),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.RequestUpgrade,hasChosenNoAction:!1})),(0,d.uX)(`${t.teamAccountChangePlanRoutePath}?plan=business`)):(s.push(r.CallToAction.RequestUpgrade),(0,c.Kz)(new r.UserCallToActionEvent({callToActionList:s,chosenAction:r.CallToAction.RequestUpgrade,hasChosenNoAction:!1})),void(0,h.Yo)(`${b.ub}?plan=business&subCode=${null!=i?i:""}&utm_source=button:upgrade_business_tier+origin_page:tac/modal_contact_support+origin_component:main_app`))})(E,m,v?.isFreeTrial,v?.isGracePeriod,x?.subscriptionCode),isUpgradeButton:!E,isRoleLink:E||v?.isFreeTrial||v?.isGracePeriod}}),Z||(Z=(0,_.tZ)(g,{})),(0,_.tZ)(p,{title:n("team_contact_support_security_guidance_title"),description:n("team_contact_support_security_guidance_subtitle"),iconName:"ProtectionOutlined",button:{content:n("team_contact_support_request_demo"),onClick:()=>S(y.SECURITY_GUIDANCE,E),isRoleLink:!0}}),C||(C=(0,_.tZ)(g,{})),(0,_.tZ)(p,{title:n("team_contact_support_training_title"),description:n("team_contact_support_training_subtitle"),iconName:"AccountSettingsOutlined",button:{content:n("team_contact_support_register_for_webinar"),onClick:()=>S(y.TRAINING,E),isRoleLink:!0}}),T||(T=(0,_.tZ)(g,{})),(0,_.tZ)(p,{title:n("team_contact_support_help_customer_support_title"),description:n("team_contact_support_help_customer_support_subtitle"),iconName:"ItemEmailOutlined",button:{content:n("team_contact_support_send_message"),onClick:()=>S(y.SEND_MESSAGE,E),isRoleLink:!0}})]})]})})}},897078:(e,t,n)=>{n.d(t,{Z:()=>l});var a=n(158432),i=n(758480),r=n(678128),s=n(874466),o=n(893383);const l=(0,a.SP)("team",{},[i.ZP,r.ZP,s.ZP,o.ZP])},538959:(e,t,n)=>{n.d(t,{Z:()=>Lv,n:()=>Ov});var a=n(459522),i=n(692077),r=n(696832),s=n(148038),o=n(364438),l=n(310789),c=n(926897),d=n(799852),u=n(361607),_=n(240581),m=n(627584),p=n(581598),g=n(27144),h=n(45272),b=n(387532),y=n(488203),x=n(475239);const v={borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px"},S={borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px",borderRadius:"8px"},f={padding:"10px 8px",width:"40px",height:"40px",borderRadius:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle"};var Z,C=n(524130);const T=()=>{const{translate:e}=(0,y.Z)(),{loading:t,last4DigitsFormatted:n,expFormatted:a,cardSvg:i}=(0,x.C)({});return t?Z||(Z=(0,C.tZ)(o.ZX,{})):(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",sx:S,children:[(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_credit_card_header")}),(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[(0,C.BX)(l.Ejs,{alignItems:"center",gap:"8px",children:[i,(0,C.BX)(o.nv,{color:"ds.text.neutral.standard",children:["•••• ",n]})]}),(0,C.tZ)(l.Ejs,{children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",children:e("team_account_addseats_success_credit_card_expires",{expirationDate:a})})})]})]})};var D;const k=()=>{const{translate:e}=(0,y.Z)(),{routes:t}=(0,i.Xo)(),n=(0,i.k6)();return(0,C.tZ)(l.k$b,{children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"supershy",onClick:()=>{n.length>1?n.goBack():(0,i.uX)(t.teamAccountRoutePath)},children:(0,C.BX)(l.Ejs,{alignItems:"center",children:[D||(D=(0,C.tZ)(o.JO,{size:"medium",name:"ArrowLeftOutlined"})),(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.title.block.medium",sx:{marginLeft:"14px"},children:e("_common_action_back")})]})})})};var E=n(264997);const w=()=>{const e=(0,E.Z)(),t=e.status!==s.rq.Success||!e.data,n=e?.status===s.rq.Success?e?.data?.b2bSubscription?.billingInformation:null,a=n?.country;return{loading:t,billingCountry:a}};var I=n(139378),N=n(38452),A=n(618854),M=n(806697);const O={alignItems:"center",backgroundColor:"ds.background.alternate",borderBottom:"1px solid ds.border.neutral.quiet.idle",display:"flex",height:"80px",justifyContent:"flex-end",padding:"0 48px"},L=({children:e})=>(0,C.tZ)("header",{sx:O,children:e}),B={LAYOUT_CONTAINER:{display:"flex",flexDirection:"column",overflowY:"hidden"},MAIN_AREA:{display:"flex",backgroundColor:"ds.background.alternate",height:" 100vh",position:"relative",overflowY:"hidden",width:"100vw"},CONTENT:{width:"100%",overflowY:"auto"},SIDE_NAV:{backgroundColor:"ds.container.agnostic.inverse.standard",nav:{backgroundColor:"ds.container.agnostic.inverse.standard"}}},R=e=>{const{brand:t,children:n,header:a,sideNav:i,banner:r,dialog:s,bottomButton:o}=e;return(0,C.tZ)("div",{sx:B.LAYOUT_CONTAINER,children:(0,C.BX)("div",{sx:B.MAIN_AREA,children:[(0,C.BX)("div",{sx:B.SIDE_NAV,children:[(0,C.tZ)("div",{children:t}),(0,C.tZ)("div",{style:{height:"calc(100% - 160px)",overflow:"auto"},children:i}),(0,C.tZ)("div",{style:{height:"80px"},children:o})]}),(0,C.BX)("div",{sx:B.CONTENT,children:[r?(0,C.tZ)("div",{children:r}):null,(0,C.tZ)("div",{children:a}),(0,C.tZ)("main",{children:n})]}),s?(0,C.BX)("div",{children:[s," "]}):null]})})};var z=n(383849),P=n.n(z),X=n(580443),j=n(777550),U=n(925918),q=n(561605),G=n(536487),F=n(909673),$=n(482598),V=n(573623);const H=r.createContext(null),W="NETWORK ERROR",Y=({globalReportError:e,children:t})=>{const[n,a]=r.useState([]),{translate:i}=(0,y.Z)(),s=e=>{n.find((t=>t.title===e.title&&t.message===e.message))||a((t=>[...t,e]))};return(0,C.tZ)(H.Provider,{value:{queue:n,addAlertToQueue:s,popAlertFromQueue:()=>{a((e=>e.slice(1)))},reportTACError:(t,n)=>{t.message.toUpperCase()===W&&s({title:i("_common_alert_network_error_title"),message:i("_common_alert_network_error_message")}),e(t,n)}},children:t})},K=()=>{const e=r.useContext(H);if(!e)throw new Error("useAlertQueue must be called from within an AlertQueueProvider");return e},Q=({onDismiss:e,onFeedbackSent:t})=>{const[n,a]=(0,r.useState)(!0),[i,s]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),{translate:u}=(0,y.Z)(),{reportTACError:m}=K(),p=(0,r.useRef)(null),[g,b]=(0,r.useState)(""),{sendFeedback:x}=(0,$.u)(_.o);(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacAccountSendFeedback,c.BrowseComponent.Tac)}),[]);return(0,C.BX)(o.Vq,{isOpen:!0,onClose:()=>{(0,h.Kz)(new c.UserCallToActionEvent({hasChosenNoAction:!0})),e()},actions:{primary:{children:u("team_feedback_dialog_button_ok"),onClick:()=>(async()=>{s(!0),d(!1);const e=await x({feedbackBody:g});(0,V.d6)(e)?((0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.SendEmail],chosenAction:c.CallToAction.SendEmail,hasChosenNoAction:!1})),t()):(m(new Error(e.error.message)),s(!1),d(!0))})(),disabled:n||i}},title:u("team_feedback_dialog_upd_title"),closeActionLabel:u("_common_dialog_dismiss_button"),children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:u.markup("team_feedback_dialog_upd_text_markup",{},{linkTarget:"_blank"})}),(0,C.tZ)(o.oi,{sx:{resize:"vertical",maxHeight:"300px"},value:g,ref:p,placeholder:u("team_feedback_dialog_upd_textarea_label"),onChange:e=>{var t;b(null!=(t=p?.current?.value)?t:"");const n=!e.target.value;a(n)}}),l?(0,C.tZ)(o.nv,{color:"ds.text.danger.quiet",textStyle:"ds.body.standard.strong",children:u.markup("team_feedback_dialog_error_markup")}):null]})};var J;const ee=({onDismiss:e})=>{const{translate:t}=(0,y.Z)();return(0,C.tZ)(o.Vq,{isOpen:!0,onClose:e,closeActionLabel:t("_common_dialog_dismiss_button"),title:t("team_feedback_result_dialog_title"),children:(0,C.BX)("div",{sx:{display:"flex",gap:"20px",alignItems:"center"},children:[J||(J=(0,C.tZ)(o.JO,{name:"FeedbackSuccessOutlined",size:"xlarge",color:"ds.text.positive.standard"})),(0,C.tZ)("div",{children:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:`${t("team_feedback_result_body_title")}. ${t("team_feedback_result_body_text")}`})})]})})};var te=function(e){return e[e.FeedbackPopup=0]="FeedbackPopup",e[e.ResultPopup=1]="ResultPopup",e[e.Done=2]="Done",e}(te||{});const ne=({onDismiss:e,onSend:t})=>{const[n,a]=(0,r.useState)(te.FeedbackPopup);let i;const s=()=>{clearTimeout(i),a(te.Done),t()};return(0,C.BX)("div",{children:[n===te.FeedbackPopup&&(0,C.tZ)(Q,{onDismiss:e,onFeedbackSent:()=>{a(te.ResultPopup),i=window.setTimeout((()=>{s()}),1e4)}}),n===te.ResultPopup&&(0,C.tZ)(ee,{onDismiss:s})]})};var ae=n(501093),ie=n(119471),re=n(115607),se=n(68691);const oe=()=>{const e=(0,se.C)(),t=(0,re.lZ)(),{translate:n}=(0,y.Z)();if(!e||t.isLoading||void 0===t.isTeamSoftDiscontinued||void 0===t.isTrial)return null;const a=e.daysLeftInTrial,i=e.spaceTier===p.lD.Team,r=e.isGracePeriod,s=t.isTeamSoftDiscontinued&&t.isTrial;return(0,C.tZ)(o.Ct,{label:s?n("trial_ended_discontinued"):r?n("free_trial_expired_badge"):n(i?"team_trial_days_left_badge":"business_trial_days_left_badge",{count:a}),mood:r||s?"warning":"brand",layout:"labelOnly",intensity:r?"catchy":"quiet",sx:{marginTop:"3px"}})};var le=n(369898);var ce,de;const ue=({lee:e})=>{const[t,n]=(0,r.useState)(!1),[a,s]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[_,m]=(0,r.useState)(!1),p=(0,j.B)(),{translate:g}=(0,y.Z)(),b=(0,G.a)(e.dispatchGlobal),x=(0,F.w)(),{routes:v}=(0,i.Xo)(),S=(e,t,n)=>e=>{n(e)},f=({className:e,...t})=>(0,C.tZ)(l.zxk,{type:"button",nature:"ghost",className:P()("dropdownElement--fRxFyumXai",e),...t}),Z=a?(0,C.tZ)(ne,{onDismiss:()=>s(!1),onSend:()=>s(!1)}):null,T=d?(0,C.tZ)(ae.c,{onDismiss:()=>u(!1)}):null,D=p?.premiumStatus&&!(0,X.wt)(p?.premiumStatus)&&((0,X.pq)(p?.premiumStatus)||(0,X.f1)(p?.premiumStatus)),k=p?.premiumStatus&&(0,X.pq)(p?.premiumStatus)?"team":"business",E=p?.premiumStatus&&(0,X.wt)(p?.premiumStatus),w=e.permission.adminAccess.hasBillingAccess,I=`button:buy_dashlane+click_origin:account_dropdown+origin_page:${x||void 0}+origin_component:main_app`,N=`${ie.ub}?plan=${k}&subCode=${p?.subscriptionCode}&utm_source=${I}`;return(0,C.BX)(C.HY,{children:[(0,C.tZ)("div",{className:"teamAccountDropdown--XD04fGIw1S",children:(0,C.tZ)(U.Lt,{alignment:U.oA.End,position:U.ir.Bottom,onToggle:()=>{n(!t)},withBackdrop:!1,renderRoot:e=>(e=>(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"iconTrailing",icon:t?"CaretUpOutlined":"CaretDownOutlined",onClick:e,children:g("team_account")}))(e),children:(0,C.BX)("div",{className:"dropdownMenu--Uz1kni0KIt",children:[w?(0,C.tZ)(f,{onClick:S(0,0,(()=>{(0,i.uX)(v.teamAccountRoutePath)})),children:g("team_plan")}):null,(0,C.tZ)(f,{onClick:S(0,0,(()=>{(0,i.uX)("/")})),children:g("team_webapp")}),E&&w?(0,C.tZ)(f,{onClick:S(0,0,(()=>((0,h.Kz)(new c.UserClickEvent({button:c.Button.BuyDashlane,clickOrigin:c.ClickOrigin.AccountDropdown})),void(0,q.Yo)(N)))),children:(0,C.BX)("div",{children:[g("team_buy_dashlane"),ce||(ce=(0,C.tZ)(oe,{}))]})}):null,D&&w?(0,C.tZ)(f,{onClick:S(0,0,(()=>(0,i.uX)(`${v.teamAccountChangePlanRoutePath}`))),children:g("team_upgrade")}):null,(0,C.tZ)(f,{onClick:S(0,0,(()=>(0,q.Yo)(ie.Pr))),children:g("team_service_status")}),(0,C.tZ)(f,{onClick:S(0,0,(()=>(0,q.Yo)(ie.FX))),children:g("team_support")}),w?(0,C.tZ)(f,{onClick:()=>u(!0),children:g("team_contact_support_menu_item")}):null,(0,C.tZ)(f,{onClick:S(0,0,(()=>s(!0))),children:g("team_feedback")}),de||(de=(0,C.tZ)("hr",{})),(0,C.tZ)(f,{onClick:S(0,0,(()=>{b()})),className:"logout--x9WN8NkY4R",children:g("team_logout")})]})})}),_?(0,C.tZ)(le.F,{isShown:_,setIsShown:m,isFromVault:!1}):null,Z,T]})};var _e=n(506295),me=n(242714),pe=n(379846);const ge=r.createContext(null),he=({children:e})=>{const[t,n]=r.useState(!1);return(0,C.tZ)(ge.Provider,{value:{hasNewBreaches:t,setHasNewBreaches:n},children:e})},be=()=>{const e=r.useContext(ge);if(!e)throw new Error("useSideNavNotification must be called from within an SideNavNotificationProvider");return e},ye=(0,r.createContext)({isIntegrationsMenuEnabled:!1}),xe=({children:e})=>{const{data:t}=(0,u._)(),[n,a]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{t?.["setup_rollout_web_tech-week-integrations"]&&a(!0)}),[t]),(0,C.tZ)(ye.Provider,{value:{isIntegrationsMenuEnabled:n},children:e})};function ve(e){var t,n;const a=(0,j.B)(),i=(0,se.C)();if(!i)return null;let r;return r="hasFullAccess"in e&&e.hasFullAccess||e.hasBillingAccess,{shouldShowBuyOrUpgradePaywall:null!=(t=r)&&t,isTrialOrGracePeriod:i.isFreeTrial||i.isGracePeriod,planType:i.spaceTier,accountSubscriptionCode:null!=(n=a?.subscriptionCode)?n:""}}var Se=n(522640),fe=n(740300);function Ze(e){const[t,n]=r.useState(!0),[a,i]=r.useState({}),[s,o]=r.useState(null),[l,c]=r.useState(null),[d,u]=r.useState(null);return r.useEffect((()=>{if(void 0===e)return;const t=new AbortController;return(async()=>{n(!0);try{const{teamInfo:{ssoServiceProviderUrl:e,ssoIdpMetadata:n,ssoEnabled:a,recoveryEnabled:r,duoSecretKey:s,duoIntegrationKey:o,duoApiHostname:l,duo:d,activeDirectoryToken:_,activeDirectorySyncType:m,activeDirectorySyncStatus:p,uuid:g},capabilities:h,planTier:b}=await async function(){const e=await fe.C.getTeamInfo();if(e.success){const{data:{teamInfo:t,planTier:n,capabilities:a,seats:i}}=e;return{teamInfo:t,planTier:n,capabilities:a,seats:i}}{const{message:t}=e;throw new Error(`getTeamInfo: failed with error: ${t}`)}}();if(t.signal.aborted)return;i({ssoServiceProviderUrl:e,ssoIdpMetadata:n,ssoEnabled:a,recoveryEnabled:r,duoSecretKey:s,duoIntegrationKey:o,duoApiHostname:l,duo:d,activeDirectoryToken:_,activeDirectorySyncType:m,activeDirectorySyncStatus:p,uuid:g}),u(b),c(h)}catch(e){const t=new Error(`useTeamSettings: ${e}`);o(t)}finally{n(!1)}})(),()=>{t.abort()}}),[e]),{teamSettingsLoading:t,teamSettingsError:s,teamSettings:a,updateTeamSettings:async t=>{if(null===e)return;const n={teamId:e,settings:t};try{await(0,Se.jy)(n)}catch(e){var r;throw new Error(null!=(r=e?.additionalInfo?.message)?r:"Failed to save metadata")}const s={...a,...t};i(s)},planTier:d,teamCapabilities:l}}var Ce=n(619122),Te=n(133354),De=n(114943),ke=n(402337);const Ee=()=>{const e=(0,De.Y)(),t=(0,me.o)("monetization_extension_policies_repackage"),n=(0,se.C)();if(e.status!==Te.rq.Success||!t)return{hasStarterPaywall:!1,hasTrialBusinessPaywall:!1,hasExcludedPolicy:()=>!1};const a=e.data.capabilities?.adminPolicies?.info.excludedPolicies||[],i="full"===(0,ke.R)(e.data);return{hasStarterPaywall:(0,X.f1)(e.data)&&i,hasTrialBusinessPaywall:(0,X.NG)(e.data)&&i&&!!n?.isFreeTrial,hasExcludedPolicy:e=>a.includes(e)}};var we=n(15192),Ie=n(784133);const Ne=({isSidenavCollapsed:e,settingsRoute:t,children:n})=>{const{translate:a}=(0,y.Z)(),i=(0,we.k6)(),r=(0,Ie.h)(),{unseen:s,setAsSeen:c}=(0,pe.m)(_e.O.AccountRecoveryAvailableAdminTooltip);return!s||r.status!==Te.rq.Success||r.data?(0,C.tZ)("div",{children:n}):(0,C.tZ)("div",{sx:{position:"relative"},children:(0,C.tZ)(l.ua7,{sx:{width:"312px",minWidth:"312px",textAlign:"left",top:e?0:"-100px"},trigger:"persist",placement:"left",offset:[0,30],arrowSize:12,content:(0,C.BX)(l.Ejs,{gap:"8px",sx:{padding:"8px"},children:[(0,C.tZ)(l.nvN,{size:"large",as:"h3",sx:{fontWeight:600,color:"ds.text.inverse.catchy"},children:a("team_account_recovery_popover_title")}),(0,C.tZ)(l.nvN,{color:"white",size:"x-small",children:a("team_account_recovery_popover_description")}),(0,C.BX)(l.Ejs,{gap:"8px",justifyContent:"flex-end",sx:{width:"100%",marginTop:"8px"},children:[(0,C.tZ)(o.zx,{type:"button",mood:"neutral",size:"small","data-testid":"ar-tooltip-dismiss",onClick:()=>c(),children:a("team_account_recovery_popover_dismiss")}),(0,C.tZ)(o.zx,{type:"button",mood:"brand",size:"small","data-testid":"ar-tooltip-go-to-settings",onClick:()=>{c(),i.push(t)},children:a("team_account_recovery_popover_go_to_settings")})]})]}),children:(0,C.BX)("div",{sx:{position:"relative"},children:[" ",n]})})})},Ae={CONTAINER:{alignItems:"center",borderRadius:"4px",cursor:"pointer",display:"flex",padding:"16px 24px",position:"relative","&:hover":{backgroundColor:"ds.container.expressive.neutral.supershy.hover"}},CONTAINER_COLLAPSED:{textStyle:"ds.title.block.small",alignItems:"center",flexDirection:"column",padding:"6px"},CONTAINER_SELECTED:{backgroundColor:"ds.container.expressive.neutral.supershy.active"},END_ADORNMENT_COLLAPSED:{display:"none"},ICON:{marginBottom:"0",marginRight:"16px",minWidth:"20px",svg:{fill:"ds.text.inverse.catchy"}},ICON_COLLAPSED:{marginBottom:"4px",marginRight:"0"},LABEL:{color:"ds.text.inverse.catchy",hyphens:"auto",minWidth:"0",wordWrap:"break-word"},LABEL_COLLAPSED:{textStyle:"ds.title.block.small",textAlign:"center",width:"100%"},LABEL_CONTAINER:{display:"flex",alignItems:"flex-start",flexDirection:"column",gap:"2px"},NOTIFICATION:{alignSelf:"flex-start",backgroundColor:"ds.container.expressive.warning.catchy.idle",borderRadius:"50%",flexShrink:"0",height:"8px",marginLeft:"4px",width:"8px"},NOTIFICATION_COLLAPSED:{position:"absolute",right:"18px"},TEXT_MEDIUM:{textStyle:"ds.title.block.medium"}},Me=({collapsed:e,hasNotification:t,icon:n,label:a,endAdornment:i,selected:r,...s})=>{const l=(0,o.jM)([Ae.CONTAINER,e?Ae.CONTAINER_COLLAPSED:Ae.TEXT_MEDIUM,r?Ae.CONTAINER_SELECTED:{}]),c=(0,o.jM)([Ae.ICON,e?Ae.ICON_COLLAPSED:{}]),d=(0,o.jM)([Ae.LABEL,e?Ae.LABEL_COLLAPSED:Ae.TEXT_MEDIUM]),u=(0,o.jM)([Ae.NOTIFICATION,e?Ae.NOTIFICATION_COLLAPSED:{}]);return(0,C.BX)("span",{sx:l,...s,children:[(0,C.BX)("span",{sx:c,children:[" ",n," "]}),i?(0,C.BX)("div",{sx:Ae.LABEL_CONTAINER,children:[(0,C.tZ)("span",{sx:d,children:a}),(0,C.tZ)("div",{sx:e?Ae.END_ADORNMENT_COLLAPSED:{},children:i})]}):(0,C.tZ)("span",{sx:d,children:a}),t?(0,C.tZ)("span",{sx:u}):null]})};var Oe=n(765572),Le=n(470750);const Be=()=>{const{translate:e}=(0,y.Z)(),{markNewRestrictSharingPolicySeen:t}=(0,$.u)(Oe.t),{data:n,status:a}=(0,d.k)(Oe.t,"hasSeenNewRestrictSharingPolicy");return a!==Te.rq.Success||n?null:(0,C.tZ)(Le.M,{title:e("team_tooltip_title_restrict_sharing_info"),description:e("team_tooltip_description_restrict_sharing_info"),setIsNotificationVisible:t})},Re=(0,r.createContext)(!1),ze=({children:e})=>{const t=(0,me.o)("setup_rollout_splunk_integration_prod");return(0,C.tZ)(Re.Provider,{value:!!t,children:e})},Pe={settingsMenuContainer:"settingsMenuContainer--EascJOgBpz",settingsHoverContainer:"settingsHoverContainer--z9ins4al2D",iconContainer:"iconContainer--E97FJLapaB",tooltipMenuOption:"tooltipMenuOption--uuMY2Xcfk0",accordionLinkWithBadge:"accordionLinkWithBadge--j4Qg9gk9xp",categoryTitle:"categoryTitle--krvL3iQ_mG"};var Xe,je,Ue,qe,Ge,Fe,$e,Ve,He,We,Ye,Ke,Qe,Je,et,tt,nt,at,it,rt;const st="team_settings_menu_title_account_recovery",ot="team_settings_menu_title_directory_sync",lt="team_settings_tab_duo",ct="team_settings_menu_title_policies",dt="team_settings",ut="team_settings_menu_title_events_reporting",_t="team_settings_menu_title_single_sign_on",mt="team_new_label",pt="team_upgrade_label",gt="webapp_sidemenu_category_integrations",ht=(e,t)=>{var n;return(null!=(n=t?.[e].length)?n:0)>0},bt=({isCollapsed:e=!1,permissionChecker:t,routes:n,teamNotifications:s,teamSettings:d})=>{var u,_;const{translate:m}=(0,y.Z)(),g={DIRECTORY_SYNC:`${n.teamSettingsRoutePath}${a.B9.DIRECTORY_SYNC}`,DUO:`${n.teamSettingsRoutePath}${a.B9.DUO}`,MASTER_PASSWORD_POLICIES:`${n.teamSettingsRoutePath}${a.B9.MASTER_PASSWORD_POLICIES}`,POLICIES:`${n.teamSettingsRoutePath}${a.B9.POLICIES}`,SSO:`${n.teamSettingsRoutePath}${a.B9.SSO}`,SIEM:`${n.teamSettingsRoutePath}${a.B9.SIEM}`},b={INTEGRATIONS:`${n.teamIntegrationsRoutePath}`,DIRECTORY_SYNC:`${n.teamIntegrationsRoutePath}${a.B9.DIRECTORY_SYNC}`,SSO:`${n.teamIntegrationsRoutePath}${a.B9.SSO}`,SIEM:`${n.teamIntegrationsRoutePath}${a.B9.SIEM}`},x=(0,i.TH)(),{unseen:v}=(0,pe.m)(_e.O.TacDarkWebInsightsNewBadge),{hasNewBreaches:S}=be(),f=(0,me.o)("BBCOM-238-duo"),Z=(0,me.o)("monetization_extension_trial_activity_logs"),{isIntegrationsMenuEnabled:T}=function(){const e=(0,r.useContext)(ye);if(!e)throw new Error("useSidenavFeatureflips must be called from within an SideNavFeatureflipsProvider");return e}(),{shouldShowBuyOrUpgradePaywall:D,planType:k}=null!=(u=ve(t.adminAccess))?u:{},{teamId:E}=(0,Ce.fV)(),w=Ze(E),I=(0,se.C)(),N=(0,r.useContext)(Re),A=!(null==(_=w.teamCapabilities?.activityLog.enabled)||_)||Z&&I?.isFreeTrial,{hasStarterPaywall:M,hasTrialBusinessPaywall:O}=Ee(),L=D&&(k===p.lD.Team||k===p.lD.Starter),B=d&&!d.ssoEnabled&&!L&&void 0!==L,R=!!w.teamCapabilities?.groupSharing.info?.limit,z=M||O,X=({requiredPermission:e,children:n,...a})=>t.adminAccess.hasPermissionLevel(e)?(0,C.tZ)(l.KJW,{...a,children:n}):null;return(0,C.BX)(l.t7v,{collapsed:e,children:[(0,C.BX)(l.sMA,{sx:{pointerEvents:"auto",backgroundColor:"ds.container.agnostic.inverse.standard",marginBottom:"40px"},children:[(0,C.tZ)(X,{requiredPermission:"FULL",collapsed:e,children:(0,C.tZ)(i.rU,{to:n.teamDashboardRoutePath,children:(0,C.tZ)(Me,{collapsed:e,icon:Xe||(Xe=(0,C.tZ)(l.QGC,{})),label:m("team_general"),selected:x.pathname===n.teamDashboardRoutePath})})}),(0,C.tZ)(X,{requiredPermission:"FULL",collapsed:e,children:(0,C.tZ)(i.rU,{to:n.teamMembersRoutePath,children:(0,C.tZ)(Me,{collapsed:e,icon:je||(je=(0,C.tZ)(l.lMe,{})),label:m("team_members"),selected:x.pathname===n.teamMembersRoutePath})})}),(0,C.tZ)(X,{requiredPermission:"GROUP_READ",collapsed:e,children:(0,C.tZ)(i.rU,{to:n.teamGroupsRoutePath,children:(0,C.tZ)(Me,{collapsed:e,icon:Ue||(Ue=(0,C.tZ)(l.c6E,{})),label:m("team_groups"),selected:x.pathname===n.teamGroupsRoutePath,endAdornment:R?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:m("webapp_sidemenu_group_upgrade_label")}):null})})}),(0,C.tZ)(X,{requiredPermission:"FULL",collapsed:e,children:(0,C.tZ)(i.rU,{to:n.teamActivityRoutePath,children:(0,C.tZ)(Me,{collapsed:e,hasNotification:ht("accountRecoveryRequests",s),icon:qe||(qe=(0,C.tZ)(l.X4t,{})),label:m("team_activity"),selected:x.pathname===n.teamActivityRoutePath,endAdornment:A?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:m(pt),layout:"iconLeading",iconName:"PremiumOutlined","data-testid":"activity-badge"}):null})})}),(0,C.tZ)(X,{requiredPermission:"FULL",collapsed:e,children:(0,C.tZ)(Ne,{isSidenavCollapsed:e,settingsRoute:g.MASTER_PASSWORD_POLICIES,children:e?(0,C.tZ)(l.ua7,{placement:"right",offset:[0,15],hoverCloseDelay:500,sx:{padding:"4px 0","svg, svg:hover":{fill:"ds.text.inverse.catchy"}},content:(0,C.BX)("div",{sx:{width:B?"180px":"148px"},children:[(0,C.BX)("div",{style:{display:"flex"},children:[(0,C.tZ)(i.rU,{to:g.POLICIES,style:{width:"100%"},children:(0,C.BX)("div",{className:Pe.tooltipMenuOption,children:[m(ct),z?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:m(pt),layout:"iconLeading",iconName:"PremiumOutlined"}):null]})}),Ge||(Ge=(0,C.tZ)(Be,{}))]}),T?null:(0,C.BX)(C.HY,{children:[(0,C.tZ)(i.rU,{to:g.SSO,children:(0,C.BX)("div",{className:P()(Pe.tooltipMenuOption,{[Pe.tooltipMenuOptionWithBadge]:B}),children:[m(_t),B||L?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:m(B?mt:pt),layout:"iconLeading",iconName:L?"PremiumOutlined":void 0,"data-testid":"sso-badge"}):null]})}),(0,C.tZ)(i.rU,{to:g.DIRECTORY_SYNC,children:(0,C.tZ)("div",{className:Pe.tooltipMenuOption,children:m(ot)})}),N?(0,C.tZ)(i.rU,{to:g.SIEM,children:(0,C.tZ)("div",{className:Pe.tooltipMenuOption,children:m(ut)})}):null]}),(0,C.tZ)(i.rU,{to:g.MASTER_PASSWORD_POLICIES,children:(0,C.tZ)("div",{className:Pe.tooltipMenuOption,children:m(st)})}),f?(0,C.tZ)(i.rU,{to:g.DUO,children:(0,C.tZ)("div",{className:Pe.tooltipMenuOption,children:m(lt)})}):null]}),children:(0,C.tZ)("div",{tabIndex:0,children:(0,C.tZ)(Me,{collapsed:e,icon:Fe||(Fe=(0,C.tZ)(l.ewm,{})),label:m(dt),selected:!1})})}):(0,C.BX)(l.UlM,{size:"large",open:!0,sx:{backgroundColor:"ds.container.agnostic.inverse.standard",span:{color:"ds.text.inverse.catchy"},"> summary":{padding:"16px 0"},"&[open]":{padding:0},"&[open] > summary":{padding:"16px 0"},"&[open] > div:nth-of-type(1)":{pointerEvents:"auto",padding:0},"svg, svg:hover":{fill:"ds.text.inverse.catchy"}},children:[(0,C.tZ)(l._Oh,{children:(0,C.BX)("span",{className:Pe.settingsMenuContainer,children:[(0,C.tZ)("span",{className:Pe.iconContainer,children:$e||($e=(0,C.tZ)(l.ewm,{}))}),(0,C.tZ)(l.nvN,{size:"medium",bold:!0,as:"span",children:m(dt)})]})}),(0,C.BX)(l.rN7,{children:[(0,C.BX)("div",{style:{display:"flex"},children:[(0,C.tZ)(i.rU,{to:g.POLICIES,style:{width:"100%"},children:(0,C.tZ)(Me,{icon:Ve||(Ve=(0,C.tZ)("span",{})),label:m(ct),selected:x.pathname===g.POLICIES,endAdornment:z?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:m(pt),layout:"iconLeading",iconName:"PremiumOutlined"}):null})}),He||(He=(0,C.tZ)(Be,{}))]}),T?null:(0,C.BX)(C.HY,{children:[(0,C.tZ)(i.rU,{to:g.SSO,children:(0,C.tZ)(Me,{icon:We||(We=(0,C.tZ)("span",{})),label:m(_t),endAdornment:B||L?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:m(B?mt:pt),layout:"iconLeading",iconName:L?"PremiumOutlined":void 0,"data-testid":"sso-badge"}):null,selected:x.pathname===g.SSO})}),(0,C.tZ)(i.rU,{to:g.DIRECTORY_SYNC,children:(0,C.tZ)(Me,{icon:Ye||(Ye=(0,C.tZ)("span",{})),label:m(ot),selected:x.pathname===g.DIRECTORY_SYNC})}),N?(0,C.tZ)(i.rU,{to:g.SIEM,children:(0,C.tZ)(Me,{icon:Ke||(Ke=(0,C.tZ)("span",{})),label:m(ut),selected:x.pathname===g.SIEM})}):null]}),(0,C.tZ)(i.rU,{to:g.MASTER_PASSWORD_POLICIES,children:(0,C.tZ)(Me,{icon:Qe||(Qe=(0,C.tZ)("span",{})),label:m(st),selected:x.pathname===g.MASTER_PASSWORD_POLICIES})}),f?(0,C.tZ)(i.rU,{to:g.DUO,children:(0,C.tZ)(Me,{icon:Je||(Je=(0,C.tZ)("span",{})),label:m(lt),selected:x.pathname===g.DUO})}):null]})]})})})]}),T?(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.nvN,{color:"ds.text.inverse.quiet",caps:!0,size:"x-small",sx:{marginTop:"40px",marginLeft:"14px",marginBottom:"8px"},children:m("webapp_sidemenu_category_advanced_tools")}),(0,C.tZ)(l.sMA,{children:(0,C.tZ)(X,{requiredPermission:"FULL",collapsed:e,children:(0,C.tZ)(Ne,{isSidenavCollapsed:e,settingsRoute:"TO-BE-DEFINED",children:e?(0,C.tZ)(l.ua7,{placement:"right",offset:[0,15],hoverCloseDelay:500,sx:{padding:"4px 0","svg, svg:hover":{fill:"ds.text.inverse.catchy"}},content:(0,C.BX)("div",{sx:{width:B?"180px":"148px"},children:[(0,C.tZ)(i.rU,{to:b.SSO,children:(0,C.BX)("div",{className:P()(Pe.tooltipMenuOption,{[Pe.tooltipMenuOptionWithBadge]:B}),children:[m(_t),B||L?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:m(B?mt:pt),layout:"iconLeading",iconName:L?"PremiumOutlined":void 0,"data-testid":"sso-badge"}):null]})}),(0,C.tZ)(i.rU,{to:b.DIRECTORY_SYNC,children:(0,C.tZ)("div",{className:Pe.tooltipMenuOption,children:m(ot)})}),N?(0,C.tZ)(i.rU,{to:b.SIEM,children:(0,C.tZ)("div",{className:Pe.tooltipMenuOption,children:m(ut)})}):null]}),children:(0,C.tZ)("div",{tabIndex:0,children:(0,C.tZ)(Me,{collapsed:e,icon:et||(et=(0,C.tZ)(o.JO,{name:"ConfigureOutlined"})),label:m(gt),selected:!1})})}):(0,C.BX)(l.UlM,{size:"large",open:!0,sx:{backgroundColor:"ds.container.agnostic.inverse.standard",span:{color:"ds.text.inverse.catchy"},"> summary":{padding:"16px 0"},"&[open]":{padding:0},"&[open] > summary":{padding:"16px 0"},"&[open] > div:nth-of-type(1)":{pointerEvents:"auto",padding:0},"svg, svg:hover":{fill:"ds.text.inverse.catchy"}},children:[(0,C.tZ)(l._Oh,{children:(0,C.tZ)(i.rU,{to:b.INTEGRATIONS,children:(0,C.BX)("span",{className:Pe.settingsMenuContainer,children:[(0,C.tZ)("span",{className:Pe.iconContainer,children:tt||(tt=(0,C.tZ)(o.JO,{name:"ConfigureOutlined"}))}),(0,C.tZ)(l.nvN,{size:"medium",bold:!0,as:"span",children:m(gt)})]})})}),(0,C.BX)(l.rN7,{children:[(0,C.tZ)(i.rU,{to:b.SSO,children:(0,C.tZ)(Me,{icon:nt||(nt=(0,C.tZ)("span",{})),label:m(_t),endAdornment:B||L?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:m(B?mt:pt),layout:"iconLeading",iconName:L?"PremiumOutlined":void 0,"data-testid":"sso-badge"}):null,selected:x.pathname===b.SSO})}),(0,C.tZ)(i.rU,{to:b.DIRECTORY_SYNC,children:(0,C.tZ)(Me,{icon:at||(at=(0,C.tZ)("span",{})),label:m(ot),selected:x.pathname===b.DIRECTORY_SYNC})}),N?(0,C.tZ)(i.rU,{to:b.SIEM,children:(0,C.tZ)(Me,{icon:it||(it=(0,C.tZ)("span",{})),label:m(ut),selected:x.pathname===b.SIEM})}):null]})]})})})})]}):null,t.adminAccess.hasFullAccess?(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.nvN,{caps:!0,color:"ds.text.inverse.quiet",size:"x-small",sx:{marginTop:"40px",marginLeft:"14px",marginBottom:"8px"},children:m("webapp_sidemenu_category_maintenance")}),(0,C.tZ)(l.sMA,{children:(0,C.tZ)(X,{requiredPermission:"FULL",collapsed:e,children:(0,C.tZ)(i.rU,{to:n.teamDarkWebInsightsRoutePath,onClick:()=>{(0,h.Kz)(new c.UserOpenDomainDarkWebMonitoringEvent({accessPath:c.AccessPath.NavLeftMenuButton,isFirstVisit:v}))},children:(0,C.tZ)(Me,{collapsed:e,icon:rt||(rt=(0,C.tZ)(o.JO,{name:"FeatureDarkWebMonitoringOutlined"})),label:m("team_dashboard_dark_web_insights_heading"),selected:x.pathname===n.teamDarkWebInsightsRoutePath,hasNotification:S})})})})]}):null]})};var yt;const xt=({isCollapsed:e})=>{const{translate:t}=(0,y.Z)(),n=e||!1;return(0,C.tZ)("div",{sx:{width:n?"96px":"256px"},children:(0,C.tZ)("div",{"data-testid":"logo-header",sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"80px !important",borderBottom:"1px solid ds.border.neutral.quiet.idle !important"},children:n?(0,C.tZ)("div",{sx:{position:"relative",right:"3px"},children:yt||(yt=(0,C.tZ)(l.NJ6,{color:"ds.text.inverse.catchy",height:39,width:39}))}):(0,C.tZ)(o.TR,{height:40,name:"DashlaneLockup",title:t("_common_dashlane_logo_title"),color:"ds.text.inverse.catchy"})})})};n(550801);const vt="webapp_sidemenu_open_vault_cta",St=({isCollapsed:e})=>{const{translate:t}=(0,y.Z)(),[n,a]=(0,r.useState)(!1);return(0,C.BX)("div",{sx:{display:"flex",justifyContent:"center",borderTop:"1px solid",position:"fixed",bottom:"0",borderTopColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.inverse.standard",width:e?"96px":"256px"},children:[(0,C.tZ)(o.zx,{layout:e?"iconOnly":"iconLeading","aria-label":t(vt),fullsize:!e,sx:{margin:"20px 25px"},icon:"VaultOutlined",mood:"brand",intensity:"catchy",onClick:()=>{(0,q.nL)(ie.rC)},children:t(vt)}),n?(0,C.tZ)(le.F,{isShown:n,setIsShown:a,isFromVault:!1}):null]})};var ft,Zt=n(277429);const Ct=()=>document.documentElement.clientWidth<1371,Tt=r.createContext({navBarChildren:null,setNavBarChildren:()=>{}}),Dt=({children:e,lee:t})=>{const[n,a]=(0,r.useState)(Ct()),[s,o]=(0,r.useState)(),{routes:l}=(0,i.Xo)(),c=t.permission.adminAccess,d=c.hasBillingAccess||c.hasFullAccess;(0,r.useEffect)((()=>{const e=(0,I.throttle)((()=>{const e=Ct();e&&!n?a(!0):!e&&n&&a(!1)}),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[n]);const u=(0,N.kA)(t.globalState),_=(0,N.xO)(t.globalState),m=(0,C.BX)(L,{children:[s,(0,C.tZ)(ue,{lee:t})]}),p=(0,C.tZ)(xt,{isCollapsed:n}),g=(0,C.tZ)(bt,{isCollapsed:n,permissionChecker:t.permission,routes:l,teamNotifications:u?.notifications,teamSettings:_?.details.info}),h=(0,C.tZ)(St,{isCollapsed:n}),b={navBarChildren:s,setNavBarChildren:o},y=(0,C.tZ)(Zt.Q6,{adminAccess:t.permission.adminAccess}),x=d?ft||(ft=(0,C.tZ)(A.XA,{})):null;return(0,C.tZ)(Tt.Provider,{value:b,children:(0,C.tZ)(M.AH,{adminAccess:c,children:(0,C.tZ)(R,{brand:p,header:m,sideNav:g,bottomButton:h,banner:y,dialog:x,children:e})})})};var kt=n(637269);const Et=()=>{const{data:e,status:t}=(0,d.k)(kt.K,"getTeamOffers",{});return t!==Te.rq.Success?null:e},wt=({offer:e,selectedSeatsQty:t=0})=>{const n=[...e.priceRanges].sort(((e,t)=>e.startMembers-t.startMembers));return n.reduce(((e,n)=>n.startMembers<t&&n.startMembers>e.startMembers?n:e),n[0])},It=({offer:e,currentSeats:t=0,additionalSeats:n=0})=>{const a=[...e.priceRanges].sort(((e,t)=>e.startMembers-t.startMembers)),i=t+n;return a.reduce(((e,t)=>t.startMembers<i&&t.startMembers>e.startMembers?t:e),a[0])},Nt=({offer:e,selectedSeatsQty:t,priceTarget:n="price"})=>wt({offer:e,selectedSeatsQty:t})[n]/(e.duration.includes("y")?12:1),At=({offer:e,selectedSeatsQty:t})=>{const n=wt({offer:e,selectedSeatsQty:t}).price;return e.duration.includes("y")?n:12*n},Mt=e=>!!e.name.match(/_team_/u),Ot=e=>!!e.name.match(/_business_/u),Lt=e=>e?e.priceRanges[1].startMembers-1:0,Bt=()=>{const{translate:e}=(0,y.Z)(),t=(0,De.Y)(),n=Et();if(!n||t.status!==s.rq.Success)return{hasLimitedOffer:!1};const a=!(0,X.NG)(t.data),{businessOffer:i}=n,r=Nt({offer:i}),o=Nt({offer:i,priceTarget:"equivalentPrice"});return{hasLimitedOffer:a&&r!==o,translatedPrice:e.price(i.currency,r/100,{notation:"compact"}),translatedEquivalentPrice:e.price(i.currency,o/100,{notation:"compact"})}};var Rt,zt,Pt,Xt,jt;const Ut=({plan:e,handleSelectClick:t,selected:n})=>{const{translate:a}=(0,y.Z)(),{currentPlan:i,limitedOffer:r,heading:s,price:c,equivalentPrice:d,planName:u,footer:_,priceDescription1:m,priceDescription2:p,features:g}=e;return(0,C.BX)(l.Ejs,{flexDirection:"column",sx:{minHeight:"480px",display:"flex",flexDirection:"column",borderRadius:"4px",border:`1px solid ${i?"transparent":o.O9.lightTheme.ds.border.neutral.quiet.idle}`,flexGrow:"1",flexShrink:0,width:"188px",backgroundColor:i?o.O9.lightTheme.ds.container.expressive.neutral.supershy.hover:null,padding:"16px",gap:"24px"},children:[(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",children:[(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[(0,C.BX)("div",{sx:{minHeight:"16px"},children:[i?(0,C.tZ)(o.Ct,{label:a("team_account_teamplan_changeplan_plans_plan_current")}):null,r?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:a("team_account_teamplan_changeplan_plans_plan_limited_offer")}):null]}),(0,C.tZ)(l.nvN,{bold:!0,size:"medium",children:a(s.key)})]}),(0,C.BX)(l.Ejs,{flexDirection:"column",children:[(0,C.BX)(l.Ejs,{gap:"4px",children:[c?(0,C.tZ)(l.X6q,{as:"p",size:"large",children:c}):Rt||(Rt=(0,C.tZ)(o.ZX,{size:44,mood:"neutral"})),d?(0,C.BX)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",sx:{whiteSpace:"break-spaces"},children:[a("team_account_teamplan_changeplan_plans_previous_price"),zt||(zt=(0,C.tZ)("br",{})),(0,C.tZ)("span",{sx:{textDecoration:"line-through"},children:d})]}):null]}),(0,C.BX)(l.Ejs,{flexDirection:"column",sx:{height:"48px"},children:[(0,C.tZ)(l.nvN,{size:"x-small",color:o.O9.lightTheme.ds.text.neutral.quiet,children:a(m.key,m.variables)}),(0,C.tZ)(l.nvN,{size:"x-small",color:o.O9.lightTheme.ds.text.neutral.quiet,children:a(p.key,p.variables)})]})]})]}),n?(0,C.tZ)(o.zx,{disabled:!0,mood:"brand",size:"small",type:"button",fullsize:!0,icon:Pt||(Pt=(0,C.tZ)(l.nQG,{})),children:a("team_account_teamplan_changeplan_plans_selected")}):t?(0,C.tZ)(o.zx,{mood:"brand",size:"small",onClick:t,fullsize:!0,"data-testid":`btn-${u}-select`,children:a("team_account_teamplan_changeplan_plans_select")}):(0,C.tZ)("div",{style:{height:"32px",width:"100%"}}),(0,C.tZ)(l.Ejs,{flexDirection:"column",gap:"6px",children:g.map((({key:e,icon:t,variables:n,loading:r})=>(0,C.BX)(l.Ejs,{sx:{display:"flex",alignItems:"center",gap:"9px",flexWrap:"nowrap",strong:{color:i?null:o.O9.lightTheme.ds.text.neutral.catchy}},children:[(0,C.tZ)(l.k$b,{sx:{width:"10px"},children:"check"===t?Xt||(Xt=(0,C.tZ)(l.nQG,{size:14})):"add"===t?jt||(jt=(0,C.tZ)(l.dtP,{size:12})):null}),r?(0,C.tZ)(l.k$b,{sx:{display:"flex",alignItems:"center",justifyContent:"center",flexGrow:"1"},children:(0,C.tZ)(o.ZX,{size:32,color:o.O9.lightTheme.ds.text.neutral.catchy})}):(0,C.tZ)(l.nvN,{color:o.O9.lightTheme.ds.text.neutral.quiet,size:"x-small",children:e.includes("markup")?a.markup(e,n):a(e,n)})]},e)))}),r?(0,C.tZ)(o.ke,{mood:"brand",title:a("team_account_teamplan_changeplan_plans_limited_price_infobox")}):null,_?(0,C.tZ)(l.Ejs,{alignItems:"center",gap:"9px",sx:{paddingLeft:"20px"},children:(0,C.tZ)(l.nvN,{color:o.O9.lightTheme.ds.text.neutral.quiet,size:"x-small",children:_.key.includes("markup")?a.markup(_.key):a(_.key)})}):null]})},qt=({title:e,children:t,sx:n,headingLevel:a="h2"})=>(0,C.tZ)(l.Zbd,{sx:(0,l.jMf)([{display:"flex",flexDirection:"column",padding:"24px",gap:"16px",backgroundColor:l.colors.white,borderRadius:"4px",border:`1px solid ${l.colors.dashGreen05}`},...n?[n]:[]]),role:"complementary",children:(0,C.BX)(l.Ejs,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e?"string"==typeof e?(0,C.tZ)(o.X6,{as:a,color:"ds.text.neutral.standard",children:e}):e:null,(0,C.tZ)(l.k$b,{flex:"1",children:t})]})});var Gt,Ft,$t,Vt,Ht;const Wt=({handleSelectClick:e,selected:t,businessOffer:n,showRecommendedBadge:a=!1})=>{const{translate:i}=(0,y.Z)(),r=Bt(),s=n?Nt({offer:n}):null;return(0,C.BX)(l.Ejs,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",padding:"18px 28px 32px",border:`1px solid ${l.colors.dashGreen05}`,borderRadius:"4px",gap:"18px"},role:"contentinfo",children:[r.hasLimitedOffer?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"catchy",label:i("team_account_teamplan_changeplan_plans_plan_limited_offer")}):a?(0,C.tZ)(o.Ct,{mood:"brand",intensity:"quiet",label:i("team_account_teamplan_changeplan_plans_plan_recommended")}):null,(0,C.BX)(l.Ejs,{fullWidth:!0,gap:"12px",children:[(0,C.BX)(l.Ejs,{fullWidth:!0,children:[(0,C.tZ)(l.Ejs,{sx:{display:"flex",alignItems:"center",flex:1},children:(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.standard",children:i("team_account_teamplan_changeplan_plans_business_name")})}),(0,C.tZ)(l.k$b,{children:n?.currency&&s?(0,C.BX)(l.Ejs,{flexDirection:"column",alignItems:"flex-end",children:[(0,C.BX)(l.Ejs,{alignItems:"flex-end",gap:"0",flexDirection:"column",children:[(0,C.BX)(l.nvN,{size:"small",children:[i.price(n.currency,s/100,{notation:"compact"})," ",i("team_account_teamplan_changeplan_plans_seat")]}),r.hasLimitedOffer?(0,C.BX)(l.nvN,{size:"small",color:"ds.text.neutral.quiet",children:[i("team_account_teamplan_changeplan_plans_previous_price")," ",(0,C.tZ)("span",{sx:{textDecoration:"line-through"},children:r.translatedEquivalentPrice})]}):null]}),(0,C.tZ)(l.nvN,{color:"ds.text.neutral.quiet",size:"x-small",children:i("team_account_teamplan_changeplan_plans_billed_anually")})]}):Gt||(Gt=(0,C.tZ)(o.ZX,{size:16,mood:"neutral"}))})]}),(0,C.tZ)("hr",{style:{width:"100%",borderTop:`1px solid ${l.colors.grey02}`,borderBottom:"0",margin:"0"}})]}),(0,C.tZ)(l.k$b,{flex:"1",children:(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"6px",children:[(0,C.tZ)(l.nvN,{color:l.colors.grey00,size:"x-small",children:i("team_account_teamplan_changeplan_plans_business_header")}),(0,C.BX)(l.Ejs,{alignItems:"center",gap:"9px",sx:{display:"flex",alignItems:"center",gap:"9px",marginTop:"10px"},children:[Ft||(Ft=(0,C.tZ)(l.dtP,{size:8})),(0,C.tZ)(l.nvN,{size:"x-small",color:l.colors.black,children:i.markup("team_account_teamplan_changeplan_plans_business_saml_markup",{ssoUrl:"https://support.dashlane.com/hc/articles/360015111019-SSO-FAQ"},{linkTarget:"_blank"},{color:l.colors.black})})]}),(0,C.BX)(l.Ejs,{alignItems:"center",gap:"9px",children:[$t||($t=(0,C.tZ)(l.dtP,{size:8})),(0,C.tZ)(l.nvN,{size:"x-small",children:(0,C.tZ)(l.rUS,{rel:"noopener noreferrer",href:"https://blog.dashlane.com/how-admins-can-simplify-provisioning/",target:"_blank",children:i("team_account_teamplan_changeplan_plans_business_scim_provisioning")})})]}),(0,C.BX)(l.Ejs,{alignItems:"center",gap:"9px",children:[Vt||(Vt=(0,C.tZ)(l.dtP,{size:8})),(0,C.tZ)(l.nvN,{size:"x-small",color:l.colors.black,children:i.markup("team_account_teamplan_changeplan_plans_business_free_family_plan_markup",{familyPlanUrl:"https://support.dashlane.com/hc/articles/360015393479-Getting-Premium-Family-with-Dashlane-Business"},{linkTarget:"_blank"},{color:l.colors.black})})]})]})}),r.hasLimitedOffer?(0,C.tZ)(o.ke,{title:i("team_account_teamplan_changeplan_plans_limited_price_infobox"),mood:"brand"}):null,n?t?(0,C.tZ)(l.zxk,{sx:{width:"100%"},disabled:!0,nature:"secondary",size:"small",type:"button",children:i("team_account_teamplan_changeplan_plans_selected")}):(0,C.tZ)(l.zxk,{"data-testid":"btn-business-select",sx:{width:"100%"},size:"small",type:"button",onClick:e,children:i("team_account_teamplan_changeplan_plans_select")}):Ht||(Ht=(0,C.tZ)(l.Ejs,{justifyContent:"center",fullWidth:!0,children:(0,C.tZ)(o.ZX,{size:30,mood:"neutral"})}))]})};var Yt;const Kt=["team_account_teamplan_changeplan_plans_team_security_dashboard","team_account_teamplan_changeplan_plans_team_policy_management","team_account_teamplan_changeplan_plans_team_advanced_reporting","team_account_teamplan_changeplan_plans_team_group_sharing","team_account_teamplan_changeplan_plans_team_active_directory_integration","team_account_teamplan_changeplan_plans_team_dark_web_insights","team_account_teamplan_changeplan_plans_team_vpn_via_hotspot_shield","team_account_teamplan_changeplan_plans_team_audit_logs"],Qt=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)(l.Ejs,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",gap:"12px",height:"fit-content",minWidth:"223px",width:"fit-content",backgroundColor:l.colors.grey06,padding:"16px"},role:"contentinfo",children:[(0,C.tZ)(l.Ejs,{children:(0,C.tZ)(l.Ejs,{sx:{borderRadius:"1px",border:`1px solid ${l.colors.midGreen03}`,padding:"1px",lineHeight:"10px"},children:(0,C.tZ)(l.j49,{size:"small",children:e("team_account_teamplan_changeplan_plans_plan_current")})})}),(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.quiet",children:e("team_account_teamplan_changeplan_plans_team_name")})," ",(0,C.tZ)("hr",{style:{width:"100%",borderTop:`1px solid ${l.colors.grey02}`,borderBottom:"0",margin:"0"}}),(0,C.tZ)(l.Ejs,{flexDirection:"column",gap:"6px",children:Kt.map((t=>(0,C.BX)(l.Ejs,{alignItems:"center",gap:"9px",children:[Yt||(Yt=(0,C.tZ)(l.nQG,{size:8})),(0,C.tZ)(l.nvN,{color:l.colors.grey00,size:"x-small",children:e(t)})]},t)))})]})};var Jt;const en=({selectedOffer:e,handleSelection:t,teamOffers:n,currentSpaceTier:a})=>{const{translate:i}=(0,y.Z)(),r=((e,t)=>{const{translate:n}=(0,y.Z)(),a=e?.businessOffer?.currency,i=e?.businessOffer?Nt({offer:e.businessOffer}):null,r=e?.starterOffer?Nt({offer:e.starterOffer}):null,s=Lt(e?.starterOffer),o=e?.starterOffer&&r?s*r:0;return{starter:{currentPlan:!0,planName:"starter",price:r&&a?n.price(a,r/100,{notation:"compact"}):null,heading:{key:"team_account_teamplan_changeplan_plans_starter_name"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_monthly_at",variables:{numberSeats:s,monthlyPrice:r&&a?n.price(a,o/100,{notation:"compact"}):null}},features:[{key:"team_account_teamplan_changeplan_plans_seats_flat_rate_markup",icon:"check",loading:!r,variables:{numberSeats:s,monthlyPrice:r&&a?n.price(a,o/100,{notation:"compact"}):null}},{icon:"check",key:"team_account_teamplan_changeplan_plans_unlimited_passwords"},{icon:"check",key:"team_account_teamplan_changeplan_plans_secure_sharing"},{icon:"check",key:"team_account_teamplan_changeplan_plans_business_and_personal_spaces"},{icon:"check",key:"team_account_teamplan_changeplan_plans_dark_web_insights"}],footer:{key:"team_account_teamplan_changeplan_plans_starter_upgrade_markup"}},business:{planName:"business",price:i&&a?n.price(a,i/100,{notation:"compact"}):null,equivalentPrice:t.hasLimitedOffer&&i&&a?t.translatedEquivalentPrice:null,limitedOffer:t.hasLimitedOffer,heading:{key:"team_account_teamplan_changeplan_plans_business_name_V2"},priceDescription1:{key:"team_account_teamplan_changeplan_plans_per_seat_month"},priceDescription2:{key:"team_account_teamplan_changeplan_plans_billed_anually"},features:[{key:"team_account_teamplan_changeplan_plans_everything_in_starter_markup",icon:"check"},{icon:"add",key:"team_account_teamplan_changeplan_plans_unlimited_seats"},{icon:"add",key:"team_account_teamplan_changeplan_plans_group"},{icon:"add",key:"team_account_teamplan_changeplan_plans_sso_integration"},{icon:"add",key:"team_account_teamplan_changeplan_plans_scim_provisioning"},{icon:"add",key:"team_account_teamplan_changeplan_plans_activity_logs"},{icon:"add",key:"team_account_teamplan_changeplan_plans_enterprise"},{icon:"add",key:"team_account_teamplan_changeplan_plans_free_friends_family_plan"},{icon:"add",key:"team_account_teamplan_changeplan_plans_phone_support"},{icon:"add",key:"team_account_teamplan_changeplan_plans_vpn_for_wifi_protection"},{icon:"add",key:"team_account_teamplan_changeplan_plans_phishing"}]}}})(n,Bt()),s=a===p.lD.Starter,{businessOffer:o}=n;return(0,C.tZ)(qt,{title:i("team_account_teamplan_changeplan_plans"),headingLevel:"h1",children:s?(0,C.BX)(l.Ejs,{sx:{gap:"16px",paddingTop:"16px"},children:[(0,C.tZ)(Ut,{plan:r.starter}),(0,C.tZ)(Ut,{plan:r.business,handleSelectClick:()=>t(o),selected:!!e&&e.name===o.name})]}):(0,C.BX)(l.Ejs,{sx:{flexWrap:"unset",gap:"16px",paddingTop:"16px"},children:[Jt||(Jt=(0,C.tZ)(Qt,{})),(0,C.tZ)(Wt,{businessOffer:o,selected:!!e&&e.name===o.name,handleSelectClick:()=>t(o)})]})})},tn=()=>(0,C.tZ)("hr",{style:{width:"100%",borderTop:`1px solid ${l.colors.grey02}`,borderBottom:"0",margin:"0"}}),nn=({label:e,value:t})=>(0,C.BX)(l.Ejs,{justifyContent:"flex-end",sx:{display:"flex",justifyContent:"flexEnd",padding:"0 10px"},children:[e?(0,C.tZ)(l.k$b,{flex:"1",sx:{display:"flex",alignItems:"center"},children:e}):null,t?(0,C.tZ)(l.k$b,{sx:{display:"flex",alignItems:"center"},children:t}):null]});var an=n(210994),rn=n(241185),sn=n(632765);function on({total:e,onError:t}){const[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(),o=(0,d.k)(sn.a,"getTaxAmount",{totalPrice:e});return(0,r.useEffect)((()=>{o.status===Te.rq.Loading?a(!0):o.status===Te.rq.Success&&o.data?(a(!1),s({amount:o.data.amount})):(t?.(),a(!1),s(void 0))}),[o.status,o.data]),{isLoading:n,taxInformation:i}}var ln,cn,dn,un,_n=n(23914);const mn=({currency:e,costData:t,isProratedDiscountLoading:n,isTaxLoading:a,selectedOffer:i,setAdditionalSeats:r})=>{const{translate:s}=(0,y.Z)(),{loading:c,billingCountry:d}=w();if(c)return ln||(ln=(0,C.tZ)(o.ZX,{}));const u="US"===d?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat";return(0,C.tZ)(C.HY,{children:i&&e?(0,C.BX)(C.HY,{children:[(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{bold:!0,size:"medium",children:s("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:t.totalSeats})}),value:(0,C.tZ)(l.k$b,{sx:{width:"146px"},children:(0,C.tZ)(_n.w,{id:"test",inputWidth:"66px",label:"",ariaLabel:s("team_account_teamplan_upgrade_premium_number_of_seats_free_to_paid"),minValue:0,onChange:r,defaultValue:0})})}),(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{bold:!0,size:"small",children:s("team_account_teamplan_changeplan_order_summary_seats_upgraded",{upgradedSeats:t.currentSeats})}),value:(0,C.tZ)(l.nvN,{bold:!0,size:"small",children:s.price(e,t.upgradedSeatsPrice/100)})}),t.additionalSeats?(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{bold:!0,size:"small",children:s("team_account_teamplan_changeplan_order_summary_seats_new",{newSeats:t.additionalSeats})}),value:(0,C.tZ)(l.nvN,{bold:!0,size:"small",children:s.price(e,t.additionalSeatsPrice/100)})}):null,cn||(cn=(0,C.tZ)(tn,{})),(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{bold:!0,size:"small",children:s("team_account_teamplan_changeplan_order_summary_subtotal")}),value:e?(0,C.tZ)(l.nvN,{bold:!0,size:"small",children:s.price(e,t.subtotal/100)}):null}),t?.proratedDiscount?(0,C.tZ)(nn,{label:(0,C.BX)(l.Ejs,{alignItems:"center",gap:"5px",children:[(0,C.tZ)(l.nvN,{size:"small",color:l.colors.grey00,children:s("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,C.tZ)(l.ua7,{content:s("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:(0,C.tZ)(l.uMt,{size:16,color:l.colors.grey00})})]}),value:n?dn||(dn=(0,C.tZ)(o.ZX,{mood:"neutral",size:13})):t.proratedDiscount&&e?(0,C.tZ)(l.nvN,{size:"small",color:l.colors.grey00,children:s.price(e,t.proratedDiscount/100)}):null}):null,t.tax?(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{size:"small",color:l.colors.grey00,children:s(u)}),value:a?un||(un=(0,C.tZ)(o.ZX,{mood:"neutral",size:13})):(0,C.tZ)(l.nvN,{size:"small",color:l.colors.grey00,children:s.price(e,t.tax/100)})}):null]}):null})},pn=({selectedOffer:e,costData:t})=>{const{translate:n}=(0,y.Z)();return(0,C.BX)(C.HY,{children:[e?(0,C.BX)(C.HY,{children:[(0,C.tZ)(nn,{label:(0,C.BX)(l.Ejs,{gap:"5px",children:[(0,C.tZ)(l.nvN,{bold:!0,size:"medium",children:n("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:t.totalSeats})}),(0,C.BX)(l.nvN,{bold:!0,size:"medium",children:["(",n("team_account_teamplan_changeplan_order_summary_seats_new",{newSeats:t.additionalSeats}),")"]})]})}),(0,C.tZ)(l.vDh,{severity:"subtle",size:"small",title:n("team_account_teamplan_changeplan_order_summary_invoice_info")})]}):null,(0,C.tZ)(l.zxk,{"data-testid":"btn-request-a-quote",size:"large",sx:{width:"100%"},type:"button",disabled:!e,onClick:()=>{window.open(ie.vS,"_blank")},children:n("team_account_teamplan_changeplan_order_summary_request_an_upgrade")})]})};var gn,hn=n(616782);const bn=({selectedOffer:e,currency:t,costData:n})=>{const{translate:a}=(0,y.Z)(),{isLoading:i,taxInformation:r}=on({total:n.renewalPrice}),{loading:s,billingCountry:d}=w();if(s)return gn||(gn=(0,C.tZ)(o.ZX,{}));const u="US"===d?"team_account_teamplan_changeplan_order_summary_footer_renewal":"team_account_teamplan_changeplan_order_summary_renewal_vat",_=!i&&void 0!==r?.amount&&r?.amount>0,m=_&&r?.amount?n.renewalPrice+r.amount:void 0,p=_?u:"team_account_teamplan_changeplan_order_summary_footer_header",g=_?m:n.renewalPrice;return(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"12px",padding:"16px",backgroundColor:l.colors.grey06},children:[e&&t&&g?(0,C.tZ)(l.nvN,{bold:!0,size:"small",color:l.colors.grey00,children:a(p,{price:a.price(t,g/100),date:a.shortDate(n.renewalDate,hn.qG.ll)})}):null,(0,C.tZ)(l.nvN,{size:"x-small",color:l.colors.grey00,children:a.markup("team_account_teamplan_changeplan_order_summary_footer_markup",{privacyPolicyUrl:ie.Bz,termsUrl:ie.sz},{linkTarget:"_blank",onLinkClicked:e=>{e===ie.Bz?(0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.PrivacyPolicy],chosenAction:c.CallToAction.PrivacyPolicy,hasChosenNoAction:!1})):e===ie.sz&&(0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.TermsOfService],chosenAction:c.CallToAction.TermsOfService,hasChosenNoAction:!1}))}})})]})},yn={display:"flex",alignItems:"center",padding:"12px 10px",justifyContent:"space-between",backgroundColor:l.colors.dashGreen06},xn=({selectedOffer:e,currency:t,costData:n})=>{const{translate:a}=(0,y.Z)();return e&&t?(0,C.BX)("div",{sx:yn,"data-testid":"order-summary-plan-name",children:[(0,C.tZ)(l.nvN,{bold:!0,color:l.colors.dashGreen01,children:Ot(e)?a("team_account_teamplan_changeplan_plans_business_name"):a("team_account_teamplan_changeplan_plans_team_name")}),(0,C.tZ)(l.nvN,{color:l.colors.dashGreen01,children:a("team_account_teamplan_changeplan_order_summary_seat_year",{cost:a.price(t,n.seatPrice/100,{notation:"compact"})})})]}):(0,C.tZ)("div",{sx:yn,children:(0,C.tZ)(l.nvN,{color:l.colors.dashGreen01,children:a("team_account_teamplan_changeplan_order_summary_select_plan")})})};var vn;const Sn=({onDismiss:e,value:t,buttonProps:n})=>(0,C.BX)(l.Ejs,{alignItems:"center",gap:"6px",children:[(0,C.tZ)(l.Ejs,{sx:{backgroundColor:l.colors.midGreen05,padding:"4px 8px",borderRadius:"4px"},children:"string"==typeof t?(0,C.tZ)(l.nvN,{size:"x-small",children:t}):{value:t}}),e?(0,C.tZ)(l.zxk,{size:"small",type:"button",nature:"ghost",onClick:e,sx:{padding:0,minWidth:0},...n,children:vn||(vn=(0,C.tZ)(l.Two,{size:18}))}):null]});var fn,Zn,Cn;const Tn=e=>e?-e/100:0,Dn=({currency:e,promoPrice:t,promoCode:n,hasError:a,isLoading:i,showInput:r,setShowInput:s,onSubmit:c,onCancel:d,onChange:u,onClear:_})=>{const{translate:m}=(0,y.Z)();return r?(0,C.BX)(l.Ejs,{gap:"6px",fullWidth:!0,sx:{padding:"0 10px"},children:[(0,C.tZ)(l.k$b,{flex:"1",children:(0,C.tZ)(l.oil,{fullWidth:!0,value:n,placeholder:m("team_account_teamplan_changeplan_order_summary_promo_code_cta"),feedbackText:a?m("team_account_teamplan_changeplan_order_summary_promo_code_error"):null,feedbackType:a?"error":void 0,onChange:u?e=>u(e?.target?.value):void 0})}),(0,C.tZ)(l.zxk,{disabled:i,"data-testid":"promo_code_button_submit",type:"button",nature:"secondary",onClick:async()=>{c&&await c()},children:i?fn||(fn=(0,C.tZ)(o.ZX,{size:20,mood:"neutral"})):Zn||(Zn=(0,C.tZ)(l.nQG,{size:20}))}),(0,C.tZ)(l.zxk,{"data-testid":"promo_code_button_cancel",type:"button",nature:"ghost",onClick:()=>{d&&d()},children:Cn||(Cn=(0,C.tZ)(l.Two,{size:20}))})]}):n?(0,C.BX)(l.Ejs,{gap:"4px",fullWidth:!0,alignItems:"center",justifyContent:"space-between",sx:{padding:"0 10px"},children:[(0,C.BX)(l.Ejs,{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[(0,C.tZ)(l.nvN,{size:"small",color:l.colors.black,children:m("team_account_teamplan_changeplan_order_summary_promo_code")}),(0,C.tZ)(Sn,{value:n,onDismiss:_,buttonProps:{"data-testid":"promo_code_button_clear"}})]}),(0,C.tZ)(l.k$b,{children:t&&e?(0,C.tZ)(l.nvN,{size:"small",color:l.colors.black,children:m.price(e,Tn(t))}):null})]}):(0,C.tZ)(l.Ejs,{sx:{padding:"0 10px"},children:(0,C.tZ)(l.zxk,{"data-testid":"promo_code_button_enter",size:"medium",type:"button",nature:"ghost",onClick:()=>s?s(!0):null,sx:{margin:0,padding:0,minWidth:0,height:"16px"},"aria-label":m("team_account_teamplan_changeplan_order_summary_promo_code_cta"),children:(0,C.tZ)(l.rUS,{children:(0,C.tZ)(l.nvN,{size:"small",color:l.colors.midGreen00,children:m("team_account_teamplan_changeplan_order_summary_promo_code_cta")})})})})};var kn,En,wn;const In=({currency:e,currentSeats:t,additionalSeats:n,selectedOffer:a,email:i,emailValid:s,onSuccess:u,onError:_,setAdditionalSeats:m,setOrderSummaryData:b})=>{const{translate:x}=(0,y.Z)(),v=(0,g.s)(),S=v?.billingType===p.qo.Invoice,{promoCode:f,currentPromoCode:Z,showInput:T,isLoading:D,setShowInput:k,setCurrentPromoCode:E,validatePromoCode:w,clearPromoCode:I,cancelPromoCode:N,hasError:A,teamOffers:M}=function({selectedOffer:e,currentSeats:t,additionalSeats:n}){const[a,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(),[u,_]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[b,y]=(0,r.useState)(n),[x,v]=(0,r.useState)(e),{data:S,status:f}=(0,d.k)(kt.K,"getTeamOffers",{couponCode:s}),Z=(0,r.useCallback)((()=>{if(!s)return!1;if(f===Te.rq.Error&&!S)return h(!1),_(!0),p(!0),!1;if(f===Te.rq.Loading&&!S)return h(!0),!1;const a=It({offer:S.businessOffer,currentSeats:t,additionalSeats:n}),r=a.price!==a.equivalentPrice,o=It({offer:S.teamOffer,currentSeats:t,additionalSeats:n}),l=o.price!==o.equivalentPrice;return(e&&Ot(e)?r:l)?(h(!1),i(s),c((()=>S)),_(!1),p(!1),!0):(h(!1),_(!0),p(!0),!1)}),[s,f,S,t,n,e]);return(0,r.useEffect)((()=>{n!==b&&(y(n),Z())}),[b,n,Z]),(0,r.useEffect)((()=>{e?.name!==x?.name&&(v(e),Z())}),[e,x,Z]),{promoCode:a,currentPromoCode:s,setCurrentPromoCode:o,validatePromoCode:Z,clearPromoCode:()=>{i(""),o(""),c(void 0),_(!1)},cancelPromoCode:()=>{u?(i(""),o("")):o(a),_(!1),p(!1)},showInput:m,setShowInput:p,hasError:u,teamOffers:l,isLoading:g,setIsLoading:h}}({selectedOffer:a,additionalSeats:n,currentSeats:t}),{isSaving:O,costData:L,changeTierMidCycle:B,isTaxLoading:R,isProratedDiscountLoading:z}=function({selectedOffer:e,currentSeats:t,additionalSeats:n,discountedTeamOffers:a,promoCode:i,email:s,onSuccess:o,onError:l}){var c,u;const[_,m]=(0,r.useState)(!1),{translate:p}=(0,y.Z)(),{legacyChangeTierMidcycle:g}=(0,$.u)(kt.K),h=!!i,b=!!e&&Ot(e),x=!!e&&Mt(e),v=a&&e?b?a.businessOffer:x?a.teamOffer:a.starterOffer:e,{isLoading:S,midCycleTierUpgradePrice:f}=function({seats:e,planName:t,onError:n}){const a=(0,d.k)(kt.K,"getLegacyMidcycleTierUpgradePrice",{numberOfSeats:e,newPlan:null!=t?t:""});switch(a.status){case Te.rq.Loading:return{isLoading:!0};case Te.rq.Error:return n?.(),{isLoading:!1};case Te.rq.Success:return{isLoading:!1,midCycleTierUpgradePrice:a.data}}}({seats:n,planName:v?.name}),Z=v?It({offer:v,currentSeats:t,additionalSeats:n}):null,C=null!=(c=Z?.equivalentPrice)?c:0,T=null!=(u=Z?.price)?u:0,D=h?C:T,k=t+n,E=n*D,w=t*D,I=k*D,N=I-(void 0!==T?k*T:I),A=void 0!==f?.discountAmount?I+f.discountAmount:void 0,M=A?A-N:A,O=f?.nextBillingDateUnix?(0,an.Z)(f.nextBillingDateUnix):(0,rn.Z)(new Date,1),{isLoading:L,taxInformation:B}=on({total:null!=M?M:0}),R=L||void 0===B?.amount?0:B.amount,z=L||void 0===B?.amount||void 0===M?void 0:M+R;return{isSaving:_,changeTierMidCycle:async e=>{if(void 0===M||!B||!v)return void l("Error with retrieving legacyMidCycleTierUpgradePrice, tax information or target offer");m((()=>!0));const t=await g({amountToPay:M,taxes:R,planId:v.name,couponCode:e||i,seatsToAdd:n,billingContactEmail:""!==s?s:void 0});if(m((()=>!1)),t.error){const e=(e=>{switch(e){case"PaymentMeanIsNotCreditCard":return"The team does not have a credit card payment mean";case"CurrentPlanStartDateInFuture":return"The current plan start date must be in the past";case"ChangeTierMidCycleError":return"Team is ineligible to change tier mid cycle";case"PaymentMeanIsNotInvoice":return"Team Payment mean is not invoice";case"ChangeTierAmountTooExpensive":return"The amount to pay entered is more than 10 times the recommended price";case"ErrorCalculatingTierChange":return"Unable to calculate prorated discount for mid cycle tier change";case"InsufficientAmount":return"Credit Card payment must be zero or more than 50 cents";case"AssignedPlanSameTierAsCurrentPlan":return"The assigned plan tier cannot be the same as the team's current plan";case"SalesTaxMismatch":return"Tax amount sent does not correspond to the supposed taxed amount";case"NotBillingAdmin":return"User is not a billing admin";default:return p("team_account_teamplan_changeplan_error_generic")}})(t.error.tag);l(e)}else o()},isProratedDiscountLoading:S,isTaxLoading:L,costData:{seatPrice:D,additionalSeats:n,currentSeats:t,totalSeats:k,upgradedSeatsPrice:w,additionalSeatsPrice:E,subtotal:I,proratedDiscount:f?.discountAmount,tax:R,pretaxTotal:A,promoPrice:N,total:z,renewalPrice:I,renewalDate:O}}}({selectedOffer:a,discountedTeamOffers:M,currentSeats:t,additionalSeats:n,promoCode:f,email:i,onSuccess:u,onError:_});return v?(0,C.tZ)(qt,{title:x("team_account_teamplan_changeplan_order_summary_header"),children:(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,C.tZ)(xn,{selectedOffer:a,currency:e,costData:L}),S?(0,C.tZ)(pn,{selectedOffer:a,costData:L}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(mn,{currency:e,costData:L,isProratedDiscountLoading:z,isTaxLoading:R,selectedOffer:a,setAdditionalSeats:m}),a&&e?(0,C.tZ)(Dn,{currency:e,promoCode:Z,promoPrice:L?.promoPrice,hasError:A,showInput:T,isLoading:D,setShowInput:k,onSubmit:w,onChange:E,onCancel:N,onClear:I}):null,kn||(kn=(0,C.tZ)(tn,{})),(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:x("team_account_teamplan_changeplan_order_summary_due_today_V2")}),value:!e||R||z?En||(En=(0,C.tZ)(o.ZX,{size:23,mood:"neutral"})):a?L.total?(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:x.price(e,L.total/100)}):null:(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:`${x.priceSymbol(e)}--.--`})}),O?(0,C.tZ)(l.zxk,{size:"large",sx:{width:"100%"},type:"button",disabled:!0,children:wn||(wn=(0,C.tZ)(o.ZX,{}))}):(0,C.tZ)(l.zxk,{"data-testid":"btn-confirm-and-pay",size:"large",sx:{width:"100%"},type:"button",disabled:!a||!s||D,onClick:async()=>{(!A&&f===Z||await w())&&((0,h.Kz)(new c.UserClickEvent({clickOrigin:c.ClickOrigin.OrderSummary,button:c.Button.ConfirmUpgrade})),B(Z),b(L))},children:x("team_account_teamplan_changeplan_order_summary_confirm_and_pay")})]}),(0,C.tZ)(bn,{selectedOffer:a,currency:e,costData:L})]})}):null},Nn="team_account_teamplan_changeplan_order_summary_minimum_active_seats_tooltip",An=({isAmountAllowed:e,absoluteMinimum:t,relativeMinimum:n})=>{const{translate:a}=(0,y.Z)(),{routes:r}=(0,i.Xo)(),s=e?"ds.text.neutral.quiet":"ds.text.danger.quiet",c=a("team_account_teamplan_changeplan_order_summary_minimum_active_seats",{count:n});return(0,C.tZ)(nn,{label:(0,C.BX)(l.Ejs,{gap:"5px",children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:s,children:c}),(0,C.tZ)(o.JO,{color:s,name:"FeedbackInfoOutlined",size:"small",tooltip:e?a(Nn):t===n?a("team_account_teamplan_changeplan_order_summary_minimum_seats_absolute_tooltip",{count:t}):a(Nn)})]}),value:e?(0,C.tZ)(o.Qj,{size:"small",as:i.rU,to:r.teamMembersRoutePath,replace:!0,children:a("team_account_teamplan_changeplan_order_summary_review_active_seats_link")}):null})};var Mn,On,Ln,Bn;const Rn=({costData:e,currency:t,currentSpaceTier:n,isProratedDiscountLoading:a,isAmountAllowed:i,isTaxLoading:s,selectedOffer:c,setSelectedSeatsQty:d,signalAmountValidHandler:u})=>{const{translate:_}=(0,y.Z)(),{loading:m,billingCountry:g}=w(),h=n===p.lD.Starter?10:e.currentSeats;if((0,r.useEffect)((()=>{d(h)}),[h]),m)return Mn||(Mn=(0,C.tZ)(o.ZX,{}));const b=n===p.lD.Starter?e.currentActiveSeats>2?e.currentActiveSeats:2:e.currentSeats,x="US"===g?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat",v=e.totalSeats===e.currentActiveSeats||!i;return(0,C.tZ)(C.HY,{children:c&&t?(0,C.BX)(C.HY,{children:[(0,C.tZ)(nn,{label:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:_("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:e.totalSeats})}),value:(0,C.tZ)(l.k$b,{sx:{width:"146px"},children:(0,C.tZ)(_n.w,{id:"test",inputWidth:"66px",label:"",ariaLabel:_("team_account_teamplan_upgrade_premium_number_of_seats_free_to_paid"),minValue:b,onChange:d,signalAmountValidHandler:u,defaultValue:h})})}),v?(0,C.tZ)(An,{isAmountAllowed:i,absoluteMinimum:2,relativeMinimum:b}):null,(0,C.tZ)(nn,{label:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:_("team_account_teamplan_changeplan_order_summary_seats_upgraded",{upgradedSeats:Math.min(e.currentSeats,e.totalSeats)})}),value:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:_.price(t,e.upgradedSeatsPrice/100)})}),e.addedSeats?(0,C.tZ)(nn,{label:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:_("team_account_teamplan_changeplan_order_summary_seats_new",{newSeats:e.addedSeats})}),value:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:_.price(t,e.addedSeatsPrice/100)})}):null,On||(On=(0,C.tZ)(tn,{})),(0,C.tZ)(nn,{label:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:_("team_account_teamplan_changeplan_order_summary_subtotal")}),value:t?(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:_.price(t,e.subtotal/100)}):null}),e?.proratedDiscount?(0,C.tZ)(nn,{label:(0,C.BX)(l.Ejs,{alignItems:"center",gap:"5px",children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:_("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,C.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",size:"small",tooltip:_("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip")})]}),value:a?Ln||(Ln=(0,C.tZ)(o.ZX,{mood:"neutral",size:13})):e.proratedDiscount&&t?(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:_.price(t,e.proratedDiscount/100)}):null}):null,e.tax?(0,C.tZ)(nn,{label:(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:_(x)}),value:s?Bn||(Bn=(0,C.tZ)(o.ZX,{mood:"neutral",size:13})):(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:_.price(t,e.tax/100)})}):null]}):null})};const zn=({selectedOffer:e,costData:t})=>{const{translate:n}=(0,y.Z)();return(0,C.BX)(r.Fragment,{children:[e?(0,C.BX)(r.Fragment,{children:[(0,C.tZ)(nn,{label:(0,C.tZ)(l.Ejs,{gap:"5px",children:(0,C.tZ)(l.nvN,{bold:!0,size:"medium",children:n("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:t.totalSeats})})})}),(0,C.tZ)(l.vDh,{severity:"subtle",size:"small",title:n("team_account_teamplan_changeplan_order_summary_invoice_info")})]}):null,(0,C.tZ)(l.zxk,{"data-testid":"btn-request-a-quote",size:"large",sx:{width:"100%"},type:"button",disabled:!e,onClick:()=>{window.open(ie.vS,"_blank")},children:n("team_account_teamplan_changeplan_order_summary_request_an_upgrade")})]})};var Pn,Xn,jn;const Un=({currency:e,currentSeats:t,currentActiveSeats:n,currentSpaceTier:a,selectedSeatsQty:i,selectedOffer:s,email:u,emailValid:_,onSuccess:m,onError:b,setSelectedSeatsQty:x,setOrderSummaryData:v})=>{const{translate:S}=(0,y.Z)(),f=(0,g.s)(),Z=f?.billingType===p.qo.Invoice,{promoCode:T,currentPromoCode:D,showInput:k,isLoading:E,setShowInput:w,setCurrentPromoCode:I,validatePromoCode:N,clearPromoCode:A,cancelPromoCode:M,hasError:O,teamOffers:L}=function({selectedOffer:e,currentSeats:t,selectedSeatsQty:n}){const[a,i]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(),[u,_]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[b,y]=(0,r.useState)(n),[x,v]=(0,r.useState)(e),{data:S,status:f}=(0,d.k)(kt.K,"getTeamOffers",{couponCode:s}),Z=(0,r.useCallback)((()=>{if(!s)return!1;if(f===Te.rq.Error&&!S)return h(!1),_(!0),p(!0),!1;if(f===Te.rq.Loading&&!S)return h(!0),!1;const t=wt({offer:S.businessOffer,selectedSeatsQty:n}),a=t.price!==t.equivalentPrice,r=wt({offer:S.teamOffer,selectedSeatsQty:n}),o=r.price!==r.equivalentPrice;return(e&&Ot(e)?a:o)?(h(!1),i(s),c((()=>S)),_(!1),p(!1),!0):(h(!1),_(!0),p(!0),!1)}),[s,f,S,t,n,e]);return(0,r.useEffect)((()=>{n!==b&&(y(n),Z())}),[b,n,Z]),(0,r.useEffect)((()=>{e?.name!==x?.name&&(v(e),Z())}),[e,x,Z]),{promoCode:a,currentPromoCode:s,setCurrentPromoCode:o,validatePromoCode:Z,clearPromoCode:()=>{i(""),o(""),c(void 0),_(!1)},cancelPromoCode:()=>{u?(i(""),o("")):o(a),_(!1),p(!1)},showInput:m,setShowInput:p,hasError:u,teamOffers:l,isLoading:g,setIsLoading:h}}({selectedOffer:s,selectedSeatsQty:i,currentSeats:t}),{isSaving:B,costData:R,changeTierMidCycle:z,isTaxLoading:P,isProratedDiscountLoading:X}=function({selectedOffer:e,currentSeats:t,currentActiveSeats:n,selectedSeatsQty:a,discountedTeamOffers:i,promoCode:s,email:o,onSuccess:l,onError:c}){var u,_;const[m,p]=(0,r.useState)(!1),{translate:g}=(0,y.Z)(),{changeTierMidcycle:h}=(0,$.u)(kt.K),b=!!s,x=!!e&&Ot(e),v=!!e&&Mt(e),S=i&&e?x?i.businessOffer:v?i.teamOffer:i.starterOffer:e,{isLoading:f,midCycleTierUpgradePrice:Z}=function({newTotalNumberOfSeats:e,planName:t,onError:n}){const a=(0,d.k)(kt.K,"getMidcycleTierUpgradePrice",{newTotalNumberOfSeats:e,newPlan:null!=t?t:""});switch(a.status){case Te.rq.Loading:return{isLoading:!0};case Te.rq.Error:return n?.(),{isLoading:!1};case Te.rq.Success:return{isLoading:!1,midCycleTierUpgradePrice:a.data}}}({newTotalNumberOfSeats:a,planName:S?.name}),C=S?wt({offer:S,selectedSeatsQty:a}):null,T=null!=(u=C?.equivalentPrice)?u:0,D=null!=(_=C?.price)?_:0,k=b?T:D,E=(a-t)*k,w=Math.min(t,a)*k,I=a*k,N=I-(void 0!==D?a*D:I),A=void 0!==Z?.discountAmount?I+Z.discountAmount:void 0,M=A?A-N:A,O=Z?.nextBillingDateUnix?(0,an.Z)(Z.nextBillingDateUnix):(0,rn.Z)(new Date,1),{isLoading:L,taxInformation:B}=on({total:null!=M?M:0}),R=L||void 0===B?.amount?0:B.amount,z=L||void 0===B?.amount||void 0===M?void 0:M+R;return{isSaving:m,changeTierMidCycle:async e=>{if(void 0===M||!B||!S)return void c("Error with retrieving midCycleTierUpgradePrice, tax information or target offer");p((()=>!0));const t=await h({amountToPay:M,taxes:R,planId:S.name,couponCode:e||s,newTotalNumberOfSeats:a,billingContactEmail:""!==o?o:void 0});if(p((()=>!1)),t.error){const e=(e=>{switch(e){case"PaymentMeanIsNotCreditCard":return"The team does not have a credit card payment mean";case"CurrentPlanStartDateInFuture":return"The current plan start date must be in the past";case"ChangeTierMidCycleError":return"Team is ineligible to change tier mid cycle";case"PaymentMeanIsNotInvoice":return"Team Payment mean is not invoice";case"ChangeTierAmountTooExpensive":return"The amount to pay entered is more than 10 times the recommended price";case"ErrorCalculatingTierChange":return"Unable to calculate prorated discount for mid cycle tier change";case"InsufficientAmount":return"Credit Card payment must be zero or more than 50 cents";case"AssignedPlanSameTierAsCurrentPlan":return"The assigned plan tier cannot be the same as the team's current plan";case"SalesTaxMismatch":return"Tax amount sent does not correspond to the supposed taxed amount";case"NotBillingAdmin":return"User is not a billing admin";default:return g("team_account_teamplan_changeplan_error_generic")}})(t.error.tag);c(e)}else l()},isProratedDiscountLoading:f,isTaxLoading:L,costData:{seatPrice:k,currentSeats:t,currentActiveSeats:n,totalSeats:a,addedSeats:a>=t?a-t:0,removedSeats:a<=t?t-a:0,upgradedSeatsPrice:w,addedSeatsPrice:E,subtotal:I,proratedDiscount:Z?.discountAmount,tax:R,pretaxTotal:A,promoPrice:N,total:z,renewalPrice:I,renewalDate:O}}}({selectedOffer:s,discountedTeamOffers:L,currentSeats:t,currentActiveSeats:n,selectedSeatsQty:i,promoCode:T,email:u,onSuccess:m,onError:b}),[j,U]=(0,r.useState)(!0);return f?(0,C.tZ)(qt,{title:S("team_account_teamplan_changeplan_order_summary_header"),children:(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:[(0,C.tZ)(xn,{selectedOffer:s,currency:e,costData:R}),Z?(0,C.tZ)(zn,{selectedOffer:s,costData:R}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(Rn,{currency:e,costData:R,isProratedDiscountLoading:X,isAmountAllowed:j,isTaxLoading:P,selectedOffer:s,setSelectedSeatsQty:x,currentSpaceTier:a,signalAmountValidHandler:e=>{U(e)}}),s&&e?(0,C.tZ)(Dn,{currency:e,promoCode:D,promoPrice:R?.promoPrice,hasError:O,showInput:k,isLoading:E,setShowInput:w,onSubmit:N,onChange:I,onCancel:M,onClear:A}):null,Pn||(Pn=(0,C.tZ)(tn,{})),(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:S("team_account_teamplan_changeplan_order_summary_due_today_V2")}),value:!e||P||X?Xn||(Xn=(0,C.tZ)(o.ZX,{size:23,mood:"neutral"})):s?R.total?(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:S.price(e,R.total/100)}):null:(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:`${S.priceSymbol(e)}--.--`})}),B?(0,C.tZ)(l.zxk,{size:"large",sx:{width:"100%"},type:"button",disabled:!0,children:jn||(jn=(0,C.tZ)(o.ZX,{}))}):(0,C.tZ)(l.zxk,{"data-testid":"btn-confirm-and-pay",size:"large",sx:{width:"100%"},type:"button",disabled:!s||!_||E||!j,onClick:async()=>{(!O&&T===D||await N())&&((0,h.Kz)(new c.UserClickEvent({clickOrigin:c.ClickOrigin.OrderSummary,button:c.Button.ConfirmUpgrade})),z(D),v(R))},children:S("team_account_teamplan_changeplan_order_summary_confirm_and_pay")})]}),(0,C.tZ)(bn,{selectedOffer:s,currency:e,costData:R})]})}):null};var qn,Gn=n(448827),Fn=n(210051);const $n=({email:e,emailValid:t,setEmail:n,setEmailValid:a})=>{const{translate:i}=(0,y.Z)(),s=(0,Gn.G)(),[o,c]=r.useState(!1);return s?.email?(0,C.BX)(qt,{title:i("team_account_teamplan_changeplan_billing_contact_header"),children:[qn||(qn=(0,C.tZ)("br",{})),(0,C.tZ)(l.nvN,{size:"medium",color:"ds.text.neutral.quiet",className:"automation-tests-tac-billing",children:i.markup("team_account_teamplan_changeplan_billing_contact_copy_markup",{billContactEmail:s.email})}),(0,C.tZ)("div",{style:{margin:"20px 0px"},children:(0,C.tZ)(l.XZJ,{"data-testid":"additionalEmailCheckbox",label:i("team_account_teamplan_changeplan_billing_contact_checkbox_label"),checked:o,onChange:e=>{n(""),a(!0),c(e.currentTarget.checked)}})}),o?(0,C.tZ)(l.oil,{"data-testid":"additionalEmailInput",type:"text",onChange:e=>n(e.currentTarget.value),onBlur:e=>(e=>{(0,Fn.vV)(e.currentTarget.value)?a(!0):a(!1)})(e),value:e,feedbackType:t?void 0:"error",feedbackText:t?"":i("team_account_teamplan_changeplan_billing_contact_input_warning"),autoFocus:!0}):null]}):null},Vn=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)(qt,{title:(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:e("team_account_teamplan_changeplan_questions_header")}),children:[(0,C.tZ)(l.nvN,{color:l.colors.grey00,size:"small",style:{marginBottom:"10px"},children:e.markup("team_account_teamplan_changeplan_questions_help_center_markup",{helpCenterUrl:ie.Vr},{linkTarget:"_blank",onLinkClicked:()=>{(0,h.Kz)(new c.UserOpenHelpCenterEvent({helpCenterArticleCta:c.HelpCenterArticleCta.HelpCenter}))}})}),(0,C.tZ)(l.nvN,{size:"small",color:l.colors.grey00,children:e.markup("team_account_teamplan_changeplan_questions_customer_support_markup",{customerSupportUrl:ie.to},{linkTarget:"_blank",onLinkClicked:()=>{(0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.ContactCustomerSupport],chosenAction:c.CallToAction.ContactCustomerSupport,hasChosenNoAction:!1}))}})})]})};var Hn,Wn,Yn,Kn,Qn,Jn;const ea=({targetPlan:e})=>{const{translate:t}=(0,y.Z)(),{data:n}=(({targetPlan:e})=>{const{routes:t}=(0,i.Xo)(),n={DIRECTORY_SYNC:`${t.teamIntegrationsRoutePath}${a.B9.DIRECTORY_SYNC}`,POLICIES:`${t.teamSettingsRoutePath}${a.B9.POLICIES}`,SSO:`${t.teamIntegrationsRoutePath}${a.B9.SSO}`};return{data:{team:{header:"team_account_teamplan_changeplan_success_team_header",description:"team_account_teamplan_changeplan_success_team_description",alert:"team_account_teamplan_changeplan_success_team_alert",features:[{header:"team_account_teamplan_changeplan_success_features_vpn_header",description:"team_account_teamplan_changeplan_success_features_vpn_description",icon:Hn||(Hn=(0,C.tZ)(l.Qut,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_turn_on_vpn_access",link:n.POLICIES},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360000037900#title1"}]},{header:"team_account_teamplan_changeplan_success_features_protection_header",description:"team_account_teamplan_changeplan_success_features_protection_description",icon:Wn||(Wn=(0,C.tZ)(l.c6E,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_add_seats",link:`${t.teamAccountRoutePath}?showSeatsDialog=true`}]}]},business:{header:"team_account_teamplan_changeplan_success_business_header",description:"team_account_teamplan_changeplan_success_business_description",alert:"team_account_teamplan_changeplan_success_business_alert",features:[{header:"team_account_teamplan_changeplan_success_sso_header",description:"team_account_teamplan_changeplan_success_sso_copy",icon:Yn||(Yn=(0,C.tZ)(l.oEX,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_start_setup",link:n.SSO},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360015973719-Set-up-SSO-and-SCIM-with-Azure-AD"}]},{header:"team_account_teamplan_changeplan_success_features_scim_header",description:"team_account_teamplan_changeplan_success_features_scim_description",icon:Kn||(Kn=(0,C.tZ)(l.kpp,{size:24})),actions:[{mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_start_setup",link:n.DIRECTORY_SYNC},{external:!0,mood:"neutral",intensity:"quiet",content:"team_account_teamplan_changeplan_success_features_actions_see_setup_guide",link:"https://support.dashlane.com/hc/articles/360015973719#h_01FTXPSRCV3CY1QVY1B5S5TD0J"}]},{header:"team_account_teamplan_changeplan_success_features_friends_and_family_header",description:"team_account_teamplan_changeplan_success_features_friends_and_family_description",icon:Qn||(Qn=(0,C.tZ)(l.c6E,{size:24})),actions:[{external:!0,mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_learn_more",link:"https://www.dashlane.com/plans/family"}]},{header:"team_account_teamplan_changeplan_success_features_phone_support_header",description:"team_account_teamplan_changeplan_success_features_phone_support_description",icon:Jn||(Jn=(0,C.tZ)(l.qWc,{size:24})),actions:[{external:!0,mood:"brand",intensity:"catchy",content:"team_account_teamplan_changeplan_success_features_actions_schedule_a_call",link:"https://calendly.com/dashlane-support/call_back_form",logEvent:new c.UserCallToActionEvent({callToActionList:[c.CallToAction.ContactPhoneSupport],chosenAction:c.CallToAction.ContactPhoneSupport,hasChosenNoAction:!1})}]}]}}[e]}})({targetPlan:e}),{alert:s,show:d}=(0,l.VYq)({message:t(n.alert),severity:l.BLW.SUCCESS,size:l.k3y.SMALL,dismissDelay:5e3});return(0,r.useEffect)((()=>{d()}),[]),(0,C.BX)(C.HY,{children:[(0,C.tZ)("div",{style:{bottom:"12px",position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,width:"600px"},children:s}),(0,C.BX)(qt,{title:t(n.header),sx:{width:"632px",padding:"32px"},children:[(0,C.tZ)("div",{style:{marginTop:"8px"},children:(0,C.tZ)(l.nvN,{size:"medium",color:o.O9.lightTheme.ds.text.neutral.quiet,children:t(n.description)})}),(0,C.tZ)(l.Ejs,{sx:{marginTop:"32px",display:"flex",flexDirection:"column",borderBottom:`1px solid ${o.O9.lightTheme.ds.border.neutral.quiet.idle}`},children:n.features.map((e=>(0,C.tZ)(l.Ejs,{flexDirection:"column",sx:{display:"flex",flexDirection:"column",borderTop:`1px solid ${o.O9.lightTheme.ds.border.neutral.quiet.idle}`,padding:"32px 0"},children:(0,C.BX)(l.Ejs,{flexDirection:"row",gap:"16px",flexWrap:"nowrap",children:[(0,C.tZ)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"40px",height:"40px",borderRadius:"8px",backgroundColor:o.O9.lightTheme.ds.container.expressive.brand.quiet.idle},children:e.icon}),(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[(0,C.tZ)(l.nvN,{bold:!0,color:o.O9.lightTheme.ds.text.neutral.catchy,children:t(e.header)}),(0,C.tZ)(l.nvN,{size:"x-small",color:o.O9.lightTheme.ds.text.neutral.quiet,children:t(e.description)}),(0,C.tZ)(l.Ejs,{gap:"8px",children:e.actions.map((e=>e.external?(0,C.tZ)("a",{href:e.link,target:"_blank",rel:"noopener noreferrer",children:(0,C.tZ)(o.zx,{mood:e.mood,intensity:e.intensity,size:"small",type:"button",onClick:()=>{e.logEvent&&(0,h.Kz)(e.logEvent)},children:t(e.content)})},e.content):(0,C.tZ)(i.rU,{to:e.link,children:(0,C.tZ)(o.zx,{mood:e.mood,intensity:e.intensity,size:"small",type:"button",children:t(e.content)})},e.content)))})]})]})},e.header)))})]})]})};var ta;const na=({currentSeats:e,teamOffers:t})=>{const{translate:n}=(0,y.Z)(),a=(0,De.Y)(),i=a.status===s.rq.Success&&(0,X.f1)(a.data),r=a.status===s.rq.Success&&(0,X.pq)(a.data),c=a.status===s.rq.Success&&(0,X.NG)(a.data),d=t?.businessOffer?.currency,u=t?.businessOffer?At({offer:t.businessOffer}):null,_=t?.teamOffer?At({offer:t.teamOffer}):null,m=t?.starterOffer?At({offer:t.starterOffer}):null,p=Lt(t?.starterOffer),g=i&&m&&d?n.price(d,m*p/100,{notation:"compact"}):r&&_&&d?n.price(d,_*e/100,{notation:"compact"}):c&&u&&d?n.price(d,u*e/100,{notation:"compact"}):null;return(0,C.tZ)(qt,{title:n("team_account_teamplan_changeplan_current_plan_header"),children:(0,C.tZ)(l.Ejs,{flexDirection:"column",gap:"16px",sx:{marginTop:"16px"},children:(0,C.BX)("div",{sx:{display:"flex",alignItems:"center",padding:"12px 10px",justifyContent:"space-between",backgroundColor:"ds.container.agnostic.neutral.quiet"},children:[(0,C.tZ)(l.nvN,{bold:!0,color:"ds.text.neutral.standard",children:i?n("team_account_teamplan_changeplan_current_plan_starter"):r?n("manage_subscription_plan_name_dashlane_team"):c?n("manage_subscription_plan_name_dashlane_business"):ta||(ta=(0,C.tZ)(o.ZX,{size:30,mood:"neutral"}))}),(0,C.tZ)(l.nvN,{color:"ds.text.neutral.standard",children:g?n("team_account_teamplan_changeplan_current_plan_per_year",{cost:g}):null})]})})})};var aa,ia,ra,sa=n(307973);const oa=({currency:e,selectedOffer:t,costData:n})=>{const{translate:a}=(0,y.Z)(),{loading:i,billingCountry:r}=w();if(i)return aa||(aa=(0,C.tZ)(o.ZX,{}));const s="US"===r?"team_account_teamplan_changeplan_order_summary_tax":"team_account_teamplan_vat";return(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"32px",sx:{borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderWidth:"1px",borderRadius:"4px",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px"},children:[(0,C.tZ)(nn,{label:(0,C.tZ)(l.X6q,{size:"small",children:a("team_account_teamplan_changeplan_order_summary_header")}),value:(0,C.tZ)(l.nvN,{color:"ds.text.neutral.quiet",children:(0,sa.Z)(new Date,"MM/dd/yyyy")})}),(0,C.tZ)(l.Ejs,{flexDirection:"column",gap:"16px",sx:{padding:"32px 0"},children:(0,C.tZ)(xn,{selectedOffer:t,currency:e,costData:n})}),(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",children:[(0,C.tZ)(l.nvN,{size:"small",color:"ds.text.neutral.catchy",sx:{padding:"0 10px",fontWeight:"light"},children:a("team_account_teamplan_changeplan_order_summary_seats_total",{totalSeats:n.totalSeats})}),(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{size:"small",color:"ds.text.neutral.standard",children:a("team_account_teamplan_changeplan_order_summary_subtotal")}),value:e?(0,C.tZ)(l.nvN,{size:"small",color:"ds.text.neutral.standard",children:a.price(e,n.subtotal/100)}):null}),n.tax&&e?(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{size:"small",color:"ds.text.neutral.quiet",children:a(s)}),value:(0,C.tZ)(l.nvN,{size:"small",color:"ds.text.neutral.quiet",children:a.price(e,n.tax/100)})}):null,n?.proratedDiscount?(0,C.tZ)(nn,{label:(0,C.BX)(l.Ejs,{alignItems:"center",gap:"5px",children:[(0,C.tZ)(l.nvN,{size:"small",color:"ds.text.neutral.quiet",children:a("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,C.tZ)(l.ua7,{content:a("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:ia||(ia=(0,C.tZ)(l.uMt,{size:16,color:"ds.text.neutral.quiet"}))})]}),value:e?(0,C.tZ)(l.nvN,{size:"small",color:"ds.text.neutral.quiet",children:a.price(e,n.proratedDiscount/100)}):null}):null,n?.promoPrice?(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{size:"small",color:"ds.text.neutral.quiet",children:a("team_account_teamplan_upgrade_premium_coupon")}),value:e?(0,C.BX)(l.nvN,{size:"small",color:"ds.text.neutral.quiet",children:["-",a.price(e,n.promoPrice/100)]}):null}):null,ra||(ra=(0,C.tZ)(tn,{})),n?.total?(0,C.tZ)(nn,{label:(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:a("team_account_teamplan_total")}),value:e?(0,C.tZ)(l.nvN,{bold:!0,size:"large",children:a.price(e,n.total/100)}):null}):null]})]})},la=()=>{const{translate:e}=(0,y.Z)();return(0,C.tZ)(qt,{title:e("team_account_teamplan_changeplan_payment_method_header"),children:(0,C.BX)(l.Ejs,{sx:{display:"flex",gap:"6px",marginTop:"16px"},children:[(0,C.tZ)(l.UXA,{size:16,color:l.colors.grey00}),(0,C.tZ)(l.nvN,{size:"medium",color:l.colors.grey00,children:e("team_account_teamplan_changeplan_payment_method_invoice_body")})]})})};var ca=n(788355),da=n(86498);const ua=/^((AT)(U\d{8})|(BE)(0\d{9}|\d{10})|(BG)(\d{9,10})|(CHE)(\d{9})|(CY)(\d{8}[A-Z])|(CZ)(\d{8,10})|(DE)(\d{9})|(DK)(\d{8})|(EE)(\d{9})|(GB)(\d{5,12})|(EL|GR)(\d{9})|(ES)([\dA-Z]\d{7}[\dA-Z])|(FI)(\d{8})|(FR)([\dA-Z]{2}\d{9})|(HU)(\d{8})|(HR)(\d{11})|(IE)(\d{7}[A-Z]{1,2})|(IT)(\d{11})|(LT)(\d{9}|\d{12})|(LU)(\d{8})|(LV)(\d{11})|(MT)(\d{8})|(NL)(\d{9}(B\d{2}|BO2))|(PL)(\d{10})|(PT)(\d{9})|(RO)(\d{2,10})|(SE)(\d{12})|(SI)(\d{8})|(SK)(\d{10})|(\d{9}MVA))$/i,_a="team_account_vat_number_add_description",ma="team_account_vat_number";var pa=function(e){return e[e.ADD=0]="ADD",e[e.UPDATE=1]="UPDATE",e}(pa||{}),ga=function(e){return e.INITIAL_VIEW="initialView",e.EDIT="edit",e.SAVE="save",e.SAVING="saving",e}(ga||{});const ha=({isInAccountSummary:e})=>{const{translate:t}=(0,y.Z)(),[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)("cancel"),[c,u]=(0,r.useState)(!1),[_,m]=(0,r.useState)(pa.ADD),[p,g]=(0,r.useState)(ga.INITIAL_VIEW),h=(0,da.V)(),{deleteTeamVat:b,upsertTeamVat:x}=(0,$.u)(sn.a),v=(0,d.k)(sn.a,"getTeamVat");(0,r.useEffect)((()=>{v.status===Te.rq.Success?(a(v.data),s("delete"),g(ga.EDIT)):g(ga.INITIAL_VIEW)}),[v.status,v.data]);const S=async()=>{"success"===(await b()).tag&&(a(""),g(ga.INITIAL_VIEW),s("cancel"),m(pa.ADD),h.showAlert(t("team_account_vat_number_delete_success_alert"),l.BLW.SUCCESS))},f=e=>e&&!(e=>{const t=e.replaceAll(/\./g,"");return ua.test(t)})(e)?t("team_account_vat_number_invalid"):null,Z={vatNumber:n},T=_===pa.ADD?"team_account_vat_number_add_success":"team_account_vat_number_update_success";return(0,C.BX)(C.HY,{children:[""===n&&(e?(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t(_a)}):(0,C.tZ)(l.nvN,{color:"ds.text.neutral.quiet",size:"medium",children:t(_a)})),p===ga.INITIAL_VIEW?(0,C.tZ)("div",{sx:{marginTop:"16px"},children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionAddOutlined",layout:"iconLeading",onClick:()=>{g(ga.SAVE)},children:t("team_account_vat_number_add_label")})}):(0,C.tZ)("div",{sx:{marginTop:"16px"},children:(0,C.tZ)(ca.J9,{initialValues:Z,onSubmit:p===ga.SAVE?async e=>{g(ga.SAVING),"success"===(await x({newVATNumber:e.vatNumber})).tag&&(a(e.vatNumber),u(!0),g(ga.EDIT),s("delete"),setTimeout((()=>{u(!1)}),2e3))}:p===ga.EDIT?()=>{u(!1),g(ga.SAVE),m(pa.UPDATE)}:()=>{},children:({errors:e,resetForm:n,touched:a,values:r})=>(0,C.tZ)(ca.l0,{children:(0,C.BX)(l.T5p,{gap:"16px",gridTemplateColumns:"2fr 0.25fr 1fr",children:[(0,C.BX)(l.dDn,{gridColumn:"1 / 2",children:[(0,C.tZ)(ca.gN,{name:"vatNumber",validate:f,children:({field:{onChange:e,...n}})=>(0,C.tZ)(o.oi,{label:t(ma),disabled:p===ga.EDIT,onChange:t=>{e(t),p===ga.EDIT&&(g(ga.SAVE),u(!1))},...n,sx:{input:{textTransform:"uppercase"}}})}),e.vatNumber&&a.vatNumber&&(0,C.tZ)(l.nvN,{color:"ds.text.danger.quiet",size:"x-small",children:e.vatNumber})]}),(0,C.tZ)(l.dDn,{gridColumn:"2 / 3",sx:{marginTop:"16px"},children:p===ga.SAVING?(0,C.tZ)(o.zx,{intensity:"catchy",layout:"labelOnly",disabled:!0,type:"submit",children:t("team_account_name_saving_label")}):p===ga.SAVE?(0,C.tZ)(o.zx,{intensity:"catchy",layout:"labelOnly",disabled:""===r.vatNumber,type:"submit",children:t("team_settings_button_save_label")}):(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionEditOutlined",layout:"iconLeading",disabled:""===r.vatNumber,type:"submit",children:t("team_account_name_edit_label")})}),(0,C.tZ)(l.dDn,{gridColumn:"3 / 4",sx:{marginTop:"16px"},children:"cancel"===i?(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"labelOnly",disabled:p===ga.SAVING,onClick:()=>g(ga.INITIAL_VIEW),children:t("_common_action_cancel")}):(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"ActionDeleteOutlined",layout:"iconLeading",disabled:p===ga.SAVING,onClick:()=>{n({values:Z}),S()},children:t("team_account_delete_label")})})]})})})}),c&&(0,C.tZ)(l.nvN,{color:"ds.text.positive.quiet",size:"x-small",children:t(T)})]})},ba=({isInAccountSummary:e})=>{const{translate:t}=(0,y.Z)();return(0,C.tZ)("div",{children:e?(0,C.BX)("div",{sx:{marginTop:"24px"},children:[(0,C.tZ)(o.X6,{color:"ds.text.neutral.catchy",as:"h2",textStyle:"ds.title.section.medium",children:t(ma)}),(0,C.tZ)("div",{sx:{marginTop:"16px"},children:(0,C.tZ)(ha,{isInAccountSummary:e})})]}):(0,C.tZ)(qt,{title:t(ma),children:(0,C.tZ)("div",{sx:{marginTop:"16px"},children:(0,C.tZ)(ha,{isInAccountSummary:e})})})})};let ya=function(e){return e.FORM="form",e.SUCCESS="success",e}({});var xa,va,Sa,fa,Za,Ca;const Ta=()=>{var e,t,n;const a=Et(),y=(0,g.s)(),{setNavBarChildren:x}=(0,r.useContext)(Tt),{showToast:v}=(0,o.pm)(),{data:S,status:f}=(0,d.k)(_.o,"getTeamSeats"),{loading:Z,billingCountry:D}=w(),[E,I]=(0,r.useState)(0),[N,A]=(0,r.useState)(0),[M,O]=(0,r.useState)(),[L,B]=(0,r.useState)(""),[R,z]=(0,r.useState)(!0),[P,X]=(0,r.useState)(ya.FORM),[j,U]=(0,r.useState)(),[q,G]=(0,r.useState)(),[F,$]=(0,r.useState)(""),V=(0,u._)();let H=!1;var W;V?.status===s.rq.Success&&(H=null!=(W=V.data[m.A.EcommerceWebReduceSeatsDev]||V.data[m.A.EcommerceWebReduceSeatsProd])&&W);const Y=(null!=(e=S?.paid)?e:0)+(null!=(t=S?.extraFree)?t:0),K=Y-(null!=(n=S?.remaining)?n:0),Q=y?.spaceTier;if((0,r.useEffect)((()=>{""!==F&&v({mood:"danger",description:F}),$("")}),[F]),(0,r.useEffect)((()=>(P===ya.FORM?x(xa||(xa=(0,C.tZ)(k,{}))):x(null),()=>{x(null)})),[P]),(0,r.useEffect)((()=>{a&&("business"!==(0,i.CN)().get("plan")&&Q!==p.lD.Team&&Q!==p.lD.Starter||O(a.businessOffer))}),[a]),Z||f!==s.rq.Success||!S||!y||!a||!Q)return va||(va=(0,C.tZ)(o.ZX,{mood:"brand"}));const J=y.billingType===p.qo.Invoice,ee=a.businessOffer.currency;return(0,C.tZ)(l.Ejs,{sx:{margin:"45px",width:"1180px"},children:(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[P===ya.FORM?(0,C.BX)(l.Ejs,{gap:"8px",children:[(0,C.tZ)(l.k$b,{sx:{width:"646px"},children:(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[(0,C.tZ)(en,{teamOffers:a,currentSpaceTier:Q,selectedOffer:M,handleSelection:e=>{(e=>{(0,h.Kz)(new c.UserClickEvent({clickOrigin:c.ClickOrigin.Plans,button:Mt(e)?c.Button.SelectTeamPlan:Ot(e)?c.Button.SelectBusinessPlan:c.Button.SelectStarterPlan}))})(e),O(e)}}),J?Sa||(Sa=(0,C.tZ)(la,{})):"US"!==D?(0,C.BX)(C.HY,{children:[(0,C.tZ)(b.I,{b2b:!0,styles:{padding:"24px"}}),fa||(fa=(0,C.tZ)(ba,{isInAccountSummary:!1})),(0,C.tZ)($n,{email:L,emailValid:R,setEmail:B,setEmailValid:z})]}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(b.I,{b2b:!0,styles:{padding:"24px"}}),(0,C.tZ)($n,{email:L,emailValid:R,setEmail:B,setEmailValid:z})]})]})}),(0,C.tZ)(l.k$b,{sx:{width:"470px"},children:(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[(0,C.tZ)(na,{teamOffers:a,currentSeats:Y}),H?(0,C.tZ)(Un,{currentSeats:Y,currentActiveSeats:K,currentSpaceTier:Q,selectedSeatsQty:N,currency:ee,selectedOffer:M,email:L,emailValid:R,onSuccess:()=>{X((()=>ya.SUCCESS))},onError:e=>{$(e)},setSelectedSeatsQty:A,setOrderSummaryData:G}):(0,C.tZ)(In,{currentSeats:Y,additionalSeats:E,currency:ee,selectedOffer:M,email:L,emailValid:R,onSuccess:()=>X((()=>ya.SUCCESS)),onError:e=>{$(e)},setAdditionalSeats:I,setOrderSummaryData:U}),Za||(Za=(0,C.tZ)(Vn,{}))]})})]}):null,P===ya.SUCCESS&&(H?q:j)&&M?(0,C.BX)(l.Ejs,{sx:{display:"flex",flexWrap:"nowrap",gap:"16px"},children:[(0,C.tZ)(l.Ejs,{sx:{display:"flex",flexGrow:"2",maxWidth:"632px",flexDirection:"column"},children:(0,C.tZ)(ea,{targetPlan:Ot(M)?"business":"team"})}),(0,C.BX)(l.Ejs,{sx:{display:"flex",flexGrow:"1",gap:"16px",flexDirection:"column"},children:[(0,C.tZ)(oa,{currency:ee,selectedOffer:M,costData:H?q:j}),Ca||(Ca=(0,C.tZ)(T,{}))]})]}):null]})})};var Da=n(417799),ka=n(63756),Ea=n(344554);const wa=()=>{const{translate:e}=(0,y.Z)(),t=Et(),n=Bt();if(!t||!n.hasLimitedOffer)return null;const{translatedEquivalentPrice:a,translatedPrice:i}=n;return(0,C.tZ)(o.ke,{title:e("team_dashboard_upgrade_tile_infobox_title"),description:(0,C.BX)(C.HY,{children:[(0,C.BX)(o.X6,{as:"h5",textStyle:"ds.title.block.small",color:"ds.text.brand.standard",sx:{marginBottom:"4px"},children:[(0,C.tZ)("span",{sx:{textDecoration:"line-through"},children:a})," ",i," ",e("team_dashboard_upgrade_tile_infobox_price")]}),(0,C.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.brand.standard",children:e("team_dashboard_upgrade_tile_infobox_description")})]}),mood:"brand"})},Ia="team_dashboard_upgrade_tile_business_upgrade_header",Na="team_dashboard_upgrade_tile_feature_unlimited_seats",Aa="team_dashboard_upgrade_tile_cta_buy_dashlane",Ma="team_dashboard_upgrade_tile_feature_sso",Oa="team_dashboard_upgrade_tile_feature_scim",La="team_dashboard_upgrade_tile_feature_friends_and_family",Ba="team_dashboard_upgrade_tile_feature_support";var Ra,za,Pa;const Xa=({dismissible:e})=>{const t=(0,ka.D)(),n=(0,se.C)(),a=(0,re.lZ)();if(!n||a.isLoading)return!1;const i=n.isFreeTrial;if(n.spaceTier===p.lD.Business&&!i)return!1;const r=t.find((e=>e.type===Da.U.DASHBOARD_UPRADE&&e.dismissedAt));return!e||!r},ja=({iconName:e,children:t})=>(0,C.BX)(l.Ejs,{flexDirection:"row",gap:"12px",alignItems:"center",flexWrap:"nowrap",children:[(0,C.tZ)("div",{sx:{padding:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle",borderRadius:"8px"},children:(0,C.tZ)(o.JO,{name:e,size:"large",color:"ds.text.brand.standard"})}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:t})]}),Ua=({dismissible:e,headingLevel:t="h5"})=>{const{translate:n}=(0,y.Z)(),a=(()=>{const e=(0,j.B)(),{routes:t}=(0,i.Xo)(),n=(0,se.C)();if(!n)return null;const a=n.isFreeTrial,r=n.spaceTier===p.lD.Starter,s=n.spaceTier===p.lD.Team,o=n.spaceTier===p.lD.Business,l=n.daysLeftInTrial;return a&&s?{header:{key:l?"team_dashboard_upgrade_tile_team_trial_header_markup":"team_dashboard_upgrade_tile_team_trial_header_last_day",variables:{daysLeft:l}},description:{key:"team_dashboard_upgrade_tile_business_trial_description"},features:[{iconName:"GroupOutlined",key:Na},{iconName:"FeatureVpnOutlined",key:"team_dashboard_upgrade_tile_feature_vpn"}],cta:{key:Aa,external:!0,link:`${ie.ub}?plan=team&subCode=${e?.subscriptionCode}`}}:a&&o?{header:{key:l?"team_dashboard_upgrade_tile_business_trial_header_markup":"team_dashboard_upgrade_tile_business_trial_header_last_day",variables:{daysLeft:l}},description:{key:"team_dashboard_upgrade_tile_business_trial_description"},features:[{iconName:"ToolsOutlined",key:Ma},{iconName:"SharedOutlined",key:Oa},{iconName:"GroupOutlined",key:La},{iconName:"ItemPhoneHomeOutlined",key:Ba}],cta:{key:Aa,external:!0,link:`${ie.ub}?plan=business&subCode=${e?.subscriptionCode}`}}:!a&&r?{header:{key:Ia},description:{key:"team_dashboard_upgrade_tile_team_upgrade_description"},features:[{iconName:"GroupOutlined",key:Na},{iconName:"SharedOutlined",key:"team_dashboard_upgrade_tile_feature_group"},{iconName:"LockOutlined",key:Ma},{iconName:"SettingsOutlined",key:"team_dashboard_upgrade_tile_feature_activity_logs"}],cta:{key:"team_upgrade_to_business",link:t.teamAccountChangePlanRoutePath}}:!a&&s?{header:{key:Ia},description:{key:"team_dashboard_upgrade_tile_business_upgrade_description"},features:[{iconName:"ToolsOutlined",key:Ma},{iconName:"SharedOutlined",key:Oa},{iconName:"GroupOutlined",key:La},{iconName:"ItemPhoneHomeOutlined",key:Ba}],cta:{key:"team_dashboard_upgrade_tile_cta_upgrade",link:t.teamAccountChangePlanRoutePath}}:null})(),r=(0,De.Y)(),d=(0,i.k6)(),u=r.status===s.rq.Success&&(0,X.pq)(r.data),_=r.status===s.rq.Success&&(0,X.f1)(r.data);return a?(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"24px",children:[(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[(0,C.BX)(l.Ejs,{alignItems:"start",flexWrap:"nowrap",justifyContent:"space-between",children:[(0,C.tZ)(o.X6,{as:t,textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:a.header.key.includes("markup")?n.markup(a.header.key,a.header.variables):n(a.header.key,a.header.variables)}),e?(0,C.tZ)(o.zx,{sx:{padding:"4px"},mood:"neutral",intensity:"supershy",size:"medium",layout:"iconOnly",onClick:()=>(0,Ea.ql)({type:Da.U.DASHBOARD_UPRADE}),icon:za||(za=(0,C.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"ActionCloseOutlined"}))}):null]}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n(a.description.key)})]}),a.features.map((e=>(0,C.tZ)(ja,{iconName:e.iconName,children:e.key.includes("markup")?n.markup(e.key):n(e.key)},e.key))),u?Pa||(Pa=(0,C.tZ)(wa,{})):null,(0,C.tZ)(o.zx,{fullsize:!0,mood:e?"brand":"neutral",intensity:e?"catchy":"quiet",onClick:()=>{a&&(a.cta.external?(0,q.Yo)(a.cta.link):d.push(a.cta.link),(0,h.Kz)(new c.UserClickEvent({button:c.Button.BuyDashlane,clickOrigin:c.ClickOrigin.FeatureLimitationsBlock})))},layout:_?"iconLeading":void 0,icon:_?"PremiumOutlined":void 0,children:n(a.cta.key)},a.cta.key)]}):Ra||(Ra=(0,C.tZ)(o.ZX,{size:"large",mood:"neutral"}))};var qa=n(212813),Ga=n(824107);const Fa=()=>{const{data:e,status:t}=(0,d.k)(_.o,"getTeamName");return t!==Te.rq.Success?null:e};let $a=function(e){return e[e.DUPLICATE=0]="DUPLICATE",e[e.SOMETHING_WRONG=1]="SOMETHING_WRONG",e[e.EMPTY=2]="EMPTY",e[e.MALFORMED=3]="MALFORMED",e}({});const Va=(e,t)=>{switch(t){case $a.DUPLICATE:return e("team_account_name_already_exists");case $a.EMPTY:return e("team_account_name_is_empty");case $a.MALFORMED:return e("team_account_name_is_malformed");case $a.SOMETHING_WRONG:default:return e("team_account_name_error_something_wrong")}},Ha="col1--a1XY6sTFa0",Wa="col2--K8GKZ0pbNU";var Ya;const Ka=({hasFullAdminAccess:e})=>{const{reportTACError:t}=K(),{translate:n}=(0,y.Z)(),{editTeamName:a}=(0,$.u)(_.o),{data:i,status:r}=(0,d.k)(_.o,"getTeamId"),s=Fa();return null!==s&&r===Te.rq.Success&&i.teamId?(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{color:"ds.text.neutral.catchy",as:"h2",textStyle:"ds.title.section.medium",sx:{mb:"1em"},children:n("team_account_heading_team_name")}),e?(0,C.tZ)("div",{children:(0,C.tZ)(Ga.X,{defaultValue:s,saveBtnLabel:n("team_account_name_save_label"),savingBtnLabel:n("team_account_name_saving_label"),editBtnLabel:n("team_account_name_edit_label"),placeholder:n("team_account_name_add_your_team_name"),successMessage:n("team_account_name_add_your_team_success"),textFieldClassName:Ha,buttonClassName:Wa,onSave:async e=>{if(!e){const e=new Error(Va(n,$a.EMPTY));throw t(e),e}const r=await a({teamId:Number(i.teamId),newTeamName:e});if((0,V.hx)(r)){if(r.error.tag===qa.LP.DUPLICATE){const e=new Error(Va(n,$a.DUPLICATE));throw t(e),e}if(r.error.tag===qa.LP.INVALID_TEAM_SETTING_VALUE){const e=new Error(Va(n,$a.MALFORMED));throw t(e),e}const e=new Error(Va(n,$a.SOMETHING_WRONG));throw t(e),e}},layout:"iconLeading",icon:Ya||(Ya=(0,C.tZ)(o.JO,{name:"ActionEditOutlined"})),inputStyle:{fontSize:"15px"}})}):s]}):null};var Qa=n(65255);const Ja=({requiredSeatsForIdP:e})=>{const{translate:t}=(0,y.Z)();return(0,C.tZ)(o.u,{content:t("team_idp_errors_badge_seats_required_tooltip",{count:e}),children:(0,C.tZ)(o.Ct,{label:t("team_idp_errors_badge_seats_required",{count:e,nbOfRequiredSeats:e}),mood:"danger",intensity:"quiet"})})},ei="team_account_teamplan_buy_more",ti=({isFreeTrial:e,isGracePeriod:t,isStarter:n,isDiscontinuedTrial:a,onClick:i,licenseCount:r})=>{const{translate:s}=(0,y.Z)();return n?null:t&&!e?(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",title:s("team_account_teamplan_hint_cannot_add_seats"),disabled:!0,children:s(ei)}):a?(0,C.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:i,children:s("team_account_teamplan_trial_ended_buy_dashlane")}):e?(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:i,disabled:!1,children:s("team_account_teamplan_upgrade_button")}):(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:i,disabled:!r,children:s(ei)})};var ni;const ai={width:"300px",margin:"10px 0px",flexWrap:"wrap",display:"flex",flexDirection:"column"},ii={margin:"10px",gap:"8px"},ri=({style:e,licenseCount:t,onRequestTeamUpgrade:n,onRequestBuyMoreSeats:a})=>{const{routes:s}=(0,i.Xo)(),{translate:u}=(0,y.Z)(),_=(0,se.C)(),m=(0,re.lZ)(),[g,b]=(0,r.useState)(!1),x=(0,d.k)(Oe.t,"getIdPFailedProvisioningsData"),v=(0,me.o)(Qa.w.EcommerceWebIdPErrorsPhase2),S=x.status===Te.rq.Success?x.data?.requiredSeats:0,f=!!_&&_.spaceTier===p.lD.Starter,Z=!!_&&_.spaceTier===p.lD.Team,T=!!_&&_.spaceTier===p.lD.Business,D=!!_?.isFreeTrial,k=(0,r.useMemo)((()=>{let e;return e=u(f?"team_account_teamplan_changeplan_plans_starter_name":Z?"team_account_teamplan_team":"team_account_teamplan_business"),D?u("team_account_teamplan_trial",{planName:e}):`Dashlane ${e}`}),[f,Z,D,u]);if(m.isLoading)return null;const{isTeamSoftDiscontinued:E,isTrial:w}=m,I=E&&w;if(!_)return null;const N=_.isGracePeriod,M=0===_.daysLeftInTrial;return D?(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{style:e,children:[(0,C.BX)("div",{sx:{display:"flex"},children:[(0,C.BX)("div",{sx:(0,o.jM)([ai,{gap:"8px"}]),children:[(0,C.tZ)("span",{className:"licenseCountText--hXtj4u8ji3",children:k}),I?(0,C.tZ)(o.Ct,{mood:"danger",label:u("team_account_teamplan_trial_ended_badge")}):null]}),(0,C.BX)("div",{sx:(0,o.jM)([{display:"flex",flexDirection:"row"},ii]),children:[(0,C.tZ)(ti,{isGracePeriod:N,isFreeTrial:D,isStarter:f,isDiscontinuedTrial:!!I,onClick:()=>n(c.ClickOrigin.AccountStatus),licenseCount:t}),N||!M||E?null:(0,C.tZ)(o.zx,{mood:"brand",intensity:"supershy",layout:"labelOnly",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.ExtendTrial,clickOrigin:c.ClickOrigin.AccountStatus})),b(!0)},children:u("team_dashboard_extend_trial_button")}),I?(0,C.tZ)(o.zx,{mood:"brand",intensity:"supershy",onClick:()=>{(0,q.Yo)(ie.oH)},children:u("team_account_teamplan_trial_ended_pay_by_invoice_button")}):null]})]}),(0,C.tZ)("div",{className:"licenseCountContainer--bEWqbHZbKG",children:u("team_account_teamplan_users",{count:t})})]}),g?(0,C.tZ)(A.XA,{initialDialog:A.s9.SURVEY}):null]}):(0,C.BX)(l.Ejs,{flexDirection:"column",sx:{marginTop:"8px"},children:[(0,C.BX)(l.Ejs,{alignItems:"center",children:[(0,C.tZ)("div",{sx:ai,children:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:u("team_account_teamplan_plan_name",{planName:k})})}),(0,C.tZ)("div",{sx:ii,children:T?null:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",type:"button",as:i.rU,to:s.teamAccountChangePlanRoutePath,children:u("team_account_teamplan_change_plan")})})]}),(0,C.BX)(l.Ejs,{alignItems:"center",sx:{marginTop:"8px"},children:[(0,C.BX)("div",{sx:(0,o.jM)([ai,{gap:"4px"}]),children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:u("team_account_teamplan_seats",{numSeats:t})}),v&&S?(0,C.tZ)(Ja,{requiredSeatsForIdP:S}):null]}),(0,C.BX)("div",{sx:ii,children:[(0,C.tZ)(ti,{isGracePeriod:N,isFreeTrial:D,isStarter:f,onClick:a,licenseCount:t,isDiscontinuedTrial:!!I}),I?ni||(ni=(0,C.tZ)(o.zx,{})):null]})]})]})},si={CARD_BORDER:{border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",overflow:"hidden"},ACCOUNT_PAGE:{backgroundColor:"ds.background.alternate",minHeight:"100%","& > div":{maxWidth:"74em",padding:"32px 48px"}}};var oi;const li=({seatsNumber:e,isWindowCollapsed:t,hasFullAdminAccess:n,onRequestBuyMoreSeats:a,onRequestTeamUpgrade:i})=>{const{translate:r}=(0,y.Z)(),s=Xa({});return(0,C.BX)(l.Ejs,{flexDirection:"column",role:"main",children:[(0,C.tZ)(o.X6,{textStyle:"ds.title.section.large",as:"h1",color:"ds.text.neutral.standard",sx:{marginBottom:"32px"},children:r("team_account_heading_team_setup")}),(0,C.BX)(l.Ejs,{flexDirection:"row",gap:"24px",children:[(0,C.BX)(l.Ejs,{flexDirection:"column",sx:(0,o.jM)([{flexGrow:"1",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",maxWidth:"40em"},si.CARD_BORDER]),children:[(0,C.tZ)(Ka,{hasFullAdminAccess:n}),(0,C.BX)("div",{sx:{marginTop:"2em"},children:[(0,C.tZ)(o.X6,{color:"ds.text.neutral.catchy",as:"h2",textStyle:"ds.title.section.medium",children:r("team_account_teamplan")}),(0,C.tZ)(ri,{licenseCount:e,onRequestBuyMoreSeats:a,onRequestTeamUpgrade:i})]})]}),s?(0,C.tZ)(l.k$b,{sx:(0,o.jM)([{backgroundColor:"ds.container.agnostic.neutral.supershy",width:t?"40em":"416px",padding:"32px"},si.CARD_BORDER]),children:oi||(oi=(0,C.tZ)(Ua,{headingLevel:"h3"}))}):null]})]})};var ci=n(798423);const di=({children:e})=>(0,C.tZ)(l.Ejs,{flexDirection:"column",sx:(0,l.jMf)([si.CARD_BORDER,{backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px",flex:"1",overflow:"visible"}]),children:e}),ui={none:{paragraph:"team_account_cancel_widget_unsolicited_content_markup",button:"team_account_cancel_widget_unsolicited_button"},pending:{heading:"team_account_cancel_widget_requested_pending_heading",paragraph:"team_account_cancel_widget_requested_pending_content_markup"},canceled:{heading:"team_account_cancel_widget_requested_complete_heading",paragraph:"team_account_cancel_widget_requested_complete_content",button:"team_account_cancel_widget_requested_complete_button"},unknown:{}},_i=(e,t,n)=>{var a,i,r,s,o;switch(e){case p.Uz.None:return"paragraph"===t?n.markup(null!=(a=ui.none[t])?a:"",{},{linkTarget:"_blank"}):n(null!=(i=ui.none[t])?i:"");case p.Uz.Pending:return"paragraph"===t?n.markup(null!=(r=ui.pending[t])?r:"",{},{linkTarget:"_blank"}):n(null!=(s=ui.pending[t])?s:"");case p.Uz.Canceled:return n(null!=(o=ui.canceled[t])?o:"");case p.Uz.Unknown:return""}},mi=({status:e,handleClickButton:t})=>{const{translate:n}=(0,y.Z)();return(0,C.BX)(di,{children:[e!==p.Uz.None?(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",sx:{marginBottom:"16px"},children:_i(e,"heading",n)}):null,(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",sx:{fontSize:"15px"},children:_i(e,"paragraph",n)}),e!==p.Uz.Pending?(0,C.tZ)(o.zx,{intensity:"quiet",mood:"neutral",sx:{marginTop:"16px"},onClick:t,children:_i(e,"button",n)}):null]})};var pi=n(668531);const gi=({spaceTier:e,handleClose:t,sendCancelRequest:n,requestStatus:a})=>{const{translate:i}=(0,y.Z)(),[s,l]=(0,r.useState)({[p.Gr.ChoseOtherPasswordManager]:!1,[p.Gr.MissingCriticalFeatures]:!1,[p.Gr.NoInternalUsage]:!1,[p.Gr.DownsizedEmployeeCount]:!1,[p.Gr.Other]:!1,[p.Gr.TechnicalIssues]:!1,[p.Gr.TooExpensive]:!1});(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacModalReasonsToCancelSubscription)}),[]);const d=`${e[0].toUpperCase()}${e.slice(1)}`,u=e=>{const t=!s[e];l({...s,[e]:t})};return(0,C.BX)(o.Vq,{isOpen:!0,onClose:()=>{(0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.Confirm,c.CallToAction.Cancel],hasChosenNoAction:!0})),t()},title:i("team_account_cancel_form_heading"),actions:{primary:{children:i("team_account_cancel_form_button_confirm"),onClick:()=>{const e=Object.keys(s).filter((e=>s[e])).map((e=>pi.V[e]));n(e),(0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.Confirm,c.CallToAction.Cancel],chosenAction:c.CallToAction.Confirm,hasChosenNoAction:!1})),(0,h.Kz)(new c.UserSubmitInProductFormAnswerEvent({formName:c.FormName.ReasonToCancelSubscription,answerList:Object.keys(s).map((e=>pi.V[e])),chosenAnswerList:e}))},isLoading:"pending"===a},secondary:{children:i("team_account_cancel_form_button_cancel",{planTier:d}),onClick:()=>{(0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.Confirm,c.CallToAction.Cancel],chosenAction:c.CallToAction.Cancel,hasChosenNoAction:!1})),t()}}},isDestructive:!0,closeActionLabel:i("_common_dialog_dismiss_button"),children:[(0,C.tZ)(o.nv,{sx:{marginBottom:"20px"},textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i("team_account_cancel_form_subheading")}),(0,C.tZ)(o.nv,{textStyle:"ds.title.block.medium",children:i("team_account_cancel_form_question")}),(0,C.tZ)(o.nv,{sx:{marginBottom:"20px"},textStyle:"ds.body.standard.regular",children:i("team_account_cancel_form_context")}),(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,C.tZ)(o.XZ,{label:i("team_account_cancel_form_option_1"),checked:s.no_internal_usage,disabled:"pending"===a,onChange:()=>u(p.Gr.NoInternalUsage)}),(0,C.tZ)(o.XZ,{label:i("team_account_cancel_form_option_2_revised"),checked:s.downsized_employee_count,disabled:"pending"===a,onChange:()=>u(p.Gr.DownsizedEmployeeCount)}),(0,C.tZ)(o.XZ,{label:i("team_account_cancel_form_option_3"),checked:s.chose_other_password_manager,disabled:"pending"===a,onChange:()=>u(p.Gr.ChoseOtherPasswordManager)}),(0,C.tZ)(o.XZ,{label:i("team_account_cancel_form_option_4"),checked:s.missing_critical_features,disabled:"pending"===a,onChange:()=>u(p.Gr.MissingCriticalFeatures)}),(0,C.tZ)(o.XZ,{label:i("team_account_cancel_form_option_5"),checked:s.technical_issues,disabled:"pending"===a,onChange:()=>u(p.Gr.TechnicalIssues)}),(0,C.tZ)(o.XZ,{label:i("team_account_cancel_form_option_6"),checked:s.too_expensive,disabled:"pending"===a,onChange:()=>u(p.Gr.TooExpensive)}),(0,C.tZ)(o.XZ,{sx:{marginBottom:"8px"},label:i("team_account_cancel_form_option_7"),checked:s.other,disabled:"pending"===a,onChange:()=>u(p.Gr.Other)})]}),(0,C.tZ)(o.nv,{sx:{margin:"20px 0"},textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:i.markup("team_account_cancel_form_help_markup",{},{linkTarget:"_blank"})})]})};var hi,bi;const yi={ITEM:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"},WRAPPER:{margin:"16px 0",gap:"24px",display:"flex",flexDirection:"column"}},xi="team_account_cancel_confirmation_dialog_close",vi=({handleClose:e})=>{const{translate:t}=(0,y.Z)();return(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacConfirmSubscriptionCancellationRequestSubmission)}),[]),(0,C.tZ)(o.Vq,{isOpen:!0,onClose:e,title:t("team_account_cancel_confirmation_dialog_heading"),closeActionLabel:t(xi),actions:{primary:{children:t(xi),onClick:e}},children:(0,C.BX)("div",{sx:yi.WRAPPER,children:[(0,C.BX)("div",{sx:yi.ITEM,children:[hi||(hi=(0,C.tZ)(o.JO,{name:"ItemEmailOutlined",size:"xlarge"})),(0,C.tZ)(o.nv,{children:t.markup("team_account_cancel_confirmation_dialog_paragraph_1_markup")})]}),(0,C.BX)("div",{sx:yi.ITEM,children:[bi||(bi=(0,C.tZ)(o.JO,{name:"ActionUndoOutlined",size:"xlarge"})),(0,C.tZ)(o.nv,{children:t("team_account_cancel_confirmation_dialog_paragraph_2")})]})]})})};let Si=function(e){return e.NONE="none",e.SURVEY="survey",e.REQUEST_SUCCESS="requestSentConfirmation",e.REQUEST_ERROR="requestError",e}({});const fi=({status:e})=>{const[t,n]=(0,r.useState)(Si.NONE),[a,i]=(0,r.useState)("idle"),s=(0,re.lZ)(),o=(0,se.C)(),{translate:d}=(0,y.Z)(),u=(0,da.V)();(0,r.useEffect)((()=>{e!==p.Uz.Unknown&&t!==Si.REQUEST_ERROR||u.showAlert(d("team_account_cancel_request_error"),l.BLW.ERROR,!1,void 0,void 0,1e4)}),[t,u,e,d]);const{requestTeamPlanCancellation:m}=(0,$.u)(_.o);return s.isLoading||!o||s.isTeamSoftDiscontinued||o.isFreeTrial||o.isGracePeriod?null:(0,C.BX)(C.HY,{children:[(0,C.tZ)(mi,{status:e,handleClickButton:e===p.Uz.None?()=>{(0,h.Kz)(new c.UserClickEvent({clickOrigin:c.ClickOrigin.BillingInformation,button:c.Button.CancelSubscription})),n(Si.SURVEY)}:()=>{(0,h.Kz)(new c.UserClickEvent({clickOrigin:c.ClickOrigin.BillingInformation,button:c.Button.ReactivateSubscription})),(0,q.Yo)(ie.lh)}}),t===Si.SURVEY?(0,C.tZ)(gi,{spaceTier:o.spaceTier,handleClose:()=>{n(Si.NONE)},sendCancelRequest:async e=>{i("pending");try{const t=await m({reasons:e});if(i("finished"),"failure"===t.tag)throw new Error("Failed to request team plan cancellation.");n(Si.REQUEST_SUCCESS)}catch(e){n(Si.REQUEST_ERROR)}},requestStatus:a}):null,t===Si.REQUEST_SUCCESS?(0,C.tZ)(vi,{handleClose:()=>{n(Si.NONE)}}):null]})};var Zi=n(526849),Ci=n(729274),Ti=n(127521),Di=n(891828),ki=n(319474);const Ei=e=>e.trim().toLocaleLowerCase(),wi="team_account_billing_admin_search_field_placeholder",Ii=({defaultSelected:e,handleConfirmClick:t,handleClose:n,allMembersCount:a,membersList:s})=>{const{translate:c}=(0,y.Z)(),{routes:d}=(0,i.Xo)(),[u,_]=(0,r.useState)(e),[m,p]=(0,r.useState)(""),[g,h]=(0,r.useState)([]),[b,x]=(0,r.useState)(!1);(0,r.useEffect)((()=>{h(((e,t)=>""===t.trim()?e:e.filter((({login:e})=>Ei(e).includes(Ei(t)))))(s,m).slice(0,5))}),[s,m]);const v=!g.length||e===u;return(0,C.tZ)(o.Vq,{isOpen:!0,title:c("team_account_billing_admin_dialog_title"),actions:{primary:{children:c("team_account_billing_admin_dialog_confirm"),onClick:()=>t(u),disabled:v}},onClose:n,closeActionLabel:c("_common_dialog_dismiss_button"),children:(0,C.BX)(l.T5p,{gap:"1.5em",gridTemplateColumns:"auto",children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:c("team_account_billing_admin_dialog_warning")}),(0,C.tZ)(o.Um,{autoFocus:!0,onChange:({target:{value:e}})=>{p(e),b||x(!0)},label:c(wi),placeholder:c(wi)}),g.length>0?(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:c("team_account_billing_admin_search_results_count",{count:g.length,totalCount:a})}),(0,C.tZ)(ki.S,{value:u,onChange:({target:{value:e}})=>{_(e)},groupName:"billingAdmins",children:g.map((e=>{const{login:t}=e,n=(e=>e.isTeamCaptain?"team_members_row_captain":e.isGroupManager?"team_members_row_group_manager":null)(e);return(0,C.tZ)(ki.E,{value:t,className:"radioWrapper--raI9eMnbBj",children:(0,C.BX)("div",{sx:{display:"flex",gap:"6px"},children:[t,n?(0,C.tZ)(o.Ct,{label:c(n)}):null]})},t)}))}),g.length<a?(0,C.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"8px",alignItems:"center"},children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:c("team_account_billing_admin_help")}),(0,C.tZ)(o.Qj,{as:i.rU,to:d.teamMembersRoutePath,onClick:n,children:c("team_account_billing_admin_link_to_members_page")})]}):null]}):null,0===g.length?(0,C.tZ)(o.nv,{children:c("team_account_billing_admin_search_no_match")}):null]})})};var Ni;const Ai=({lee:e})=>{const{globalState:t}=e,[n,a]=(0,r.useState)(""),[i,s]=(0,r.useState)(0),[d,u]=(0,r.useState)([]),[_,m]=(0,r.useState)(!1),p=(0,Ti.v0)(t),{translate:g}=(0,y.Z)(),{reportTACError:b}=K(),x=(0,da.V)();return(0,r.useEffect)((()=>{(async()=>{if(!p?.teamId)return;const e=await(0,Se.YY)({teamId:p.teamId}),t=e.filter((e=>"accepted"===e.status)),n=(0,Zi.sortWith)([(0,Zi.descend)((0,Zi.prop)("isBillingAdmin")),(0,Zi.descend)((0,Zi.prop)("isTeamCaptain")),(0,Zi.descend)((0,Zi.prop)("isGroupManager"))])(t);u(n),s(e.length);const i=n[0].login;a(i)})().catch(b)}),[p?.teamId]),p?(0,C.BX)(C.HY,{children:[(0,C.BX)(l.Ejs,{gap:"16px",children:[(0,C.tZ)(o.X6,{color:"ds.text.neutral.catchy",as:"h2",textStyle:"ds.title.section.medium",children:g("team_account_heading_billing_admin")}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:g("team_account_billing_admin_access_information")})]}),(0,C.BX)("div",{className:"container--cNaXIUykkA",children:[(0,C.tZ)("div",{className:Ha,children:(0,C.tZ)("span",{className:P()("text--Jm4WO6KPbc",{"emptyText--YnRMwaHw2m":!n},"automation-tests-tac-billing"),children:n||"████████████████"})}),(0,C.tZ)("div",{className:Wa,children:e.permission.adminAccess.hasFullAccess?(0,C.BX)("div",{className:"editContainer--ZJk2BSq6aw",children:[(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:Ni||(Ni=(0,C.tZ)(o.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",disabled:!d.length,onClick:()=>{m(!0),(0,h.Nc)(c.PageView.TacAccountBillingInfo)},children:g("team_account_billing_admin_edit_contact_info")}),_?(0,C.tZ)(Ii,{defaultSelected:n,handleConfirmClick:async e=>{if(n===e)return;m(!1),(0,h.Nc)(c.PageView.TacAccount);const i=(0,Ti.v0)(t);if(i)try{await(new Di.Z).updateBillingAdmin({auth:i,newAdminLogin:e,oldAdminLogin:n}),x.showAlert(g("team_account_billing_admin_notification_success"),l.BLW.SUCCESS),a(e)}catch{x.showAlert(g("team_account_billing_admin_notification_something_wrong"),l.BLW.ERROR)}else b(new Error(Ci.N))},handleClose:()=>{m(!1),(0,h.Nc)(c.PageView.TacAccount)},membersList:d,allMembersCount:i}):null]}):null})]})]}):(b(new Error(Ci.N)),null)};var Mi;const Oi=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)(l.Ejs,{gap:"16px",sx:{margin:"24px 0"},children:[(0,C.tZ)(l.nvN,{color:"ds.text.neutral.catchy",as:"h2",size:"large",children:e("team_account_invoice_payment_plan_heading")}),(0,C.BX)("div",{children:[(0,C.tZ)(l.nvN,{color:"ds.text.neutral.quiet",size:"small",children:e("team_account_invoice_payment_plan_pay_credit_card")}),(0,C.tZ)(l.nvN,{size:"small",children:(0,C.tZ)(l.rUS,{href:ie.Bw,target:"_blank",rel:"noopener noreferrer",sx:{color:"ds.text.neutral.quiet",fontWeight:"400"},children:e("team_account_invoice_payment_plan_contact_support")})})]}),(0,C.BX)(l.Ejs,{flexDirection:"row",gap:"8px",alignItems:"center",sx:{width:"100%"},children:[(0,C.tZ)("div",{sx:{padding:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle",borderRadius:"8px"},children:Mi||(Mi=(0,C.tZ)(o.JO,{name:"ItemTaxNumberOutlined",size:"large",color:"ds.text.brand.standard"}))}),(0,C.tZ)(l.nvN,{color:"ds.text.neutral.catchy",size:"medium",children:e("team_account_invoice_payment")})]})]})};var Li,Bi,Ri=n(83175);const zi=({isDisabled:e})=>{const[t,n]=(0,r.useState)(!1),{translate:a}=(0,y.Z)(),{loading:i,hasCreditCardPaymentMethod:s,last4DigitsFormatted:d,cardSvg:u,isExpired:_,expFormatted:m,pollUntilCardUpdate:p}=(0,x.C)({handleCardUpdate:(e,t)=>{e&&t&&(0,h.Kz)(new c.UserAddNewPaymentMethodEvent({flowStep:c.FlowStep.Complete}))}});return i?Li||(Li=(0,C.tZ)(o.ZX,{})):(0,C.BX)(l.Ejs,{gap:"16px",sx:{marginTop:"24px"},children:[(0,C.tZ)(l.nvN,{color:"ds.text.neutral.catchy",as:"h2",size:"large",children:a("team_account_invoice_payment_seats_heading")}),s?(0,C.BX)(l.T5p,{gridTemplateColumns:"1fr 1fr",sx:{width:"100%"},children:[(0,C.BX)(l.dDn,{sx:{width:"300px"},children:[(0,C.BX)(l.nvN,{color:"ds.text.neutral.standard",sx:{display:"flex",alignItems:"center"},children:[u,(0,C.tZ)("span",{style:{marginLeft:"10px"},children:"••••"}),(0,C.tZ)("span",{"data-testid":"card-last-four",style:{marginLeft:"3px"},children:d})]}),_?(0,C.tZ)(l.nvN,{color:l.colors.red00,sx:{marginTop:"8px",fontSize:14},children:a("manage_subscription_payment_section_expired_stripe")}):(0,C.tZ)(l.nvN,{color:"ds.text.neutral.standard",sx:{marginTop:"8px"},children:m?a("manage_subscription_payment_section_expiration_date",{date:m}):null})]}),(0,C.tZ)(l.dDn,{alignSelf:"center",children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:Bi||(Bi=(0,C.tZ)(o.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",onClick:()=>{p(),n(!0)},disabled:e,children:t?(0,C.tZ)(Ri.J,{b2c:!1,setPaymentLoading:n}):a("team_account_payment_edit_credit_card")})})]}):(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{children:[(0,C.tZ)(l.nvN,{color:"ds.text.neutral.quiet",size:"small",children:a("team_account_invoice_payment_seats_save_credit_card")}),(0,C.tZ)(l.nvN,{color:"ds.text.neutral.quiet",size:"small",children:a("team_account_invoice_payment_seats_subscription")})]}),(0,C.tZ)("div",{children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:()=>{(0,h.Kz)(new c.UserAddNewPaymentMethodEvent({flowStep:c.FlowStep.Start})),p(),n(!0)},children:t?(0,C.tZ)(Ri.J,{b2c:!1,setPaymentLoading:n}):a("team_account_payment_add_credit_card")})})]})]})};var Pi=n(909216);const Xi="billing--etj61dTqkE";var ji,Ui,qi;const Gi=({premiumStatusData:e,isDisabled:t})=>{var n;const[a,i]=r.useState(!1),{translate:l}=(0,y.Z)(),d=(0,De.Y)(),{loading:u,billingInformation:_,last4DigitsFormatted:m,cardSvg:p,isExpired:g,expFormatted:h,pollUntilCardUpdate:b}=(0,x.C)({handleCardUpdate:t=>{t&&(0,Pi.dV)(e,c.FlowStep.Complete)}});if(d.status!==s.rq.Success||!d.data||u)return ji||(ji=(0,C.tZ)(o.ZX,{}));const v=()=>(0,C.tZ)("div",{children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:Ui||(Ui=(0,C.tZ)(o.JO,{name:"ActionAddOutlined"})),layout:"iconLeading",onClick:()=>{b(),i(!0)},sx:{marginTop:"1em"},children:a?n||(n=(0,C.tZ)(Ri.J,{b2c:!1,setPaymentLoading:i})):l("team_account_payment_add_credit_card")})});return(0,C.BX)("div",{style:{marginTop:"24px"},children:[(0,C.tZ)(o.X6,{color:"ds.text.neutral.catchy",as:"h2",textStyle:"ds.title.section.medium",children:l("team_account_paymentmethod_heading")}),_?.billingType?m?(0,C.BX)("div",{className:"container--GmEeyXCXpH",children:[(0,C.BX)("div",{className:Ha,children:[(0,C.tZ)("div",{className:Xi,children:(0,C.BX)("div",{className:Xi,children:[p,(0,C.BX)(o.nv,{color:"ds.text.neutral.standard",children:[(0,C.tZ)("span",{style:{marginLeft:"10px"},children:"••••"}),(0,C.tZ)("span",{"data-testid":"card-last-four",style:{marginLeft:"3px"},children:m})]})]})}),g?(0,C.tZ)(o.nv,{color:"ds.text.danger.standard",sx:{marginBottom:"8px",fontSize:14},children:l("manage_subscription_payment_section_expired_stripe")}):(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",sx:{marginBottom:"8px"},children:h?l("manage_subscription_payment_section_expiration_date",{date:h}):null})]}),(0,C.tZ)("div",{className:Wa,children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:qi||(qi=(0,C.tZ)(o.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",onClick:()=>{b(),i(!0),(0,Pi.dV)(d.data,c.FlowStep.Start)},disabled:t,children:a?(0,C.tZ)(Ri.J,{b2c:!1,setPaymentLoading:i}):l("team_account_payment_edit_credit_card")})})]}):(0,C.BX)("div",{sx:{margin:"16px 0 24px"},children:[(0,C.tZ)("div",{children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:l("team_account_paymentmethod_payment_method_unknow")})}),(0,C.tZ)(v,{})]}):(0,C.BX)("div",{sx:{margin:"16px 0 24px"},children:[(0,C.tZ)("div",{children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:l("team_account_paymentmethod_no_payment_method")})}),(0,C.tZ)(v,{})]})]})},Fi=({handleGetPastReceipts:e})=>{const{translate:t}=(0,y.Z)();return(0,C.tZ)(l.Ejs,{sx:{marginTop:"16px",display:"flex",justifyContent:"center"},children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",icon:"DownloadOutlined",layout:"iconLeading",onClick:e,sx:{width:"100%"},children:t("team_account_teamplan_plan_download_billing_history")})})};var $i;const Vi={WRAPPER:{display:"flex",flexDirection:"column",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy"},BUY_DASHLANE_BUTTON:{marginTop:"20px",display:"flex",flexDirection:"row",flexWrap:"nowrap",justifyContent:"center",alignItems:"center",gap:"10px"}},Hi=({isRenewalStopped:e,onClickBuyDashlane:t,handleGetPastReceipts:n,usersToBeRenewedCount:a,discontinuedTrial:i})=>{var s;const{translate:d}=(0,y.Z)(),{loading:u,billingCountry:_}=w(),[m,b]=(0,r.useState)(!1),x=(0,se.C)(),v=(0,g.s)(),S=v?.nextBillingDetails,{isLoading:f,taxInformation:Z}=on({total:null!=(s=S?.amount)?s:0});if(u||!x||!S)return $i||($i=(0,C.tZ)(o.ZX,{mood:"brand"}));const T=x.isFreeTrial,D=0===x.daysLeftInTrial,k=S.amount,E=S.currency,I=x.spaceTier===p.lD.Team,N=(0,an.Z)(S.dateUnix),M=k/100,O=M&&a?M/a:0,L="US"===_?"team_account_teamplan_plan_total_with_tax":"team_account_teamplan_plan_total_with_vat",B=!f&&void 0!==Z?.amount&&Z?.amount>0,R=B&&k&&Z?.amount?(k+Z.amount)/100:void 0;return(0,C.BX)(C.HY,{children:[(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"12px",sx:si.CARD_BORDER,children:[T&&!i&&(0,C.BX)(l.Ejs,{sx:Vi.WRAPPER,children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",children:d("team_account_teamplan_plan_header_trial")}),(0,C.tZ)(l.Ejs,{sx:{margin:"16px 0px"},children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.specialty.spotlight.small",children:N?d.shortDate(N,hn.qG.LL):null})}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:N?d("team_account_teamplan_plan_copy_trial",{expireDate:d.shortDate(N,hn.qG.MMMM_D)}):null}),(0,C.BX)("div",{sx:Vi.BUY_DASHLANE_BUTTON,children:[(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",size:"medium",fullsize:!0,onClick:t,children:d("team_account_teamplan_plan_buy_dashlane")}),!x.isGracePeriod&&D?(0,C.tZ)(o.zx,{mood:"brand",intensity:"supershy",layout:"labelOnly",size:"medium",fullsize:!0,onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.ExtendTrial,clickOrigin:c.ClickOrigin.BillingInformation})),b(!0)},children:d("team_dashboard_extend_trial_button")}):null]})]}),!T&&!i&&(0,C.BX)(l.Ejs,{sx:Vi.WRAPPER,children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",children:d(e?"team_account_teamplan_plan_expiration_header":"team_account_teamplan_plan_header_annual")}),(0,C.tZ)(l.Ejs,{sx:{margin:"16px 0px"},children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.specialty.spotlight.small",className:"automation-tests-tac-billing",children:d.shortDate(N,hn.qG.LL)})}),e?(0,C.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:d("team_account_teamplan_plan_expiration_description",{expireDate:d.shortDate(N,hn.qG.LL)})}):(0,C.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:B?d(L,{numSeats:a,seatCost:O?d.price(E,O,{notation:"compact"}):null,totalCost:R?d.price(E,R):null}):d("team_account_teamplan_plan_copy",{numSeats:a,seatCost:O?d.price(E,O,{notation:"compact"}):null,totalCost:M?d.price(E,M,{notation:"compact"}):null})}),(0,C.tZ)(Fi,{handleGetPastReceipts:n})]}),i&&(0,C.BX)(l.Ejs,{sx:Vi.WRAPPER,children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.danger.standard",children:d("team_account_teamplan_plan_header_trial_discontinued")}),(0,C.tZ)(l.Ejs,{sx:{margin:"16px 0px"},children:(0,C.tZ)(o.nv,{color:"ds.text.danger.standard",textStyle:"ds.specialty.spotlight.small",children:d.shortDate(N,hn.qG.LL)})}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:d(I?"team_account_teamplan_plan_copy_trial_team_discontinued":"team_account_teamplan_plan_copy_trial_business_discontinued")}),(0,C.tZ)("div",{sx:Vi.BUY_DASHLANE_BUTTON,children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",size:"medium",fullsize:!0,onClick:t,children:d("team_account_teamplan_plan_buy_dashlane_trial_discontinued")})}),(0,C.tZ)(Fi,{handleGetPastReceipts:n})]})]}),m?(0,C.tZ)(A.XA,{initialDialog:A.s9.SURVEY}):null]})},Wi=()=>{const{translate:e}=(0,y.Z)();return(0,C.tZ)(di,{children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:e.markup("team_account_discontinued_downgrade_message_markup",{},{linkTarget:"_blank"})})})};var Yi,Ki,Qi,Ji,er,tr,nr;const ar={backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",flex:"1",overflow:"visible"},ir=({lee:e,planName:t,usersToBeRenewedCount:n,isWindowCollapsed:a,handleGetPastReceipts:i,onRequestTeamUpgrade:r})=>{const{translate:c}=(0,y.Z)(),d=(0,De.Y)(),u=(0,re.JS)(),_=(0,re.lZ)(),{loading:m,billingCountry:p}=w(),g=(0,ci.M)(),h=!t;if(d.status!==s.rq.Success||!d.data||u.status!==s.rq.Success||!u.data||!g||_.isLoading||m)return Yi||(Yi=(0,C.tZ)(o.ZX,{}));const b=u.data.b2bStatus?.currentTeam?.isRenewalStopped,x="invoice"===d.data.planType,v=!x&&"US"!==p,S=_.isTrial&&_.isTeamSoftDiscontinued;return(0,C.BX)(l.Ejs,{flexDirection:"column",role:"complementary",children:[(0,C.tZ)(o.X6,{textStyle:"ds.title.section.large",as:"h1",color:"ds.text.neutral.standard",sx:{mb:"32px"},children:c("team_account_heading_billing_information")}),(0,C.BX)(l.Ejs,{gap:"24px",children:[(0,C.tZ)(l.Ejs,{flexDirection:"column",sx:{maxWidth:"40em"},children:(0,C.BX)(l.Ejs,{sx:(0,o.jM)([si.CARD_BORDER,ar]),flexDirection:"column",children:[(0,C.tZ)(Ai,{lee:e}),Ki||(Ki=(0,C.tZ)(tn,{})),x?(0,C.BX)(C.HY,{children:[Qi||(Qi=(0,C.tZ)(Oi,{})),Ji||(Ji=(0,C.tZ)(tn,{})),(0,C.tZ)(zi,{isDisabled:h})]}):(0,C.tZ)(Gi,{premiumStatusData:d.data,isDisabled:h}),v?(0,C.BX)(C.HY,{children:[(0,C.tZ)("div",{sx:{marginBottom:"16px"}}),er||(er=(0,C.tZ)(tn,{})),tr||(tr=(0,C.tZ)(ba,{isInAccountSummary:!0}))]}):null]})}),(0,C.tZ)(l.k$b,{sx:{width:a?"40em":"416px"},children:(0,C.tZ)(Hi,{onClickBuyDashlane:r,handleGetPastReceipts:i,usersToBeRenewedCount:n,isRenewalStopped:b,discontinuedTrial:!!S})}),(0,C.tZ)(l.Ejs,{flexDirection:"column",sx:{maxWidth:"40em"},children:S?nr||(nr=(0,C.tZ)(Wi,{})):(0,C.tZ)(fi,{status:g.status})})]})]})};var rr=n(342868);const sr=({isOpen:e,lee:t,onClose:n})=>{const a=(0,r.useRef)(null),i=(0,r.useRef)(null),s=(0,r.useRef)(null),c=(0,r.useRef)(null),{translate:d}=(0,y.Z)(),{reportTACError:u}=K(),[_,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!0),h=Fa();if(!h)return null;const b=()=>{m(!1),n()},x=()=>{const e=(0,Ti.v0)(t.globalState);if(e)if(a.current?.value){b();try{(0,q.Yo)("https://ws1.dashlane.com/1/invoiceGeneration/generateTeamReceipt.pdf?"+(e=>{const t={...e,recipient:a.current?.value,company:i.current?.value,address:s.current?.value,vatNumber:c.current?.value};return rr.stringify(t)})(e))}catch(e){u(e)}}else m(!0);else u(new Error(Ci.N))},v=_?{feedback:{text:d("team_account_past_receipts_dialog_recipient_is_required")},error:!0}:{};return(0,C.BX)(o.Vq,{title:d("team_account_past_receipts_dialog_title"),closeActionLabel:d("_common_dialog_dismiss_button"),isOpen:e,onClose:b,actions:{primary:{children:d("team_account_past_receipts_dialog_download_button"),onClick:x,disabled:p}},children:[(0,C.tZ)(o.nv,{children:d("team_account_past_receipts_dialog_instructions")}),(0,C.BX)(l.T5p,{as:"form",onSubmit:x,gap:"1em",children:[(0,C.tZ)(o.qo,{label:d("team_account_past_receipts_dialog_recipient")+" *",placeholder:d("team_account_past_receipts_dialog_recipient_hint"),onChange:()=>{a.current?.value?(g(!1),m(!1)):(g(!0),m(!0))},ref:a,...v}),(0,C.tZ)(o.qo,{label:d("team_account_past_receipts_dialog_company"),value:h,placeholder:d("team_account_past_receipts_dialog_company_hint"),ref:i}),(0,C.tZ)(o.qo,{label:d("team_account_past_receipts_dialog_billing_address"),placeholder:d("team_account_past_receipts_dialog_billing_address_hint"),ref:s}),(0,C.tZ)(o.qo,{label:d("team_account_past_receipts_dialog_vat"),placeholder:d("team_account_past_receipts_dialog_vat_hint"),ref:c})]})]})},or={padding:"8px",backgroundColor:"ds.container.expressive.brand.quiet.idle",borderRadius:"8px",margin:"auto"},lr=({cardTitle:e,cardDescription:t,iconName:n})=>(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.dDn,{sx:or,children:(0,C.tZ)(o.JO,{name:n,size:"large",color:"ds.text.brand.standard"})}),(0,C.BX)(l.dDn,{children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:e}),(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"4px"},children:t})]})]});var cr,dr,ur;const _r={marginTop:"16px","&:hover":{cursor:"pointer",borderWidth:"2px",borderColor:"ds.border.brand.standard.hover"}},mr={width:"100%",padding:"20px 16px"},pr=({handleClose:e,openUpgradeDialog:t})=>{const[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:c}=(0,y.Z)(),{loading:d,hasCreditCardPaymentMethod:u,isExpired:_,pollUntilCardUpdate:m}=(0,x.C)({handleCardUpdate:t}),p=u?Ri.A.REPLACE:Ri.A.ADD,g=cr||(cr=(0,C.tZ)(o.zx,{intensity:"supershy",size:"large",layout:"iconOnly",icon:(0,C.tZ)(o.JO,{name:"ArrowRightOutlined",color:"ds.text.neutral.standard"})}));return d?dr||(dr=(0,C.tZ)(o.ZX,{})):(0,C.BX)(o.Vq,{isOpen:!0,closeActionLabel:c("_common_dialog_dismiss_button"),onClose:e,title:c("team_payment_method_dialog_buy_seats"),"aria-describedby":"dialogContent",children:[(0,C.tZ)(o.nv,{children:c("team_payment_method_dialog_title")}),u?(0,C.tZ)(l.Zbd,{sx:_r,onClick:()=>{_?(m(),s(!0)):t()},children:(0,C.BX)(l.T5p,{gap:"12px",gridTemplateColumns:"1fr 60px",alignItems:"center",sx:mr,children:[ur||(ur=(0,C.tZ)(l.dDn,{children:(0,C.tZ)(b.I,{b2b:!0,hideTitle:!0,hideUpdateButton:!0,displayModifiedCreditCardView:!0})})),(0,C.tZ)(l.dDn,{sx:{margin:"auto"},children:_&&i?(0,C.tZ)(o.zx,{intensity:"supershy",size:"large",children:(0,C.tZ)(Ri.J,{b2c:!1,setPaymentLoading:s,mode:Ri.A.UPDATE})}):g})]})}):null,(0,C.tZ)(l.Zbd,{sx:_r,onClick:()=>{m(),a(!0)},children:(0,C.BX)(l.T5p,{gap:"12px",gridTemplateColumns:"40px 1fr 60px",sx:mr,children:[(0,C.tZ)(lr,{cardTitle:c(u?"team_payment_method_dialog_another_credit_card":"team_payment_method_dialog_credit_card"),cardDescription:c(u?"team_payment_method_dialog_replace_credit_card":"team_payment_method_dialog_secondary_payment"),iconName:"ItemPaymentOutlined"}),(0,C.tZ)(l.dDn,{sx:{margin:"auto"},children:n?(0,C.tZ)(o.zx,{intensity:"supershy",size:"large",children:(0,C.tZ)(Ri.J,{b2c:!1,setPaymentLoading:a,mode:p})}):g})]})}),(0,C.tZ)(l.Zbd,{sx:_r,onClick:()=>(0,q.Yo)(ie.i1),children:(0,C.BX)(l.T5p,{gap:"12px",gridTemplateColumns:"40px 1fr 60px",sx:mr,children:[(0,C.tZ)(lr,{cardTitle:c("team_account_invoice_payment"),cardDescription:c("team_payment_method_dialog_support_team"),iconName:"ItemTaxNumberOutlined"}),(0,C.tZ)(l.dDn,{sx:{margin:"auto"},children:g})]})})]})};var gr=n(717676);const hr=54999,br="sales@dashlane.com",yr="leeloo_teamplan_starter",xr="leeloo_teamplan_business",vr="leeloo_teamplan_team",Sr=e=>e>hr;var fr=n(411538);const Zr=({isComputing:e,className:t,price:n})=>{const a=e?(0,C.tZ)(fr.Z,{size:16,containerStyle:{display:"inline-block",position:"relative"}}):n;return(0,C.tZ)("span",{className:t,children:a})},Cr=({billingDetails:e,additionalSeatsDetails:t})=>{var n,a;const{translate:i}=(0,y.Z)(),r=e.additionalSeats.seatsCount,s=null!=(n=e.additionalSeats.taxes)?n:0,o=i.price(e.currency,s/100),l=s>0,c=e.renewal.value+(null!=(a=e.renewal.taxes)?a:0),d=i.price(e.currency,c/100),u=100*t.reduce(((e,t)=>e+t.costPerSeat*t.numberOfSeats),0),_=i.price(e.currency,u/100),m=u-e.additionalSeats.value,p=u+s-m;return{additionalSeatsCount:r,additionalSeatsTaxesTranslation:o,hasTax:l,renewalTotalPrice:d,tierPriceTranslation:_,proratedDiscountTranslation:i.price(e.currency,m/100),hasProratedDiscount:m>0,dueTodayTranslation:i.price(e.currency,p/100)}};var Tr,Dr,kr,Er,wr;const Ir={display:"flex",margin:"24px 0",color:"ds.text.neutral.standard"},Nr=({label:e,labelSx:t,value:n})=>(0,C.BX)(l.Ejs,{sx:Ir,children:[e?(0,C.tZ)(l.k$b,{flex:"1",sx:{...t},children:e}):null,n?(0,C.tZ)(l.k$b,{flex:"0",children:n}):null]}),Ar=({nextBillingDate:e,billingDetails:t,dueNowTranslation:n,seatCountLabel:a,totalSeatCount:i,onAdditionalSeatCountChange:s,isComputingBilling:c,additionalSeatsDetails:d,planType:u,billingCountry:_,initialAdditionalSeatCount:m})=>{const{translate:p}=(0,y.Z)(),{additionalSeatsCount:g,additionalSeatsTaxesTranslation:h,hasTax:v,renewalTotalPrice:S,tierPriceTranslation:f,proratedDiscountTranslation:Z,hasProratedDiscount:T}=Cr({billingDetails:t,additionalSeatsDetails:d}),{pollUntilCardUpdate:D}=(0,x.C)({}),[k,E]=(0,r.useState)(!1),w="US"===_?"team_account_teamplan_upgrade_tax":"team_account_teamplan_vat",I="invoice"===u?"team_account_teamplan_upgrade_invoice_renewal_price":v?"US"===_?"team_account_teamplan_upgrade_renewal_tax_price":"team_account_teamplan_upgrade_renewal_vat_price":"team_account_teamplan_upgrade_renewal_price";return(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.Ejs,{sx:{padding:"28px 0",fontSize:4,fontWeight:"bold",color:"ds.text.neutral.catchy"},children:(0,C.tZ)(_n.w,{inputWidth:"66px",label:a,id:"numberOfSeats",defaultValue:m,minValue:1,onChange:s})}),Tr||(Tr=(0,C.tZ)(tn,{})),(0,C.tZ)(Nr,{label:p("team_account_teamplan_upgrade_premium_number_of_seats"),value:i}),(0,C.tZ)(Nr,{label:p("team_account_teamplan_upgrade_new_seat",{count:g}),value:f}),v&&(0,C.tZ)(Nr,{label:p(w),value:h}),T&&(0,C.tZ)(Nr,{label:(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.nvN,{children:p("team_account_teamplan_changeplan_order_summary_prorated_discount")}),(0,C.tZ)(l.ua7,{content:p("team_account_teamplan_changeplan_order_summary_prorated_discount_tooltip"),children:(0,C.tZ)(l.uMt,{size:16,color:l.colors.grey00})})]}),labelSx:{display:"flex",alignItems:"center"},value:Z}),(0,C.BX)(C.HY,{children:[Dr||(Dr=(0,C.tZ)(tn,{})),(0,C.tZ)(l.nvN,{sx:{marginTop:"24px",fontSize:"18px"},children:p("team_payment_method_dialog_credit_card")}),(0,C.BX)(l.Ejs,{sx:{...Ir,borderWidth:"1px",borderStyle:"solid",borderColor:"ds.border.neutral.quiet.idle",borderRadius:"4px"},children:[(0,C.tZ)(l.k$b,{flex:"1",sx:{padding:"16px"},children:kr||(kr=(0,C.tZ)(b.I,{b2b:!0,hideTitle:!0,hideUpdateButton:!0,displayModifiedCreditCardView:!0}))}),(0,C.tZ)(l.k$b,{flex:"0",sx:{margin:"auto 0",paddingRight:"12px"},children:(0,C.tZ)(o.zx,{icon:Er||(Er=(0,C.tZ)(o.JO,{name:"ActionEditOutlined"})),layout:"iconLeading",intensity:"supershy",onClick:()=>{D(),E(!0)},children:k?(0,C.tZ)(Ri.J,{b2c:!1,setPaymentLoading:E,mode:Ri.A.UPDATE}):p("team_account_name_edit_label")})})]})]}),(0,C.tZ)(l.Ejs,{sx:Ir,children:(0,C.tZ)(o.ke,{title:p(I,{totalPrice:S,totalSeat:i,date:p.shortDate(e,hn._T.LL)})})}),wr||(wr=(0,C.tZ)(tn,{})),(0,C.BX)(l.Ejs,{sx:{display:"flex",marginTop:"24px",fontSize:4},children:[(0,C.tZ)(l.k$b,{flex:"1",children:p("team_account_teamplan_upgrade_due_now")}),(0,C.tZ)(Zr,{isComputing:c,price:n,className:"totalAmount--BaEFEdvow1"})]})]})},Mr=(e,t)=>t.startMembers-e.startMembers,Or=(e,t,n)=>{if(!n)return[];const a=n.slice(0).sort(Mr);if(0!==a[a.length-1].startMembers)throw new Error("getAdditionalSeatsCostDetails:: missing tier one in price ranges");if(e<0||t<0)throw new Error("getAdditionalSeatsCostDetails:: number of licences cannot be negative");return a.reduce(((e,t)=>({membersRangeEnd:n,costDetails:a},i)=>{const r=i.startMembers;if(r<=t&&n>e&&t>e){const s=Math.max(Math.max(r-1,e),0),o=Math.min(t,n-1);a.unshift({costPerSeat:i.price/100,numberOfSeats:o-s})}return{membersRangeEnd:r,costDetails:a}})(e,t),{membersRangeEnd:Number.MAX_VALUE,costDetails:[]}).costDetails},Lr=(0,r.forwardRef)((function({nextBillingDetails:e,billingDetails:t,isComputingBilling:n,onSeatCountChange:a,numberOfCurrentPaidSlots:i,numberOfCurrentUsedSlots:s,currentPlanPriceRanges:l,planType:c,billingCountry:d,initialNumberOfNewSeats:u},_){var m;const[p,g]=(0,r.useState)(u),[h,b]=(0,r.useState)(!1),{translate:x}=(0,y.Z)();(0,r.useImperativeHandle)(_,(()=>({additionalSeatCount:p})));const v=i+p,S=(0,an.Z)(e.dateUnix),f=Or(i,t.renewal.seatsCount,l),Z=null!=(m=t.additionalSeats.taxes)?m:0,T=t.additionalSeats.value+Z,D=h?"-":x.price(t.currency,T/100),k=x("team_account_teamplan_upgrade_premium_number_of_additional_seats"),E=h?x("team_account_teamplan_upgrade_premium_buy_more_seats_than_cap",{seatCap:hr,salesEmail:br}):p<1?x("team_account_teamplan_upgrade_premium_buy_more_seats_when_premium",{count:1}):s>v?x("team_account_teamplan_upgrade_premium_below_used_seat_count",{usedSeatCount:s}):null;return(0,C.BX)(C.HY,{children:[E?(0,C.tZ)(o.ke,{className:"errorToaster--MU18Q0SFxy",title:E,mood:"danger"}):null,(0,C.tZ)(Ar,{nextBillingDate:S,billingDetails:t,dueNowTranslation:D,seatCountLabel:k,totalSeatCount:v,onAdditionalSeatCountChange:e=>{const t=e<0,n=e>hr;b(n),g(e),n||t||a(e)},isComputingBilling:n,additionalSeatsDetails:f,planType:null!=c?c:"",billingCountry:d,initialAdditionalSeatCount:u})]})})),Br=Lr;var Rr;const zr=()=>{const{translate:e}=(0,y.Z)();return(0,C.tZ)(l.u_l,{isOpen:!0,onClose:()=>{},children:(0,C.BX)(l.Ejs,{alignItems:"center",flexDirection:"column",justifyContent:"center",sx:{width:"100vw",height:"100vh",backgroundColor:l.colors.dashGreen06},children:[Rr||(Rr=(0,C.tZ)(o.ZX,{size:"small"})),(0,C.BX)(l.Ejs,{alignItems:"center",flexDirection:"column",justifyContent:"center",gap:"6px",sx:{paddingTop:"22px"},children:[(0,C.tZ)(l.nvN,{size:"medium",color:l.colors.grey00,children:e("team_account_addseats_processing_copy_line_1")}),(0,C.tZ)(l.nvN,{size:"medium",color:l.colors.grey00,children:e("team_account_addseats_processing_copy_line_2")})]})]})})};var Pr=n(169340);const Xr=e=>{const{reportTACError:t}=K(),[n,a]=(0,r.useState)({renewal:{seatsCount:0,value:0,taxes:0},additionalSeats:{seatsCount:0,value:0,taxes:0},currency:"usd"}),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(0),[c,d]=(0,r.useState)(0),u=(0,I.debounce)((n=>{(async n=>{try{var i;const t=await fe.C.computePlanPricing({seats:n});if(!t.success)return;const o={renewal:{seatsCount:(r=t.data).renewal.seatsCount,value:r.renewal.price.value,taxes:r.renewal.price.taxes},additionalSeats:{seatsCount:r.additionalSeats.seatsCount,value:r.additionalSeats.price.value,taxes:r.additionalSeats.price.taxes},currency:r.renewal.price.currency};if(null!==e&&e()!==o.additionalSeats.seatsCount)return;const c=o.additionalSeats.value,u=null!=(i=o.additionalSeats.taxes)?i:0;l(c),d(u),a(o),s(!1)}catch(e){const n=new Error((0,Pr.i)(e));t(n)}var r})(n)}),500);return{billingDetails:n,isComputingBilling:i,amountToPay:o,amountToTax:c,onSeatCountChange:e=>{u(e),s(!0)}}};var jr;const Ur=({onUpgradeSuccess:e,nextBillingDetails:t,numberOfCurrentPaidSlots:n,numberOfCurrentUsedSlots:a,onRequestClose:i,planTier:s,prefilledNumberOfSeatsToBuy:l})=>{const u=(0,r.useRef)(null),[m,g]=(0,r.useState)(!0),[b,x]=(0,r.useState)(!1),{translate:v}=(0,y.Z)(),{reportTACError:S}=K(),f=(0,d.k)(_.o,"getTeamBillingInformation"),{addSeats:Z}=(0,$.u)(_.o),T=(0,re.JS)(),{loading:D,billingCountry:k}=w(),E=f.status===Te.rq.Success?f.data.planDetails.priceRanges:void 0,I=T.status===Te.rq.Success?T.data.b2bStatus?.currentTeam?.teamInfo.planType:void 0,N=null!=l?l:1,A=(0,r.useCallback)((()=>{var e;return null!=(e=u?.current?.additionalSeatCount)?e:N}),[]),M=null===u||f.status===Te.rq.Loading||T.status===Te.rq.Loading||D||void 0===k,{billingDetails:O,isComputingBilling:L,onSeatCountChange:B}=Xr(A),R=function(e,t){switch(e){case p.lD.Starter:return t(yr);case p.lD.Team:return t(vr);case p.lD.Business:return t(xr);default:throw new Error("Cannot retrieve default key")}}(s,v);(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacAccountBuy)}),[]),(0,r.useEffect)((()=>{if(f.status===Te.rq.Error){const e=new Error("Error retrieving TeamBillingInformation to update price ranges");S(e)}}),[f]),(0,r.useEffect)((()=>{B(A())}),[A]);const z=Or(n,O.renewal.seatsCount,E);if(M)return null;const P=(0,C.BX)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"flex-end",maxWidth:"100%"},children:[(0,C.tZ)(o.zx,{intensity:"quiet",mood:"neutral",size:"medium",onClick:i,sx:{marginRight:"8px"},children:v("team_account_teamplan_upgrade_premium_cancel")}),(0,C.tZ)(o.zx,{size:"medium",onClick:async()=>{g(!1),x(!0),"success"===(await Z({seats:A()})).tag&&e(z,O)},children:v("team_account_teamplan_upgrade_buy_seat",{count:A()})})]});return(0,C.BX)(C.HY,{children:[b?jr||(jr=(0,C.tZ)(zr,{})):null,m?(0,C.tZ)(gr.o,{showCloseIcon:!0,footer:P,title:v("team_account_teamplan_upgrade_add_seats_title",{plan:R}),isOpen:!0,onRequestClose:i,children:(0,C.tZ)(Br,{ref:u,planType:I,nextBillingDetails:t,billingDetails:O,isComputingBilling:L,onSeatCountChange:B,numberOfCurrentPaidSlots:n,numberOfCurrentUsedSlots:a,currentPlanPriceRanges:E,billingCountry:k,initialNumberOfNewSeats:N})}):null]})};var qr;const Gr=({label:e,value:t,...n})=>(0,C.BX)(l.Ejs,{justifyContent:"flex-end",sx:{display:"flex",justifyContent:"flexEnd"},...n,children:[e?(0,C.tZ)(l.k$b,{flex:"1",sx:{display:"flex",alignItems:"center"},children:e}):null,t?(0,C.tZ)(l.k$b,{sx:{display:"flex",alignItems:"center"},children:t}):null]}),Fr=({billingDetails:e,additionalSeatsDetails:t})=>{const{translate:n}=(0,y.Z)(),{additionalSeatsCount:a,additionalSeatsTaxesTranslation:i,hasTax:r,tierPriceTranslation:s,proratedDiscountTranslation:c,hasProratedDiscount:d,dueTodayTranslation:u}=Cr({billingDetails:e,additionalSeatsDetails:t});return(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"32px",sx:S,children:[(0,C.tZ)(Gr,{alignItems:"end",label:(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:n("team_account_addseats_success_order_summary_header")}),value:(0,C.tZ)(o.nv,{textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:(0,sa.Z)(new Date,"MM/dd/yyyy")})}),(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",children:[(0,C.tZ)(Gr,{label:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_teamplan_upgrade_new_seat",{count:a})}),value:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",children:s})}),r?(0,C.tZ)(Gr,{label:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_tax")}),value:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",children:i})}):null,d?(0,C.tZ)(Gr,{label:(0,C.BX)(l.Ejs,{alignItems:"center",gap:"5px",children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_prorated_discount")}),(0,C.tZ)(l.ua7,{content:n("team_account_addseats_success_order_summary_prorated_discount_tooltip"),children:qr||(qr=(0,C.tZ)(l.uMt,{size:16,color:"ds.text.neutral.standard"}))})]}),value:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",children:c})}):null,(0,C.tZ)("div",{style:{width:"100%",borderColor:o.O9.lightTheme.ds.border.neutral.quiet.idle,borderWidth:"1px",borderStyle:"solid",borderBottom:"0",margin:"0"}}),(0,C.tZ)(Gr,{label:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:n("team_account_addseats_success_order_summary_total")}),value:(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",color:"ds.text.neutral.standard",children:u})})]})]})},$r=({isBusiness:e,additionalSeats:t,showInviteUsersButton:n=!0,onGetPastReceipts:a})=>{const{routes:r}=(0,i.Xo)(),{translate:s}=(0,y.Z)();return(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"40px",sx:v,children:[(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[e?(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:s("team_account_addseats_success_newseats_header_business",{count:t})}):(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:s("team_account_addseats_success_newseats_header_team",{count:t})}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:s("team_account_addseats_success_newseats_body")})]}),(0,C.BX)(l.Ejs,{gap:"8px",children:[n?(0,C.tZ)(i.rU,{to:r.teamMembersRoutePath,children:(0,C.tZ)(o.zx,{onClick:()=>{(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!0,isResend:!1}))},mood:"brand",children:s("team_account_addseats_success_newseats_invite_users_cta")})}):null,a?(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:a,children:s("team_account_addseats_success_newseats_billing_history_cta")}):(0,C.tZ)(o.zx,{as:i.rU,to:r.teamAccountRoutePath,mood:"neutral",intensity:"quiet",children:s("team_account_addseats_success_newseats_go_to_account_summary_cta")})]})]})};var Vr;const Hr=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)(l.Ejs,{flexWrap:"nowrap",gap:"16px",sx:v,children:[Vr||(Vr=(0,C.tZ)(l.Ejs,{sx:f,children:(0,C.tZ)(o.JO,{name:"GroupOutlined",color:"ds.text.neutral.standard"})})),(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",sx:{flexGrow:"1"},children:[(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",children:[(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_friends_family_header")}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:e("team_account_addseats_success_friends_family_body")})]}),(0,C.tZ)("a",{href:"https://support.dashlane.com/hc/articles/360013369820-Dashlane-Friends-Family-plan",target:"_blank",rel:"noopener noreferrer",children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",children:e("team_account_addseats_success_friends_family_learn_more_cta")})})]})]})};var Wr;const Yr=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)(l.Ejs,{flexWrap:"nowrap",gap:"16px",sx:v,children:[Wr||(Wr=(0,C.tZ)(l.Ejs,{sx:f,children:(0,C.tZ)(o.JO,{name:"GroupOutlined",color:"ds.text.neutral.standard"})})),(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"8px",sx:{flexGrow:"1"},children:[(0,C.tZ)(o.X6,{as:"h2",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_idp_nextstep_title")}),(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_account_addseats_success_idp_nextstep_subtitle")}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:e("team_account_addseats_success_idp_nextstep_description")}),(0,C.tZ)(o.Qj,{isExternal:!0,href:ie.hP,children:e("team_account_addseats_success_idp_nextstep_see_setup_guide_link")})]})]})};var Kr,Qr,Jr;const es=({planTier:e,lastBillingDetails:t,lastAdditionalSeatsDetails:n,onGetPastReceipts:a,onNavigateBack:i})=>{const{translate:s}=(0,y.Z)(),[u,_]=(0,r.useState)(n),[m,g]=(0,r.useState)(t),{additionalSeatsCount:b}=Cr({billingDetails:m,additionalSeatsDetails:u}),x=(0,me.o)(Qa.w.EcommerceWebIdPErrorsPhase2),v=(0,d.k)(Oe.t,"getIdPFailedProvisioningsData"),S=null===x||v.status===Te.rq.Loading,f=x&&v.status===Te.rq.Success&&!!v.data?.nbOfFailedCreations,Z=(0,C.tZ)(o.zx,{mood:"neutral",intensity:"supershy",onClick:i,layout:"iconLeading",icon:"ArrowLeftOutlined",children:s("_common_action_back")}),D=e===p.lD.Business,{setNavBarChildren:k}=(0,r.useContext)(Tt);return(0,r.useEffect)((()=>(k(Z),(0,h.Nc)(c.PageView.TacOrderConfirmation),()=>{k(null),i()})),[]),(0,r.useEffect)((()=>{g(t),_(n)}),[t,n]),(0,C.tZ)(l.Ejs,{flexDirection:"column",gap:"32px",sx:{padding:"32px",flexWrap:"nowrap"},children:(0,C.BX)(l.Ejs,{gap:"16px",sx:{flexWrap:"nowrap"},children:[(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",sx:{flexGrow:"2",maxWidth:"632px"},children:[(0,C.tZ)($r,{onGetPastReceipts:a,isBusiness:D,additionalSeats:b,showInviteUsersButton:!S&&!f}),D&&!S?f?Kr||(Kr=(0,C.tZ)(Yr,{})):Qr||(Qr=(0,C.tZ)(Hr,{})):null]}),(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"16px",sx:{flexGrow:"1"},children:[(0,C.tZ)(Fr,{billingDetails:m,additionalSeatsDetails:u}),Jr||(Jr=(0,C.tZ)(T,{}))]})]})})},ts=()=>document.documentElement.clientWidth<1371,ns=({lee:e})=>{var t;const n=(0,j.B)(),a=(0,re.JS)(),i=(0,se.C)(),s=(0,g.s)(),{search:o}=(0,we.TH)(),[l,d]=(0,r.useState)(ts()),[u,_]=(0,r.useState)(!1),[m,b]=(0,r.useState)(!1),[y,x]=(0,r.useState)(!1),[v,S]=(0,r.useState)(!1),[f,Z]=(0,r.useState)(),[T,D]=(0,r.useState)(),k=a.status===Te.rq.Success?a.data.b2bStatus?.currentTeam?.planName:void 0,E=!(a.status!==Te.rq.Success||!a.data)&&"invoice"===a.data.b2bStatus?.currentTeam?.teamInfo.planType,w=(0,r.useRef)(!1);(0,r.useEffect)((()=>{w.current=E}),[E]),(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacAccount)}),[]);const N=e=>{var t,n,a,i;"open"===e&&((0,h.Kz)(new c.UserBuySeatEvent({flowStep:c.FlowStep.Start,hasPromo:!1,initialSeatCount:null!=(t=s?.seatsNumber)?t:0,priceAmountCents:null!=(n=s?.nextBillingDetails.amount)?n:0,priceCurrencyCode:c.PriceCurrencyCode[null!=(a=s?.nextBillingDetails.currency)?a:""],purchasedSeatCount:null!=(i=s?.seatsNumber)?i:0})),x(!0),b(!1),S(!1)),"close"===e&&((0,h.Nc)(c.PageView.TacAccount),x(!1),S(!1))},A=()=>{w.current?b(!0):N("open")};if((0,r.useEffect)((()=>{if(o?.includes("showSeatsDialog")){const e=setTimeout((()=>{A()}),500);return()=>clearTimeout(e)}}),[]),(0,r.useEffect)((()=>{const e=(0,I.throttle)((()=>{const e=ts();e&&!l?d(!0):!e&&l&&d(!1)}),100);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),[l]),!i||!s||a.status===Te.rq.Loading)return null;const{lastBillingDateUnix:M,nextBillingDetails:O,spaceTier:L,seatsNumber:B,usersToBeRenewedCount:R}=s,z=a.status===Te.rq.Success&&!!a.data.b2bStatus?.currentTeam?.teamMembership.isTeamAdmin,{isFreeTrial:P}=i,X=e=>{const t=L===p.lD.Team?"team":"business",a=`${ie.ub}?plan=${t}&subCode=${n?.subscriptionCode}`;(0,h.Kz)(new c.UserClickEvent({button:c.Button.BuyDashlane,clickOrigin:e})),(0,q.Yo)(a)},U=()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.DownloadBillingHistory})),(0,h.Nc)(c.PageView.TacAccountCustomizeInvoice),_(!0)},G=null!=(t=new URLSearchParams(o).get("seatsToBuy"))?t:"";let F=parseInt(G,10);return isNaN(F)&&(F=void 0),(0,C.BX)("div",{sx:si.ACCOUNT_PAGE,children:[v?null:(0,C.BX)(C.HY,{children:[(0,C.tZ)(li,{onRequestBuyMoreSeats:()=>{(0,h.Kz)(new c.UserClickEvent({clickOrigin:c.ClickOrigin.AccountStatus,button:c.Button.BuySeats})),A()},onRequestTeamUpgrade:X,seatsNumber:B,isWindowCollapsed:l,hasFullAdminAccess:z}),m?(0,C.tZ)(pr,{openUpgradeDialog:()=>N("open"),handleClose:()=>b(!1)}):null,(0,C.tZ)(ir,{lee:e,handleGetPastReceipts:U,onRequestTeamUpgrade:()=>{P?X(c.ClickOrigin.BillingInformation):A()},planName:k,usersToBeRenewedCount:R,isWindowCollapsed:l})]}),y?(0,C.tZ)(Ur,{nextBillingDetails:O,numberOfCurrentPaidSlots:B,numberOfCurrentUsedSlots:R,onUpgradeSuccess:(e,t)=>{Z(e),D(t),x(!1),S(!0)},onRequestClose:()=>N("close"),planTier:L,prefilledNumberOfSeatsToBuy:F},M):null,(0,C.tZ)(sr,{lee:e,onClose:()=>{(0,h.Nc)(c.PageView.TacAccount),_(!1)},isOpen:u}),v&&f&&T?(0,C.tZ)(es,{planTier:L,lastAdditionalSeatsDetails:f,lastBillingDetails:T,onGetPastReceipts:U,onNavigateBack:()=>{S(!1),Z(void 0),D(void 0)}}):null]})};var as=n(700397),is=n(439619),rs=n(806135),ss=n(80237),os=n(276376);const ls=(e,t)=>[e.url,...e.subPaths?e.subPaths.map((t=>`${e.url}${t}`)):[]].includes(t),cs={TITLE:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"32px"},TAB:{width:"auto",whiteSpace:"nowrap",color:"ds.text.neutral.standard !important",backgroundColor:"ds.container.expressive.neutral.supershy.idle !important","&:hover, &:active":{backgroundColor:"ds.container.expressive.neutral.supershy.hover !important"}},DISABLED_TAB:{pointerEvents:"none",color:"ds.text.oddity.disabled"},SELECTED_TAB:{backgroundColor:"ds.container.expressive.neutral.supershy.active !important"}},ds=({title:e,titleBadge:t,subtitle:n,tabs:a=[],extraInfo:r,hasInfobox:s})=>{const{pathname:c}=(0,i.TH)();return e||a.length?(0,C.BX)("nav",{className:s?void 0:"tabMenuContainer--y2MfbHSdck",children:[e?(0,C.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:(0,C.BX)("span",{sx:cs.TITLE,children:[e,t]})}):null,n?(0,C.tZ)(o.nv,{as:"h2",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"32px",a:{fontWeight:600}},children:n}):null,null!=r?r:null,a.length?(0,C.tZ)(l.G8v,{children:a.map((e=>(0,C.tZ)(l.h2L,{label:e.label,notification:e.notifications,selected:ls(e,c),sx:(0,o.jM)([cs.TAB,e.isDisabled?cs.DISABLED_TAB:{},ls(e,c)?cs.SELECTED_TAB:{}]),as:t=>(0,C.tZ)(i.OL,{to:e.url,...t})},e.label)))}):null]}):null},us=()=>{var e;const{translate:t}=(0,y.Z)(),n=(0,j.B)(),a=`${ie.ub}?plan=business&subCode=${null!=(e=n?.subscriptionCode)?e:""}`;return(0,C.tZ)(o.ke,{title:t("team_activity_business_infobox_title"),description:t("team_activity_business_infobox_description"),size:"large",actions:[(0,C.tZ)(o.zx,{as:"a",href:a,rel:"noopener noreferrer",target:"_blank",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({clickOrigin:c.ClickOrigin.BannerActivityLogPaywall,button:c.Button.UpgradeBusinessTier}))},children:t("team_account_teamplan_plan_buy_dashlane")},"buyDashlane")],sx:{marginBottom:"32px"}})},_s=()=>{const{translate:e}=(0,y.Z)(),t=(0,$.u)(Oe.t);return(0,C.tZ)(o.ke,{title:e("team_activity_logs_infobox_title"),description:e("team_activity_logs_infobox_description"),size:"large",actions:[(0,C.tZ)(o.zx,{intensity:"quiet",onClick:()=>{t.markActivityLogsInfoboxSeen()},children:e("team_activity_logs_infobox_confirm")},"dismiss")],sx:{marginBottom:"32px"}})};var ms,ps;const gs=(0,r.memo)((({title:e})=>{const{translate:t}=(0,y.Z)(),{routes:n}=(0,os.Xo)(),a=(0,s.qr)({queryConfig:{query:fe.C.getAccountRecoveryRequestCount},liveConfig:{live:fe.C.liveAccountRecoveryRequestCount}},[]),i=(0,Ie.h)(),r=(0,rs.S)(),o=(()=>{const e=(0,rs.S)(),t=(0,se.C)(),n=(0,d.k)(Oe.t,"hasSeenActivityLogsInfobox"),a=(0,me.o)("monetization_extension_activity_logs_repackage"),i=(0,me.o)("monetization_extension_trial_activity_logs"),r=!e?.activityLog.enabled;if(!t||n.status!==s.rq.Success)return null;const o=a&&r&&!n.data,l=i&&t.isFreeTrial?ms||(ms=(0,C.tZ)(us,{})):o?ps||(ps=(0,C.tZ)(_s,{})):void 0;return{activityInfobox:l,hasInfobox:!!l}})(),l=!r?.activityLog.enabled,c=a.status===s.rq.Success&&a.data,u=l?t("team_activity_paywall_header"):t.markup("team_activity_header_subtitle_markup",{},{linkTarget:"_blank"});return(0,C.tZ)(ds,{title:e,subtitle:u,tabs:(()=>{const e=[];return e.push({label:t("team_activity_header_tab_activity_logs"),url:`${n.teamActivityRoutePath}/recent`}),i.status===s.rq.Success&&i.data&&e.push({label:t("team_activity_header_tab_mpr_requests"),url:`${n.teamActivityRoutePath}/requests`,notifications:c||0}),e})(),extraInfo:o?.activityInfobox,hasInfobox:o?.hasInfobox})})),hs=({header:e,children:t})=>(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",padding:"32px",gap:"16px"},children:[e,t]}),bs={ACTIVITY_PANEL:{display:"inline-block",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"24px 32px",borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",flex:"1"}},ys=({isLoading:e,children:t})=>{const{translate:n}=(0,y.Z)();return(0,C.tZ)(hs,{header:(0,C.tZ)(gs,{title:n("team_activity_header_title")}),children:e?(0,C.tZ)(fr.Z,{containerStyle:{minHeight:240}}):(0,C.tZ)("div",{sx:bs.ACTIVITY_PANEL,children:t})})};var xs=n(973183),vs=n(354760);const Ss=({text:e})=>{if(!e)return null;const t=e.split("**");return 1===t.length?(0,C.tZ)("span",{children:e}):(0,C.tZ)("span",{children:t.map(((e,t)=>t%2==1?(0,C.tZ)("strong",{children:e},`${e}-${t}`):e))})};var fs=n(755920);const Zs=Object.values(fs.z),Cs="team_audit_log_user_private_collection_renamed",Ts="team_audit_log_user_imported_credentials_one",Ds="team_audit_log_user_imported_credentials_many",ks={[fs.z.UserInvited]:(e,t)=>t("team_audit_log_user_invited",{email:`**${e?.properties?.target_login}**`}),[fs.z.UserReinvited]:(e,t)=>t("team_audit_log_user_reinvited",{email:`**${e?.properties?.target_login}**`}),[fs.z.UserRemoved]:(e,t)=>t("team_audit_log_user_removed",{email:`**${e?.properties?.target_login}**`}),[fs.z.TeamCaptainAdded]:(e,t)=>t("team_audit_log_team_captain_added",{email:`**${e?.properties?.target_login}**`}),[fs.z.TeamCaptainRemoved]:(e,t)=>t("team_audit_log_team_captain_removed",{email:`**${e?.properties?.target_login}**`}),[fs.z.GroupManagerAdded]:(e,t)=>t("team_audit_log_group_manager_added",{email:`**${e?.properties?.target_login}**`}),[fs.z.GroupManagerRemoved]:(e,t)=>t("team_audit_log_group_manager_removed",{email:`**${e?.properties?.target_login}**`}),[fs.z.MasterPasswordResetAccepted]:(e,t)=>t("team_audit_log_master_password_reset_accepted",{email:`**${e?.properties?.target_login}**`}),[fs.z.MasterPasswordResetRefused]:(e,t)=>t("team_audit_log_master_password_reset_refused",{email:`**${e?.properties?.target_login}**`}),[fs.z.BillingAdminAdded]:(e,t)=>t("team_audit_log_billing_admin_added",{email:`**${e?.properties?.target_login}**`}),[fs.z.BillingAdminRemoved]:(e,t)=>t("team_audit_log_billing_admin_removed",{email:`**${e?.properties?.target_login}**`}),[fs.z.UserGroupCreated]:(e,t)=>t("team_audit_log_user_group_created",{groupName:`**${e.properties?.group_name}**`}),[fs.z.UserGroupRenamed]:(e,t)=>t("team_audit_log_user_group_renamed",{newGroupName:`**${e.properties?.group_name}**`,oldGroupName:`**${e.properties?.old_group_name}**`}),[fs.z.UserGroupDeleted]:(e,t)=>t("team_audit_log_user_group_deleted",{groupName:`**${e.properties?.group_name}**`}),[fs.z.UserJoinedUserGroup]:(e,t)=>t("team_audit_log_user_joined_user_group",{groupName:`**${e.properties?.group_name}**`}),[fs.z.UserLeftUserGroup]:(e,t)=>t("team_audit_log_user_left_user_group",{groupName:`**${e.properties?.group_name}**`}),[fs.z.UserInvitedToUserGroup]:(e,t)=>t("team_audit_log_user_invited_to_user_group",{groupName:`**${e.properties?.group_name}**`,email:`**${e?.properties?.target_login}**`}),[fs.z.UserDeclinedInviteToUserGroup]:(e,t)=>t("team_audit_log_user_declined_invite_to_user_group",{groupName:`**${e.properties?.group_name}**`}),[fs.z.UserRemovedFromUserGroup]:(e,t)=>t("team_audit_log_user_removed_from_user_group",{groupName:`**${e.properties?.group_name}**`,email:`**${e?.properties?.target_login}**`}),[fs.z.DomainRequested]:(e,t)=>t("team_audit_log_domain_requested",{domain:`**${e.properties?.domain_url}**`}),[fs.z.DomainValidated]:(e,t)=>t("team_audit_log_domain_validated",{domain:`**${e.properties?.domain_url}**`}),[fs.z.SensitiveLogsEnabled]:(e,t)=>t("team_audit_log_collect_sensitive_data_audit_logs_enabled"),[fs.z.SensitiveLogsDisabled]:(e,t)=>t("team_audit_log_collect_sensitive_data_audit_logs_disabled"),[fs.z.SsoIdpMetadataSet]:(e,t)=>t("team_audit_log_sso_idp_metadata_set"),[fs.z.SsoServiceProviderUrlSet]:(e,t)=>t("team_audit_log_sso_service_provider_url_set"),[fs.z.SsoEnabled]:(e,t)=>t("team_audit_log_sso_enabled"),[fs.z.SsoDisabled]:(e,t)=>t("team_audit_log_sso_disabled"),[fs.z.TeamNameChanged]:(e,t)=>t("team_audit_log_team_name_changed",{name:`**${e.properties?.name}**`}),[fs.z.NewBillingPeriodCreated]:(e,t)=>t("team_audit_log_new_billing_period_created",{date:`**${t.shortDate((0,an.Z)(e.properties?.new_end_date_unix),hn._T.L)}**`}),[fs.z.SeatsAdded]:(e,t)=>t("team_audit_log_seats_added",{count:`**${e.properties?.seats_added}**`}),[fs.z.ContactEmailChanged]:(e,t)=>t("team_audit_log_contact_email_changed",{email:`**${e?.properties?.new_contact_email}**`}),[fs.z.MasterPasswordMobileResetEnabled]:(e,t)=>t("team_audit_log_master_password_mobile_reset_enabled",{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[fs.z.MasterPasswordMobileResetDisabled]:(e,t)=>t("team_audit_log_master_password_mobile_reset_disabled",{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[fs.z.MasterPasswordChanged]:(e,t)=>t("team_audit_log_master_password_changed"),[fs.z.MpToViewPasswordsEnabled]:(e,t)=>t("team_audit_log_mp_to_view_passwords_enabled"),[fs.z.MpToViewPasswordsDisabled]:(e,t)=>t("team_audit_log_mp_to_view_passwords_disabled"),[fs.z.TwoFactorAuthenticationLoginMethodAdded]:(e,t)=>t("team_audit_log_two_factor_authentication_login_method_added"),[fs.z.TwoFactorAuthenticationLoginMethodRemoved]:(e,t)=>t("team_audit_log_two_factor_authentication_login_method_removed"),[fs.z.BiometricSignInDisabled]:(e,t)=>t("team_audit_log_biometric_sign_in_disabled",{deviceName:`**${e?.properties?.device_name}**`}),[fs.z.NitroSsoSetupStarted]:(e,t)=>t("team_audit_log_nitro_sso_setup_started"),[fs.z.NitroSsoDomainProvisioned]:(e,t)=>t("team_audit_log_nitro_sso_domain_provisioned",{domain:`**${e?.properties?.domain_url}**`}),[fs.z.NitroSsoDomainRemoved]:(e,t)=>t("team_audit_log_nitro_sso_domain_removed",{domain:`**${e?.properties?.domain_url}**`}),[fs.z.NitroSsoDomainVerified]:(e,t)=>t("team_audit_log_nitro_sso_domain_verified",{domain:`**${e?.properties?.domain_url}**`}),[fs.z.DWMEmailAdded]:(e,t)=>t("team_audit_log_dwm_email_added",{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[fs.z.DWMEmailRemoved]:(e,t)=>t("team_audit_log_dwm_email_removed",{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[fs.z.DWMAlertReceived]:(e,t)=>t("team_audit_log_dwm_alert_received",{email:`**${e?.properties?.dark_web_monitoring_email}**`}),[fs.z.UserDeviceAdded]:(e,t)=>t("team_audit_log_user_device_added",{name:`**${e.properties?.device_name}**`}),[fs.z.UserDeviceRemoved]:(e,t)=>t("team_audit_log_user_device_removed",{name:`**${e.properties?.device_name}**`}),[fs.z.UserDeviceLogin]:(e,t)=>t("team_audit_log_user_device_login",{name:`**${e.properties?.device_name}**`}),[fs.z.MasterPasswordReset]:(e,t)=>t("team_audit_log_master_password_reset"),[fs.z.RequestedAccountRecovery]:(e,t)=>t("team_audit_log_requested_account_recovery"),[fs.z.CompletedAccountRecovery]:(e,t)=>t("team_audit_log_completed_account_recovery"),[fs.z.MasterPasswordMobileReset]:(e,t)=>t("team_audit_log_master_password_mobile_reset",{deviceName:e?.properties?.device_name?`**${e?.properties?.device_name}**`:"mobile"}),[fs.z.UserSharedCredentialWithGroup]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?"team_audit_log_user_shared_credential_with_group_full":"team_audit_log_user_shared_credential_with_group_limited",{domain:`**${n.properties.domain_url}**`,group:`**${n.properties.group_name}**`})},[fs.z.UserSharedCredentialWithEmail]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?"team_audit_log_user_shared_credential_with_email_full":"team_audit_log_user_shared_credential_with_email_limited",{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[fs.z.UserSharedCredentialWithExternal]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?"team_audit_log_user_shared_credential_with_external_full":"team_audit_log_user_shared_credential_with_external_limited",{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[fs.z.UserSharedSecureNoteWithGroup]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?"team_audit_log_user_shared_secure_note_with_group_full":"team_audit_log_user_shared_secure_note_with_group_limited",{name:`**${n.properties.item_name}**`,group:`**${n.properties.group_name}**`})},[fs.z.UserSharedSecureNoteWithEmail]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?"team_audit_log_user_shared_secure_note_with_email_full":"team_audit_log_user_shared_secure_note_with_email_limited",{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[fs.z.UserSharedSecureNoteWithExternal]:(e,t)=>{const n=e;return t("admin"===n.properties.permission?"team_audit_log_user_shared_secure_note_with_external_full":"team_audit_log_user_shared_secure_note_with_external_limited",{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[fs.z.UserRevokedSharedCredentialGroup]:(e,t)=>{const n=e;return t("team_audit_log_user_revoked_shared_credential_group",{domain:`**${n.properties.domain_url}**`,group:`**${n.properties.group_name}**`})},[fs.z.UserRevokedSharedCredentialEmail]:(e,t)=>{const n=e;return t("team_audit_log_user_revoked_shared_credential_email",{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[fs.z.UserRevokedSharedCredentialExternal]:(e,t)=>{const n=e;return t("team_audit_log_user_revoked_shared_credential_external",{domain:`**${n.properties.domain_url}**`,email:`**${n.properties.target_login}**`})},[fs.z.UserRevokedSharedSecureNoteGroup]:(e,t)=>{const n=e;return t("team_audit_log_user_revoked_shared_secure_note_group",{name:`**${n.properties.item_name}**`,group:`**${n.properties.group_name}**`})},[fs.z.UserRevokedSharedSecureNoteEmail]:(e,t)=>{const n=e;return t("team_audit_log_user_revoked_shared_secure_note_email",{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[fs.z.UserRevokedSharedSecureNoteExternal]:(e,t)=>{const n=e;return t("team_audit_log_user_revoked_shared_secure_note_external",{name:`**${n.properties.item_name}**`,email:`**${n.properties.target_login}**`})},[fs.z.UserAcceptedSharingInviteSecureNote]:(e,t)=>t("team_audit_log_user_accepted_sharing_invite_secure_note",{name:`**${e.properties.item_name}**`}),[fs.z.UserRejectedSharingInviteSecureNote]:(e,t)=>t("team_audit_log_user_rejected_sharing_invite_secure_note",{name:`**${e.properties.item_name}**`}),[fs.z.UserAcceptedSharingInviteCredential]:(e,t)=>t("team_audit_log_user_accepted_sharing_invite_credential",{domain:`**${e.properties.domain_url}**`}),[fs.z.UserRejectedSharingInviteCredential]:(e,t)=>t("team_audit_log_user_rejected_sharing_invite_credential",{domain:`**${e.properties.domain_url}**`}),[fs.z.UserCreatedCollection]:(e,t)=>t("team_audit_log_user_private_collection_created",{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[fs.z.UserImportedCollection]:(e,t)=>t("team_audit_log_user_private_collection_imported",{user:`${e.properties.author_login}`,number:`${e.properties.credential_count}`,collection:`**${e.properties.collection_name}**`}),[fs.z.UserAddedCredentialToCollection]:(e,t)=>t("team_audit_log_user_private_collection_added_credential",{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[fs.z.UserRemovedCredentialFromCollection]:(e,t)=>t("team_audit_log_user_private_collection_removed_credential",{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[fs.z.UserRenamedCollection]:(e,t)=>t(Cs,{user:`${e.properties.author_login}`,old:`**${e.properties.old_collection_name}**`,new:`**${e.properties.collection_name}**`}),[fs.z.UserDeletedCollection]:(e,t)=>t("team_audit_log_user_private_collection_deleted",{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[fs.z.UserSharedCollectionWithUser]:(e,t)=>t("team_audit_log_user_shared_collection_shared_with_user",{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,role:`${e.properties.permission}`,email:`${e.properties.target_login}`}),[fs.z.UserSharedCollectionWithGroup]:(e,t)=>t("team_audit_log_user_shared_collection_shared_with_group",{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,role:`${e.properties.permission}`,group:`${e.properties.group_name}`}),[fs.z.UserAcceptedCollection]:(e,t)=>t("team_audit_log_user_shared_collection_accepted",{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[fs.z.UserRejectedCollection]:(e,t)=>t("team_audit_log_user_shared_collection_rejected",{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`}),[fs.z.UserAddedItemToCollection]:(e,t)=>t("team_audit_log_user_shared_collection_added_credential",{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,rights:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[fs.z.UserRemovedItemFromCollection]:(e,t)=>t("team_audit_log_user_shared_collection_removed_credential",{user:`${e.properties.author_login}`,domain:`**${e.properties.domain_url}**`,name:`**${e.properties.collection_name}**`}),[fs.z.UserUpdatedGroupRoleInCollection]:(e,t)=>t("team_audit_log_user_shared_collection_group_roles",{user:`${e.properties.author_login}`,group:`**${e.properties.group_name}**`,role1:`${e.properties.old_permission}`,role2:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[fs.z.UserUpdatedUserRoleInCollection]:(e,t)=>t("team_audit_log_user_shared_collection_user_roles",{user:`${e.properties.author_login}`,email:`**${e.properties.group_name}**`,role1:`${e.properties.old_permission}`,role2:`${e.properties.permission}`,name:`**${e.properties.collection_name}**`}),[fs.z.UserRevokedGroupFromCollection]:(e,t)=>t("team_audit_log_user_shared_collection_revoked_groups",{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,group:`**${e.properties.group_name}**`}),[fs.z.UserRevokedUserFromCollection]:(e,t)=>t("team_audit_log_user_shared_collection_revoked_user",{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,email:`**${e.properties.target_login}**`}),[fs.z.UserRenamedSharedCollection]:(e,t)=>t(Cs,{user:`${e.properties.author_login}`,name:`**${e.properties.collection_name}**`,email:`**${e.properties.target_login}**`}),[fs.z.UserCreatedCredential]:(e,t)=>t("team_audit_log_user_created_credential",{domain:`**${e.properties.domain_url}**`}),[fs.z.UserModifiedCredential]:(e,t)=>t("team_audit_log_user_modified_credential",{domain:`**${e.properties.domain_url}**`}),[fs.z.UserDeletedCredential]:(e,t)=>t("team_audit_log_user_deleted_credential",{domain:`**${e.properties.domain_url}**`}),[fs.z.UserImportedCredentials]:(e,t)=>t(e.properties.import_count>1?Ds:Ts,{importCount:`**${e.properties.import_count}**`}),[fs.z.UserCreatedSecureNote]:(e,t)=>t("team_audit_log_user_created_secure_note",{name:`**${e.properties.item_name}**`}),[fs.z.UserModifiedSecureNote]:(e,t)=>t("team_audit_log_user_modified_secure_note",{name:`**${e.properties.item_name}**`}),[fs.z.UserDeletedSecureNote]:(e,t)=>t("team_audit_log_user_deleted_secure_note",{name:`**${e.properties.item_name}**`})},Es=(e,t)=>Zs.includes(e.log_type)?ks[e.log_type](e,t):"",ws=[fs.p.Account,fs.p.Authentication,fs.p.DarkWebMonitoring,fs.p.Groups,fs.p.TeamSettings,fs.p.TeamSettingsSSO,fs.p.Sharing,fs.p.UserSettings,fs.p.Users,fs.p.VaultCollections,fs.p.VaultPasswords,fs.p.VaultSecureNotes],Is=(e,t)=>{const[n,a]=(e=>{switch(e){case fs.p.Account:return["team_audit_log_category_account","AccountSettingsOutlined"];case fs.p.Authentication:return["team_audit_log_category_authentication","ItemLoginOutlined"];case fs.p.DarkWebMonitoring:return["team_audit_log_category_dark_web_monitoring","FeatureDarkWebMonitoringOutlined"];case fs.p.Groups:return["team_audit_log_category_groups","GroupOutlined"];case fs.p.TeamSettings:return["team_audit_log_category_team_settings","SettingsOutlined"];case fs.p.TeamSettingsSSO:return["team_audit_log_category_team_settings_sso","SettingsOutlined"];case fs.p.Sharing:return["team_audit_log_category_sharing","SharedOutlined"];case fs.p.UserSettings:return["team_audit_log_category_user_settings","SettingsOutlined"];case fs.p.Users:return["team_audit_log_category_users","UsersOutlined"];case fs.p.VaultCollections:return["team_audit_log_category_vault_collections","CollectionOutlined"];case fs.p.VaultPasswords:return["team_audit_log_category_vault_passwords","ItemLoginOutlined"];case fs.p.VaultSecureNotes:return["team_audit_log_category_vault_securenotes","ItemSecureNoteOutlined"];default:return["","SettingsOutlined"]}})(e.category);return{label:n?t(n):"",icon:a}},Ns=Object.values(fs.z),As=(e,t)=>{var n;return Ns.includes(e.log_type)?{uuid:e.uuid,date:new Date(e.date_time),category:Is(e,t),activityDescription:Es(e,t),userLogin:null!=(n=e.properties?.author_login)?n:""}:null},Ms=e=>t=>{!e||"Enter"!==t.key&&" "!==t.key||(e(),t.preventDefault())},Os={padding:"16px 0 16px 16px",textAlign:"left",fontSize:"12px",fontWeight:"600",verticalAlign:"middle",whiteSpace:"break-spaces",textTransform:"uppercase",cursor:"default"},Ls=({onClick:e,sortOrder:t,colSpan:n,tooltipLabel:a,headerLabel:i,headerElement:s})=>{const[l,c]=(0,r.useState)(!1);return(0,C.tZ)("th",{scope:"col",role:"columnheader",colSpan:n,tabIndex:0,"aria-sort":(d=t,"asc"===d?"ascending":"desc"===d?"descending":"none"),onClick:e,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),onFocus:()=>c(!0),onBlur:()=>c(!1),onKeyDown:Ms(e),sx:Os,children:(0,C.BX)("div",{sx:{display:"flex",height:"100%",maxWidth:"140px",alignItems:"center"},children:[s||null,a?(0,C.tZ)(o.u,{content:a,isOpen:l,children:(0,C.tZ)("span",{sx:{marginTop:"-5px",paddingTop:"5px",minWidth:0,whiteSpace:"break-spaces"},children:i})}):(0,C.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:i}),(0,C.tZ)("div",{sx:{width:"10px"},children:t?(0,C.tZ)(o.JO,{sx:{ml:"4px"},name:"desc"===t?"CaretDownOutlined":"CaretUpOutlined",size:"small"}):null})]})});var d},Bs=({headerElement:e,colSpan:t,headerLabel:n,tooltipLabel:a})=>(0,C.BX)("th",{colSpan:t,sx:Os,children:[e||null,a?(0,C.tZ)(o.u,{content:a,children:(0,C.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:n})}):(0,C.tZ)("span",{sx:{minWidth:0,whiteSpace:"break-spaces"},children:n})]}),Rs=({columns:e,sxProps:t})=>(0,C.tZ)("thead",{sx:t,children:(0,C.tZ)("tr",{"aria-rowindex":1,sx:{color:"ds.text.neutral.quiet"},children:e.map((e=>e.onClick?(0,C.tZ)(Ls,{...e},e.headerKey):(0,C.tZ)(Bs,{...e},e.headerKey)))})}),zs="360px",Ps={STATE_WRAPPER:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",gap:"24px",width:"100%",height:zs,padding:"24px",textAlign:"center"},TABLE_BODY:{minHeight:zs,tr:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",transition:"background-color 0.2s ease",backgroundColor:"transparent","&:hover":{backgroundColor:"ds.container.expressive.neutral.supershy.hover"},td:{padding:"16px",verticalAlign:"middle",variant:"text.ds.body.reduced.regular",color:"ds.text.neutral.standard"}}},INPUT_WITH_CLEAR_ACTION:{display:"grid",gridTemplateColumns:"calc(100% - 40px) auto",alignItems:"center",gap:"4px"}},Xs=({children:e,withCategories:t=!1})=>{const{translate:n}=(0,y.Z)(),a=[{headerLabel:n("team_activity_list_head_admin"),headerKey:"admin"},{headerLabel:n("team_activity_list_head_category"),headerKey:"category"},{headerLabel:n("team_activity_list_head_action"),headerKey:"action"},{headerLabel:n("team_activity_list_head_time"),headerKey:"time"}].filter((e=>"category"!==e.headerKey||t));return(0,C.BX)("table",{sx:{width:"100%",lineHeight:1.5,textAlign:"left"},children:[(0,C.tZ)(Rs,{columns:a,sxProps:{backgroundColor:"ds.container.agnostic.neutral.quiet"}}),(0,C.tZ)("tbody",{sx:Ps.TABLE_BODY,children:e},"table-body")]})};var js=n(232814),Us=n(53506);const qs={LOGIN_CELL:{display:"flex",padding:"15px 16px 14px"},LOGIN_TEXT:{height:"31px",marginLeft:"16px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},Gs=({login:e,category:t,action:n,date:a})=>(0,C.BX)("tr",{children:[(0,C.BX)("td",{sx:qs.LOGIN_CELL,children:[(0,C.tZ)(js.q,{email:e,size:30}),(0,C.tZ)("div",{id:"user-email",sx:qs.LOGIN_TEXT,children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.body.standard.regular",children:e})})]}),t?(0,C.tZ)("td",{children:(0,C.tZ)(o.Vp,{leadingDecoration:t.icon,label:t.label})}):null,(0,C.tZ)("td",{children:n}),(0,C.tZ)("td",{className:"dateCell--JBqTpeYwB5",children:(0,C.tZ)(Us.v,{date:a})})]});var Fs=n(438042),$s=n(909087),Vs=n(319586);const Hs=1e3;async function Ws(){const e=new Date,t=(0,Fs.Z)((0,$s.Z)(e,3)),n=(0,Fs.Z)(e),a=await fe.C.startAuditLogsQuery({startDateRangeUnix:t,endDateRangeUnix:n});if(a.success)return a;throw(0,h.Kz)(new c.UserDownloadAuditLogsDataEvent({flowStep:c.FlowStep.Error,auditLogDownloadError:c.AuditLogDownloadError.UnexpectedUnknown})),new Error("[startAuditLogsQuery] - Server Error: Unable to start audit logs query and fetch queryExecutionId")}async function Ys(e,t,n){const a=await fe.C.getAuditLogQueryResults({queryExecutionId:e,maxResults:t,nextToken:n});return!a.success||a.data.state!==Vs.U.Running&&a.data.state!==Vs.U.Queued?a:(await new Promise((e=>setTimeout((()=>e()),3e3))),await Ys(e,t,n))}async function Ks(e,t,n=1,a){const i=await Ys(t,Hs,a);if(e(n),i.success){let a=i.data.auditLogs;if(i.data.nextToken){const r=await Ks(e,t,n+1,i.data.nextToken);return r&&(a=a.concat(r)),a}return a}throw(0,h.Kz)(new c.UserDownloadAuditLogsDataEvent({flowStep:c.FlowStep.Error,auditLogDownloadError:c.AuditLogDownloadError.NoLogData})),new Error("[fetchAuditLogsPages] - Server Error: Unable to load audit logs data")}var Qs;const Js=({progressPercent:e})=>{const{translate:t}=(0,y.Z)(),n=Math.min(Math.max(e,0),100);return(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{sx:{gap:"8px",height:"16px",display:"flex",flexDirection:"row",flexWrap:"nowrap",alignItems:"center"},children:[(0,C.tZ)(o.bG,{percentage:n,size:"small"}),100===n?Qs||(Qs=(0,C.tZ)(o.JO,{size:"small",name:"FeedbackSuccessFilled",color:"ds.text.positive.quiet"})):null]}),(0,C.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",sx:{marginTop:"4px"},children:t("team_activity_download_modal_progress",{progressPercentage:n})})]})},eo=({isOpen:e,progress:t,onClose:n})=>{const{translate:a}=(0,y.Z)();return(0,C.tZ)("div",{children:(0,C.tZ)(o.Vq,{isOpen:e,closeActionLabel:a("_common_dialog_dismiss_button"),onClose:n,title:a("team_activity_download_modal_title"),children:(0,C.BX)("div",{sx:{maxHeight:"fit-content",overflowX:"hidden",overflowY:"auto"},children:[(0,C.tZ)(Js,{progressPercent:t}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"16px 0"},children:a("team_activity_download_modal_body")}),(0,C.tZ)(o.ke,{mood:"warning",size:"small",title:a("team_activity_download_modal_warning")})]})})})},to=Object.values(fs.z),no="team_activity_list_head_admin",ao="team_activity_list_head_action",io="team_activity_list_head_time_csv",ro=(e,t,n=!1)=>{const a=(n?[t(no),t("team_activity_list_head_category"),t(ao),t(io)]:[t(no),t(ao),t(io)]).join(",")+"\n",i=e.filter((e=>to.includes(e.log_type))).map((e=>{var a;const i=null!=(a=e.properties?.author_login)?a:"",r=Es(e,t).replace(/\*\*/g,"").replace(/[“”]/g,'"'),{label:s}=Is(e,t),o=new Date(e.date_time).toISOString(),l=`${o.substr(0,10)} ${o.substr(11,8)}`;return n?`${i},${s},${r},${l}`:`${i},${r},${l}`}));return(0,h.Kz)(new c.UserDownloadAuditLogsDataEvent({flowStep:c.FlowStep.Complete,auditLogCount:i.length})),a+i.join("\n")},so={container:"container--XdLBgpl4YX",topPaginationText:"topPaginationText--LdlMOoz4Yq",topPaginationTextStrong:"topPaginationTextStrong--GeX97z00Qn",bottom:"bottom--HJME8FMVZx"};var oo;const lo=({lee:e})=>{const{translate:t}=(0,y.Z)(),[n,a]=(0,r.useState)(""),{isStartAuditLogsQueryTriggered:i,isLoading:s,nextToken:d,hasError:u,list:_}=(e=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)([]),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[_,m]=(0,r.useState)(!1),p=(0,r.useCallback)((async t=>{try{n(!0);const a=await Ys(t,50,e&&""!==e?e:void 0),r=[Vs.U.Failed,Vs.U.Cancelled];!a.success||r.includes(a.data.state)?i(!0):(o(((e=[])=>[...e,...a.data.auditLogs])),a?.data.nextToken?c(a.data.nextToken):c(null))}catch(e){i(!0)}finally{n(!1)}}),[e]),g=(0,r.useCallback)((async()=>{try{n(!0);const e=await Ws(),{queryExecutionId:t}=e.data;await p(t),u(t),m(!0)}catch(e){n(!1),i(!0)}}),[p]);return(0,r.useEffect)((()=>{_?""!==d?p(d):i(!0):g()}),[p]),{isStartAuditLogsQueryTriggered:_,isLoading:t,nextToken:l,hasError:a,list:s}})(n),m=!i&&s,p=i&&s,g=null!==d,b=(0,r.useRef)(null),x=(0,r.useRef)(null);(0,ss.M)({hasMore:g,scrollContainerRef:b,bottomRef:x,loadMore:()=>{g&&a(d)}});const[v,S]=(0,r.useState)(!1),[f,Z]=(0,r.useState)(!1),[T,D]=(0,r.useState)(0),k=(0,da.V)(),E=(0,r.useCallback)((()=>{Z(!1),(0,h.Nc)(c.PageView.TacActivityList)}),[]),w=(0,r.useCallback)((e=>{const t=50+e-10;e<=10?D(5*e):e<=40&&e>10&&D(t)}),[]),I=async()=>{Z(!0),D(0),S(!0),(0,h.Nc)(c.PageView.TacActivityDownload),(0,h.Kz)(new c.UserDownloadAuditLogsDataEvent({flowStep:c.FlowStep.Start,auditLogCount:0}));try{let e=[];const n=await Ws();e=await Ks(w,n.data.queryExecutionId),D(100);const a="\ufeff",i=ro(e,t);setTimeout((()=>{try{(0,vs.S)([a,i],"dashlane-activity-export.csv","text/csv;charset=utf-8"),S(!1),E()}catch(e){(0,h.Kz)(new c.UserDownloadAuditLogsDataEvent({flowStep:c.FlowStep.Error,auditLogDownloadError:c.AuditLogDownloadError.NoCsv}))}}),1e3)}catch(t){e.dispatchGlobal((0,xs.wN)(((e,t)=>{const n="directorySyncKeyValidationError",a=()=>e.dispatchGlobal((0,xs.FV)(n)),i=l.BLW.ERROR;return{key:n,level:i,textKey:"team_activity_download_modal_alert_error",handleClose:a,handleButtonClick:()=>{t(),a()},buttonTextKey:"team_activity_download_modal_alert_action"}})(e,I))),(0,h.Kz)(new c.UserDownloadAuditLogsDataEvent({flowStep:c.FlowStep.Error,auditLogDownloadError:c.AuditLogDownloadError.UnexpectedUnknown})),D(0),S(!1),E()}},N=_.map((e=>As(e,t))).filter((e=>null!==e));return(0,C.BX)(ys,{isLoading:!f&&m,children:[(0,C.BX)("div",{className:so.container,ref:b,children:[(0,C.tZ)("div",{className:so.top,children:(0,C.tZ)(o.zx,{onClick:I,disabled:v,layout:"iconLeading",icon:"DownloadOutlined",children:t("team_activity_download_button")})}),(0,C.tZ)(Xs,{children:N.map((e=>(0,C.tZ)(Gs,{login:e.userLogin,action:(0,C.tZ)(Ss,{text:e.activityDescription}),date:e.date},e.uuid)))}),u?k.showAlert(t("_common_generic_error"),l.BLW.ERROR):null,(0,C.tZ)("div",{ref:x,children:p?(0,C.tZ)("div",{sx:{display:"flex",height:"40px",justifyContent:"center",paddingTop:"20px",paddingBottom:"60px"},children:oo||(oo=(0,C.tZ)(o.ZX,{}))}):null})]}),f?(0,C.tZ)(eo,{isOpen:f,progress:T,onClose:()=>{E()}}):null]})};var co,uo,_o=n(299555);const mo=({title:e,description:t})=>{const{translate:n}=(0,y.Z)();return(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{marginBottom:"4px"},children:n(e)}),(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:n(t)})]})},po=()=>(0,C.BX)("div",{sx:Ps.STATE_WRAPPER,children:[co||(co=(0,C.tZ)(o.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.quiet",size:"xlarge"})),(0,C.tZ)(mo,{title:"team_audit_log_state_error_title",description:"team_audit_log_state_error_description"})]}),go=()=>(0,C.BX)("div",{sx:Ps.STATE_WRAPPER,children:[uo||(uo=(0,C.tZ)(o.ZX,{mood:"brand",size:"xlarge"})),(0,C.tZ)(mo,{title:"team_audit_log_state_loading_title",description:"team_audit_log_state_loading_description"})]}),ho=()=>(0,C.BX)("div",{sx:Ps.STATE_WRAPPER,children:[(0,C.tZ)("img",{sx:{userSelect:"none",pointerEvents:"none",width:"360px",maxWidth:"100%",margin:"0 auto"},alt:"","aria-hidden":!0,src:_o}),(0,C.tZ)(mo,{title:"team_audit_log_state_empty_title",description:"team_audit_log_state_empty_description"})]}),bo=({isOpen:e,areLogsLoading:t,hasMoreLogs:n,logs:a,loadMoreLogs:i,onClose:s})=>{const[l,d]=(0,r.useState)(0),{translate:u}=(0,y.Z)(),{showToast:_}=(0,o.pm)(),m=()=>{s(),d(0)};return(0,r.useEffect)((()=>{if(!e||t)return;if(n)return d(l<80?l+20:l),void i();d(100);const r=ro(a,u,!0);try{(0,vs.S)(["\ufeff",r],"dashlane-activity-export.csv","text/csv;charset=utf-8"),setTimeout(m,2e3)}catch(e){_({mood:"danger",description:u("_common_generic_error")}),(0,h.Kz)(new c.UserDownloadAuditLogsDataEvent({flowStep:c.FlowStep.Error,auditLogDownloadError:c.AuditLogDownloadError.NoCsv}))}}),[e,n,t,a]),(0,C.tZ)("div",{children:(0,C.tZ)(o.Vq,{isOpen:e,closeActionLabel:u("_common_dialog_dismiss_button"),onClose:m,title:u("team_activity_download_modal_title"),children:(0,C.BX)("div",{sx:{maxHeight:"fit-content",overflowX:"hidden",overflowY:"auto"},children:[(0,C.tZ)(Js,{progressPercent:l}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"16px 0"},children:u("team_activity_download_modal_body")}),(0,C.tZ)(o.ke,{mood:"neutral",size:"small",title:u("team_activity_download_modal_warning")})]})})})};var yo=n(589193),xo=n(657571);let vo=function(e){return e.LAST_DAY="last_day",e.LAST_WEEK="last_week",e.LAST_MONTH="last_month",e.LAST_3_MONTHS="last_3_months",e.LAST_6_MONTHS="last_6_months",e.LAST_YEAR="last_year",e.YEAR_TO_DATE="year_to_date",e}({});const So=864e5,fo=e=>{const t=Date.now(),n=t-e*So;return{startDate:Math.floor(n/1e3),endDate:Math.ceil(t/1e3)}},Zo=e=>{switch(e){case vo.LAST_DAY:return fo(1);case vo.LAST_WEEK:return fo(7);case vo.LAST_MONTH:return fo(30);case vo.LAST_3_MONTHS:return fo(90);case vo.LAST_6_MONTHS:return fo(180);case vo.LAST_YEAR:return fo(360);case vo.YEAR_TO_DATE:return(()=>{const e=new Date,t=new Date(e.getFullYear(),0,1),n=Math.floor((e.getTime()-t.getTime())/So);return fo(n)})()}};var Co,To,Do,ko,Eo;const wo=()=>{const{translate:e}=(0,y.Z)(),t=(0,r.useRef)(null),n=(0,r.useRef)(null),[a,i]=(0,r.useState)(""),[s,u]=(0,r.useState)(""),[_,m]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[b,x]=(0,r.useState)(vo.LAST_WEEK),[v,S]=(0,r.useState)(Zo(vo.LAST_WEEK)),{list:f,hasMore:Z,isLoading:T,hasError:D,loadMore:k,applyFilters:E}=((e,t)=>{const[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(void 0),{initiateActivityLogsRetrieval:o,loadNextActivityLogs:l}=(0,$.u)(yo.g),{data:c,status:u}=(0,d.k)(yo.g,"activityLogs");(0,r.useEffect)((()=>{n||(o({startDate:e,endDate:t,filters:i}),a(!0))}),[t,i,n,e]);const _=u===Te.rq.Success&&c.hasMoreData,m=u===Te.rq.Success?c.logs:[],p=u!==Te.rq.Success||c.status===xo.Q.LOADING||_&&0===c.logs.length;return{list:m,hasMore:_,isLoading:!n||p,hasError:u===Te.rq.Error,loadMore:()=>l(void 0),applyFilters:e=>{s(e),a(!1)}}})(v.startDate,v.endDate);(0,ss.M)({hasMore:Z,scrollContainerRef:t,bottomRef:n,loadMore:k});const w=T&&!f.length,I=T&&f.length,N=0===f.length&&T,[A,M]=(0,r.useState)(!1),O=(0,da.V)(),L=(0,r.useCallback)((()=>{M(!1),(0,h.Nc)(c.PageView.TacActivityList)}),[]),B=f.map((t=>As(t,e))).filter((e=>null!==e));return(0,C.BX)(ys,{isLoading:!1,children:[(0,C.BX)("div",{className:so.container,ref:t,children:[(0,C.BX)("div",{sx:{marginBottom:"16px"},children:[(0,C.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[(0,C.tZ)(o.Um,{label:e("team_activity_filters_label_user_login"),onChange:({target:{value:e}})=>i(e),value:a,sx:{width:"350px"}}),(0,C.tZ)(o.zx,{onClick:()=>{M(!0)},disabled:N,layout:"iconLeading",icon:"DownloadOutlined",children:e("team_activity_download_button")})]}),(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",gap:"16px"},children:[Co||(Co=(0,C.tZ)(o.nv,{textStyle:"ds.body.helper.regular",children:"Filter by"})),(0,C.BX)("div",{sx:{display:"grid",gap:"24px",justifyContent:"space-between",gridTemplateColumns:"repeat(4, calc(25% - 20px))"},children:[(0,C.tZ)(o.qo,{label:e("team_activity_filters_label_credential"),disabled:N,onChange:({target:{value:e}})=>u(e),value:s}),(0,C.tZ)(o.mg,{label:e("team_activity_filters_label_category"),disabled:N,onChange:e=>m([e]),value:_[0],children:ws.map((t=>(0,C.tZ)(o.$m,{value:t,children:e(`team_audit_log_category_${t}`)},`select_option_${t}`)))}),(0,C.tZ)(o.mg,{label:e("team_activity_filters_label_type"),disabled:N,onChange:e=>g([e]),value:p[0],children:Zs.map((e=>(0,C.tZ)(o.$m,{value:e,children:`team_audit_log_activity_${e}`},`select_option_${e}`)))}),(0,C.tZ)(o.mg,{label:e("team_activity_filters_label_date"),disabled:N,onChange:e=>{x(e)},value:b,children:Object.values(vo).map((t=>(0,C.tZ)(o.$m,{value:t,children:e(`team_audit_log_date_range_${t}`)},`select_option_${t}`)))})]}),(0,C.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"8px"},children:[(0,C.tZ)(o.zx,{mood:"brand",onClick:()=>{S(Zo(b));const e={login:a,domain:s,categories:_,logTypes:p},t=Object.entries(e).reduce(((e,[t,n])=>n.length?e?{...e,[t]:n}:{[t]:n}:e),void 0);E(t)},disabled:N,children:e("team_activity_filters_action_apply")}),(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"labelOnly",onClick:()=>{i(""),u(""),m([]),g([])},disabled:N,children:e("team_activity_filters_action_clear")})]})]})]}),D?To||(To=(0,C.tZ)(po,{})):null,0!==f.length||D||T?null:Do||(Do=(0,C.tZ)(ho,{})),w&&!D?ko||(ko=(0,C.tZ)(go,{})):null,!D&&f.length>0?(0,C.tZ)(Xs,{withCategories:!0,children:B.map((e=>(0,C.tZ)(Gs,{login:e.userLogin,category:e.category,action:(0,C.tZ)(Ss,{text:e.activityDescription}),date:e.date},`log_${e.uuid}`)))}):null,D?O.showAlert(e("_common_generic_error"),l.BLW.ERROR):null,(0,C.tZ)("div",{ref:n,children:I?(0,C.tZ)("div",{sx:{display:"flex",height:"40px",justifyContent:"center",paddingTop:"20px",paddingBottom:"60px"},children:Eo||(Eo=(0,C.tZ)(o.ZX,{}))}):null})]}),(0,C.tZ)(bo,{isOpen:A,areLogsLoading:T,hasMoreLogs:Z,logs:f,loadMoreLogs:k,onClose:L})]})},Io=e=>e?"auto":"800px",No=({mainContent:e,secondaryContent:t,fullWidth:n,...a})=>(0,C.BX)(l.T5p,{gap:"32px",gridTemplateAreas:["'top' 'bottom'","'top' 'bottom'","'left right'"],gridTemplateColumns:[null,null,`minmax(auto, ${Io(null!=n&&n)}) 256px`],gridTemplateRows:["auto auto","auto auto","auto"],alignContent:"flex-start",sx:{py:"32px",px:"42px"},...a,children:[(0,C.tZ)(l.dDn,{alignSelf:"flex-start",gridArea:["top","top","right"],children:t}),(0,C.tZ)(l.dDn,{gridArea:["bottom","bottom","left"],children:e})]});var Ao;const Mo={display:"flex",gap:"4px",padding:"5px 0px",alignItems:"center",color:"ds.text.brand.standard",backgroundColor:"ds.background.default",cursor:"pointer",marginTop:"5px"},Oo=({internalAction:e,linkText:t})=>(0,C.BX)("button",{onClick:e,sx:Mo,children:[(0,C.tZ)(o.nv,{as:"span",sx:{fontWeight:"500"},children:t}),Ao||(Ao=(0,C.tZ)(o.JO,{name:"ArrowRightOutlined",size:"small",color:"ds.text.brand.standard"}))]}),Lo=({supportHeader:e,children:t})=>{const{translate:n}=(0,y.Z)();return(0,C.BX)(l.Zbd,{sx:{display:"flex",gap:"8px",flexDirection:"column",padding:"32px 24px",background:"ds.container.agnostic.neutral.supershy"},children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",sx:{marginBottom:"8px"},children:null!=e?e:n("webapp_tac_infocard_title")}),t]})};var Bo;const Ro=({children:e,href:t,onClick:n,...a})=>(0,C.BX)(o.nv,{as:"a",onClick:n,href:t,rel:"noopener noreferrer",target:"_blank",color:"ds.text.brand.quiet",sx:{display:"inline-flex",textDecoration:"underline",flexDirection:"row",":hover":{textDecoration:"none",color:"ds.text.brand.standard"},":hover + svg":{fill:"ds.text.brand.standard"}},...a,children:[e,Bo||(Bo=(0,C.tZ)(o.JO,{name:"ActionOpenExternalLinkOutlined",color:"ds.text.brand.quiet"}))]});let zo=function(e){return e[e.ExternalLink=0]="ExternalLink",e[e.InternalLink=1]="InternalLink",e}({});const Po=({heading:e,description:t,linkText:n,supportHeading:a,linkProps:i})=>(0,C.BX)(Lo,{supportHeader:a,children:[(0,C.tZ)(o.nv,{sx:{mb:"8px"},color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",as:"h3",children:e}),(0,r.isValidElement)(t)?t:(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",sx:{mb:n&&i.linkType===zo.ExternalLink&&i.linkHref?"24px":0},children:t}),i.linkType===zo.ExternalLink&&i.linkHref?(0,C.tZ)(Ro,{href:i.linkHref,children:n}):null,i.linkType===zo.InternalLink?(0,C.tZ)(Oo,{linkText:n,internalAction:i.internalAction}):null]}),Xo=({openContactDialog:e})=>{const{translate:t}=(0,y.Z)();return(0,C.tZ)(Po,{supportHeading:t("team_settings_contact_us_support_header"),heading:t("team_settings_contact_us_heading"),description:t("team_settings_contact_us_description"),linkText:t("team_settings_contact_us_link_title"),linkProps:{linkType:zo.InternalLink,internalAction:e}})};var jo,Uo;const qo={container:{borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",padding:"32px",backgroundColor:"ds.background.default",display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",alignContent:"start"},header:{display:"flex",flexDirection:"column",gap:"8px",alignSelf:"stretch"},itemContainer:{display:"flex",flexDirection:"column",gap:"32px",alignSelf:"stretch"},item:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"},icon:{backgroundColor:"ds.container.expressive.brand.quiet.idle",borderRadius:"8px",padding:"10px"},actions:{display:"flex",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch"}},Go=()=>{const{translate:e}=(0,y.Z)(),{routes:t}=(0,i.Xo)();return(0,C.BX)("div",{sx:qo.container,children:[(0,C.BX)("div",{sx:qo.header,children:[(0,C.tZ)(o.Ct,{iconName:"PremiumOutlined",layout:"iconLeading",label:e("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"}),(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",children:e("team_activity_paywall_track_organization_header")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:e("team_activity_paywall_track_organization_description")})]}),(0,C.BX)("div",{sx:qo.itemContainer,children:[(0,C.BX)("div",{sx:qo.item,children:[(0,C.tZ)("div",{sx:qo.icon,children:jo||(jo=(0,C.tZ)(o.JO,{name:"ActionSearchOutlined",size:"large",color:"ds.text.brand.standard"}))}),(0,C.BX)("div",{children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.block.medium",sx:{marginBottom:"5px"},children:e("team_activity_paywall_track_members_header")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_activity_paywall_track_members_description")})]})]}),(0,C.BX)("div",{sx:qo.item,children:[(0,C.tZ)("div",{sx:qo.icon,children:Uo||(Uo=(0,C.tZ)(o.JO,{name:"CsvOutlined",size:"large",color:"ds.text.brand.standard"}))}),(0,C.BX)("div",{children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.block.medium",sx:{marginBottom:"5px"},children:e("team_activity_paywall_download_header")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e("team_activity_paywall_download_description")})]})]})]}),(0,C.BX)("div",{sx:qo.actions,children:[(0,C.tZ)(o.Qj,{href:"https://support.dashlane.com/hc/en-us/articles/4414606120210-Track-Starter-Team-or-Business-plan-activity",isExternal:!0,children:e("team_activity_paywall_learn_more")}),(0,C.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",as:i.rU,to:`${t.teamAccountChangePlanRoutePath}?plan=business`,onClick:()=>{(0,h.Kz)(new c.UserClickEvent({clickOrigin:c.ClickOrigin.ActivityLogPaywall,button:c.Button.UpgradeBusinessTier}))},"data-testid":"upgrade",children:e("team_contact_support_upgrade_to_business_cta")})]})]})};var Fo;const $o=()=>{const{translate:e}=(0,y.Z)(),[t,n]=(0,r.useState)(!1);return(0,C.BX)(hs,{header:(0,C.tZ)(gs,{title:e("team_activity_header_title")}),children:[(0,C.tZ)(No,{mainContent:Fo||(Fo=(0,C.tZ)(l.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",children:(0,C.tZ)(Go,{})})),secondaryContent:(0,C.tZ)(Xo,{openContactDialog:()=>n(!0)}),sx:{padding:0}}),t?(0,C.tZ)(ae.c,{onDismiss:()=>n(!1)}):null]})};var Vo,Ho;const Wo=e=>{const t=(0,rs.S)(),n=!t?.activityLog.enabled;return r.useEffect((()=>{(0,h.Nc)(c.PageView.TacActivityList)}),[]),(0,C.tZ)("div",{children:n?Vo||(Vo=(0,C.tZ)($o,{})):(0,C.tZ)(is.h,{legacy:(0,C.tZ)(lo,{lee:e.lee}),featureFlips:[as.G.TacFilterActivityLogs],children:Ho||(Ho=(0,C.tZ)(wo,{}))})})};var Yo,Ko,Qo=n(995445),Jo=n(421484);const el={TABLE:{width:"100%",lineHeight:"1.5",textAlign:"left"},TABLE_BODY:{tr:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",td:{padding:"16px",verticalAlign:"middle",variant:"text.ds.body.reduced.regular",color:"ds.text.neutral.standard"}}},LOGIN_CELL:{display:"flex",padding:"15px 16px 14px"},LOGIN_TEXT:{height:"31px",marginLeft:"16px",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},ACTION_CELL:{display:"flex",gap:"36px",justifyContent:"flex-end"}},tl=(0,r.memo)((({onAccept:e,onDecline:t,dateFormatter:n,requests:a})=>{const{translate:i}=(0,y.Z)(),r=[{headerLabel:i("team_master_password_reset_table_head_member"),headerKey:"member"},{headerLabel:i("team_master_password_reset_table_head_time"),headerKey:"time"},{headerLabel:"",headerKey:"actions"}];return(0,C.BX)("table",{sx:el.TABLE,children:[(0,C.tZ)(Rs,{columns:r}),(0,C.tZ)("tbody",{sx:el.TABLE_BODY,children:a.map((a=>{const r=(0,an.Z)(a.creationDateUnix),s=n(r);return(0,C.BX)("tr",{children:[(0,C.BX)("td",{sx:el.LOGIN_CELL,children:[(0,C.tZ)(js.q,{email:a.login,size:30}),(0,C.tZ)("div",{id:"user-email",sx:el.LOGIN_TEXT,children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.catchy",textStyle:"ds.body.standard.regular",children:a.login})})]}),(0,C.tZ)("td",{children:s}),(0,C.BX)("td",{sx:el.ACTION_CELL,children:[(0,C.tZ)(o.zx,{mood:"danger",intensity:"supershy",layout:"iconOnly",size:"medium",icon:Yo||(Yo=(0,C.tZ)(o.JO,{name:"FeedbackFailFilled"})),onClick:()=>t(a),"aria-label":i("team_master_password_reset_dialog_decline_button_ok")}),(0,C.tZ)(o.zx,{mood:"positive",intensity:"supershy",layout:"iconOnly",size:"medium",icon:Ko||(Ko=(0,C.tZ)(o.JO,{name:"FeedbackSuccessFilled"})),onClick:()=>e(a),"aria-label":i("team_master_password_reset_dialog_accept_button_ok")})]})]},(0,I.uniqueId)())}))},"table-body")]})})),nl="team_master_password_reset_dialog_accept_button_cancel",al="team_master_password_reset_dialog_decline_button_cancel",il={LIST_CONTAINER:{display:"flex",flexDirection:"column",justifyContent:"center",margin:"0 auto",marginBottom:"16px",alignItems:"center"},NO_ITEMS:{border:"dashed 1px ds.border.neutral.standard.idle",height:"288px",marginTop:"132px"}},rl=({lee:e})=>{var t;const{translate:n}=(0,y.Z)(),{getTeamId:a,getTeamPolicies:i}=(0,Qo.Y)(_.o,{getTeamId:{},getTeamPolicies:{}},[]),s=a.data?.teamId,l={dialogIsVisible:!1,dialogType:null,selectedRequest:null},[c,d]=(0,r.useState)(l),[u,m]=(0,r.useState)(!1),p=(0,r.useCallback)((async()=>{s&&await(0,Se.mP)({teamId:Number(s)})}),[s]);(0,r.useEffect)((()=>{(async()=>{try{m(!0),i.data?.recoveryEnabled&&(await p(),m(!1))}catch(e){console.error(`RequestsActivity - fetchStatus failed with error ${e}`),m(!1)}})()}),[p,i.data]);const g=e=>{d({dialogIsVisible:!0,dialogType:"accept",selectedRequest:e})},h=e=>{d({dialogIsVisible:!0,dialogType:"decline",selectedRequest:e})},b=e=>[n.shortDate(e,hn._T.l),n.shortDate(e,hn._T.LT)].join(" - "),x=()=>d(l);return i.status!==Te.rq.Success&&a.status!==Te.rq.Success?null:(0,C.BX)(ys,{isLoading:u,children:[(()=>{const t=(()=>{var t;const{teams:n}=(0,Jo.e)(e.globalState);return null==s?[]:null!=(t=n[s]?.notifications?.accountRecoveryRequests)?t:[]})();return t.length?(0,C.tZ)("div",{sx:il.LIST_CONTAINER,children:(0,C.tZ)(tl,{onAccept:g,onDecline:h,dateFormatter:b,requests:t})}):(0,C.BX)("div",{sx:(0,o.jM)([il.LIST_CONTAINER,il.NO_ITEMS]),children:[(0,C.tZ)(o.JO,{name:"NotificationOutlined",sx:{width:"100px",height:"100px"},color:"ds.border.neutral.quiet.idle"}),(0,C.tZ)(o.nv,{textStyle:"ds.title.section.medium",sx:{marginTop:"36px"},children:n("team_master_password_reset_table_empty_label")}),(0,C.tZ)(o.nv,{textStyle:"ds.title.block.medium",color:"ds.text.neutral.quiet",sx:{marginTop:"7px"},children:n("team_master_password_reset_table_empty_helper")})]})})(),(0,C.BX)(o.Vq,{isOpen:c.dialogIsVisible&&"accept"===c.dialogType,onClose:x,closeActionLabel:n(nl),actions:{primary:{children:n("team_master_password_reset_dialog_accept_button_ok"),onClick:()=>{c.selectedRequest&&(0,Se.Z8)({login:c.selectedRequest.login,recoveryKey:c.selectedRequest.recoveryClientKey,userPublicKey:c.selectedRequest.publicKey}).then((()=>{p(),d(l)})).catch((e=>{console.error(e)}))}},secondary:{children:n(nl),onClick:x}},title:n("team_master_password_reset_dialog_accept_title"),children:[c.selectedRequest?.login?(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:n("team_master_password_reset_dialog_accept_content_bold",{login:c.selectedRequest.login})}):null,(0,C.tZ)(o.nv,{children:n("team_master_password_reset_dialog_accept_content")})]}),(0,C.BX)(o.Vq,{isOpen:c.dialogIsVisible&&"decline"===c.dialogType,onClose:x,closeActionLabel:n(al),actions:{primary:{children:n("team_master_password_reset_dialog_decline_button_ok"),onClick:async()=>{if(c.selectedRequest)try{await(0,Se.VK)({login:c.selectedRequest.login}),p(),d(l)}catch(e){console.error(e)}}},secondary:{children:n(al),onClick:x}},title:n("team_master_password_reset_dialog_decline_title"),children:[c.selectedRequest?.login?(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",children:n("team_master_password_reset_dialog_decline_content_bold",{login:null!=(t=c.selectedRequest?.login)?t:""})}):null,(0,C.tZ)(o.nv,{children:n("team_master_password_reset_dialog_decline_content")})]})]})};function sl({path:e}){return(0,C.tZ)(i.GB,{path:[e,`${e}/recent`,`${e}/requests`],permission:e=>e.adminAccess.hasFullAccess,children:(0,C.BX)(i.rs,{children:[(0,C.tZ)(i.l_,{exact:!0,from:`${e}/`,to:`${e}/recent`}),(0,C.tZ)(i.Vy,{path:`${e}/requests`,component:rl}),(0,C.tZ)(i.Vy,{path:`${e}/recent`,component:Wo})]})})}n(568030);var ol=n(500358);n(461238);const ll=({children:e,onRequestClose:t,footer:n})=>{const{translate:a}=(0,y.Z)(),i=a("team_directory_sync_key_dialog_title");return(0,C.tZ)(gr.o,{isOpen:!0,showCloseIcon:!0,onRequestClose:t,footer:n,title:i,children:e})},cl=({onSubmitKeySuccess:e,onSubmitKeyError:t,checkDirectorySyncKeyRequest:n,handleDismiss:a,handleError:i})=>{const{translate:s}=(0,y.Z)(),[c,d]=(0,r.useState)({inputKey:"",isInputKeyInvalid:!1});return(0,C.BX)(ll,{onRequestClose:a,footer:(0,C.tZ)(l.cNS,{primaryButtonTitle:s("team_directory_sync_key_dialog_key_input_verify"),primaryButtonOnClick:async()=>{var a;const{publicKey:r=""}=null!=(a=n())?a:{},s=c.inputKey.replace(/\s/g,"").replace(/\n/g,"");var o;s===r?(()=>{const e=n();return e?(0,Se.QV)(e,"validated"):Promise.reject(new Error("missing params"))})().then((()=>{e()})).catch(i):(o=s).length%4==0&&atob(o).includes("</RSAKeyValue>")?t():d((e=>({...e,isInputKeyInvalid:!0})))},secondaryButtonTitle:s("team_directory_sync_key_dialog_key_input_postpone"),secondaryButtonOnClick:a,intent:"primary"}),children:[(0,C.tZ)(o.nv,{sx:{marginBottom:"2em"},color:"ds.text.neutral.quiet",children:s.markup("team_directory_sync_key_dialog_key_input_message_markup")}),(0,C.tZ)(o.Kx,{placeholder:s("team_directory_sync_key_dialog_key_input_placeholder"),onChange:({target:{value:e}})=>{d({inputKey:e,isInputKeyInvalid:!1})},value:c.inputKey,feedback:c.isInputKeyInvalid?{text:s("team_directory_sync_key_dialog_key_input_invalid")}:void 0,error:c.isInputKeyInvalid})]})};var dl=function(e){return e[e.Initial=0]="Initial",e[e.KeyInput=1]="KeyInput",e[e.KeySuccess=2]="KeySuccess",e[e.KeyError=3]="KeyError",e[e.KeySuspended=4]="KeySuspended",e}(dl||{});const ul=e=>{var t;const{translate:n}=(0,y.Z)(),[a,i]=(0,r.useState)(dl.Initial),s=()=>e.lee.globalState.directorySyncKey.checkDirectorySyncKeyRequest,c=()=>{e.lee.dispatchGlobal((0,ol.M2)())},d=()=>{e.lee.dispatchGlobal((0,ol.HK)())},u=()=>{e.lee.dispatchGlobal((0,ol.er)())},_=()=>{const t="directorySyncKeyValidationError",n=l.BLW.ERROR,a={key:t,level:n,textKey:"team_directory_sync_key_error_markup",handleClose:()=>e.lee.dispatchGlobal((0,xs.FV)(t))};e.lee.dispatchGlobal((0,xs.wN)(a)),d()},m=()=>{i(dl.KeyInput)},p=()=>{(()=>{const e=s();return e?(0,Se.QV)(e,"rejected"):Promise.reject(new Error("missing params"))})().then((()=>{i(dl.KeySuspended),u()})).catch(_)},g=()=>{i(dl.KeySuccess),u()},h=()=>{i(dl.KeyError)};switch(a){case dl.Initial:return(0,C.tZ)(ll,{onRequestClose:c,footer:(0,C.tZ)(l.cNS,{primaryButtonTitle:n("team_directory_sync_key_dialog_initial_continue"),primaryButtonOnClick:m,secondaryButtonTitle:n("team_directory_sync_key_dialog_initial_postpone"),secondaryButtonOnClick:c,intent:"primary"}),children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n.markup("team_directory_sync_key_dialog_initial_message_markup")})});case dl.KeyInput:return t||(0,C.tZ)(cl,{onSubmitKeySuccess:g,onSubmitKeyError:h,checkDirectorySyncKeyRequest:s,handleDismiss:c,handleError:_});case dl.KeySuccess:return(0,C.tZ)(ll,{onRequestClose:d,footer:(0,C.tZ)(l.cNS,{secondaryButtonTitle:n("team_directory_sync_key_dialog_key_success_close"),secondaryButtonOnClick:d}),children:(0,C.BX)(l.Ejs,{gap:"8px",children:[(0,C.tZ)(o.JO,{name:"FeedbackSuccessOutlined",size:"xlarge",color:"ds.text.positive.quiet",sx:{width:"64px",height:"64px"}}),(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h1",children:n("team_directory_sync_key_dialog_key_success_header")}),(0,C.tZ)(o.nv,{children:n("team_directory_sync_key_dialog_key_success_message")})]})]})});case dl.KeyError:return(0,C.tZ)(ll,{onRequestClose:d,footer:(0,C.tZ)(l.cNS,{primaryButtonTitle:n("team_directory_sync_key_dialog_key_error_validate"),primaryButtonOnClick:p,secondaryButtonTitle:n("team_directory_sync_key_dialog_key_error_retry"),secondaryButtonOnClick:m,intent:"danger"}),children:(0,C.BX)(l.Ejs,{gap:"8px",children:[(0,C.tZ)(o.JO,{name:"FeedbackFailOutlined",size:"xlarge",color:"ds.text.danger.quiet",sx:{width:"64px",height:"64px"}}),(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h1",children:n("team_directory_sync_key_dialog_key_error_header")}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n("team_directory_sync_key_dialog_key_error_message")})]})]})});case dl.KeySuspended:return(0,C.tZ)(ll,{onRequestClose:d,footer:(0,C.tZ)(l.cNS,{secondaryButtonTitle:n("team_directory_sync_key_dialog_key_suspended_close"),secondaryButtonOnClick:d}),children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:n.markup("team_directory_sync_key_dialog_key_suspended_message_markup")})})}},_l=()=>{var e;const{translate:t}=(0,y.Z)(),{queue:n,popAlertFromQueue:a}=K(),i=()=>{a()},[r]=n;return r?(0,C.tZ)(gr.o,{isOpen:!0,onRequestClose:i,footer:(0,C.tZ)(l.cNS,{secondaryButtonTitle:null!=(e=r.okButtonLabel)?e:t("_common_alert_dismiss_button"),secondaryButtonOnClick:i}),title:r.title,children:(0,C.tZ)("div",{children:r.message})}):null};var ml=n(263272);const pl=({lee:e,notificationKey:t,buttonTextKey:n,level:a,redirectPath:r,onClickButton:s,keyParams:o,notificationName:l})=>{const c={key:t,level:a,textKey:t,buttonTextKey:n,keyParams:o,handleClose:()=>{e.dispatchGlobal((0,xs.FV)(t)),l&&fe.C.markNotificationAsSeen(l)}};r&&(c.handleLinkClick=n=>{n.preventDefault(),(0,q.Tx)(r)?(0,q.Yk)(r,{type:"",action:""}):(e.dispatchGlobal((0,xs.FV)(t)),(0,i.uX)(r))}),s&&(c.handleButtonClick=()=>{s()}),e.dispatchGlobal((0,xs.wN)(c))};var gl=n(170226);const hl="TRIAL_PERIOD_0_15D",bl="GRACE_PERIOD_PAID",yl="ENABLE_RECOVERY",xl="ADD_ADMINS";var vl=n(309937);const Sl={notification:"notification--JlZi_NwcwA"},fl=({level:e=l.BLW.SUCCESS,text:t,buttonTextKey:n,onClose:a,onLinkClick:i,onClickButton:s})=>{const o=r.useRef(null),{translate:c}=(0,y.Z)(),d=(0,r.useCallback)((e=>{if(!i)return;const t=e.target;t&&"a"===t.tagName.toLowerCase()&&i(e)}),[i]);return(0,r.useEffect)((()=>{if(!o||!o.current)return;const e=o.current;return e.addEventListener("click",d),()=>{e.removeEventListener("click",d)}}),[d]),(0,C.tZ)("div",{className:Sl.notification,children:(0,C.tZ)(l.bZj,{severity:e,size:l.k3y.SMALL,showIcon:!0,closeIconName:c("_common_alert_dismiss_button"),onClose:a,onAction:s||void 0,actionText:n||void 0,children:(0,C.tZ)("span",{ref:o,className:Sl.text,children:t})})})},Zl=({lee:e})=>{const{translate:t}=(0,y.Z)(),[n,a]=(0,r.useState)(!1),[s,o]=(0,r.useState)([]),d=(0,r.useCallback)((n=>{n&&(async({lee:e,teamStatus:t,showTacInExtension:n,translate:a})=>{const i=(({lee:e,teamStatus:t,showTacInExtension:n})=>{const a=new Set;n&&a.add("TAC_IN_EXTENSION"),t.isGracePeriod&&!t.isFreeTrial&&a.add(bl),t.isFreeTrial&&!t.isGracePeriod&&((0,gl.PY)(t.nextBillingDetails.dateUnix)<15?a.add("TRIAL_PERIOD_15_30D"):a.add(hl)),t.info.recoveryEnabled||t.info.ssoEnabled||a.add(yl);const i=(0,N.ev)(e.globalState)||0,r=e.carbon.spaceData.spaces.find((e=>i===+e.teamId));return r&&r.details.teamAdmins.length<=1&&a.add(xl),a})({lee:e,teamStatus:t,showTacInExtension:n});e.dispatchGlobal((0,xs.L1)());const r=e.permission.adminAccess.hasFullAccess,s=await fe.C.getNotificationStatus();i.has(bl)&&(e=>{pl({lee:e,notificationKey:"team_notifications_renewal_grace_period_markup",level:l.BLW.ERROR,redirectPath:e.routes.teamAccountRoutePath})})(e),r&&(i.has(yl)&&s.tacEnableAccountRecoveryBanner===_e.E.Unseen&&(e=>{const t=`${e.routes.teamSettingsRoutePath}/master-password-policies`;pl({lee:e,notificationKey:"team_notifications_enable_account_recovery_markup",level:l.BLW.WARNING,redirectPath:t,notificationName:_e.O.TacEnableAccountRecoveryBanner})})(e),i.has(xl)&&s.tacOnlyOneAdminBanner===_e.E.Unseen&&!ml.isSafari()&&(e=>{const t=e.routes.teamAccountRoutePath;pl({lee:e,notificationKey:"team_notifications_add_admins_markup",level:l.BLW.WARNING,redirectPath:t,notificationName:_e.O.TacOnlyOneAdminBanner})})(e)),i.has(hl)&&(({lee:e,spaceTier:t,translate:n})=>{const a=(0,X.Uo)({tier:t,translate:n});pl({lee:e,notificationKey:"team_notifications_free_trial_D0_T15_markup",keyParams:{planTier:a},level:l.BLW.SUCCESS,redirectPath:e.routes.teamAccountRoutePath})})({lee:e,spaceTier:t.planTier,translate:a})})({lee:e,teamStatus:n,showTacInExtension:!1,translate:t})}),[]),u=(()=>{const{routes:e}=(0,i.Xo)(),t=(0,Qo.Y)(Oe.t,{getIdPFailedProvisioningsData:{},hasSeenIdPFailedNotification:{}},[]),{markIdPFailedNotificationSeen:n}=(0,$.u)(Oe.t);if(!(0,me.o)(Qa.w.EcommerceWebIdPErrorsPhase2)||t.getIdPFailedProvisioningsData.status!==Te.rq.Success||t.hasSeenIdPFailedNotification.status!==Te.rq.Success||!t.getIdPFailedProvisioningsData.data?.nbOfFailedCreations)return[];const{requiredSeats:a}=t.getIdPFailedProvisioningsData.data;return!t.hasSeenIdPFailedNotification.data&&t.getIdPFailedProvisioningsData.data.shouldShowNotifications.alertFailuresNeedSeats?[{key:"idpErrorNotification",level:l.BLW.ERROR,textKey:"team_idp_error_notification_description",isPluralKey:!0,keyParams:{count:a},buttonTextKey:"team_idp_error_notification_cta",handleClose:()=>{(0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.Close,c.CallToAction.BuySeats],toastName:c.ToastName.InsufficientSeatsProvisioningError,chosenAction:c.CallToAction.Close,hasChosenNoAction:!1})),n()},handleButtonClick:()=>{(0,h.Kz)(new c.UserCallToActionEvent({callToActionList:[c.CallToAction.Close,c.CallToAction.BuySeats],toastName:c.ToastName.InsufficientSeatsProvisioningError,chosenAction:c.CallToAction.BuySeats,hasChosenNoAction:!1})),(0,i.uX)(`${e.teamAccountRoutePath}?showSeatsDialog=true&seatsToBuy=${a}`)}}]:[]})();return(0,r.useEffect)((()=>{o((()=>{const t=e.globalState.notifications.list,n=function(e){const t=e.permission.adminAccess.hasFullAccess,n=e.globalState.directorySyncKey;return t&&n.validationPostponed?[{key:"directorySyncPosponedValidation",level:l.BLW.WARNING,textKey:"team_directory_sync_key_postponed_notif_markup",handleLinkClick:t=>{t.preventDefault(),e.dispatchGlobal((0,ol.b3)())},handleClose:()=>e.dispatchGlobal((0,ol.vg)())}]:[]}(e),a=function(e){const t=e.permission.adminAccess.hasFullAccess,n=e.globalState.ieNotifications;return t&&ml.isInternetExplorer()&&n.displayIeDropNotification?[{key:"directorySyncPosponedValidation",level:l.BLW.WARNING,textKey:"wac_ie_drop_message_markup",handleClose:()=>e.dispatchGlobal((0,vl.w)())}]:[]}(e);return[...t,...u,...n,...a]})())}),[e.globalState.ieNotifications,e.globalState.directorySyncKey,e.globalState.notifications.list]),(0,r.useEffect)((()=>{const t=(0,Ti.v0)(e.globalState);t&&(new Di.Z).status({auth:t}).then((e=>{if(200!==e.code)return;const{content:{team:t}}=e;d(t)})).catch()}),[e.globalState.user.session.uki]),(0,C.BX)("div",{className:"notifications--SCKfre7VSM",children:[s.map((e=>(0,C.tZ)(fl,{level:e.level,text:(0,hn.t5)(e.textKey)?t.markup(e.textKey,e.keyParams):e.isPluralKey?t(e.textKey,e.keyParams):t(e.textKey),buttonTextKey:e.isPluralKey&&e.buttonTextKey?t(e.buttonTextKey,e.keyParams):e.buttonTextKey?t(e.buttonTextKey):void 0,onClose:e.handleClose,onLinkClick:e.handleLinkClick,onClickButton:e.handleButtonClick},e.key))),n?(0,C.tZ)(le.F,{isShown:n,setIsShown:a,isFromVault:!1}):null]})};var Cl=n(430959);var Tl,Dl;const kl=e=>{const[t,n]=r.useState(!1);(0,Cl._)();const a=(0,G.a)(e.lee.dispatchGlobal),i=(0,j.B)(),s=()=>{const t=e.lee.globalState.carbon.loginStatus?.loggedIn,n=e.lee.globalState.user.session.login,a=e.lee.globalState.user.session.uki,r=i?.premiumStatus,s=e.lee.globalState.user.session.permissions?.tacAccessPermissions;return t&&Boolean(n&&a)&&Boolean(r)&&Boolean(s)},o=()=>{const t=e.lee.globalState.user.session.permissions?.tacAccessPermissions;return Boolean(t?.size)};return r.useEffect((()=>{!s()||o()||a()}),[t]),s()&&o()?(0,C.tZ)(Y,{globalReportError:e.lee.reportError,children:(0,C.tZ)(Ce.qc,{lee:e.lee,children:(0,C.tZ)(he,{children:(0,C.tZ)(xe,{children:(0,C.tZ)(ze,{children:(0,C.tZ)(Dt,{lee:e.lee,children:(0,C.BX)("div",{children:[e.children,Dl||(Dl=(0,C.tZ)(_l,{})),(0,C.tZ)(Zl,{lee:e.lee}),e.lee.globalState.directorySyncKey.displayDialog?(0,C.tZ)(ul,{lee:e.lee}):null,(0,C.tZ)("div",{className:"alertPopup--S9uF3SnYTj",id:"alert-popup-portal"})]})})})})})})}):Tl||(Tl=(0,C.tZ)("div",{}))};var El=n(481030),wl=n(740763);let Il=function(e){return e.Loading="loading",e.Start="start",e.Pending="pending",e.Validated="validated",e.Deactivating="deactivating",e}({});const Nl=()=>{const[e,t]=(0,r.useState)({domain:null,status:Il.Loading}),[n,a]=(0,r.useState)([]),i=(0,r.useCallback)((async()=>{try{const e=await fe.C.getTeamDomains();if(e.success&&e.domains.length){const n=e.domains.filter((e=>e.status===wl.p.pending)),i=e.domains.filter((e=>e.status===wl.p.valid));if(i.length){a(i);const e=i[0];t({domain:e,status:Il.Validated})}else if(n.length){const e=n[n.length-1];t({domain:e,status:Il.Pending})}else t({domain:e.domains[e.domains.length-1],status:Il.Pending})}else t({domain:null,status:Il.Start})}catch(e){t({domain:null,status:Il.Start})}}),[]);return(0,r.useEffect)((()=>{i()}),[i]),{verifiedOrPendingDomain:e,verifiedDomains:n,updateDomainState:i,deactivateDomain:async()=>{if(null!==e.domain){t((e=>({domain:e.domain,status:Il.Deactivating})));try{(await fe.C.deactivateTeamDomain({domain:e.domain.name})).success?t({domain:null,status:Il.Start}):i()}catch(e){i()}}},tryVerifyDomain:async()=>{await fe.C.completeTeamDomainRegistration(),await i()},selectVerifiedDomain:e=>{t({domain:e,status:Il.Validated})}}};var Al=n(337466);const Ml=e=>{const t=e.toFixed(1),n=e.toFixed();return parseFloat(n)-parseFloat(t)==0?n:t},Ol=({showPasswordHealthScore:e,securityIndex:t,shieldSize:n,textSize:a})=>{let i="";const r="small"===a?"ds.specialty.spotlight.small":"ds.specialty.spotlight.medium";return e?(i=t>=80?"ds.text.positive.quiet":t>=40?"ds.text.warning.quiet":"ds.text.danger.quiet",t>=60?(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.JO,{name:"HealthPositiveOutlined",size:n,color:i}),(0,C.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:`${Ml(t)}%`})]}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.JO,{name:"HealthNegativeOutlined",size:n,color:i}),(0,C.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:`${Ml(t)}%`})]})):(i="ds.text.brand.quiet",(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.JO,{name:"HealthUnknownOutlined",size:n,color:i}),(0,C.tZ)(o.nv,{textStyle:r,color:"ds.text.neutral.catchy",children:"-"})]}))},Ll="link--nWXIzseKub";var Bl;const Rl={HEADER:{display:"flex"},FOOTER:{lineHeight:"1",fontSize:"16px"},MAIN_CARD_CONTENT:{display:"flex",flexDirection:"column",gap:"4px"}},zl=({title:e})=>(0,C.tZ)(l.ua7,{sx:{fontSize:2,maxWidth:"180px"},placement:"bottom",content:e,children:Bl||(Bl=(0,C.tZ)(l.uMt,{size:13,tabIndex:0,color:"ds.text.neutral.quiet"}))}),Pl=e=>(0,C.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:e}),Xl=({children:e})=>(0,C.tZ)(l.Zbd,{sx:{height:"146px",width:"232px",marginRight:"32px",flexShrink:"0",padding:"16px",overflow:"inherit",color:"ds.text.neutral.catchy",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle",display:"flex",flexDirection:"column",justifyContent:"space-between"},children:e}),jl=({passwordHealth:e,seats:t,passwordHealthHistoryEmpty:n})=>{const{translate:a}=(0,y.Z)(),{routes:r}=(0,os.Xo)(),{compromised:s,securityIndex:l}=e,c=`${t.used}/${t.provisioned}`,{openDialog:u,shouldShowFrozenStateDialog:_}=(0,M.Ub)(),m=(0,d.k)(Oe.t,"getIdPFailedProvisioningsData"),p=m.status===Te.rq.Success?m.data?.requiredSeats:0,g=(0,me.o)(Qa.w.EcommerceWebIdPErrorsPhase2),h=()=>{_&&u()};return(0,C.BX)("section",{className:"cardsRow--UeIGdGJnGY",sx:{display:"flex",justifyContent:"flex-start"},children:[(0,C.tZ)(Xl,{children:(0,C.BX)("div",{sx:Rl.MAIN_CARD_CONTENT,children:[(0,C.BX)("header",{sx:Rl.HEADER,children:[Pl(a("team_dashboard_card_health_score")),(0,C.tZ)(zl,{title:a("team_dashboard_card_health_score_info")})]}),(0,C.tZ)("div",{sx:{display:"flex",gap:"12px",alignItems:"center"},children:(0,C.tZ)(Ol,{showPasswordHealthScore:!n,securityIndex:l,shieldSize:"xlarge",textSize:"medium"})})]})}),(0,C.BX)(Xl,{children:[(0,C.BX)("div",{sx:Rl.MAIN_CARD_CONTENT,children:[(0,C.BX)("header",{sx:Rl.HEADER,children:[Pl(a("team_dashboard_card_compromised")),(0,C.tZ)(zl,{title:a("team_dashboard_card_compromised_info")})]}),(0,C.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",color:s?"ds.text.danger.quiet":"ds.text.neutral.catchy",children:s})]}),s?(0,C.tZ)("footer",{sx:Rl.FOOTER,children:(0,C.tZ)(i.rU,{className:Ll,to:r.teamMembersRoutePath,children:a("team_dashboard_card_compromised_details_link")})}):null]}),(0,C.BX)(Xl,{children:[(0,C.BX)("div",{sx:Rl.MAIN_CARD_CONTENT,children:[(0,C.BX)("header",{sx:Rl.HEADER,children:[Pl(a("team_dashboard_card_seats_taken")),(0,C.tZ)(zl,{title:a("team_dashboard_card_seats_taken_info")})]}),(0,C.tZ)(o.nv,{textStyle:c.length>10?"ds.specialty.spotlight.small":"ds.specialty.spotlight.medium",color:"ds.text.neutral.catchy",children:c}),g&&p?(0,C.tZ)(Ja,{requiredSeatsForIdP:p}):null]}),(0,C.tZ)("footer",{sx:Rl.FOOTER,children:(0,C.tZ)(i.rU,{className:Ll,to:_?{}:`${r.teamAccountRoutePath}?showSeatsDialog=true`,onClick:h,children:a("team_dashboard_card_seats_buy_link")})})]}),(0,C.BX)(Xl,{children:[(0,C.BX)("div",{sx:Rl.MAIN_CARD_CONTENT,children:[(0,C.BX)("header",{sx:Rl.HEADER,children:[Pl(a("team_dashboard_card_pending_invitations")),(0,C.tZ)(zl,{title:a("team_dashboard_card_pending_invitations_info")})]}),(0,C.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.medium",color:"ds.text.neutral.catchy",children:t.pending})]}),(0,C.tZ)("footer",{sx:Rl.FOOTER,children:(0,C.tZ)(i.rU,{onClick:h,className:Ll,to:_?{}:{pathname:r.teamMembersRoutePath,state:t.pending?{openResendPendingInvitationsDialog:!0}:{openSendInvitesDialog:!0}},children:t.pending?a("team_dashboard_card_resend_invitations_link"):a("team_dashboard_card_send_invitations_link")})})]})]})};var Ul=n(853265),ql=n(122269),Gl=n(353),Fl=n(871437),$l=n(264900),Vl=n(599477),Hl=n(433117),Wl=n(328290),Yl=n(440934),Kl=n(142094);let Ql=function(e){return e[e.AllTime=0]="AllTime",e[e.Last7Days=1]="Last7Days",e[e.Last30Days=2]="Last30Days",e}({});var Jl=n(365580),ec=n(742930);const tc=(e,t,n)=>{const a=[];switch(e){case Ql.AllTime:{if(n>=5&&n<=8){t.forEach((e=>{const{date:t}=e;1===new Date(t).getDate()&&a.push(t)}));break}const{length:e}=t;if(e<=7){t.forEach((e=>{a.push(e.date)}));break}const i=e/7;let r=e-1;for(;r>=0;)a.push(t[Math.round(r)]?.date),r-=i;break}case Ql.Last7Days:t.forEach((e=>{a.push(e.date)}));break;case Ql.Last30Days:t.forEach((e=>{const{date:t}=e;0===new Date(t).getDay()&&a.push(t)}));break;default:(0,Jl.U)(e)}return a},nc=({historyToDisplay:e,passwordHealthHistoryEmpty:t,view:n})=>{const{translate:a}=(0,y.Z)(),i=0!==e.length?(e=>{const t=new Date,n=new Date(e);let a=12*(t.getFullYear()-n.getFullYear());return a-=n.getMonth(),a+=t.getMonth(),a+1})(e[0].date):0;return tc(n,e,i),(0,C.tZ)(ec.K,{dataKey:"date",ticks:t?[]:tc(n,e,i),tickSize:4,tickFormatter:t?()=>"":e=>((e,t,n,a)=>{const i=t===Ql.AllTime&&n>=5,r=new Date(e),s=a.shortDate(r,i?hn._T.MMM_YYYY:hn._T.L_M_D),o=a.shortDate(r,hn._T.MMMM);if(i)return s===o||s.endsWith(".")?s:`${s}.`;const[l,c]=s.split(" ");return l===o?s:`${l}. ${c}`})(e,n,i,a),fontSize:"small"})},ac="legendItem--MoxC6xF4tG",ic="legendIcon--p8Emm90xE4",rc=({active:e,label:t,payload:n})=>{const{translate:a}=(0,y.Z)();if(!e)return null;const i=n?`${Ml(n[0]?.value)}%`:null;return(0,C.BX)("div",{className:"customTooltipContainer--iAM2rWgGzw",children:[(0,C.tZ)("time",{className:"date--JuYmIy6PnQ",children:t}),(0,C.BX)("div",{className:"score--RRdFFcOQCh",children:[(0,C.BX)("div",{className:ac,children:[(0,C.tZ)("div",{className:ic}),(0,C.tZ)("p",{children:a("team_dashboard_graph_score_hover_legend")})]}),(0,C.tZ)("p",{children:i})]})]})};var sc;const oc=({history:e,passwordHealthHistoryEmpty:t,infoboxOnTop:n})=>{const[a,i]=(0,r.useState)(Ql.AllTime),s=(e=>{const{length:t}=e;if(t<=2)return e;const n=(0,Hl.Z)(e[0].date),a=(0,Hl.Z)(e[t-1].date),i=(0,Wl.Z)(a,n);if(i===t-1)return e;const r=[];let s=0,o=e[s].securityIndex,l=n,c=n;for(let t=0;t<=i;t++)(0,Yl.Z)(c,l)?(r.push(e[s]),o=e[s].securityIndex,s++,l=(0,Hl.Z)(e[s]?.date)):r.push({date:c.toISOString().slice(0,10),securityIndex:o}),c=(0,Kl.Z)(c,1);return r})(e),c=((e,t)=>{switch(e){case Ql.AllTime:return t;case Ql.Last7Days:return t.slice(t.length-7,t.length);case Ql.Last30Days:return t.slice(t.length-30,t.length);default:(0,Jl.U)(e)}})(a,s),{translate:d}=(0,y.Z)();return(0,C.BX)(C.HY,{children:[(0,C.BX)("section",{className:P()("topSection--nM0XDipPte",{"addMarginTop--fLzJVO2qx1":n}),children:[(0,C.BX)("div",{className:ac,children:[(0,C.tZ)("div",{className:ic}),(0,C.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:"ds.text.neutral.quiet",children:d("team_dashboard_graph_score_legend")})]}),(0,C.BX)(l.G8v,{children:[s.length>7?(0,C.tZ)(l.yPU,{label:d("team_dashboard_graph_7_days_button"),selected:a===Ql.Last7Days,onClick:()=>{i(Ql.Last7Days)},size:"small"}):null,s.length>30?(0,C.tZ)(l.yPU,{label:d("team_dashboard_graph_30_days_button"),selected:a===Ql.Last30Days,onClick:()=>{i(Ql.Last30Days)},size:"small"}):null,(0,C.tZ)(l.yPU,{label:d("team_dashboard_graph_all_time_button"),selected:a===Ql.AllTime,onClick:()=>{s.length<=7||i(Ql.AllTime)},size:"small"})]})]}),(0,C.tZ)("section",{sx:{width:"100%",height:"211px",flexGrow:1},children:(0,C.tZ)(Ul.h,{sx:{height:"100%",width:"100%"},children:(0,C.BX)(ql.w,{data:t?[]:c,sx:{position:"relative",right:"18px"},children:[sc||(sc=(0,C.tZ)(Gl.q,{vertical:!1})),(0,C.tZ)(Fl.B,{domain:[0,100],tickFormatter:e=>`${e}%`,fontSize:"small"}),nc({historyToDisplay:c,passwordHealthHistoryEmpty:t,view:a}),(0,C.tZ)($l.u,{content:e=>{const t=d.shortDate((0,Hl.Z)(e.label),{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"});return(0,C.tZ)(rc,{...e,label:t})},animationDuration:500,animationEasing:"ease-out",cursor:!t}),(0,C.tZ)(Vl.x,{dataKey:"securityIndex",stroke:"#0e6476",strokeWidth:"2",dot:!1,activeDot:{strokeWidth:0,r:4},animationDuration:500,isAnimationActive:!0})]})})})]})};var lc=n(728207),cc=n(784906),dc=n(980936);const uc="team_dashboard_industry_benchmark_cta",_c="19px",mc="https://support.dashlane.com/hc/articles/202699411-Password-Health",pc=({showDataWarning:e,ratingVSIndustry:t,deltaVSIndustry:n})=>{const{translate:a}=(0,y.Z)(),i=(0,dc.I)(),r=i.status===Te.rq.Success&&!i.isDisabled,s={lower:{message:a("team_dashboard_industry_benchmark_info_lower",{count:n}),infoboxMood:"danger",ctas:[(0,C.tZ)(o.Qj,{href:mc,isExternal:!0,children:a(uc)},"see_how_danger")]},onPar:{message:a("team_dashboard_industry_benchmark_info_onpar"),infoboxMood:"warning",ctas:[(0,C.tZ)(o.Qj,{href:mc,isExternal:!0,children:a(uc)},"see_how_warning")]},higher:{message:a("team_dashboard_industry_benchmark_info_higher",{count:n}),infoboxMood:"positive",ctas:[]}};return e?(0,C.tZ)(o.ke,{size:"medium",sx:{marginTop:_c},title:a(r?"team_dashboard_graph_not_enough_data_warning":"team_dashboard_graph_not_enough_data_warning_min",{minPasswords:5})}):t?(0,C.tZ)(o.ke,{size:"large",sx:{marginTop:_c},title:s[t].message,mood:s[t].infoboxMood,actions:s[t].ctas,icon:"higher"===t?"HealthPositiveOutlined":"HealthNegativeOutlined"}):null},gc=({isLoading:e,history:t,passwordHealthHistoryEmpty:n})=>{const{translate:a}=(0,y.Z)(),i=(0,lc.u)(),r=(()=>{const e=(0,me.o)(cc.P.DashHackIndustryBenchmarkDev),{data:t,status:n}=(0,d.k)(_.o,"getIndustryBenchmarkData");return n!==Te.rq.Success?{status:n}:{status:n,data:e?t:null}})();if(i.status!==Te.rq.Success||r.status!==Te.rq.Success)return null;const s=!e&&n,{ratingVSIndustry:l,deltaVSIndustry:c}={...r.data},u=s||!!l;return(0,C.BX)("section",{sx:{padding:"3%",flexGrow:1,display:"flex",flexDirection:"column"},children:[(0,C.tZ)(o.X6,{as:"h5",color:"ds.text.neutral.catchy",textStyle:"ds.title.section.medium",sx:{marginBottom:"1%"},children:a("team_dashboard_graph_heading")}),u?(0,C.tZ)(pc,{showDataWarning:s,ratingVSIndustry:l,deltaVSIndustry:c}):null,(0,C.tZ)(oc,{history:t,infoboxOnTop:u,passwordHealthHistoryEmpty:n})]})},hc=({title:e,value:t,color:n})=>(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",marginRight:"8px",minWidth:"70px"},children:[(0,C.tZ)("header",{children:(0,C.tZ)(o.nv,{as:"h2",color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:e})}),(0,C.tZ)(o.nv,{textStyle:"ds.specialty.spotlight.small",color:null!=n?n:"ds.text.neutral.standard",children:t})]}),bc=({compromised:e,passwords:t,reused:n,safe:a,securityIndex:i,weak:r,passwordHealthHistoryEmpty:s})=>{const{translate:l}=(0,y.Z)();return(0,C.BX)("section",{sx:{borderTop:"1px solid",borderTopColor:"ds.border.neutral.quiet.idle",display:"flex",padding:"3% 2%"},children:[(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px",width:"240px",padding:"0 24px",borderRight:"1px solid",borderRightColor:"ds.border.neutral.quiet.idle"},children:[(0,C.tZ)("header",{children:(0,C.tZ)(o.nv,{as:"h2",color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:l("team_dashboard_password_health_breakdown_score")})}),(0,C.tZ)("div",{sx:{fontSize:"x-large",fontWeight:"bold",display:"inline-flex",alignItems:"center","& > svg":{marginRight:"7px"},color:"ds.text.neutral.standard"},children:(0,C.tZ)(Ol,{showPasswordHealthScore:!s,securityIndex:i,shieldSize:"medium",textSize:"small"})})]}),(0,C.BX)("div",{sx:{display:"flex",justifyContent:"space-between",padding:"0 24px",width:"100%"},children:[(0,C.tZ)(hc,{title:l("team_dashboard_password_health_breakdown_total"),value:t}),(0,C.tZ)(hc,{title:l("team_dashboard_password_health_breakdown_safe"),value:a,color:a?"ds.text.positive.quiet":void 0}),(0,C.tZ)(hc,{title:l("team_dashboard_password_health_breakdown_weak"),value:r,color:r?"ds.text.warning.quiet":void 0}),(0,C.tZ)(hc,{title:l("team_dashboard_password_health_breakdown_reused"),value:n,color:n?"ds.text.warning.quiet":void 0}),(0,C.tZ)(hc,{title:l("team_dashboard_password_health_breakdown_compromised"),value:e,color:e?"ds.text.danger.quiet":void 0})]})]})},yc=({isLoading:e,report:t,passwordHealthHistoryEmpty:n})=>(0,C.BX)(l.Zbd,{sx:{height:"100%",display:"flex",flexDirection:"column",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:[(0,C.tZ)(gc,{isLoading:e,history:t.passwordHealthHistory,passwordHealthHistoryEmpty:n}),(0,C.tZ)(bc,{...t.passwordHealth,passwordHealthHistoryEmpty:n})]}),xc="https://support.dashlane.com/hc/articles/4507132108946",vc={HEADING:"team_dashboard_dark_web_insights_heading",SECURITY_INCIDENTS:{LABEL:"team_dashboard_dark_web_insights_security_incidents",TOOLTIP:"team_dashboard_dark_web_insights_security_incidents_tooltip"},EMAILS_AFFECTED:{LABEL:"team_dashboard_dark_web_insights_emails_affected",TOOLTIP:"team_dashboard_dark_web_insights_emails_affected_tooltip"},SUGGESTED_INVITATION:{LABEL:"team_dashboard_dark_web_insights_suggested_invitations",TOOLTIP:"team_dashboard_dark_web_insights_suggested_invitations_tooltip"},RETURNING_USER_CTA:"team_dashboard_dark_web_insights_go_to_cta",RETURNING_USER_VIEW_DOMAIN_GUIDE_CTA:"team_dashboard_dark_web_insights_view_guide_cta",UNVERIFIED_MSG:"team_dashboard_dark_web_insights_domain_unverified_msg",UNVERIFIED_SUBTEXT:"team_dashboard_dark_web_insights_domain_unverified_sub_text",INCIDENT_FREE_MSG:"team_dashboard_dark_web_insights_domain_incident_free_msg",INCIDENT_FREE_SUBTEXT:"team_dashboard_dark_web_insights_domain_incident_free_sub_text",GENERATING_INSIGHTS_MESSAGE:"team_dashboard_dark_web_insights_generating_msg",NEW_INCIDENTS_NOTIFICATION_MSG:{ONE:"team_dashboard_dark_web_insights_notify_new_incidents_one",MANY:"team_dashboard_dark_web_insights_notify_new_incidents_many"},TEAM_NEW_LABEL:"team_new_label"},Sc=({count:e,labelAndTooltip:t,primaryColor:n,secondaryColor:a})=>{const{translate:i}=(0,y.Z)();return(0,C.BX)(l.Ejs,{gap:"6px",sx:{margin:"16px 0"},children:[(0,C.tZ)(l.X6q,{size:"x-small",color:n,sx:{width:"44px"},children:e}),(0,C.BX)(l.ua7,{sx:{fontSize:2,maxWidth:"180px"},placement:"top",content:i(t.TOOLTIP),children:[(0,C.tZ)(l.nvN,{"aria-label":i(t.LABEL),size:"small",sx:{minWidth:"calc(100% - 70px)",width:"min-content"},color:null!=a?a:n,children:i(t.LABEL)}),(0,C.tZ)(l.uMt,{size:13,tabIndex:0,color:null!=a?a:n})]})]})},fc=({children:e})=>(0,C.tZ)(l.Zbd,{sx:{minHeight:"418px",width:"282px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:(0,C.tZ)(l.Ejs,{sx:{minHeight:"418px",padding:"20px"},flexDirection:"column",justifyContent:"space-between",alignItems:"start",children:e})}),Zc=({text:e,subtext:t,imgSrc:n})=>(0,C.BX)(C.HY,{children:[(0,C.tZ)("img",{src:n}),(0,C.tZ)(l.nvN,{size:"medium",bold:!0,sx:{marginBottom:"8px"},children:e}),(0,C.tZ)(l.nvN,{size:"small",color:l.colors.grey00,children:t})]}),Cc=({domain:e})=>(0,C.tZ)(l.nvN,{size:"x-small",bold:!0,sx:{padding:"4px 8px",backgroundColor:`${l.colors.dashGreen06}`,borderRadius:"4px",width:"fit-content",height:"24px",marginBottom:"34px"},children:e}),Tc=({newLeaksCount:e,newLeaksAffectedEmailCount:t})=>{const{translate:n}=(0,y.Z)(),{setHasNewBreaches:a}=be();(0,r.useEffect)((()=>{e>0&&a(!0)}),[e,a]);const i=e>1?vc.NEW_INCIDENTS_NOTIFICATION_MSG.MANY:vc.NEW_INCIDENTS_NOTIFICATION_MSG.ONE;return e>0?(0,C.BX)(l.Ejs,{flexDirection:"row",sx:{backgroundColor:l.colors.pink05,borderRadius:"4px",padding:"5px 8px",marginTop:"25px"},children:[(0,C.tZ)(l.nvN,{size:"small",color:l.colors.red00,sx:{width:"calc(100% - 5px)"},children:n(i,{numIncidents:e,count:t})}),(0,C.tZ)(l.P_k,{dot:!0,ariaLabel:n(vc.TEAM_NEW_LABEL)})]}):null},Dc=({domainInfo:e})=>{const t=e.leaksCount,n=e.emailsImpactedCount,a=e.emailsImpactedCount-e.teamMembersImpactedCount;return(0,C.BX)(C.HY,{children:[(0,C.tZ)(Sc,{count:t,labelAndTooltip:vc.SECURITY_INCIDENTS,primaryColor:l.colors.dashGreen00,secondaryColor:l.colors.dashGreen01}),(0,C.tZ)(Sc,{count:n,labelAndTooltip:vc.EMAILS_AFFECTED,primaryColor:l.colors.dashGreen00,secondaryColor:l.colors.dashGreen01}),(0,C.tZ)(Sc,{count:a,labelAndTooltip:vc.SUGGESTED_INVITATION,primaryColor:l.colors.dashGreen00,secondaryColor:l.colors.dashGreen01}),(0,C.tZ)(Tc,{newLeaksCount:e.newLeaksCount,newLeaksAffectedEmailCount:e.newLeaksAffectedEmailCount})]})},kc=({domainName:e,domainInfo:t})=>{const{translate:n}=(0,y.Z)(),{routes:a}=(0,os.Xo)();return(0,C.BX)(C.HY,{children:[(0,C.BX)("section",{sx:{width:"100%"},children:[(0,C.tZ)(Cc,{domain:e}),t.leaksCount>0?(0,C.tZ)(Dc,{domainInfo:t}):(0,C.tZ)(Zc,{imgSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHZpZXdCb3g9IjAgMCA1MiA1MiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzMxMTNfMTkwOTY0KSI+CjxyZWN0IHdpZHRoPSI1MiIgaGVpZ2h0PSI1MiIgcng9IjI2IiBmaWxsPSIjRDlERkUwIi8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNMjAuNzIxOSAxMy40NzMzQzE0LjI4MjEgMTQuMjgxNiA5LjcxNjc2IDIwLjE1NzMgMTAuNTI1IDI2LjU5NzJMMTEuMTk1MyAzMS45MzgxTDcuOTg0NDUgMzIuMzQxMUM2Ljg4ODQ4IDMyLjQ3ODYgNi4xMTE1MiAzMy40Nzg2IDYuMjQ5MDggMzQuNTc0Nkw5LjE2NTA4IDU3LjgwOEM5LjMwMjYzIDU4LjkwNCAxMC4zMDI2IDU5LjY4MDkgMTEuMzk4NiA1OS41NDM0TDQwLjI5OTIgNTUuOTE2MUM0MS4zOTUyIDU1Ljc3ODYgNDIuMTcyMSA1NC43Nzg2IDQyLjAzNDYgNTMuNjgyNkwzOS4xMTg2IDMwLjQ0OTJDMzguOTgxIDI5LjM1MzIgMzcuOTgxIDI4LjU3NjIgMzYuODg1MSAyOC43MTM4TDM0LjUxNjEgMjkuMDExMUwzMy44NDU4IDIzLjY3MDJDMzMuMDM3NiAxNy4yMzA0IDI3LjE2MTggMTIuNjY1MSAyMC43MjE5IDEzLjQ3MzNaTTE0LjE3NjUgMjYuNjYxTDE0Ljc4MjQgMzEuNDg3OUwzMC45Mjc1IDI5LjQ2MTVMMzAuMzIxNyAyNC42MzQ2QzI5Ljc2MjIgMjAuMTc2MiAyNS42OTQzIDE3LjAxNTYgMjEuMjM2IDE3LjU3NTJDMTYuNzc3NiAxOC4xMzQ4IDEzLjYxNyAyMi4yMDI2IDE0LjE3NjUgMjYuNjYxWk00Ni43NzUzIDE4LjY1ODZMNDAuNDg1NiAyMi42MTkzTDQxLjkxMTEgMjQuODgyOUw0OC4yMDA3IDIwLjkyMjJMNDYuNzc1MyAxOC42NTg2Wk00My4xODE2IDI3LjI3NjRMNDcuMDcxNyAyNy4zNjhMNDcuMDEwMyAyOS45Nzc3TDQzLjEyMDIgMjkuODg2MUw0My4xODE2IDI3LjI3NjRaTTM3LjQ1NiAxNS43NDIyTDM2LjA3NyAyMC42Nzc3TDM4LjgxNzQgMjEuNDQzNEw0MC4xOTY0IDE2LjUwNzlMMzcuNDU2IDE1Ljc0MjJaIiBmaWxsPSIjMEUzNTNEIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMzExM18xOTA5NjQiPgo8cmVjdCB3aWR0aD0iNTIiIGhlaWdodD0iNTIiIHJ4PSIyNiIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",text:n(vc.INCIDENT_FREE_MSG,{domainName:e}),subtext:n(vc.INCIDENT_FREE_SUBTEXT)})]}),(0,C.tZ)(i.rU,{to:a.teamDarkWebInsightsRoutePath,sx:{textDecoration:"none",color:`${l.colors.midGreen00}`,marginBottom:"16px","&:hover":{textDecoration:"underline"}},onClick:()=>{(0,h.Kz)(new c.UserOpenDomainDarkWebMonitoringEvent({accessPath:c.AccessPath.MainDashboardButton,isFirstVisit:!1}))},children:n(vc.RETURNING_USER_CTA)})]})},Ec=({domainName:e})=>{const{translate:t}=(0,y.Z)();return(0,C.BX)(C.HY,{children:[(0,C.BX)("section",{sx:{width:"100%"},children:[(0,C.tZ)(Cc,{domain:e}),(0,C.tZ)(Zc,{imgSrc:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjUzIiBoZWlnaHQ9IjUzIiByeD0iMjYuNSIgZmlsbD0iI0Q5REZFMCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI2LjgwMDQgMTMuNzUzN0wyNi45NjE2IDEzLjEwOTFDMjcuNjA2MiAxMC42MTEzIDI5Ljg2MjIgOSAzMi4zNjAxIDlDMzUuMzQxMyA5IDM4IDExLjQxNzMgMzggMTQuNDc4OUMzOCAxNi45NzY4IDM2LjMwNzkgMTkuMDcxNiAzMy45NzEyIDE5LjcxNjRWMjAuNzY0SDMwLjc0ODJWMTguODMwM0MzMC43NDgyIDE3Ljc4MjcgMzEuNTU0IDE2LjgxNiAzMi42ODE5IDE2LjczNTRDMzMuODA5OSAxNi41NzQyIDM0Ljc3NjggMTUuNjg3OSAzNC43NzY4IDE0LjQ3OTRDMzQuNzc2OCAxMy4xOTAyIDMzLjY0ODkgMTIuMjIzMyAzMi4zNTk1IDEyLjIyMzNDMzEuMjMxNiAxMi4yMjMzIDMwLjM0NTMgMTIuODY3OSAzMC4wMjI5IDEzLjkxNTRMMjkuODYxNyAxNC41NTk5TDI2LjggMTMuNzU0MkwyNi44MDA0IDEzLjc1MzdaTTM0LjM3NDQgMjMuNzQ1NUMzNC4zNzQ0IDI0Ljg1OCAzMy40NzI2IDI1Ljc2IDMyLjM2MDEgMjUuNzZDMzEuMjQ3NiAyNS43NiAzMC4zNDU2IDI0Ljg1OCAzMC4zNDU2IDIzLjc0NTVDMzAuMzQ1NiAyMi42MzMgMzEuMjQ3NiAyMS43MzEzIDMyLjM2MDEgMjEuNzMxM0MzMy40NzI2IDIxLjczMTMgMzQuMzc0NCAyMi42MzMgMzQuMzc0NCAyMy43NDU1Wk0zNi44NzkxIDM0LjYzMzlDMzYuODc5MSAzMi42MTggMzYuNDE5MyAzMC42ODU5IDM1LjU0MTMgMjguODhMMzEuNjk1OCAyOC44OEwzMi4xOTczIDI5LjcxOTlDMzIuODI0MiAzMC43Njk5IDMzLjIwMDQgMzEuOTAzOSAzMy40MDk0IDMzLjA3OTlMMjkuMzEyOSAzMy4wNzk5QzI5LjI3MTIgMzAuOTggMjguOTc4NCAyOC44OCAyOC41MTg2IDI2LjgyMTlDMjcuNTk4OSAyMy4xNjgxIDI1LjkyNjkgMjEuMzIgMjMuNTAyNCAyMS4zMkMxNi4xMDMyIDIxLjI3OCAxMC4wNDE5IDI3LjI4NDEgMTAuMDAwMiAzNC42NzU5QzkuOTU4NDIgNDIuMDY3NyAxNS44OTQzIDQ4LjE1NzkgMjMuMjkzMyA0OC4xOTk4SDIzLjYyNzhDMzEuMDI2NyA0OC4xMTU4IDM2Ljk2MjUgNDIuMDY3OSAzNi44NzkxIDM0LjYzMzlaTTIxLjAzNjEgMzYuNDRMMjUuOTY4NiAzNi40NEMyNS43NTk1IDQxLjIyNzkgMjQuNzU2NSA0NC44Mzk5IDIzLjUwMjMgNDQuODM5OUMyMi4yNDgyIDQ0LjgzOTkgMjEuMjQ1MSA0MS4yMjc5IDIxLjAzNjEgMzYuNDRaTTIzLjUwMjMgMjQuNjgwM0MyNC43NTY1IDI0LjY4MDMgMjUuNzU5NSAyOC4zMzQyIDI1Ljk2ODYgMzMuMDgwMkgyMS4wMzYxQzIxLjI0NTIgMjguMzM0MiAyMi4yNDgyIDI0LjY4MDMgMjMuNTAyMyAyNC42ODAzWk0xNy42OTE3IDMzLjA4MDJMMTMuNjM2OSAzMy4wODAzQzE0LjA5NjcgMzAuMTQwMSAxNS44OTQxIDI3LjUzNjIgMTguNDg2IDI2LjAyNDJMMTguNzM2OCAyNS44OTgyQzE4LjY1MzEgMjYuMTkyMyAxOC41Njk3IDI2LjQ4NjIgMTguNDg2IDI2LjgyMjJDMTguMDI2MiAyOC44ODAzIDE3LjczMzQgMzAuOTgwMyAxNy42OTE3IDMzLjA4MDJaTTE4LjQ4NiA0Mi42OTgyQzE4LjU2OTcgNDMuMDM0MiAxOC42NTMxIDQzLjMyOCAxOC43MzY4IDQzLjYyMjFMMTguNzM2OCA0My42MjIyQzE3LjEwNjUgNDIuNzQwMSAxNS43MjcgNDEuNDM4MiAxNC44NDkgMzkuODAwMkMxNC4yMjIxIDM4Ljc1MDIgMTMuODQ1OSAzNy42MTYxIDEzLjYzNjkgMzYuNDQwMUgxNy42OTE3QzE3LjczMzQgMzguNTQwMSAxOC4wMjYyIDQwLjY0MDEgMTguNDg2IDQyLjY5ODJaTTI5LjMxMjggMzYuNDQwMUwzMy4zNjc2IDM2LjQ0QzMyLjkwNzggMzkuNDIyMSAzMS4xMTA0IDQxLjk4NDEgMjguNTE4NCA0My40OTYxTDI4LjI2NzcgNDMuNjIyMUMyOC4zNTE0IDQzLjMyOCAyOC40MzQ4IDQzLjAzNDEgMjguNTE4NCA0Mi42OTgxQzI4Ljk3ODMgNDAuNjQgMjkuMjcxMSAzOC41NCAyOS4zMTI4IDM2LjQ0MDFaIiBmaWxsPSIjMEUzNTNEIi8+Cjwvc3ZnPgo=",text:t(vc.UNVERIFIED_MSG),subtext:t(vc.UNVERIFIED_SUBTEXT)})]}),(0,C.tZ)(l.rUS,{sx:{textDecoration:"none",fontWeight:"lighter",marginBottom:"16px","&:hover":{textDecoration:"underline"}},color:l.colors.midGreen00,target:"_blank",rel:"noopener noreferrer",href:xc,onClick:()=>{(0,h.Kz)(new c.UserOpenHelpCenterEvent({helpCenterArticleCta:c.HelpCenterArticleCta.ViewDomainVerificationGuide}))},children:t(vc.RETURNING_USER_VIEW_DOMAIN_GUIDE_CTA)})]})},wc=({domainName:e})=>{const{translate:t}=(0,y.Z)();return(0,C.BX)(C.HY,{children:[(0,C.tZ)(Cc,{domain:e}),(0,C.tZ)(o.ZX,{size:44,sx:{alignSelf:"center"}}),(0,C.tZ)(l.nvN,{size:"small",color:l.colors.grey00,sx:{marginBottom:"3em",overflow:"hidden",width:"-webkit-fill-available"},children:t(vc.GENERATING_INSIGHTS_MESSAGE)})]})},Ic=({verifiedOrPendingDomain:e,dwiSummaryResponse:t})=>{const{translate:n}=(0,y.Z)(),a=e.status===wl.p.valid,i=e.name;return(0,C.BX)(fc,{children:[(0,C.tZ)(o.X6,{as:"h5",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:n(vc.HEADING)}),a?t?.success?(0,C.tZ)(kc,{domainName:i,domainInfo:t.data[i]}):(0,C.tZ)(wc,{domainName:i}):(0,C.tZ)(Ec,{domainName:i})]})},Nc=n.p+"daa928a30146cfbef943.png";var Ac,Mc;const Oc={TEAM_NEW_LABEL:"team_new_label",HEADING:"team_dashboard_dark_web_insights_discovery_heading",SUBTEXT:"team_dashboard_dark_web_insights_discovery_subtext",ALTERNATE_HEADING:"team_dashboard_dark_web_insights_discovery_heading_alternate",ALTERNATE_SUBTEXT:"team_dashboard_dark_web_insights_discovery_subtext_alternate",SECURITY_INCIDENTS:{LABEL:"team_dashboard_dark_web_insights_security_incidents",TOOLTIP:"team_dashboard_dark_web_insights_security_incidents_tooltip"},EMAILS_AFFECTED:{LABEL:"team_dashboard_dark_web_insights_emails_affected",TOOLTIP:"team_dashboard_dark_web_insights_emails_affected_tooltip"},GET_STARTED_CTA:"team_dashboard_dark_web_insights_discovery_get_started_cta"},Lc=()=>{const{translate:e}=(0,y.Z)(),{routes:t}=(0,os.Xo)(),n=(0,i.k6)(),{unseen:a}=(0,pe.m)(_e.O.TacDarkWebInsightsNewBadge);return(0,C.tZ)(o.zx,{onClick:()=>{(0,h.Kz)(new c.UserOpenDomainDarkWebMonitoringEvent({accessPath:c.AccessPath.MainDashboardButton,isFirstVisit:a})),n.push(t.teamDarkWebInsightsRoutePath)},children:e(Oc.GET_STARTED_CTA)},"primary")},Bc=({data:e,companyName:t})=>{const{translate:n}=(0,y.Z)(),[a]=Object.keys(e),i=e[a];return(0,C.BX)(fc,{children:[(0,C.tZ)(o.Ct,{layout:"labelOnly",label:n(Oc.TEAM_NEW_LABEL),mood:"brand"}),(0,C.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h3",sx:{marginTop:"1em",width:"100%",overflow:"hidden"},children:n(Oc.HEADING,{companyName:t})}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:n(Oc.SUBTEXT)}),(0,C.BX)("div",{sx:{backgroundColor:`${l.colors.dashGreen06}`,padding:"2px 14px",width:"100%",borderRadius:"10px"},children:[(0,C.tZ)(Sc,{count:i.leaksCount,labelAndTooltip:Oc.SECURITY_INCIDENTS,primaryColor:l.colors.dashGreen01}),(0,C.tZ)(Sc,{count:i.emailsImpactedCount,labelAndTooltip:Oc.EMAILS_AFFECTED,primaryColor:l.colors.dashGreen01})]}),Ac||(Ac=(0,C.tZ)(Lc,{}))]})},Rc=({companyName:e})=>{const{translate:t}=(0,y.Z)();return(0,C.BX)(fc,{children:[(0,C.tZ)("div",{sx:{alignSelf:"end"},children:(0,C.tZ)(o.Ct,{layout:"labelOnly",label:t(Oc.TEAM_NEW_LABEL),mood:"brand"})}),(0,C.tZ)("img",{sx:{backgroundColor:`${l.colors.midGreen05}`,height:"122px",width:"122px",borderRadius:"50%",backgroundImage:`url(${Nc})`,backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPositionX:"60%"}}),(0,C.tZ)(o.X6,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",as:"h3",sx:{width:"100%"},children:t(Oc.ALTERNATE_HEADING,{companyName:e})}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t(Oc.ALTERNATE_SUBTEXT)}),Mc||(Mc=(0,C.tZ)(Lc,{}))]})},zc=({dwiSummaryResponse:e})=>{var t;const{spaceDetails:n}=(0,Ce.fV)(),a=null!=(t=n?.teamName)?t:"-";return e?.success?(0,C.tZ)(Bc,{data:e.data,companyName:a}):(0,C.tZ)(Rc,{companyName:a})};var Pc,Xc,jc;const Uc={seats:{pending:0,provisioned:0,used:0},passwordHealthHistory:[],passwordHealth:{compromised:0,passwords:0,reused:0,safe:0,securityIndex:0,weak:0}},qc=()=>{const{data:e,status:t}=(0,d.k)(El.B,"getReport"),n=t===Te.rq.Success?e:Uc,a=t===Te.rq.Loading,{verifiedOrPendingDomain:{domain:i,status:s}}=Nl(),[u,_]=(0,r.useState)(null),m=t===Te.rq.Success&&0===n.passwordHealthHistory.length,p=(0,r.useCallback)((async()=>{const e=await fe.C.getDarkWebInsightsSummary();_(e)}),[]);(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacDashboard),p()}),[p]);const g=Xa({dismissible:!0}),{translate:b}=(0,y.Z)();return(0,C.BX)(hs,{header:(0,C.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:b("dashboard_page_title")}),children:[(0,C.BX)(l.T5p,{fullWidth:!0,alignItems:"top",gap:"32px",gridTemplateColumns:"710px auto",gridTemplateRows:"auto auto",gridTemplateAreas:`'cards cards' '${g?"pwHealth upgrade":"pwHealth dwi"}'`,children:[(0,C.tZ)(l.dDn,{gridArea:"cards",children:(0,C.tZ)(jl,{passwordHealth:n.passwordHealth,seats:n.seats,passwordHealthHistoryEmpty:m})}),(0,C.tZ)(l.dDn,{gridArea:"pwHealth",sx:{minHeight:"418px"},children:(0,C.tZ)(yc,{isLoading:a,report:n,passwordHealthHistoryEmpty:m})}),g?(0,C.tZ)(l.dDn,{gridArea:"upgrade",sx:{width:"282px"},children:(0,C.tZ)(l.Zbd,{sx:{padding:"16px",backgroundColor:"ds.container.agnostic.neutral.supershy",borderColor:"ds.border.neutral.quiet.idle"},children:Pc||(Pc=(0,C.tZ)(Ua,{dismissible:!0}))})}):(0,C.tZ)(l.dDn,{gridArea:"dwi",children:s===Il.Loading?Xc||(Xc=(0,C.tZ)(fc,{})):null!==i?(0,C.tZ)(Ic,{verifiedOrPendingDomain:i,dwiSummaryResponse:u}):(0,C.tZ)(zc,{dwiSummaryResponse:u})})]}),a?jc||(jc=(0,C.tZ)(Al.a,{})):null]})},Gc=()=>{const{translate:e}=(0,y.Z)();return(0,C.tZ)("div",{children:(0,C.BX)(Lo,{children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:e("team_breach_report_need_help")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:e("team_dark_web_insights_need_help_description")}),(0,C.tZ)(Ro,{href:"https://support.dashlane.com/hc/articles/5015658490514",onClick:()=>{(0,h.Kz)(new c.UserOpenHelpCenterEvent({helpCenterArticleCta:c.HelpCenterArticleCta.LearnAboutDarkWebInsights}))},children:e("team_dark_web_insights_learn_more_txt")}),(0,C.tZ)(Ro,{href:xc,onClick:()=>{(0,h.Kz)(new c.UserOpenHelpCenterEvent({helpCenterArticleCta:c.HelpCenterArticleCta.LearnAboutDomainVerification}))},children:e("team_breach_report_learn_domain_verification_txt")})]})})};var Fc=n(894017),$c=n.n(Fc);const Vc=({registerDomain:e=(()=>{}),disabled:t,registrationError:n,clearRegistrationErrors:a=(()=>{}),domainLoadError:i})=>{const{translate:s}=(0,y.Z)(),[o,c]=r.useState(""),d=i?"":s("team_settings_domain_url_placeholder");return(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{className:"domainUrlInput--VQjVVbbN2d",children:[(0,C.tZ)(l.oil,{value:o,placeholder:d,fullWidth:!0,feedbackText:n,feedbackType:n?"error":void 0,onChange:e=>{n&&a(),c(e.target.value)},disabled:!!i||t}),i&&(0,C.tZ)("p",{className:"domainLoadErrorText--WEJL2Ne0Pt",children:i})]}),(0,C.tZ)(l.zxk,{type:"button",className:P()("domainUrlButton--lFqlfJ3Gzv",{"domainLoadError--ajAHmgDUO9":i}),disabled:t,nature:"secondary",onClick:()=>e(o),children:s("team_settings_domain_button_add")})]})};var Hc=n(418402),Wc=n.n(Hc);const Yc=({domain:e,onConfirm:t,onDismiss:n})=>{const{translate:a}=(0,y.Z)(),[i,s]=(0,r.useState)(!1),o=(0,r.useRef)(!1);return(0,r.useEffect)((()=>()=>{o.current=!0}),[o]),(0,C.tZ)(gr.o,{isOpen:!0,onRequestClose:n,footer:(0,C.tZ)(l.cNS,{primaryButtonTitle:a("team_settings_domain_deactivate_button_remove"),primaryButtonOnClick:async()=>{s(!0),await t(),o.current||(s(!1),n())},primaryButtonProps:{disabled:i},secondaryButtonTitle:a("team_settings_domain_deactivate_button_cancel"),secondaryButtonOnClick:n,intent:"primary"}),title:a("team_settings_domain_deactivate_title"),children:(0,C.tZ)("p",{children:a.markup("team_settings_domain_deactivate_description_markup",{domainUrl:e.name})})})},Kc=({domain:e,deactivateDomain:t,isDisabled:n,disabledTooltipText:a})=>{const[i,s]=(0,r.useState)(!1);return(0,C.BX)(C.HY,{children:[i?(0,C.tZ)(Yc,{domain:e,onConfirm:t,onDismiss:()=>s(!1)}):null,(0,C.tZ)("div",{className:"deactivateTrashcan--nLkrRLE9CS",onClick:()=>{n||s(!0)},children:(0,C.tZ)(l.ua7,{passThrough:!n,placement:"top",content:null!=a?a:"",sx:{maxWidth:"180px"},children:(0,C.tZ)(l.XHJ,{disabled:n,size:25,color:Wc()["--dash-green-00"]})})})]})},Qc="column--QmWD9Od6Ul",Jc=({label:e,centerLabel:t,labelHelper:n,children:a})=>(0,C.BX)("div",{className:"row--b0sY7KH6EJ",children:[(0,C.BX)("div",{className:Qc,children:[(0,C.tZ)("div",{className:P()("label--IAVg4TIabV",{"centerLabel--kRDzb_3UrS":t}),children:e}),n?(0,C.tZ)("div",{className:"labelHelper--ZvFzwTua9S",children:n}):null]}),(0,C.tZ)("div",{className:Qc,children:a})]});let ed=function(e){return e[e.ClaimDomain=0]="ClaimDomain",e[e.VerifyDomain=1]="VerifyDomain",e[e.SSOConnector=2]="SSOConnector",e[e.EnableSSO=3]="EnableSSO",e}({}),td=function(e){return e[e.SSOConnector=0]="SSOConnector",e[e.ConfigureIDP=1]="ConfigureIDP",e[e.EnableSSO=2]="EnableSSO",e}({}),nd=function(e){return e[e.dismiss=0]="dismiss",e[e.action=1]="action",e}({});const ad="team_settings_domain_deactivate_button_tooltip_error",id=({currentStep:e,deactivateDomain:t,domain:n,isDisabled:a,setCurrentSteps:i,verifyDomain:s})=>{var o;const[l,c]=r.useState(!1),{translate:d}=(0,y.Z)();return(0,C.BX)("div",{className:"domainContainer--uTWD0PQykR",children:[(()=>{if(!n)return null;switch(e){case od.Verify:case od.VerifyFailed:return(0,C.BX)(C.HY,{children:[(0,C.tZ)(ud,{domain:n,verifyDomain:()=>c(!0),domainStep:e}),(0,C.tZ)(Kc,{domain:n,deactivateDomain:()=>t(n),isDisabled:a,disabledTooltipText:d(ad)})]});case od.Complete:return(0,C.BX)(C.HY,{children:[o||(o=(0,C.tZ)(pd,{domain:n})),(0,C.tZ)(Kc,{domain:n,deactivateDomain:()=>t(n),isDisabled:a,disabledTooltipText:d(ad)})]});default:return null}})(),(()=>{if(!n||!l)return null;switch(e){case od.Verify:return(0,C.tZ)(yd,{domainName:n.name,onConfirm:()=>s(n),onDismiss:()=>c(!1)});case od.VerifyFailed:return(0,C.tZ)(xd,{onDismiss:()=>{i((e=>({...e,[n.id]:od.Verify}))),c(!1)}});default:return null}})()]},n.id)},rd="team_settings_domain_register_invalid_error",sd={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support"};let od=function(e){return e[e.Register=0]="Register",e[e.Verify=1]="Verify",e[e.VerifyFailed=2]="VerifyFailed",e[e.Complete=3]="Complete",e}({});const ld=({isTeamSettingsLoading:e,teamSettings:t,setStepComplete:n,uncompleteSteps:a})=>{const{translate:i}=(0,y.Z)(),[s,o]=r.useState(!1),[l,c]=r.useState([]),[d,u]=r.useState(""),[_,m]=r.useState(""),[p,g]=r.useState({}),h=e=>"valid"===e.status,b=()=>l.filter((e=>h(e))),x=t?.ssoEnabled||!1,v=r.useCallback(((e=[])=>{e.forEach((e=>{switch(e.status){case wl.p.pending:g((t=>({...t,[e.id]:od.Verify}))),n(ed.ClaimDomain);break;case wl.p.valid:g((t=>({...t,[e.id]:od.Complete}))),n(ed.ClaimDomain),n(ed.VerifyDomain);break;default:g((t=>({...t,[e.id]:od.Register})))}}))}),[]),S=r.useCallback((async()=>{o(!0),m("");const e=await fe.C.getTeamDomains();return o(!1),e.success?(c(e.domains),e.domains):(m(i("team_settings_domain_fetch_error")),Promise.resolve(void 0))}),[fe.C.getTeamDomains]),f=async e=>{const t=await fe.C.completeTeamDomainRegistration();t.success&&t.domains.find((t=>t.name===e.name))&&t.domains.find((t=>t.name===e.name))?.status===wl.p.valid?(n(ed.VerifyDomain),g((t=>({...t,[e.id]:od.Complete})))):g((t=>({...t,[e.id]:od.VerifyFailed})))},Z=async e=>{e&&(await fe.C.deactivateTeamDomain({domain:e.name})).success&&(v(await S()),b().length||a([ed.EnableSSO,ed.SSOConnector,ed.ClaimDomain,ed.VerifyDomain]))};return r.useEffect((()=>{(async()=>{v(await S())})()}),[S,v]),(0,C.BX)(C.HY,{children:[(0,C.tZ)(Jc,{label:`1. ${i("team_settings_domain_title")}`,labelHelper:i("team_settings_domain_multi_description"),children:s||e?(0,C.tZ)(fr.Z,{size:20,containerStyle:{alignItems:"normal"}}):(0,C.tZ)(Vc,{registerDomain:async e=>{if(l.length>=5)return;if(!$c().isFQDN(e))return void u(i(rd));const t=await fe.C.registerTeamDomain({domain:e});if(t.success)v(await S());else if(!t.success){const{error:{code:e}}=t,n=sd[e];u(i(null!=n?n:rd))}},domainLoadError:_,registrationError:d,disabled:l.length>=5,clearRegistrationErrors:()=>u("")})}),s||e||0===l.length?null:(0,C.BX)(C.HY,{children:[(0,C.tZ)("div",{className:"divider--SU_Ctssudp"}),(0,C.tZ)(Jc,{label:i("team_settings_domain_added"),children:(0,C.tZ)("div",{className:"domainsContainer--eO_SBqHaFr",children:l.map(((e,t)=>t<5?(0,C.tZ)(id,{currentStep:p[e.id],deactivateDomain:Z,domain:e,isDisabled:x&&1===b().length&&h(e),setCurrentSteps:g,verifyDomain:f},e.id):null))})})]})]})},{orange00:cd,dashGreen02:dd}=l.colors,ud=({verifyDomain:e,domain:t,domainStep:n})=>{const{translate:a}=(0,y.Z)();return(0,C.BX)(l.T5p,{gap:"10px",gridTemplateColumns:"1fr auto",children:[(0,C.tZ)(l.oil,{value:t?t.name:"",fullWidth:!0,readOnly:!0,endAdornment:(0,C.BX)(l.T5p,{gridTemplateColumns:"auto auto",gap:"5px",children:[(0,C.tZ)(l.nvN,{size:"small",color:n===od.VerifyFailed?cd:dd,children:n===od.VerifyFailed?a("team_settings_domain_verify_failed"):a("team_settings_domain_not_verified")}),(0,C.tZ)(l.enX,{color:n===od.VerifyFailed?cd:dd})]}),feedbackType:n===od.VerifyFailed?"warning":void 0}),(0,C.tZ)(l.zxk,{nature:"secondary",onClick:e,type:"button",children:a("team_settings_domain_button_verify")})]})};var _d;const{accessibleValidatorGreen:md}=l.colors,pd=({domain:e})=>(0,C.tZ)(l.oil,{value:e.name,endAdornment:_d||(_d=(0,C.tZ)(l.rE2,{color:md})),readOnly:!0,fullWidth:!0});var gd,hd=n(501234);const bd="team_settings_domain_verify_load_error",yd=({description:e,isDarkWebInsights:t,secondaryDescription:n,domainName:a,href:i="https://support.dashlane.com/hc/articles/360013149040",linkLabel:s,onClick:d,onDismiss:u,onConfirm:_})=>{const{translate:m}=(0,y.Z)(),[p,g]=(0,r.useState)({id:0,name:""}),[b,x]=(0,r.useState)(""),[v,S]=(0,r.useState)(!1),[f,Z]=(0,r.useState)(!1);(0,r.useEffect)((()=>{(async()=>{S(!0);try{const e=await fe.C.getTeamDomains();if(e.success){const t=e.domains.find((e=>e.name===a));t?g(t):x(m(bd))}}catch(e){x(m(bd))}finally{S(!1)}})()}),[a,m]);const{dnsToken:{computedToken:T,challengeDomain:D}={computedToken:"",challengeDomain:""}}=p,k=({id:e,inputValue:t,labelText:n})=>({textInputProps:{id:e,label:n,readOnly:!0,disabled:v,fullWidth:!0,startAdornment:v?gd||(gd=(0,C.tZ)(o.ZX,{})):void 0},iconButtonProps:{disabled:v},inputValue:t});return(0,C.BX)(l.VqE,{isOpen:!0,onClose:u,closeIconName:m("_common_dialog_dismiss_button"),children:[(0,C.tZ)(l.$N8,{title:m("team_settings_domain_verify_title")}),(0,C.tZ)(l.a7O,{children:(0,C.BX)(l.T5p,{gap:"32px",gridTemplateColumns:"1fr",gridAutoRows:"auto",children:[(0,C.tZ)(l.nvN,{color:l.colors.grey00,children:e||m.markup("team_settings_domain_verify_description_markup",{domainUrl:a})}),b?(0,C.tZ)(l.nvN,{color:l.colors.red00,children:b}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(hd.x,{...k({id:"hostnameInput",labelText:m("team_settings_domain_verify_host"),inputValue:D})}),(0,C.tZ)(hd.x,{...k({id:"txtValueInput",labelText:m("team_settings_domain_verify_txt"),inputValue:T})})]}),n?(0,C.tZ)(l.nvN,{color:l.colors.grey00,children:n}):null]})}),(0,C.tZ)(l.cNS,{primaryButtonTitle:m("team_settings_domain_verify_confirm"),primaryButtonOnClick:async()=>{Z(!0);try{await _()}catch(e){x(e.message),t&&(0,h.Kz)(new c.UserVerifyDomainEvent({domainVerificationStep:c.DomainVerificationStep.DomainVerificationError}))}finally{Z(!1),t&&(0,h.Kz)(new c.UserVerifyDomainEvent({domainVerificationStep:c.DomainVerificationStep.TapVerifyDomainCtaWithDnsInformation}))}},primaryButtonProps:{disabled:!!b||v||f},intent:"primary",children:(0,C.tZ)(l.rUS,{sx:{alignSelf:"center",mr:"auto"},color:l.colors.midGreen00,target:"_blank",rel:"noopener noreferrer",href:i,onClick:d,children:s||m("team_settings_domain_verify_setup")})})]})},xd=({onDismiss:e,domainName:t})=>{const{translate:n}=(0,y.Z)(),a=t?n.markup("team_settings_domain_verify_failure_title_markup",{domainUrl:t}):n("team_settings_domain_verify_failure_title");return(0,C.BX)(l.VqE,{isOpen:!0,onClose:e,children:[(0,C.tZ)(l.$N8,{title:a}),(0,C.tZ)(l.a7O,{children:n("team_settings_domain_verify_failure_desc")}),(0,C.tZ)(l.cNS,{primaryButtonTitle:n("team_settings_domain_verify_failure_button"),primaryButtonOnClick:e,intent:"primary"})]})},vd=({description:e,isDarkWebInsights:t,secondaryDescription:n,domainName:a,linkLabel:i,href:s,onClick:o,onDismiss:l,onError:c,onSuccess:d})=>{const[u,_]=(0,r.useState)(!1),m=(0,r.useRef)(!1),p=(0,r.useCallback)((async()=>{const e=await fe.C.completeTeamDomainRegistration();if(!m.current){if(e.success){const t=e.domains.find((e=>e.name===a));t?.status===wl.p.valid?d():c&&c()}else _(!0);return()=>{m.current=!0}}}),[a,d,c]);return u?(0,C.tZ)(xd,{onDismiss:l,domainName:a}):(0,C.tZ)(yd,{description:e,isDarkWebInsights:t,secondaryDescription:n,linkLabel:i,domainName:a,href:s,onConfirm:p,onDismiss:l,onClick:o})},Sd=({img:e,title:t,subtitle:n,stepLabel:a,stepNumber:i,caps:r,dotStyle:s})=>(0,C.BX)("div",{className:"container--vE8T8LPnPv",children:[(0,C.tZ)("img",{src:e,className:"img--m_seeXYeAW"}),(0,C.tZ)(l.nvN,{size:"medium",caps:!!r||void 0,sx:{marginTop:"-43px",marginBottom:"11px"},children:t}),(0,C.tZ)(l.nvN,{color:l.colors.grey00,size:"small",children:n}),(0,C.BX)("div",{className:"numberContainer--QTEn2wceZi",children:[(0,C.tZ)("div",{className:"dot--jKi_w8fAhr",style:s}),a&&i?(0,C.BX)(l.nvN,{size:"small",sx:{textAlign:"left"},children:[a," ",i]}):null]})]}),fd=()=>{const{translate:e}=(0,y.Z)(),t={marginTop:"18px"};return(0,C.tZ)(l.Zbd,{sx:{padding:"12px 12px 48px",minHeight:"200px"},children:(0,C.BX)(l.Ejs,{sx:{justifyContent:"space-between",marginTop:"80px",paddingLeft:"24px",borderBottom:`solid 2px ${l.colors.grey00}`},children:[(0,C.tZ)(Sd,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNi40NTgzIDEuNUMxMi42NzQyIDEuNSAxLjUgMTIuNjc0MiAxLjUgMjYuNDU4M0MxLjUgNDAuMjQyNCAxMi42NzQyIDUxLjQxNjcgMjYuNDU4MyA1MS40MTY3QzQwLjI0MjQgNTEuNDE2NyA1MS40MTY3IDQwLjI0MjQgNTEuNDE2NyAyNi40NTgzQzUxLjQxNjcgMTIuNjc0MiA0MC4yNDI0IDEuNSAyNi40NTgzIDEuNVpNMC41IDI2LjQ1ODNDMC41IDEyLjEyMTkgMTIuMTIxOSAwLjUgMjYuNDU4MyAwLjVDNDAuNzk0NyAwLjUgNTIuNDE2NyAxMi4xMjE5IDUyLjQxNjcgMjYuNDU4M0M1Mi40MTY3IDQwLjc5NDcgNDAuNzk0NyA1Mi40MTY3IDI2LjQ1ODMgNTIuNDE2N0MxMi4xMjE5IDUyLjQxNjcgMC41IDQwLjc5NDcgMC41IDI2LjQ1ODNaIiBmaWxsPSIjNjE1QjU3Ii8+CjxwYXRoIGQ9Ik0yNi4xMjgzIDMwSDI3LjYxNjNWMjEuMzI0SDI2LjYyMDNDMjYuNTYwMyAyMi4wNSAyNi4wMzgzIDIyLjQ0NiAyNC41MjAzIDIyLjQ0NlYyMy4zMTZIMjYuMTI4M1YzMFoiIGZpbGw9ImJsYWNrIi8+Cjwvc3ZnPgo=",title:e("team_breach_report_verify_domain_stepper_title"),subtitle:e("team_dark_web_insights_stepper_verify_domain_subtitle"),caps:!0,dotStyle:t}),(0,C.tZ)(Sd,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTMiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1MyA1MyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNi40NTgzIDEuNUMxMi42NzQyIDEuNSAxLjUgMTIuNjc0MiAxLjUgMjYuNDU4M0MxLjUgNDAuMjQyNCAxMi42NzQyIDUxLjQxNjcgMjYuNDU4MyA1MS40MTY3QzQwLjI0MjQgNTEuNDE2NyA1MS40MTY3IDQwLjI0MjQgNTEuNDE2NyAyNi40NTgzQzUxLjQxNjcgMTIuNjc0MiA0MC4yNDI0IDEuNSAyNi40NTgzIDEuNVpNMC41IDI2LjQ1ODNDMC41IDEyLjEyMTkgMTIuMTIxOSAwLjUgMjYuNDU4MyAwLjVDNDAuNzk0NyAwLjUgNTIuNDE2NyAxMi4xMjE5IDUyLjQxNjcgMjYuNDU4M0M1Mi40MTY3IDQwLjc5NDcgNDAuNzk0NyA1Mi40MTY3IDI2LjQ1ODMgNTIuNDE2N0MxMi4xMjE5IDUyLjQxNjcgMC41IDQwLjc5NDcgMC41IDI2LjQ1ODNaIiBmaWxsPSIjNjE1QjU3Ii8+CjxwYXRoIGQ9Ik0yNC4wMDQ5IDMwSDMwLjEyNDlWMjguNzUySDI1LjYzMDlWMjguNjI2QzI1LjYzMDkgMjYuNTYyIDMwLjEwNjkgMjYuODUgMzAuMTA2OSAyMy43NTRDMzAuMTA2OSAyMi4yMyAyOC45NDI5IDIxLjIwNCAyNy4wODg5IDIxLjIwNEMyNC45NDA5IDIxLjIwNCAyMy44NTQ5IDIyLjQ4MiAyMy44MzA5IDI0LjA2NkgyNS4yNDY5QzI1LjM2MDkgMjMuMDI4IDI2LjA1MDkgMjIuNDQgMjcuMDQ2OSAyMi40NEMyNy45ODI5IDIyLjQ0IDI4LjU3MDkgMjIuOTggMjguNTcwOSAyMy43NkMyOC41NzA5IDI1Ljg2IDI0LjAwNDkgMjUuNzIyIDI0LjAwNDkgMjguODE4VjMwWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==",title:e("team_dark_web_insights_view_insights_stepper_title"),subtitle:e("team_dark_web_insights_view_insights_stepper_subtitle"),caps:!0,dotStyle:t}),(0,C.tZ)(Sd,{img:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTQiIGhlaWdodD0iNTMiIHZpZXdCb3g9IjAgMCA1NCA1MyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0yNi45NDc5IDEuNUMxMi44ODQ0IDEuNSAxLjUgMTIuNjgzMiAxLjUgMjYuNDU4M0MxLjUgNDAuMjMzNSAxMi44ODQ0IDUxLjQxNjcgMjYuOTQ3OSA1MS40MTY3QzQxLjAxMTQgNTEuNDE2NyA1Mi4zOTU4IDQwLjIzMzUgNTIuMzk1OCAyNi40NTgzQzUyLjM5NTggMTIuNjgzMiA0MS4wMTE0IDEuNSAyNi45NDc5IDEuNVpNMC41IDI2LjQ1ODNDMC41IDEyLjExMyAxMi4zNTAyIDAuNSAyNi45NDc5IDAuNUM0MS41NDU3IDAuNSA1My4zOTU4IDEyLjExMyA1My4zOTU4IDI2LjQ1ODNDNTMuMzk1OCA0MC44MDM3IDQxLjU0NTcgNTIuNDE2NyAyNi45NDc5IDUyLjQxNjdDMTIuMzUwMiA1Mi40MTY3IDAuNSA0MC44MDM3IDAuNSAyNi40NTgzWiIgZmlsbD0iIzYxNUI1NyIvPgo8cGF0aCBkPSJNMjMuNzMzNSAyMy45MjhIMjUuMTQ5NUMyNS4yMDM1IDIyLjgwNiAyNi4wMDE1IDIyLjM2OCAyNi44Nzc1IDIyLjM2OEMyNy45MDk1IDIyLjM2OCAyOC41NjM1IDIyLjg3OCAyOC41NjM1IDIzLjU1QzI4LjU2MzUgMjQuMjgyIDI3Ljg0MzUgMjQuODUyIDI2LjgxNzUgMjQuODgyTDI2LjA3MzUgMjQuOTEyVjI2LjFMMjYuODc3NSAyNi4xMjRDMjcuOTYzNSAyNi4xNDggMjguNzc5NSAyNi42NTIgMjguNzc5NSAyNy41MzRDMjguNzc5NSAyOC4zNTYgMjguMDUzNSAyOC45MjYgMjYuODgzNSAyOC45MjZDMjUuOTQxNSAyOC45MjYgMjUuMjQ1NSAyOC40MzQgMjUuMDc3NSAyNy40MDJIMjMuNjU1NUMyMy42OTE1IDI5LjA4MiAyNC45MDM1IDMwLjEyIDI2Ljg1MzUgMzAuMTMyQzI4LjgwOTUgMzAuMTQ0IDMwLjM0NTUgMjkuMjIgMzAuMzQ1NSAyNy41N0MzMC4zNDU1IDI2LjQxOCAyOS41NTM1IDI1LjcxNiAyOC41MDk1IDI1LjQyOEMyOS42MjU1IDI1LjA0NCAzMC4xMjk1IDI0LjM0OCAzMC4xMjk1IDIzLjQ5QzMwLjEyOTUgMjEuOTcyIDI4Ljc3MzUgMjEuMjA0IDI2Ljg5NTUgMjEuMjA0QzI1LjE0MzUgMjEuMjA0IDIzLjczMzUgMjIuMTQ2IDIzLjczMzUgMjMuOTI4WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==",title:e("team_breach_report_reduce_risk_title"),subtitle:e("team_breach_report_reduce_risk_subtitle"),caps:!0,dotStyle:t})]})})};var Zd,Cd=n(997962);const Td="team_breach_report_domain_register_invalid_error",Dd={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support",DOMAIN_ALREADY_EXISTS:"team_settings_domain_register_duplicated_error"},kd=({onSuccess:e,onError:t})=>{const{translate:n}=(0,y.Z)(),a=(0,Cd.f)(),{openDialog:i,shouldShowFrozenStateDialog:s}=(0,M.Ub)(),[o,d]=(0,r.useState)(""),[u,_]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),[g,b]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{if(void 0!==a){const e=a.substring(a.lastIndexOf("@")+1);d(e)}}),[a]),(0,C.BX)(C.HY,{children:[Zd||(Zd=(0,C.tZ)(fd,{})),(0,C.BX)("div",{children:[(0,C.BX)(l.Zbd,{sx:{padding:"24px",margin:"24px 0"},children:[(0,C.tZ)(l.X6q,{size:"x-small",children:n("team_dark_web_insights_verify_domain_title")}),(0,C.tZ)(l.nvN,{sx:{marginBottom:"20px",marginTop:"10px"},color:l.colors.grey00,children:n("team_breach_report_verify_domain_description")}),(0,C.BX)(l.Ejs,{gap:"16px",children:[(0,C.tZ)(l.k$b,{sx:{width:"75%"},children:(0,C.tZ)(l.oil,{onChange:e=>{d(e.target.value),_("")},fullWidth:!0,value:o,autoFocus:!0,endAdornment:u||""===o||!$c().isFQDN(o)?void 0:(0,C.tZ)(l.rE2,{color:l.colors.accessibleValidatorGreen}),feedbackText:u||void 0,feedbackType:u?"error":void 0})}),(0,C.tZ)(l.k$b,{sx:{width:"20%"},children:(0,C.tZ)(l.zxk,{type:"button",disabled:""===o||g,onClick:()=>{(async e=>{if((0,h.Kz)(new c.UserVerifyDomainEvent({domainVerificationStep:c.DomainVerificationStep.TapContinueCtaWithDomainUrl})),s)return void i();if(!$c().isFQDN(e))return void _(n(Td));b(!0);const t=await fe.C.registerTeamDomain({domain:e});if(b(!1),t.success)return _(""),void p(!0);if(!t.success){const{error:{code:e}}=t,a=Dd[e];_(n(null!=a?a:Td))}})(o),(0,h.Kz)(new c.UserVerifyDomainEvent({domainVerificationStep:c.DomainVerificationStep.TapContinueCtaWithDomainUrl}))},children:n("team_dwi_verify_domain_button")})})]})]}),m?(0,C.tZ)(vd,{description:n.markup("breach_report_verify_domain_dialog_description_markup"),secondaryDescription:n("breach_report_verify_domain_dialog_secondary_description"),linkLabel:n("breach_report_verify_domain_href_label"),href:xc,onClick:()=>{(0,h.Kz)(new c.UserOpenHelpCenterEvent({helpCenterArticleCta:c.HelpCenterArticleCta.ViewDomainVerificationGuide}))},domainName:o,onSuccess:()=>{e(o)},isDarkWebInsights:!0,onError:t,onDismiss:t}):null]})]})};async function Ed(e,t,n=0){const a=await fe.C.getDarkWebInsightsReportResults({domain:e,offset:n,count:t});if(a?.success)return a.data;throw new Error("[fetchDarkWebInsightsResults] - Server Error: Unable to load dark web insight report results data")}var wd,Id,Nd;const Ad=({domainName:e})=>{const{translate:t}=(0,y.Z)();return(0,C.BX)(l.Zbd,{sx:{minHeight:"575px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},children:[wd||(wd=(0,C.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTEzIiBoZWlnaHQ9IjExMyIgdmlld0JveD0iMCAwIDExMyAxMTMiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHg9IjAuNSIgd2lkdGg9IjExMiIgaGVpZ2h0PSIxMTMiIHJ4PSI1NiIgZmlsbD0iI0Y1RjdGNyIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTUwLjAzMzggMjYuNTYyMkM0MC45NzkgMjcuNjk4NiAzNC41NiAzNS45NjAyIDM1LjY5NjQgNDUuMDE1TDM2LjY0OTUgNTIuNjA4NUwzMS45OTUyIDUzLjE5MjZDMzAuODk5MiA1My4zMzAyIDMwLjEyMjMgNTQuMzMwMSAzMC4yNTk4IDU1LjQyNjFMMzQuNTYyMSA4OS43MDVDMzQuNjk5NyA5MC44MDEgMzUuNjk5NyA5MS41Nzc5IDM2Ljc5NTYgOTEuNDQwNEw3OS4wNDI4IDg2LjEzOEM4MC4xMzg4IDg2LjAwMDQgODAuOTE1NyA4NS4wMDA1IDgwLjc3ODIgODMuOTA0NUw3Ni40NzU5IDQ5LjYyNTZDNzYuMzM4MyA0OC41Mjk2IDc1LjMzODQgNDcuNzUyNyA3NC4yNDI0IDQ3Ljg5MDJMNjkuNDM5NiA0OC40OTNMNjguNDg2NiA0MC44OTk1QzY3LjM1MDEgMzEuODQ0OCA1OS4wODg1IDI1LjQyNTcgNTAuMDMzOCAyNi41NjIyWk00MC43NDk5IDQ0LjQ2OTlMNDEuNjkxOSA1MS45NzU2TDY0LjM5MjggNDkuMTI2NUw2My40NTA3IDQxLjYyMDhDNjIuNjY0IDM1LjM1MjEgNTYuOTQ0NCAzMC45MDgxIDUwLjY3NTcgMzEuNjk0OUM0NC40MDcxIDMyLjQ4MTcgMzkuOTYzMSAzOC4yMDEyIDQwLjc0OTkgNDQuNDY5OVpNNzguMTg0MiAzMi4yODA4TDc0LjE0ODUgMzYuNDAzNkw3NS43NCAzNy45NjE2TDc5Ljc3NTggMzMuODM4OEw3OC4xODQyIDMyLjI4MDhaTTc3LjI0NzEgNDAuMDg4Mkw3OS45MzA0IDM5LjUxNDhMODAuMjkzMiA0MS4yMTI1TDc3LjYwOTkgNDEuNzg1OUw3Ny4yNDcxIDQwLjA4ODJaTTcxLjA0MTMgMzEuODczOEw3MC44ODg3IDM1Ljg0ODRMNzIuNzg0MiAzNS45MjEyTDcyLjkzNjggMzEuOTQ2Nkw3MS4wNDEzIDMxLjg3MzhaIiBmaWxsPSIjOUZBRUIxIi8+Cjwvc3ZnPgo="})),Id||(Id=(0,C.tZ)("br",{})),(0,C.tZ)(l.nvN,{color:l.colors.black,bold:!0,size:"large",children:t("team_dashboard_dark_web_insights_domain_incident_free_title",{domainName:e})}),Nd||(Nd=(0,C.tZ)("br",{})),(0,C.tZ)(l.nvN,{color:l.colors.grey00,children:t("team_dwi_domain_incident_free_description")})]})};var Md,Od,Ld,Bd;const Rd={minHeight:"575px",padding:"24px",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},zd=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)(l.Zbd,{sx:Rd,children:[Md||(Md=(0,C.tZ)(o.ZX,{size:88})),Od||(Od=(0,C.tZ)("br",{})),(0,C.tZ)(l.nvN,{color:l.colors.grey00,children:e("team_dark_web_insights_scanning_incidents_txt")})]})},Pd=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)(l.Zbd,{sx:Rd,children:[Ld||(Ld=(0,C.tZ)(o.ZX,{size:88})),Bd||(Bd=(0,C.tZ)("br",{})),(0,C.tZ)(l.nvN,{color:l.colors.grey00,children:e("team_dashboard_dark_web_insights_generating_msg")})]})},Xd=e=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)([]),[s,o]=(0,r.useState)(null),l=(0,r.useCallback)((async t=>{if(!t?.signal?.aborted)if(null!==e){n(!0);try{const t=await(0,Se.YY)({teamId:e});i(t)}catch(e){const t=new Error(`useTeamMember: ${e}`);o(t)}finally{n(!1)}}else o(new Error("No team id provided"))}),[e]);return(0,r.useEffect)((()=>{const e=new AbortController;return l(),()=>{e.abort()}}),[l]),{teamMembersLoading:t,teamMembersError:s,teamMembers:a,refreshTeamMembers:l}},jd=e=>e.filter((({status:e})=>"removed"!==e)).length;var Ud=n(32254),qd=n(891032),Gd=n(164467),Fd=n(403090);var $d;const Vd=["text/*",".csv",".txt"],Hd="_common_dialog_dismiss_button",Wd=({lee:e,isFreeTrial:t,isOpen:n,slotsTaken:a,slotsTotal:l,exclude:d,preFilledEmails:u,closeInviteDialog:_,handleInviteCompleteSuccess:m,handleInvitePartialSuccess:p,setShowActivationDialog:g})=>{const{routes:b}=(0,i.Xo)(),{translate:x}=(0,y.Z)(),{showToast:v}=(0,o.pm)(),{reportTACError:S}=K(),{proposeMembers:f}=(0,$.u)(Ud.L),Z=(0,De.Y)(),{billingDetails:T,amountToPay:D,amountToTax:k,onSeatCountChange:E}=Xr(null),[N,A]=(0,r.useState)(!1),[M,O]=(0,r.useState)(!1),[L,B]=(0,r.useState)(null!=u?u:new Set([])),[R,z]=(0,r.useState)(0),[P,j]=(0,r.useState)(0),[U,q]=(0,r.useState)(0),[G,F]=(0,r.useState)(0),[V,H]=(0,r.useState)(!1);(0,r.useEffect)((()=>{O(N)}),[N]),(0,r.useEffect)((()=>{B(null!=u?u:new Set([]))}),[u]),(0,r.useEffect)((()=>{L.size||q(0)}),[L]);const W=()=>{_(),A(!1),z(0),j(0)},Y=async(t,n)=>{var a;n=null!=(a=n)?a:0,j(t.length),A(!0);const i=n+Math.min(t.length-n,500),r=t.slice(n,i),s={};try{const n=await(async t=>{if(!(0,Ti.v0)(e.globalState)){const e=new Error(Ci.N);throw S(e),e}if(!e.apiMiddleware.teamPlans)throw new Error("we want to remove this middleware but we can't just yet!");try{const e=await f({proposedMemberLogins:t,force:!0});if("failure"===e.tag)throw new Error(e.error);return e.data}catch(e){const t=e.code&&e.subCode?`invite_error_${e.code}_${e.subCode}`:"team_members_invite_error_message";throw v({description:x(t),closeActionLabel:x(Hd),mood:"danger"}),new Error(x(t))}})(r);if(z(i),(0,I.merge)(s,n),i<t.length)return Y(t,i);if((0,Fd.e)(s)){p(s.proposedMembers,s.refusedMembers);const e=Object.keys(s.proposedMembers).length,t=Object.keys(s.refusedMembers).length;(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Complete,inviteCount:e,inviteFailedCount:t,inviteResentCount:0,inviteSuccessfulCount:e-t,isImport:U>0,importSize:U,isResend:!1}))}else m(t),G<0?1===L.size?v({description:x("team_members_invite_success_message_with_added_seats_one_invite",{cost:x.price(T.currency,(D+k)/100)}),closeActionLabel:x(Hd),mood:"brand"}):v({description:x("team_members_invite_success_message_with_added_seats",{total:L.size,count:-G,cost:x.price(T.currency,(D+k)/100)}),closeActionLabel:x(Hd),mood:"brand"}):v({description:x("team_members_invite_success_message_with_count",{count:L.size}),closeActionLabel:x(Hd),mood:"brand"}),(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Complete,inviteCount:t.length,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:t.length,isImport:U>0,importSize:U,isResend:!1}));return W()}catch(e){throw(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Error,inviteCount:L.size,inviteFailedCount:L.size,inviteResentCount:0,inviteSuccessfulCount:0,isImport:U>0,importSize:U,isResend:!1})),W(),e}},Q=e=>function(e){if(function(e){const t=e.match(/[\x00-\x09\x0e-\x1F]/g);return!!t&&t.length/e.length>.03}(e))return[];if(!e.includes("@"))return[e];return function(e){const t={};return e.forEach((e=>t[e]=!0)),Object.keys(t)}(e.match(/[^<> ,;:\t\n\r"']+@[a-zA-Z0-9_.-]+/g)||[])}(e).filter((e=>!L.has(e))),J=e=>(0,Fn.vV)(e)&&!(e=>!!d?.includes(e))(e),ee=e=>{q(e.length),B(new Set([...L,...e]))},te=e=>{S(e)},ne=[...L].filter((e=>!J(e))).length;let ae=0===L.size||ne>0||G<0&&Sr(-G)||V;(0,r.useEffect)((()=>{if(l){const e=l-(L.size-ne)-a;F(e),e<0?(E(-e),Z.status===s.rq.Success&&(0,X.f1)(Z.data)&&H(!0)):H(!1)}}),[L,Z,l,a]);const{loading:ie,billingCountry:re}=w();if(ie)return $d||($d=(0,C.tZ)(o.ZX,{}));const se="US"===re?"team_invite_dialog_input_counter_negative_tax":"team_invite_dialog_input_counter_negative_vat";return(0,C.BX)(o.Vq,{isOpen:n,title:x("invite_user_dialog_title"),closeActionLabel:x(Hd),onClose:()=>{N||((0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Cancel,inviteCount:L.size,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:U>0,importSize:U,isResend:!1})),W(),B(new Set([])))},"aria-describedby":"dialogContent",actions:{primary:{children:x("invite_user_dialog_button"),onClick:async()=>{try{await Y([...L]),g(!0)}catch(e){(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Error,inviteCount:L.size,inviteFailedCount:L.size,inviteResentCount:0,inviteSuccessfulCount:0,isImport:U>0,importSize:U,isResend:!1})),v({description:x("_common_generic_error"),closeActionLabel:x(Hd),mood:"danger"})}B(new Set([]))},disabled:ae,layout:"iconLeading",icon:"ItemEmailOutlined"}},children:[(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",overflowY:"auto",gap:"8px",marginBottom:"16px"},children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:x(N?"team_invite_dialog_input_label_sending":"invite_user_dialog_input_label")}),(0,C.tZ)(qd.Z,{accept:Vd,passClicksThrough:!0,onChange:e=>{ee(Q(e.join("\0")))},onError:te,children:(0,C.tZ)(Gd.L,{setIsOverlayVisible:O,placeholder:x("team_invite_dialog_input_placeholder"),tags:[...L],isOverlayVisible:M,setTags:e=>{B(new Set(e))},formatToTags:Q,validate:J},"tags")}),V?(0,C.tZ)(o.ke,{title:(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.block.small",children:x("team_dialog_starter_limit_warning")}),(0,C.tZ)(i.rU,{to:b.teamAccountRoutePath,children:x("team_dialog_starter_change_plan")})]}),mood:"brand",icon:"FeedbackSuccessOutlined"}):(()=>{if(!l)return null;const e=G<0?Sr(-G)?x("team_account_teamplan_upgrade_premium_buy_more_seats_than_cap",{seatCap:hr,salesEmail:br}):k?x(se,{count:-G,total:l,cost:x.price(T.currency,(D+k)/100)}):x("team_invite_dialog_input_counter_negative",{count:-G,total:l,cost:x.price(T.currency,D/100)}):x("team_invite_dialog_input_counter",{count:G,total:l}),n=x("team_invite_dialog_input_counter_special",{total:l});let a=e;return t&&G<1&&(ae=G<0||ae,a=n),(0,C.tZ)(o.nv,{color:G<1?"ds.text.danger.quiet":"ds.text.positive.quiet",textStyle:"ds.body.reduced.regular",sx:{display:N?"none":"flex"},children:a})})()]}),(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column"},children:[(0,C.tZ)(o.nv,{color:"ds.text.positive.quiet",textStyle:"ds.body.reduced.regular",sx:{display:N?"flex":"none"},children:x("team_invite_dialog_invitations_counter",{count:R,total:P})}),(0,C.tZ)("div",{sx:{display:N?"none":"flex"},children:(0,C.tZ)(qd.Z,{accept:Vd,onChange:e=>{ee(Q(e.join("\0")))},onError:te,children:(0,C.tZ)(o.nv,{as:"span",textStyle:"ds.title.section.medium",color:"ds.text.brand.quiet",sx:{cursor:"pointer"},children:x("team_invite_dialog_import_description")})})}),(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",sx:{display:N?"none":"flex"},children:x("team_invite_dialog_import_example_text")})]})]})};var Yd=n(133392);const Kd={INVITE_RESTRICTED:"team_invite_result_dialog_refused_member_reason_admin_restricted_markup",PRE_EXISTING_MP_USER:"team_invite_result_dialog_refused_member_reason_pre_existing_mp_user_markup",GENERIC_ERROR:"team_invite_result_dialog_refused_member_reason_generic_error_markup",EMAIL_DOES_NOT_MATCH_SSO_DOMAIN:"team_invite_result_dialog_refused_member_reason_EMAIL_DOES_NOT_MATCH_SSO_DOMAIN",ALREADY_MEMBER:"team_invite_result_dialog_refused_member_reason_already_member",ALREADY_MEMBER_OTHER_TEAM:"team_invite_result_dialog_refused_member_reason_already_member_other_team",HAS_AUTOMATIC_RENEW:"team_invite_result_dialog_refused_member_reason_has_automatic_renew",NO_FREE_SLOT_FREE_PLAN:"team_invite_result_dialog_refused_member_reason_no_free_slot_free_plan",SSO_ALREADY_ACTIVATED:"team_invite_result_dialog_refused_member_reason_sso_already_activated",PENDING_DEACTIVATION_DOMAIN_DOES_NOT_MATCH:"team_invite_result_dialog_refused_member_reason_pending_deactivation_domain_does_not_match"};let Qd=function(e){return e.SSO_ALREADY_ACTIVATED="sso_already_activated",e.USER_HAS_MASTER_PASSWORD="USER_HAS_MASTER_PASSWORD",e}({});const Jd=e=>{switch(e){case Kd.INVITE_RESTRICTED:return Yd.Iu.markup(Kd.INVITE_RESTRICTED,{helpCenter:ie.Iw});case Kd.PRE_EXISTING_MP_USER:return Yd.Iu.markup(Kd.PRE_EXISTING_MP_USER,{ssoLimitations:ie.Iw,dashlaneSupport:ie.Bw});default:return Yd.Iu.markup(Kd.GENERIC_ERROR,{helpCenter:ie.Bw})}},eu="inviteResultDialogHeader--v_8lOJQXCj",tu="refusedMember--SNbCU5FzB1",nu="reason--jFHJ7kk1d9",au="irDialogIcon--Rx0OQmu57r";var iu;const ru={invitedMembers:{},refusedMembers:{},show:!1},su=()=>{const[e,t]=r.useState(ru);return{invitePartialSuccessState:e,setInvitePartialSuccessState:t,handleInvitationResultClosed:()=>{t(ru)}}},ou=({teamId:e,isOpen:t,invitedMembers:n,refusedMembers:a,onClose:i})=>{const{translate:s}=(0,y.Z)(),[o,c]=r.useState([]),[d,u]=r.useState([]),_=Object.keys(n).length,m=Object.keys(a).length,{teamSettings:p,teamSettingsLoading:g}=Ze(e),h=p?.ssoEnabled;return r.useEffect((()=>{if(g)return;const e=[],t=[];Object.keys(a).forEach((n=>{const i=a[n];i!==Qd.SSO_ALREADY_ACTIVATED||h?i===Qd.USER_HAS_MASTER_PASSWORD&&h?t.push({email:n,key:Kd.PRE_EXISTING_MP_USER,errorType:i}):e.push({email:n,errorType:i}):t.push({email:n,key:Kd.INVITE_RESTRICTED,errorType:i})})),c(e),u(t)}),[g,h,a]),(0,C.BX)(l.VqE,{closeIconName:s("_common_dialog_dismiss_button"),isOpen:t,onClose:i,ariaDescribedby:"refusedList",children:[(0,C.tZ)(l.$N8,{title:s("team_invite_result_dialog_title")}),(0,C.tZ)(l.a7O,{children:g?iu||(iu=(0,C.tZ)(fr.Z,{size:30})):(0,C.BX)(C.HY,{children:[_?(0,C.BX)("div",{className:"successfulInvitesRatio--Jbd0Eax7op",children:[(0,C.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNiA5TDcuOTU5MjggMTFMMTEuOTc5NiA3TTAuNSA5QzAuNSA0LjMwNTQ1IDQuMzA2MyAwLjUgOSAwLjVDMTMuNjkzNyAwLjUgMTcuNSA0LjMwNTQ1IDE3LjUgOUMxNy41IDEzLjY5NDYgMTMuNjkzNyAxNy41IDkgMTcuNUM0LjMwNjMgMTcuNSAwLjUgMTMuNjk0NiAwLjUgOVoiIHN0cm9rZT0iIzIwQjQyMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo=",className:au}),(0,C.tZ)("span",{className:eu,children:s("team_invite_result_dialog_successful_invites_rate",{proposedMembers:_+m,invitedMembers:_})})]}):null,(0,C.BX)("div",{className:"refusedMemberListTitle--Omq1aAlxkx",children:[(0,C.tZ)("img",{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHZpZXdCb3g9IjAgMCAxOCAxOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNS41IDEyLjVMMTIuNSA1LjVNMTIuNSAxMi41TDUuNSA1LjVNMC41IDlDMC41IDQuMzA1ODcgNC4zMDU4NyAwLjUgOSAwLjVDMTMuNjk0MSAwLjUgMTcuNSA0LjMwNTg3IDE3LjUgOUMxNy41IDEzLjY5NDEgMTMuNjk0MSAxNy41IDkgMTcuNUM0LjMwNTg3IDE3LjUgMC41IDEzLjY5NDEgMC41IDlaIiBzdHJva2U9IiNGRjAwMkQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCIvPgo8L3N2Zz4K",className:au}),(0,C.tZ)("span",{id:"refusedList",className:eu,children:s("team_invite_result_dialog_refused_member_list_title",{count:m})})]}),(0,C.BX)("ul",{className:"refusedMemberList--pPxtCXVRX3",children:[o.map((e=>(0,C.BX)("li",{className:tu,children:[e.email,(0,C.BX)("span",{className:nu,children:[": ",Kd[e.errorType.toUpperCase()]?s(Kd[e.errorType.toUpperCase()]):s.markup(Kd.GENERIC_ERROR,{helpCenter:ie.Bw},{linkTarget:"_blank"})]})]},e.email))),d.map((e=>(0,C.BX)("li",{className:tu,children:[e.email,(0,C.BX)("span",{className:nu,children:[": ",Jd(e.key)]})]},e.email)))]})]})}),(0,C.tZ)(l.cNS,{primaryButtonTitle:s("team_invite_result_dialog_button_ok"),primaryButtonOnClick:i,secondaryButtonTitle:s("team_invite_result_dialog_button_help_center"),secondaryButtonOnClick:()=>(0,q.Yo)(ie.Bw)})]})};var lu=n(93437);const cu="_common_toast_close_label",du=({showActivationDialog:e,setShowActivationDialog:t,setShowSharingDialog:n})=>{const{toggleInviteLink:a,createInviteLink:i,getInviteLinkDataForAdmin:r}=(0,lu.h)(),{setAsInteracted:s}=(0,pe.d)(_e.O.ActivateInviteLink),{translate:l}=(0,y.Z)(),{showToast:c}=(0,o.pm)(),d=Fa();return d?(0,C.tZ)(o.Vq,{title:l("team_activation_dialog_title"),closeActionLabel:l("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),actions:{primary:{children:l("team_activation_dialog_activate_button"),onClick:async()=>{s?.(),t(!1);const e=await r();e?.teamKey?await a(!1):(await i(d),c({description:l("team_activation_dialog_notification"),mood:"brand",closeActionLabel:l(cu)})),n(!0)}},secondary:{children:l("team_activation_dialog_notrightnow_button"),onClick:()=>{s?.(),t(!1),c({description:l("team_activation_dialog_cancel_notification"),mood:"brand",closeActionLabel:l(cu)})}}},children:(0,C.tZ)(o.nv,{sx:{marginBottom:"15px"},children:l("team_activation_dialog_paragrah")})}):null};var uu=n(833090);const _u=({showSharingDialog:e,setShowSharingDialog:t})=>{const{translate:n}=(0,y.Z)(),{inviteLinkDataForAdmin:a,getInviteLinkDataForAdmin:i}=(0,lu.h)(),s=(0,da.V)();return(0,r.useEffect)((()=>{i()}),[i]),(0,C.BX)(l.VqE,{closeIconName:n("_common_dialog_dismiss_button"),isOpen:e,onClose:()=>t(!1),children:[(0,C.tZ)(l.$N8,{title:n("team_sharing_invite_dialog_title")}),(0,C.BX)(l.a7O,{children:[(0,C.tZ)(l.nvN,{sx:{marginBottom:"15px"},color:l.colors.dashGreen01,children:n("team_sharing_invite_dialog_paragrah")}),(0,C.tZ)(l.nvN,{sx:{marginBottom:"15px",fontWeight:"600"},color:l.colors.dashGreen01,children:(0,ie.cI)(a?.teamKey)})]}),(0,C.tZ)(l.cNS,{children:(0,C.tZ)(uu.q,{copyValue:(0,ie.cI)(a?.teamKey),buttonText:n("team_sharing_invite_dialog_copy_link"),onClick:()=>{navigator.clipboard.writeText((0,ie.cI)(a?.teamKey)),s.showAlert(n("team_sharing_invite_dialog_copied_notification"),l.BLW.SUCCESS)}})})]})},mu=({lee:e,teamId:t,isFreeTrial:n,totalSeatCount:a,numSeatsTaken:i,excludedInviteMembers:s,shouldShowInviteDialog:o,handleCloseInviteDialog:l,handleInvitePartialSuccess:c,handleInviteCompleteSuccess:d,invitePartialSuccessState:u,handleInvitationResultClosed:_,preFilledInviteEmails:m})=>{const{inviteLinkDataForAdmin:p,inviteLinkDataLoading:g,getInviteLinkDataForAdmin:h}=(0,lu.h)(),[b,y]=r.useState(!1),[x,v]=r.useState(!1),{interacted:S}=(0,pe.d)(_e.O.ActivateInviteLink);return r.useEffect((()=>{h()}),[h]),(0,C.BX)(C.HY,{children:[o?(0,C.tZ)(Wd,{lee:e,slotsTotal:a,slotsTaken:i,exclude:s,isFreeTrial:n,isOpen:o,closeInviteDialog:l,handleInvitePartialSuccess:c,handleInviteCompleteSuccess:e=>{!1===p?.disabled&&v(!0),d(e)},preFilledEmails:m,setShowActivationDialog:y}):null,S||!b||g||p?.teamKey?null:(0,C.tZ)(du,{showActivationDialog:b,setShowActivationDialog:y,setShowSharingDialog:v}),x?(0,C.tZ)(_u,{showSharingDialog:x,setShowSharingDialog:v}):null,u.show?(0,C.tZ)(ou,{teamId:t,isOpen:u.show,onClose:_,invitedMembers:u.invitedMembers,refusedMembers:u.refusedMembers}):null]})},pu=({lee:e,isOpen:t,onClose:n,prefilledEmails:a,teamMembers:i,handleInviteCompleteSuccess:s})=>{const o=(0,r.useRef)(!1),{invitePartialSuccessState:l,setInvitePartialSuccessState:c,handleInvitationResultClosed:d}=su(),{teamId:u}=(0,Ce.fV)(),_=jd(i),[m,p]=(0,r.useState)(0),[g,h]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{const t=(0,Ti.v0)(e.globalState);if(t)return(new Di.Z).status({auth:t}).then((e=>{o.current||(p(e.content.team.membersNumber+e.content.team.extraFreeSlots),h(e.content.team.isFreeTrial))})).catch(),()=>{o.current=!0}}),[]),(0,C.tZ)(mu,{lee:e,teamId:u,totalSeatCount:m,numSeatsTaken:_,excludedInviteMembers:i.filter((({status:e})=>"removed"!==e)).map((({login:e})=>e)),isFreeTrial:g,shouldShowInviteDialog:t,handleCloseInviteDialog:n,handleInvitePartialSuccess:(e,t)=>c({show:!0,invitedMembers:e,refusedMembers:t}),handleInviteCompleteSuccess:s,invitePartialSuccessState:l,handleInvitationResultClosed:d,preFilledInviteEmails:a})},gu=1e3,hu="_common_toast_close_label",bu=({domainName:e})=>{const{showToast:t}=(0,o.pm)(),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),{translate:l}=(0,y.Z)();return(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",layout:"iconLeading",onClick:async()=>{let n;try{(0,h.Kz)(new c.UserClickEvent({button:c.Button.DownloadCsv})),a(!0),n=setTimeout((()=>{s(!0)}),2e3),await(async()=>{const t=[],n=await Ed(e,gu,0),a=Math.ceil(n.emailsImpactedCount/gu);t.push(...n.emails);const i=async(n=0)=>{const r=[];for(;n<a||(a-n)%5!=0;)r.push(Ed(e,gu,n*gu)),n+=1;const s=await Promise.all(r);t.push(...s.flatMap((e=>e.emails))),n<a&&i(n)};await i(1),((e,t)=>{(0,vs.S)(((e,t)=>{let n=["email","domain","data_affected","incident_date","view_status"].join(",")+"\n";for(const a of e)for(const e of a.leaks)n+=[`"${a.email}"`,`"${e.domain}"`,`"${e.types.join(", ")}"`,`"${t((0,an.Z)(e.breachDateUnix))}"`,`"${a.viewStatus}"`].join(",")+"\n";return n})(e,t),"DWI-report.csv","text/csv;charset=utf-8")})(t,l.shortDate)})(),t({description:l("team_dark_web_insights_download_csv_success"),closeActionLabel:l(hu)})}catch(e){t({description:l("_common_generic_error"),mood:"danger",closeActionLabel:l(hu)})}finally{clearTimeout(n),a(!1),s(!1)}},icon:"DownloadOutlined",disabled:n,isLoading:i,children:l("team_dark_web_insights_download_csv")})};var yu=n(735760);const xu=({breach:e,id:t,isFirstInGroup:n=!1,isLastInGroup:a=!1,opened:i=!1})=>{const{translate:r}=(0,y.Z)();return(0,C.BX)("tr",{id:t,sx:{backgroundColor:l.colors.grey06,borderLeft:`3px solid ${l.colors.dashGreen00}`,display:i?"table-row":"none",height:"44px","> td":{verticalAlign:"middle",padding:"5px 16px",paddingTop:n?"18px":void 0,paddingBottom:a?"18px":void 0}},children:[(0,C.tZ)("td",{colSpan:2,children:(0,C.tZ)(l.nvN,{size:"small",as:"div",sx:{fontWeight:"light",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:(0,C.BX)("div",{sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"},children:[e.domain&&""!==e.domain?(0,C.tZ)(l.plG,{size:"small",text:e.domain,backgroundColor:l.colors.dashGreen00}):null,(0,C.tZ)("div",{title:e.domain,sx:{paddingLeft:"8px",width:"100px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.domain})]})})}),(0,C.tZ)("td",{children:(0,C.tZ)(l.nvN,{sx:{"::first-letter":{textTransform:"uppercase"},textTransform:"lowercase"},size:"x-small",color:l.colors.grey00,children:(s=e.types,s.map((e=>r(Su[e]))).join(", "))})}),(0,C.tZ)("td",{colSpan:3,children:(0,C.tZ)(l.nvN,{size:"x-small",as:"span",color:l.colors.grey00,children:(0,C.tZ)(Us.v,{date:(0,an.Z)(e.breachDateUnix),format:hn._T.ll})})})]});var s},vu={borderBottom:`1px solid ${l.colors.dashGreen05}`,height:"55px",position:"relative",borderLeft:"3px solid white","&:hover,:focus-visible":{cursor:"pointer",boxShadow:"0px 4px 8px rgba(0, 0, 0, 0.16)"},'&[aria-expanded="true"]':{borderLeftColor:l.colors.dashGreen00},"> td":{verticalAlign:"middle",padding:"0 16px"}},Su={[yu.hb.Password]:"team_dark_web_insights_incident_data_type_password",[yu.hb.CreditCard]:"team_dark_web_insights_incident_data_type_credit_card",[yu.hb.IPAddress]:"team_dark_web_insights_incident_data_type_ip_address",[yu.hb.MailingAddress]:"team_dark_web_insights_incident_data_type_mailing_address",[yu.hb.Phone]:"team_dark_web_insights_incident_data_type_phone",[yu.hb.Email]:"team_dark_web_insights_incident_data_type_email",[yu.hb.Social]:"team_dark_web_insights_incident_data_type_social",[yu.hb.GeoLocation]:"team_dark_web_insights_incident_data_type_geolocation",[yu.hb.UserName]:"team_dark_web_insights_incident_data_type_username",[yu.hb.PersonalInfo]:"team_dark_web_insights_incident_data_type_personalinfo"},fu=({userReport:e,isPendingMember:t=!1,onInviteAction:n,shouldShowInviteButton:a})=>{const{translate:i}=(0,y.Z)(),[s,o]=(0,r.useState)(!1),c=e.leaks?.map(((t,n)=>`${e.email}-${n}`)).join(" ");return(0,C.BX)(C.HY,{children:[(0,C.BX)("tr",{id:e.email,tabIndex:0,"aria-expanded":s,"aria-controls":c,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),o((e=>!e)))},onClick:()=>{o((e=>!e))},sx:vu,children:[(0,C.tZ)("td",{children:(0,C.tZ)(l.nvN,{size:"x-small",as:"span",children:e.email})}),(0,C.tZ)("td",{children:(0,C.BX)(l.Ejs,{flexDirection:"row",children:[(0,C.tZ)(l.nvN,{size:"medium",as:"span",sx:{fontWeight:"bold"},children:e.breachesCount}),e.viewStatus===yu.j8.New?(0,C.tZ)(l.P_k,{dot:!0,ariaLabel:i("team_new_label")}):null]})}),(0,C.tZ)(l.nvN,{size:"x-small",as:"td",color:l.colors.grey00,sx:{maxWidth:"160px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",textTransform:"lowercase","::first-letter":{textTransform:"uppercase"}},children:(e=>{const t=e.leaks.map((e=>e.types.map((e=>i(Su[e])))));return[...new Set(t.flat())].join(", ")})(e)}),(0,C.tZ)("td",{children:(0,C.tZ)(l.nvN,{size:"x-small",as:"span",color:l.colors.grey00,children:(0,C.tZ)(Us.v,{date:(0,an.Z)(e.leaks[0].breachDateUnix),format:hn._T.ll})})}),(0,C.tZ)("td",{children:a?(0,C.tZ)(l.zxk,{onClick:()=>{n(e.email)},type:"button",nature:"secondary",children:i("team_dark_web_insights_incident_summary_invite_button")}):(0,C.tZ)(l.nvN,{size:"x-small",as:"span",color:l.colors.grey00,children:i(t?"team_dark_web_insights_incident_summary_pending":"team_dark_web_insights_incident_summary_member")})}),(0,C.tZ)("td",{"aria-label":i("team_dark_web_insights_incident_summary_expand"),children:(0,C.tZ)(l.veu,{sx:{transform:s?"scale3D(1, -1, 1)":"scale3D(1, 1, 1)"}})})]},e.email),e.leaks.map(((t,n,a)=>{const i=`${e.email}-${t.domain}-${t.breachDateUnix}`;return(0,C.tZ)(xu,{id:i,breach:t,opened:s,isFirstInGroup:0===n,isLastInGroup:n===a.length-1},i)}))]})},Zu=({emailsToInvite:e,reports:t,isLoading:n,pendingMembers:a,onInviteAction:i})=>{const{translate:r}=(0,y.Z)(),s=[{headerLabel:r("team_dark_web_insights_table_header_email_affected"),headerKey:"email-affected"},{headerLabel:r("team_dark_web_insights_table_header_incidents"),headerKey:"incidents"},{headerLabel:r("team_dark_web_insights_table_header_data_affected"),headerKey:"data-affected"},{headerLabel:r("team_dark_web_insights_table_header_last_incident"),headerKey:"last-incident"},{headerLabel:r("team_dark_web_insights_table_header_member_status"),headerKey:"member-status"},{headerLabel:"",headerKey:"actions"}];return(0,C.BX)("div",{sx:{minWidth:"100%",minHeight:"600px"},children:[n?(0,C.tZ)("div",{sx:{display:"block",width:"950px",height:"600px",position:"absolute",textAlign:"center"},children:(0,C.tZ)(o.ZX,{sx:{position:"relative",top:"50%"},size:120})}):null,(0,C.BX)("table",{sx:{minWidth:"100%"},children:[(0,C.tZ)(Rs,{columns:s}),(0,C.tZ)("tbody",{sx:n?{opacity:"0.5"}:{},children:t.map((t=>(0,C.tZ)(fu,{userReport:t,onInviteAction:i,isPendingMember:a.includes(t.email),shouldShowInviteButton:e.includes(t.email)},t.email)))})]})]})},Cu=({label:e,labelGridArea:t,title:n,titleGridArea:a})=>(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.nv,{sx:{gridArea:t},textStyle:"ds.specialty.monospace.small",color:"ds.text.warning.quiet",children:n}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",sx:{gridArea:a},children:e})]}),Tu=({gridArea:e})=>(0,C.tZ)("div",{sx:{gridArea:e,backgroundColor:"ds.border.neutral.quiet.idle",height:"100%",width:"1px",alignSelf:"center"}});var Du,ku;const Eu=({reports:e,suggestedInvitees:t,onInviteAll:n})=>{const{translate:a}=(0,y.Z)();return(0,C.BX)(l.Zbd,{sx:{marginBottom:"24px",padding:"24px 24px"},children:[(0,C.tZ)(o.X6,{as:"h3",sx:{marginBottom:"24px"},children:a("team_dark_web_insights_summary_title")}),(0,C.BX)(l.T5p,{gridTemplateColumns:"1fr 1px 1fr 1px 1fr max-content",gridTemplateAreas:'"label-0 divider-left label-1 divider-right label-2 invite-all" "title-0 divider-left title-1 divider-right title-2 invite-all"',alignItems:"center",sx:{columnGap:"16px",justifyContent:"center"},children:[(0,C.tZ)(Cu,{labelGridArea:"label-0",label:a("team_dark_web_insights_summary_employees_affected"),titleGridArea:"title-0",title:e.emailsImpactedCount}),Du||(Du=(0,C.tZ)(Tu,{gridArea:"divider-left"})),(0,C.tZ)(Cu,{labelGridArea:"label-1",label:a("team_dark_web_insights_summary_total_incidents"),titleGridArea:"title-1",title:e.leaksCount}),ku||(ku=(0,C.tZ)(Tu,{gridArea:"divider-right"})),(0,C.tZ)(Cu,{labelGridArea:"label-2",label:a("team_dark_web_insights_summary_not_protected"),titleGridArea:"title-2",title:a("team_dark_web_insights_summary_employee_invitation",{count:t.length})}),(0,C.tZ)(l.dDn,{gridArea:"invite-all",alignSelf:"center",children:(0,C.tZ)(o.zx,{onClick:n,children:a("team_dark_web_insights_summary_invite_all_button")})})]})]})};var wu,Iu;const Nu="team_dark_web_insights_table_pagination_page_size",Au=[15,50,100],Mu=({lee:e,domainName:t})=>{const{translate:n}=(0,y.Z)(),a=(0,da.V)(),{teamId:i}=(0,Ce.fV)(),{teamMembers:s,refreshTeamMembers:d}=Xd(i),{openDialog:u,shouldShowFrozenStateDialog:_}=(0,M.Ub)(),[m,p]=(0,r.useState)(!0),[g,b]=(0,r.useState)(null),[x,v]=(0,r.useState)(!1),[S,f]=(0,r.useState)(1),[Z,T]=(0,r.useState)(15),{unseen:D,setAsSeen:k}=(0,pe.m)(_e.O.TacDarkWebInsightsNewBadge),[E,w]=(0,r.useState)(!1),[I,N]=(0,r.useState)(new Set([])),A=s.filter((e=>["pending","proposed"].includes(e.status))).map((e=>e.login)),O=s.filter((e=>["pending","proposed","accepted"].includes(e.status))).map((e=>e.login)),L=(0,r.useMemo)((()=>{var e;return null!=(e=g?.allImpactedEmails.filter((e=>!O.includes(e))))?e:[]}),[g?.allImpactedEmails,O]);(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacDarkWebInsights)}),[]);const B=(0,r.useCallback)((async(e,t,i)=>{v(!0);try{const n=await Ed(e,i,i*(t-1));b(n),f(t),T(i),(0,h.Kz)(new c.UserLoadDarkWebInsightsResultsEvent({}))}catch{a.showAlert(n("team_dark_web_insights_generic_error"),l.BLW.ERROR)}finally{p(!1),v(!1)}}),[]);(0,r.useEffect)((()=>{B(t,1,Z)}),[t]),(0,r.useEffect)((()=>{D&&g?.emails&&k()}),[D,k,g?.emails]);const R=(0,r.useCallback)((()=>{_?u():L.length<=0||(w(!0),(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})),N(new Set(L)))}),[L]);return(0,C.BX)(C.HY,{children:[m?wu||(wu=(0,C.tZ)(zd,{})):null,!m&&g?.emails?0===g.leaksCount?(0,C.tZ)(Ad,{domainName:t}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(Eu,{reports:g,suggestedInvitees:L,onInviteAll:R}),(0,C.BX)(l.Zbd,{sx:{padding:"32px 24px"},children:[(0,C.BX)("div",{sx:{display:"flex",justifyContent:"space-between",marginBottom:"24px",alignItems:"center"},children:[(0,C.tZ)(o.X6,{as:"h3",children:n("team_dark_web_insights_table_title")}),(0,C.tZ)(bu,{domainName:t})]}),(0,C.tZ)(Zu,{reports:g.emails,isLoading:x,pendingMembers:A,emailsToInvite:L,onInviteAction:e=>{_?u():(w(!0),(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})),N(new Set([e])))}}),(0,C.BX)(l.T5p,{alignItems:"center",gridTemplateColumns:"1fr auto 1fr",sx:{paddingTop:6,paddingBottom:3},children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:n("team_dark_web_insights_table_pagination_item_count",{first:Z*(S-1)+1,last:Math.min(Z*(S-1)+Z,g.emailsImpactedCount),total:g.emailsImpactedCount})}),(0,C.tZ)(l.tlE,{totalPages:Math.ceil(g.emailsImpactedCount/Z),currentPage:S,onPageChange:e=>B(t,e,Z)},S),(0,C.BX)(o.h_,{children:[(0,C.tZ)(o.sB,{showCaret:!0,intensity:"supershy",mood:"neutral",size:"small",sx:{marginLeft:"auto"},children:n(Nu,{pageSize:Z})}),(0,C.tZ)(o.Nv,{children:Au.map((e=>(0,C.tZ)(o.hP,{label:n(Nu,{pageSize:e}),onSelect:()=>e!==Z&&B(t,1,e)},e)))})]})]}),(0,C.tZ)(pu,{lee:e,isOpen:E,prefilledEmails:I,onClose:()=>{w(!1),N(new Set([]))},handleInviteCompleteSuccess:()=>d(),teamMembers:s})]})]}):null,m||g?.emails||""===t?null:Iu||(Iu=(0,C.tZ)(Pd,{}))]})};var Ou,Lu,Bu=n(915622);const Ru=({lastVerificationAttemptDateUnix:e,onRetry:t})=>{const{translate:n}=(0,y.Z)();return(0,C.BX)(l.Ejs,{sx:{justifyContent:"space-between",flexDirection:"column",margin:"30px 0",paddingLeft:"24px",borderLeft:`solid 2px ${l.colors.grey00}`,gap:5},children:[(0,C.BX)(l.nvN,{size:"x-small",bold:!0,children:[n("team_dwi_pending_latest_attempt_label")," ",e?(0,C.tZ)(Bu.Z,{date:(0,an.Z)(e)}):null]}),(0,C.tZ)(l.zxk,{type:"button",nature:"ghost",sx:{width:"fit-content",margin:0,padding:0,minWidth:0,height:"fit-content","&:hover":{backgroundColor:"transparent !important",textDecoration:"underline"},"&:focus":{backgroundColor:"transparent !important",textDecoration:"underline"}},onClick:t,children:(0,C.BX)(l.Ejs,{sx:{alignItems:"center",flexDirection:"row",gap:2},children:[Ou||(Ou=(0,C.tZ)(l.DuK,{size:12})),(0,C.tZ)(l.nvN,{size:"x-small",color:l.colors.midGreen00,children:n("team_dwi_pending_retry_button_label")})]})})]})},zu=({domain:e,isDeactivating:t,handleDeactivateDomain:n,handleRetryValidateDomain:a})=>{const{translate:i}=(0,y.Z)(),{dnsToken:{computedToken:r,challengeDomain:s}={computedToken:"",challengeDomain:""},lastVerificationAttemptDateUnix:o}=e;return(0,C.BX)(C.HY,{children:[Lu||(Lu=(0,C.tZ)(fd,{})),(0,C.BX)("div",{children:[(0,C.BX)(l.Zbd,{sx:{padding:"24px",margin:"24px 0"},children:[(0,C.tZ)(l.X6q,{size:"x-small",children:i("team_breach_report_domain_verify_pending_title")}),(0,C.tZ)(l.nvN,{sx:{marginBottom:"20px",marginTop:"10px"},color:l.colors.grey00,children:i("team_dwi_pending_verification_txt")}),(0,C.tZ)(Ru,{lastVerificationAttemptDateUnix:o,onRetry:a}),(0,C.BX)(l.Ejs,{gap:"16px",children:[(0,C.tZ)(l.k$b,{sx:{width:"70%"},children:(0,C.tZ)(l.oil,{fullWidth:!0,defaultValue:e.name,disabled:!0})}),(0,C.tZ)(l.k$b,{children:(0,C.tZ)(l.zxk,{type:"button",disabled:t,nature:"secondary",onClick:n,children:i("team_dwi_pending_cancel_button_label")})}),(0,C.tZ)(l.k$b,{children:(0,C.tZ)(l.zxk,{type:"button",disabled:!0,sx:{maxWidth:"120px"},children:i("team_breach_report_verifying_txt")})})]})]}),(0,C.tZ)(l.UQy,{size:"medium",children:(0,C.BX)(l.UlM,{open:!0,children:[(0,C.tZ)(l._Oh,{children:i("team_breach_report_domain_verify_dns_confirm_text")}),(0,C.tZ)(l.rN7,{children:(0,C.BX)(l.T5p,{gap:"24px",gridTemplateColumns:"1fr",gridAutoRows:"auto",children:[(0,C.tZ)(l.nvN,{size:"small",color:l.colors.grey00,children:i("team_breach_report_domain_verify_dns_description")}),(0,C.tZ)(hd.x,{inputValue:s,textInputProps:{fullWidth:!0,readOnly:!0,label:i("team_settings_domain_verify_host")}}),(0,C.tZ)(hd.x,{inputValue:r,textInputProps:{fullWidth:!0,readOnly:!0,label:i("team_settings_domain_verify_txt")}}),(0,C.tZ)(l.nvN,{size:"small",sx:{marginBottom:"20px"},color:l.colors.grey00,children:i("team_breach_report_domain_verify_dns_secondary_description")})]})})]})})]})]})},Pu={background:"ds.container.expressive.neutral.quiet.idle",color:"ds.text.neutral.standard",cursor:"default"},Xu=({label:e})=>(0,C.tZ)(l.OTy,{sx:{":hover":Pu,":focus":Pu,...Pu},disabled:!0,selected:!1,size:"medium",label:e}),ju=({activeDomain:e,verifiedDomains:t,selectVerifiedDomain:n})=>{var a;const i=(0,me.o)(Qa.w.DwiMultipleDomainsProd),r=null!=(a=e?.name)?a:"",s=t.map((e=>(0,C.tZ)(l.OTy,{sx:Pu,onClick:()=>{r!==e.name&&n(e)},selected:r===e.name,size:"medium",label:e.name},e.name)));return(0,C.tZ)(l.G8v,{sx:{marginTop:"12px",padding:0},children:i&&t.length>1?s:""!==r?(0,C.tZ)(Xu,{label:r}):null})};var Uu,qu;const Gu={display:"flex",justifyContent:"center",width:"100%",height:"100%",backgroundColor:`${l.colors.dashGreen06}`,alignItems:"center"},Fu=({lee:e})=>{const{translate:t}=(0,y.Z)(),{verifiedOrPendingDomain:{domain:n,status:a},verifiedDomains:i,updateDomainState:s,deactivateDomain:l,tryVerifyDomain:d,selectVerifiedDomain:u}=Nl();return(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacDarkWebInsights)}),[]),(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,C.tZ)(o.X6,{as:"h1",children:t("team_dashboard_dark_web_insights_heading")}),(0,C.tZ)(ju,{activeDomain:n,verifiedDomains:i,selectVerifiedDomain:u})]}),(0,C.tZ)(No,{fullWidth:!0,mainContent:(0,C.tZ)("div",{children:a===Il.Loading?Uu||(Uu=(0,C.tZ)("div",{sx:Gu,children:(0,C.tZ)(o.ZX,{size:120})})):null===n||a===Il.Start?(0,C.tZ)(kd,{onSuccess:s,onError:s}):a===Il.Validated?(0,C.tZ)(Mu,{lee:e,domainName:n.name}):(0,C.tZ)(zu,{domain:n,isDeactivating:a===Il.Deactivating,handleDeactivateDomain:l,handleRetryValidateDomain:d})}),secondaryContent:qu||(qu=(0,C.tZ)(Gc,{}))})]})},$u=e=>(0,C.tZ)("div",{className:"container--INT3GORhR4",children:e.children});var Vu=n(814691);const Hu="group_name_already_in_use";var Wu=n(233377),Yu=n(868505);const Ku={HEADER:{display:"inline-block",width:"100%",verticalAlign:"top"},CARD_CONTAINER:{display:"flex",gap:"16px",flexDirection:"column",padding:"32px",borderRadius:"8px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle"}},Qu={nameContainer:"nameContainer--NmQCGqTrTR",nameInput:"nameInput--Vpc7anR7aO",nameEditIcon:"nameEditIcon--Thlp4CT5Bq",spinner:"spinner--QQ6Zpwc8Zd",_errorText:"_errorText--shQIAebNjL",errorMessage:"errorMessage--Btb66DLL6K _errorText--shQIAebNjL",error:"error--UkyphHJLOB _errorText--shQIAebNjL"},Ju=({onNameChanged:e,defaultValue:t,editable:n,saving:a})=>{const i=(0,r.useRef)(null),[s,l]=(0,r.useState)(t),[c,d]=(0,r.useState)(!1),[u,_]=(0,r.useState)(null);(0,r.useEffect)((()=>{c&&i.current?.focus()}),[c,i]);const m=()=>{const n=i.current?.value.trim();d(!1),l(n||t),e&&n&&e(n).then((({success:e,error:t=null})=>{d(!e),_(e?null:t)}))},p=Boolean(u);return(0,C.BX)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:[!c&&(0,C.BX)("div",{className:P()(Qu.nameContainer,{[Qu.hoverableContainer]:n}),onClick:()=>{n&&d(!0)},children:[s,a?(0,C.tZ)(fr.Z,{size:20,containerClassName:Qu.nameEditIcon}):(0,C.tZ)("img",{className:Qu.nameEditIcon,src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMTAuMTY3OCAxLjA3MjAzQzEwLjkzMDUgMC4zMDkzMjMgMTIuMTY2OCAwLjMwOTMyMyAxMi45Mjk1IDEuMDcyMDNDMTMuNjkyMyAxLjgzNDc0IDEzLjY5MjMgMy4wNzEwOSAxMi45Mjk1IDMuODM0NzhNMS4xOTA0NCAxMC4wNDlMMC41IDEzLjUwMjJMMy45NTIyMSAxMi44MTE4TDExLjU0ODEgNS4yMTQ5N0w4Ljc4NjI4IDIuNDUzMkwxLjE5MDQ0IDEwLjA0OVoiIHN0cm9rZT0iIzBFNjQ3NiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2UtbGluZWpvaW49InJvdW5kIi8+Cjwvc3ZnPgo="})]}),c&&(0,C.tZ)("div",{className:Qu.editNameContainer,children:(0,C.tZ)("input",{ref:i,type:"text",className:P()(Qu.nameInput,{[Qu.error]:p}),defaultValue:s,onBlur:m,onKeyUp:e=>{13===e.keyCode&&m()}})}),c&&p?(0,C.tZ)("div",{className:Qu.errorMessage,children:u}):null]})};var e_=n(303431);const t_=({lee:e,userGroup:t})=>{const n=(0,r.useRef)(null),{translate:a}=(0,y.Z)(),{teamId:i}=(0,Ce.fV)(),{teamMembers:s}=Xd(i),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)([]),{invitePartialSuccessState:_,setInvitePartialSuccessState:m,handleInvitationResultClosed:p}=su(),g=(0,da.V)(),h=e=>(0,C.tZ)(js.q,{className:"avatar--ZwBEp_dc1w",email:e,size:32}),b=()=>Boolean(d.length);return(0,C.BX)("div",{children:[(0,C.BX)(Yu.e,{ref:n,buttonLabel:a("team_groups_edit_add_members"),confirmButtonLabel:a("team_groups_edit_add_member_confirm"),cancelButtonLabel:a("team_groups_edit_add_member_cancel"),confirmButtonDisabled:!b(),onCancelButtonClick:()=>{u([]),c(null)},onConfirmButtonClick:async()=>{if(!b())return;const r=d,{groupId:s,revision:o,name:_}=t,p=r.map((e=>({alias:e.toLowerCase(),permission:"limited"})));if(null===i)return void e.reportError(new Error(Ci.N));const h=await(0,Se.j_)({teamId:i,groupId:s,revision:o,users:p});if(h.error)return"no_free_slot"===h.error.message||"not_enough_free_slots"===h.error.message?void g.showAlert(a("team_group_edit_add_member_not_enough_slots_error",{count:p.length,groupName:_}),l.BLW.ERROR):void g.showAlert(a("team_groups_edit_invite_member_to_group_error_message_markup"),l.BLW.ERROR);Object.keys(h.refusedMembers).length&&m({invitedMembers:{},refusedMembers:h.refusedMembers,show:!0}),n.current&&n.current.hidePopup(),u([]),c(null)},popupClassName:"addMemberPopup--Zd2J1smSL4",children:[(0,C.tZ)("span",{className:"addMemberLabel--DXxhvug4yq",children:a("team_groups_edit_add_member_header")}),o&&(0,C.tZ)("div",{className:"error--IjVtbntYUX",children:o}),(0,C.tZ)(e_.J,{autoFocus:!0,className:"addMemberMultiselect--CDfv8wJoB6",dataSource:(()=>{const e=new Set(t.users.filter((({status:e})=>["accepted","pending"].includes(e))).map((({alias:e})=>e)));return s.filter((({login:t,status:n})=>"removed"!==n&&!e.has(t))).map((({login:e})=>({text:e,icon:h(e)})))})(),getCurrentSelectionAvatar:h,defaultValue:d,isItemValid:e=>(0,Fn.vV)(e),onChange:e=>{u(e)},onError:e=>c(e?a(`team_groups_edit_error_${e.message}`):null),placeholder:a("team_groups_edit_add_member_input_placeholder")})]}),(0,C.tZ)(ou,{teamId:(0,N.ev)(e.globalState),isOpen:_.show,onClose:p,invitedMembers:_.invitedMembers,refusedMembers:_.refusedMembers})]})},n_=Wu.Maybe.nothing(),a_=({onBackLinkClick:e,onDeleteClick:t,onRenameGroup:n,groupName:a,lee:i,userGroup:s})=>{const{translate:c}=(0,y.Z)(),[d,u]=(0,r.useState)(Wu.Maybe.nothing()),[_,m]=(0,r.useState)(!1);return(0,C.BX)("div",{sx:Ku.HEADER,children:[(0,C.tZ)(o.zx,{intensity:"supershy",layout:"iconLeading",icon:"ArrowLeftOutlined",onClick:t=>{e(t)},children:c("team_groups_edit_header_back")}),(0,C.BX)("div",{style:{display:"flex",justifyContent:"space-between",marginTop:"16px"},children:[(0,C.tZ)(Ju,{defaultValue:a,editable:!0,saving:_,onNameChanged:async e=>{m(!0);const{error:t}=await n(e);return m(!1),t===Hu?{success:!1,error:c("team_groups_edit_header_name_already_exists")}:{success:!0}}}),(0,C.BX)("div",{style:{display:"flex",gap:"8px"},children:[(0,C.tZ)(Yu.e,{buttonLabel:c("team_groups_edit_header_delete_group"),cancelButtonLabel:c("team_groups_edit_header_delete_group_cancel_button"),confirmButtonLabel:c("team_groups_edit_header_delete_group_confirm_button"),onCancelButtonClick:()=>{u(n_)},onConfirmButtonClick:()=>{u(n_),t()},confirmButtonDisabled:!d.caseOf({just:e=>e===a,nothing:()=>!1}),popupClassName:"confirmPopup--NTDDMjDo4B",buttonMood:"neutral",buttonIntensity:"quiet",buttonIconName:"ActionDeleteOutlined",children:(0,C.BX)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:12},children:[(0,C.tZ)(l.nvN,{size:"large",children:c.markup("team_groups_edit_header_delete_group_confirm_title_markup",{group:a})}),(0,C.tZ)(l.nvN,{color:"neutrals.8",children:c("team_groups_edit_header_delete_group_confirm_subtitle")}),(0,C.tZ)(l.oil,{fullWidth:!0,onChange:e=>{const t=e.target.value?.trim();u(Wu.Maybe.maybe(t))},type:"text",defaultValue:d.caseOf({just:e=>e,nothing:()=>{}}),autoFocus:!0})]})}),(0,C.tZ)(t_,{lee:i,userGroup:s})]})]})]})};var i_,r_=n(428746);const s_=e=>(0,C.tZ)("svg",{className:e.className,width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",fill:"none",children:i_||(i_=(0,C.tZ)("path",{d:"M13.5 2.5V15.5H2.5V2.5M10.5 2.5V0.5H5.5V2.5M1 2.5H15M5.5 6V11M8 6V11M10.5 6V11",stroke:"#0E6476",strokeLinecap:"round",strokeLinejoin:"round"}))});var o_;const l_=r.memo((({member:e,handleRemoveMember:t})=>{const{translate:n}=(0,y.Z)();return(0,C.BX)("tr",{children:[(0,C.tZ)("td",{className:"emailCell--c3avC4hgf6",children:(0,C.BX)("div",{className:"emailCellContainer--yFS7a4HnT_",children:[(0,C.tZ)(js.q,{className:"avatar--XHrkwJbc_C",email:e.alias,size:32}),e.alias]})}),(0,C.tZ)("td",{className:"rightsCell--Z6diiNotCT",children:n((a=e.permission,i=e.status,"admin"===a&&"accepted"===i?"team_groups_edit_member_list_rights_manager":"limited"===a&&"accepted"===i?"team_groups_edit_member_list_rights_member":"pending"===i?"team_groups_edit_member_list_rights_pending":""))}),(0,C.tZ)("td",{className:"plusCell--B02g3LGOlG",children:(0,C.tZ)("div",{style:{cursor:"pointer"},onClick:()=>t(e),children:o_||(o_=(0,C.tZ)(s_,{}))})})]});var a,i})),c_=(0,Zi.ascend)((0,Zi.prop)("permission")),d_=(0,Zi.ascend)((0,Zi.compose)(Zi.toLower,(0,Zi.prop)("alias"))),u_=(0,Zi.sortWith)([c_,d_]),__=Wu.Maybe.nothing(),m_=({lee:e,className:t,userGroup:n,revokeMembers:a})=>{const{translate:i}=(0,y.Z)(),[s,o]=(0,r.useState)(0),[c,d]=(0,r.useState)({showRemoveUserDialog:!1,removeMemberCandidate:Wu.Maybe.nothing()}),u=e=>{d({showRemoveUserDialog:!0,removeMemberCandidate:Wu.Maybe.just(e)})},_=()=>(n.users||[]).filter((e=>"accepted"===e.status||"pending"===e.status)),m=()=>{d({showRemoveUserDialog:!1,removeMemberCandidate:__})},p=(0,Zi.map)((e=>(0,C.tZ)(l_,{member:e,handleRemoveMember:u},e.alias))),g=[{headerLabel:i("team_groups_edit_member_list_header_email"),headerKey:"email"},{headerLabel:i("team_groups_edit_member_list_header_group_rights"),colSpan:2,headerKey:"group-rights"}];return(0,C.BX)("div",{children:[(0,C.BX)("table",{className:P()(t,"table--hj3WYleNh5"),children:[(0,C.tZ)(Rs,{columns:g}),(0,C.tZ)("tbody",{children:(()=>{const e=24*s;return(0,Zi.compose)(p,(0,Zi.slice)(e,e+24),u_)(_())})()})]}),(0,C.tZ)("div",{className:"pagination--Xk8h572zZ7",children:(0,C.tZ)(r_.Z,{currentPageIndex:s,itemsLength:_().length,itemsPerPage:24,onChange:e=>{o(e)}})}),(0,C.tZ)(gr.o,{isOpen:c.showRemoveUserDialog,onRequestClose:m,footer:(0,C.tZ)(l.cNS,{primaryButtonTitle:i("team_groups_edit_member_list_action_remove_dialog_cta"),primaryButtonOnClick:()=>{Wu.Maybe.sequence({removeMemberCandidate:c.removeMemberCandidate,userGroup:Wu.Maybe.just(n)}).caseOf({just:({removeMemberCandidate:t,userGroup:n})=>{a(e.dispatchGlobal,{groupId:n.groupId,revision:n.revision,users:[t.userId]},{title:i("team_groups_edit_revoke_member_from_group_error_title"),message:i("team_groups_edit_revoke_member_from_group_error_message")})},nothing:()=>{}}),d({showRemoveUserDialog:!1,removeMemberCandidate:__})},secondaryButtonTitle:i("team_groups_edit_member_list_action_remove_dialog_cancel"),secondaryButtonOnClick:m}),title:i("team_groups_edit_member_list_action_remove_dialog_header"),children:(0,C.BX)("div",{children:[(0,C.tZ)("div",{className:"removeDialogTitle--Zn2JmJtOF0",children:i("team_groups_edit_member_list_action_remove_dialog_title",{email:c.removeMemberCandidate.caseOf({just:e=>e.userId,nothing:()=>""})})}),(0,C.tZ)("div",{children:i("team_groups_edit_member_list_action_remove_dialog_subtitle")})]})})]})};var p_=n(689611),g_=n(886662);const h_=e=>`{${e.match.params.uuid}}`,b_={userGroup:{live:fe.C.liveAdministrableUserGroup,liveParam:h_,query:fe.C.getAdministrableUserGroup,queryParam:h_}},y_={strategies:b_},x_=(0,p_.$)((0,g_.i)((({lee:e,userGroup:t})=>{const{routes:n}=(0,i.Xo)(),{translate:a}=(0,y.Z)(),{addAlertToQueue:s}=K();(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacGroupDetails)}),[]);const o=(e,t,n,a)=>{try{const e=JSON.parse(a);e.code&&(t.message+=` : ${e.code}`)}finally{e(Vu.Qy.error({message:n,content:{error:a}})),s(t)}};if(!t)return null;const l=(0,C.tZ)(a_,{onBackLinkClick:()=>{(0,i.uX)(n.teamGroupsRoutePath)},onDeleteClick:()=>{const{groupId:r,revision:s}=t;(0,Se.FU)({groupId:r,revision:s}).then((()=>{(0,i.uX)(n.teamGroupsRoutePath)})).catch((t=>{const n={title:a("team_groups_edit_delete_group_error_title"),message:a("team_groups_edit_delete_group_error_message")};o(e.dispatchGlobal,n,"Group deletion failed",t.message)}))},onRenameGroup:async n=>{if(n===t.name)return{success:!0};const i=(t,n)=>{const i={title:a("team_groups_edit_rename_group_error_title"),message:a("team_groups_edit_rename_group_error_message")};return o(e.dispatchGlobal,i,n,t.message),{success:!1,error:"group_renaming_failed"}};try{if(!await fe.C.isGroupNameAvailable(n))return{success:!1,error:Hu}}catch(e){return i(e,"Group name availability check failed")}try{const{groupId:e,revision:a}=t;return await(0,Se.J0)({groupId:e,revision:a,name:n}),{success:!0}}catch(e){return i(e,"Group renaming failed")}},groupName:t.name,lee:e.child(),userGroup:t});return(0,C.tZ)(hs,{header:l,children:(0,C.tZ)("div",{sx:Ku.CARD_CONTAINER,children:(0,C.tZ)(m_,{lee:e.child(),userGroup:t,revokeMembers:(e,t,n)=>{try{fe.C.revokeUserGroupMembers(t).then((({error:t})=>{t&&o(e,n,"Revoke member from group failed",t.message)}))}catch(t){o(e,n,"Revoke member from group failed",t.message)}}})})})}),y_),b_);var v_=n(158432);const S_=(0,v_.SP)("edit",{},[]);var f_=n(589789);const Z_="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTQiIHZpZXdCb3g9IjAgMCAxNSAxNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNOC41IDEuMTMyMzJMMTQuNSA3LjEzMjMyTTguNSAxMy4xMzIzTDE0LjUgNy4xMzIzMk0xNC41IDcuMTMyMzJMMC41MDAwMDEgNy4xMzIzMiIgc3Ryb2tlPSIjRDZEMkNFIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",C_="onboardingStepArrow--gqb_E47Df_",T_="onboardingStepPanel--qnDSxlGTtS",D_="onboardingStepCounterPanel--KZLs4foheX",k_="onboardingStepText--K_Kh_SIwEm",E_="circle--mihUuCFcJa";var w_,I_;const N_={CONTAINER:{width:"100%",textAlign:"center",paddingTop:"58px",border:"dashed 1px ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy"}},A_=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)("div",{sx:N_.CONTAINER,children:[(0,C.tZ)("div",{className:"onboardingTitlePanel--yGKYcW_2lp",children:(0,C.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",children:e("team_groups_list_onboarding_title")})}),(0,C.BX)("div",{className:"onboardingStepsContainer--LZ8j5MDbRH",children:[(0,C.BX)("div",{className:T_,children:[(0,C.tZ)("div",{className:D_,children:(0,C.tZ)("div",{className:E_,children:"1"})}),(0,C.tZ)("div",{className:k_,children:e("team_groups_list_onboarding_step_1")})]}),(0,C.tZ)("div",{className:C_,children:w_||(w_=(0,C.tZ)("img",{src:Z_}))}),(0,C.BX)("div",{className:T_,children:[(0,C.tZ)("div",{className:D_,children:(0,C.tZ)("div",{className:E_,children:"2"})}),(0,C.tZ)("div",{className:k_,children:e("team_groups_list_onboarding_step_2")})]}),(0,C.tZ)("div",{className:C_,children:I_||(I_=(0,C.tZ)("img",{src:Z_}))}),(0,C.BX)("div",{className:T_,children:[(0,C.tZ)("div",{className:D_,children:(0,C.tZ)("div",{className:E_,children:"3"})}),(0,C.tZ)("div",{className:k_,children:e("team_groups_list_onboarding_step_3")})]})]})]})},M_=({key:e,index:t,isFirstTimeGroupCreation:n,hasNewGroupDelayPassed:a,children:i})=>{const{translate:r}=(0,y.Z)();return(0,C.tZ)(l.ua7,{sx:{"@keyframes fadeIn":{"0%":{opacity:0},"100%":{opacity:1}},animation:"fadeIn 250ms ease-out"},passThrough:0!==t||!n||!a,placement:"bottom",arrowSize:12,trigger:"persist",content:(0,C.tZ)(o.nv,{color:"ds.text.inverse.standard",children:r("team_groups_list_new_group_tooltip")}),children:i},e)},O_=({enforcePaywall:e,className:t})=>{const{translate:n}=(0,y.Z)(),{routes:a}=(0,i.Xo)();return(0,C.tZ)(o.ke,{title:n(e?"team_group_list_paywall_block_title":"team_group_list_paywall_warning_title"),description:n("team_group_list_paywall_description"),actions:[(0,C.tZ)(i.rU,{to:`${a.teamAccountChangePlanRoutePath}?plan=business`,onClick:()=>{(0,h.Kz)(new c.UserClickEvent({clickOrigin:e?c.ClickOrigin.GroupsStarterLimitReached:c.ClickOrigin.GroupsStarterLimitCloseToBeReached,button:c.Button.UpgradeBusinessTier}))},children:(0,C.tZ)(o.zx,{icon:"PremiumOutlined",layout:"iconLeading",size:"small",children:n("team_group_list_paywall_upgrade")})},"upgrade")],mood:e?"warning":"brand",size:"large",className:t})},L_=({className:e})=>{const{translate:t}=(0,y.Z)(),n=ie.tz;return(0,C.tZ)(o.ke,{title:t("team_group_list_in_trial_business_paywall_block_title"),description:t("team_group_list_in_trial_business_paywall_block_description"),mood:"brand",size:"large",actions:[(0,C.tZ)(o.zx,{onClick:()=>{},as:"a",href:n,rel:"noreferrer",target:"_blank",children:t("team_group_list_in_trial_business_paywall_block_upgrade")},"upgrade")],className:e})};var B_,R_;const z_={GROUP_ROW:{display:"grid",gap:"16px",gridTemplateColumns:"repeat(auto-fill, minmax(400px, 1fr))",gridAutoRows:"62px"},GROUP_ITEM:{cursor:"pointer",display:"flex",flexDirection:"column",justifyContent:"center",backgroundColor:"ds.container.expressive.neutral.supershy.idle",borderRadius:"4px",border:"1px solid ds.border.neutral.quiet.idle",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden",padding:"20px 16px"}},P_="team_groups_list_search_placeholder",X_=(e,t)=>{const n=e.name.toLocaleLowerCase(),a=t.name.toLocaleLowerCase();return n.localeCompare(a)},j_={userGroups:{live:fe.C.liveAdministrableUserGroups,query:fe.C.getAdministrableUserGroups}},U_={strategies:j_,loadingComponent:(0,C.tZ)(fr.Z,{containerStyle:{minHeight:240}})},q_=(0,p_.$)((0,g_.i)((({userGroups:e,lee:t})=>{const n=(0,r.useRef)(null),{translate:a}=(0,y.Z)(),{teamId:s}=(0,Ce.fV)(),{routes:d}=(0,os.Xo)(),{addAlertToQueue:u,reportTACError:_}=K(),[m,p]=(0,r.useState)(""),[g,b]=(0,r.useState)(!1),[x,v]=(0,r.useState)(!1),[S,f]=(0,r.useState)(""),[Z,T]=(0,r.useState)(e),D=(0,r.useRef)(!1),k=(0,i.k6)(),{displayStarterPaywall:E,displayInTrialBusinessPaywall:w,enforceStarterPaywall:I}=(e=>{const t=(0,se.C)(),n=(0,De.Y)(),a=(0,me.o)("monetization_extension_group_sharing_repackage"),i=(0,rs.S)(),r=(0,re.lZ)(),s=!1===r.isLoading&&r.isTeamSoftDiscontinued;if(n.status!==Te.rq.Success||!a||s)return{displayStarterPaywall:!1,enforceStarterPaywall:!1,displayInTrialBusinessPaywall:!1};const o=i?.groupSharing.info?.limit,l=!!o;return{displayStarterPaywall:l,enforceStarterPaywall:l&&e.length>=o,displayInTrialBusinessPaywall:(0,X.NG)(n.data)&&!!t?.isFreeTrial}})(e);(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacGroupList)}),[]),(0,r.useEffect)((()=>{const t=[...e].sort(X_),n=S?t.filter((e=>e.name.toLocaleLowerCase().includes(S.trim().toLocaleLowerCase()))):t;T(n)}),[S,e]);const N=e=>{k.push({pathname:d.teamGroupRoutePath((0,f_.FN)(e.groupId))})},A=async e=>{var t;const n=null!=(t=e.target.value.trim())?t:"",a=""!==n&&await fe.C.isGroupNameAvailable(n);p(n),b(a)},M=()=>{p("")},O=async()=>{if(!s)throw new Error("teamId missing when attempting to create group");try{await(0,Se.wZ)(t.dispatchGlobal,{name:m,teamId:s}),n.current?.hidePopup(),p(""),e?.length?D.current&&(D.current=!1):(D.current=!0,setTimeout((()=>{v(!0)}),700))}catch(e){let t;try{t=JSON.parse(e.message)?.code}catch{t=`${e?.message}`.toUpperCase()}t!==W&&u({title:a("team_groups_list_create_group_error_title"),message:a("MISSING_PUBLIC_KEY"===t?"team_groups_list_create_group_missing_public_key_error_message":"team_groups_list_create_group_error_message")}),_(new Error(e.message))}};return(0,C.tZ)(hs,{header:(()=>{const e=!g&&""!==m;return(0,C.tZ)("div",{sx:Ku.HEADER,children:(0,C.BX)("div",{sx:{display:"flex",justifyContent:"space-between"},children:[(0,C.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:a("team_groups_list_title")}),I?null:(0,C.tZ)(Yu.e,{ref:n,buttonLabel:a("team_groups_list_new_group_cta"),confirmButtonLabel:a("team_groups_list_new_group_creation_confirm_btn"),cancelButtonLabel:a("team_groups_list_new_group_creation_cancel_btn"),onConfirmButtonClick:O,onCancelButtonClick:M,confirmButtonDisabled:!g,children:(0,C.BX)("div",{style:{display:"flex",flexDirection:"column",gap:10,marginBottom:12},children:[(0,C.tZ)(o.nv,{as:"label",children:a("team_groups_list_new_group_creation_header")}),(0,C.tZ)(l.oil,{fullWidth:!0,onChange:A,defaultValue:m,type:"text",placeholder:a("team_groups_list_new_group_input_placeholder"),feedbackType:e?"error":void 0,feedbackText:e?a("team_groups_list_create_group_name_already_exists"):void 0,autoFocus:!0})]})})]})})})(),children:(()=>{const t=e?.length?Z.map(((e,t)=>e?(0,C.tZ)(M_,{index:t,isFirstTimeGroupCreation:D.current,hasNewGroupDelayPassed:x,children:(0,C.tZ)("div",{className:"groupItem",onClick:()=>N(e),onKeyDown:t=>{"Enter"===t.key&&N(e)},tabIndex:0,role:"button",title:e.name,sx:z_.GROUP_ITEM,children:(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name})})},e.groupId):null)):B_||(B_=(0,C.tZ)(A_,{}));return(0,C.BX)(C.HY,{children:[E?(0,C.tZ)(O_,{enforcePaywall:I,sx:{marginBottom:"24px"}}):null,w?(0,C.tZ)(L_,{sx:{marginBottom:"24px"}}):null,(0,C.BX)("div",{sx:Ku.CARD_CONTAINER,children:[(0,C.tZ)(o.oi,{"aria-label":a(P_),placeholder:a(P_),type:"search",onChange:e=>{var t;return f(null!=(t=e.target.value)?t:"")},prefixIcon:R_||(R_=(0,C.tZ)(o.JO,{name:"ActionSearchOutlined"})),sx:{maxWidth:"365px",margin:0,padding:"0"}}),(0,C.tZ)(o.ke,{title:a("team_groups_list_info_box_title"),mood:"neutral"}),(0,C.tZ)("div",{sx:e?.length?z_.GROUP_ROW:void 0,children:t})]})]})})()})}),U_),j_),G_=(0,v_.SP)("list",{},[]);function F_(e){const{path:t,permission:n}=e;return(0,C.tZ)(i.GB,{exact:!0,path:[t,`${t}/:uuid`],component:$u,permission:n,children:(0,C.BX)(i.rs,{children:[(0,C.tZ)(i.Vy,{exact:!0,path:t,component:q_,reducer:G_}),(0,C.tZ)(i.Vy,{path:`${t}/:uuid`,component:x_,reducer:S_})]})})}var $_=n(174537);const V_="team_idp_infoboxes_dismiss_button",H_=()=>{const{routes:e}=(0,i.Xo)(),{translate:t}=(0,y.Z)(),n=(0,me.o)(Qa.w.EcommerceWebIdPErrorsPhase2),a=(0,Qo.Y)(Oe.t,{getIdPFailedProvisioningsData:{},hasSeenIdPNeedsSeatsInfobox:{},hasSeenIdPProvisioningsPendingInfobox:{}},[]),{markIdPNeedsSeatsInfoboxSeen:r,markIdPProvisioningsPendingInfoboxSeen:s}=(0,$.u)(Oe.t),{getIdPFailedProvisioningsData:l,hasSeenIdPNeedsSeatsInfobox:d,hasSeenIdPProvisioningsPendingInfobox:u}=a;if(!n||l.status!==Te.rq.Success||!l.data?.nbOfFailedCreations||d.status!==Te.rq.Success||u.status!==Te.rq.Success)return null;const{nbOfPendingProvisionings:_,requiredSeats:m,shouldShowNotifications:p}=l.data,g=!u.data&&p.warningProvisioningsPending,b=!d.data&&p.alertFailuresNeedSeats;return(0,C.BX)(C.HY,{children:[g?(0,C.tZ)(o.ke,{size:"large",mood:"warning",title:t("team_idp_pending_warning_infobox_title",{count:_,nbOfFailedUsers:_}),description:t("team_idp_pending_warning_infobox_description"),icon:"FeedbackWarningOutlined",actions:[(0,C.tZ)(o.zx,{size:"small",intensity:"quiet",onClick:()=>s(),children:t(V_)},"dismiss-pending-provisionings")]}):null,b?(0,C.tZ)(o.ke,{size:"large",mood:"danger",title:t("team_idp_errors_infobox_title",{count:m,nbOfFailedUsers:m}),icon:"FeedbackFailOutlined",actions:[(0,C.tZ)(o.zx,{size:"small",intensity:"quiet",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.Dismiss,clickOrigin:c.ClickOrigin.InsufficientSeatsProvisioningErrorBanner})),r()},children:t(V_)},"dismiss-failed-provisionings"),(0,C.tZ)(o.zx,{as:i.rU,size:"small",intensity:"catchy",to:`${e.teamAccountRoutePath}?showSeatsDialog=true&seatsToBuy=${m}`,onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.BuySeats,clickOrigin:c.ClickOrigin.InsufficientSeatsProvisioningErrorBanner}))},children:t("team_idp_errors_infobox_button_buy_seats",{count:m})},"buy-seats-idp")]}):null]})},W_=({handleClickOnRetry:e})=>{const{translate:t}=(0,y.Z)();return(0,C.BX)(C.HY,{children:[(0,C.tZ)("div",{sx:{transform:"translate(-5px, -5px)",margin:"25px 0px"},children:(0,C.tZ)(l.enX,{color:o.O9.lightTheme.ds.text.danger.quiet,size:75})}),(0,C.tZ)(l.$N8,{id:"backup-code-generation-error-dialog-title",title:t("team_members_generate_recovery_codes_error_dialog_title")}),(0,C.tZ)(l.a7O,{children:(0,C.tZ)(l.nvN,{id:"backup-code-generation-error-dialog-description",sx:{color:o.O9.lightTheme.ds.text.neutral.standard},children:t("team_members_generate_recovery_codes_error_dialog_description")})}),(0,C.tZ)(l.cNS,{primaryButtonTitle:t("team_members_generate_recovery_codes_error_dialog_confirm_button"),primaryButtonProps:{id:"backup-code-generation-error-dialog-try-again-button",type:"button",autoFocus:!0},primaryButtonOnClick:()=>e()})]})};var Y_,K_=n(122958);const Q_=({memberLogin:e,recoveryCodes:t,handleClickOnDone:n})=>{const{translate:a}=(0,y.Z)();return(0,C.BX)("div",{children:[(0,C.tZ)(l.$N8,{id:"backup-code-generation-dialog-list-title",title:a("team_members_generate_recovery_codes_dialog_title",{memberLogin:e})}),(0,C.BX)(l.a7O,{children:[(0,C.tZ)(l.nvN,{id:'id="backup-code-generation-dialog-list-description"',sx:{mb:"24px",mt:"6px",color:o.O9.lightTheme.ds.text.neutral.standard},children:a("team_members_generate_recovery_codes_dialog_description",{memberLogin:e})}),(0,C.tZ)(l.j49,{color:o.O9.lightTheme.ds.text.brand.standard,id:'id="backup-code-generation-dialog-list-eyebrow"',children:a("team_members_generate_recovery_codes_dialog_codes_label")}),(0,C.tZ)(l.Zbd,{sx:{mt:"6px",padding:"8px 12px",width:"100%"},children:t?.map(((e,t)=>(0,C.tZ)(l.nvN,{"data-testid":`two-factor-authentication-backup-code-${t}`,children:e},e)))}),(0,C.tZ)(l.zxk,{sx:{mt:"24px"},type:"button",nature:"secondary",id:"backup-code-generation-dialog-list-download-button",onClick:()=>{const e=t?.join("\n");(0,vs.W)(e,K_.B)},children:(0,C.BX)(l.Ejs,{children:[(0,C.tZ)(l.k$b,{sx:{mr:"10px"},children:Y_||(Y_=(0,C.tZ)(l._8t,{size:16}))}),a("team_members_generate_recovery_codes_dialog_download_button")]})})]}),(0,C.tZ)(l.cNS,{primaryButtonTitle:a("team_members_generate_recovery_codes_dialog_confirm_button"),primaryButtonProps:{id:"id=backup-code-generation-dialog-list-done-button",type:"button",autoFocus:!0},primaryButtonOnClick:()=>n()})]})};var J_;const em=({isOpen:e,memberLogin:t,closeBackupCodeDialog:n})=>{const[a,i]=(0,r.useState)(!1),[s,o]=(0,r.useState)(),c=async()=>{const e=await fe.C.getRecoveryCodesAsTeamCaptain({login:t});e.success?o(e.data.recoveryCodes):i(!0)},d=()=>{i(!1),o(void 0),n()};(0,r.useEffect)((()=>{e&&!a&&c()}),[e]);const{translate:u}=(0,y.Z)();return(0,C.tZ)(l.VqE,{isOpen:e,closeIconName:a?u("BUTTON_CLOSE_DIALOG"):"",onClose:()=>{d()},children:a?(0,C.tZ)(W_,{handleClickOnRetry:()=>{i(!1),c()}}):s?(0,C.tZ)(Q_,{memberLogin:t,recoveryCodes:s,handleClickOnDone:d}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.$N8,{id:"backup-code-generation-dialog-loader-title",title:u("team_members_generate_recovery_codes_dialog_loading_title",{memberLogin:t})}),(0,C.tZ)(l.a7O,{children:(0,C.tZ)("div",{sx:{mt:"26px"},children:J_||(J_=(0,C.tZ)(fr.Z,{mode:"light",size:75}))})})]})})};var tm=n(893383);const nm=({closeDialog:e,resendOrReactivate:t})=>{const{translate:n}=(0,y.Z)(),{showToast:a}=(0,o.pm)(),[i,s]=(0,r.useState)(!1),{getInviteLinkDataForAdmin:l,inviteLinkDataForAdmin:c}=(0,lu.h)(),d=!1===c?.disabled,u=(0,ie.cI)(c?.teamKey);return(0,r.useEffect)((()=>{l()}),[]),(0,C.BX)(o.Vq,{title:n("team_members_reinvite_dialog_title"),isOpen:!0,onClose:e,closeActionLabel:"Closing dialog",actions:{primary:{isLoading:i,disabled:i,children:n("team_members_resend_invite_dialog_resend_confirm"),onClick:async()=>{s(!0),await t(),s(!1),e()}},secondary:d?{children:n("team_members_resend_copy_invite_link"),onClick:()=>{navigator.clipboard.writeText(u),a({description:n("team_members_share_invite_link_copied"),mood:"brand"})}}:void 0},children:[(0,C.tZ)(o.nv,{children:n("team_members_resend_invite_dialog_message")}),d?(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:n("team_members_resend_invite_link_description")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{textDecoration:"underline"},children:u})]}):null]})},am={REVOKE_ERROR_MSG:"team_members_revoke_error_message",REVOKE_SUCCESS_MSG:"team_members_revoke_success_message",SINGLE:{REVOKE_DIALOG_CONFIRM:"team_members_revoke_single_dialog_confirm",REVOKE_DIALOG_CANCEL:"team_members_revoke_single_dialog_cancel",REVOKE_DIALOG_MSG:"team_members_revoke_single_dialog_message",REVOKE_DIALOG_MSG_B2B_ONLY:"team_members_revoke_single_dialog_message_b2b_only",REVOKE_DIALOG_TITLE:"team_members_revoke_single_dialog_title"},MULTIPLE:{REVOKE_DIALOG_CONFIRM:"team_members_remove_multiple_dialog_confirm",REVOKE_DIALOG_CANCEL:"team_members_revoke_multiple_dialog_cancel",REVOKE_DIALOG_MSG:"team_members_revoke_multiple_dialog_message",REVOKE_DIALOG_MSG_B2B_ONLY:"team_members_revoke_multiple_dialog_message_b2b_only",REVOKE_DIALOG_TITLE:"team_members_remove_multiple_dialog_title"},CLOSE_DIALOG_BUTTON_LABEL:"_common_dialog_dismiss_button"},im=({lee:e,closeDialog:t,selectedMembers:n})=>{const{translate:a}=(0,y.Z)(),i=(0,da.V)(),{reportTACError:r}=K(),s=(0,dc.I)(),c=1===n.length,d=s.status!==Te.rq.Success||!s.isDisabled,u=c?am.SINGLE:am.MULTIPLE;return(0,C.tZ)(o.Vq,{isOpen:!0,onClose:t,isDestructive:!0,actions:{primary:{children:a(u.REVOKE_DIALOG_CONFIRM),onClick:async()=>{t();const s=(0,Ti.v0)(e.globalState);if(!s)return void r(new Error(Ci.N));const{teamId:o}=s;if(o)try{const t=n.map((e=>e.login)),{content:{removedMembers:r,unproposedMembers:c,refusedMembers:d}}=await(new Di.Z).revokeMembers({auth:s,memberLogins:t}),u=Object.keys({...r,...c});u.forEach((t=>{const a=n.find((e=>e.login===t));e.dispatch(tm.Rb(a))})),Object.keys(d).forEach((t=>{const r=n.find((e=>e.login===t));if(!r)throw new Error(`member '${t}' not found in members list`);i.showAlert(a(am.REVOKE_ERROR_MSG),l.BLW.ERROR),e.dispatch(tm.Jo(r))})),u.length&&(i.showAlert(a(am.REVOKE_SUCCESS_MSG,{count:u.length}),l.BLW.SUCCESS),await(0,Se.hh)({teamId:o,action:"memberRevoked",users:u}))}catch(e){r(e)}}},secondary:{children:a(u.REVOKE_DIALOG_CANCEL),onClick:t}},closeActionLabel:a(am.CLOSE_DIALOG_BUTTON_LABEL),title:c?a(am.SINGLE.REVOKE_DIALOG_TITLE):a(am.MULTIPLE.REVOKE_DIALOG_TITLE,{count:n.length}),children:(0,C.tZ)(o.nv,{className:"automation-tests-revoke-member-dialog-content",children:c?a(d?am.SINGLE.REVOKE_DIALOG_MSG:am.SINGLE.REVOKE_DIALOG_MSG_B2B_ONLY,{username:n[0].login||n[0].name}):a(d?am.MULTIPLE.REVOKE_DIALOG_MSG:am.MULTIPLE.REVOKE_DIALOG_MSG_B2B_ONLY)})})};var rm;const sm=({closeDialog:e})=>{const{translate:t}=(0,y.Z)(),n=(0,da.V)(),{inviteLinkDataForAdmin:a,getInviteLinkDataForAdmin:i}=(0,lu.h)();(0,r.useEffect)((()=>{i()}),[i]);const s=(0,ie.cI)(a?.teamKey);return(0,C.tZ)(gr.o,{showCloseIcon:!0,isOpen:!0,footer:(0,C.tZ)(l.cNS,{intent:"primary",primaryButtonTitle:(0,C.BX)(C.HY,{children:[rm||(rm=(0,C.tZ)(o.JO,{name:"ActionCopyOutlined",size:"medium",color:"ds.text.inverse.catchy"})),t("team_memebers_share_link_dialog_copy_link_button")]}),primaryButtonOnClick:async()=>{await navigator.clipboard.writeText(s),n.showAlert(t("team_members_share_invite_link_copied"),l.BLW.SUCCESS)}}),onRequestClose:e,title:t("team_memebers_share_link_dialog_title"),children:(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.nvN,{children:t("team_memebers_share_link_dialog_paragraph")}),(0,C.tZ)(l.nvN,{sx:{marginTop:"16px",fontWeight:"600"},children:s})]})})},om=({membersWithoutPublicKey:e,onClose:t})=>{const{translate:n}=(0,y.Z)();return(0,C.tZ)(gr.o,{isOpen:Boolean(e.length),footer:(0,C.tZ)(l.cNS,{intent:"secondary",secondaryButtonTitle:n("team_members_error_popup_public_keys_ok"),secondaryButtonOnClick:t}),onRequestClose:t,title:n("team_members_error_popup_public_keys_title"),children:(0,C.BX)("div",{children:[n("team_members_error_popup_public_keys_message"),(0,C.tZ)("ul",{sx:{listStyleType:"disc",paddingLeft:"40px",marginTop:"1em",marginBottom:"1em"},children:e.map((({login:e})=>(0,C.tZ)("li",{children:e},e)))})]})})},lm=({closeDialog:e,applyActionOnMembers:t})=>{const{translate:n}=(0,y.Z)(),a=(0,da.V)(),{getInviteLinkDataForAdmin:i,inviteLinkDataForAdmin:s,createInviteLink:o,toggleInviteLink:c}=(0,lu.h)(),d=Fa();return(0,r.useEffect)((()=>{i()}),[i]),d?(0,C.tZ)(gr.o,{showCloseIcon:!0,isOpen:!0,footer:(0,C.tZ)(l.cNS,{intent:"primary",primaryButtonTitle:n("team_activation_dialog_activate_button"),primaryButtonOnClick:()=>(async()=>{s?.teamKey?s?.disabled&&await c(!1):await o(d),a.showAlert(n("team_activation_dialog_notification"),l.BLW.SUCCESS),await i(),t("shareInviteLink")})(),secondaryButtonTitle:n("team_activation_dialog_notrightnow_button"),secondaryButtonOnClick:e}),onRequestClose:e,title:n("team_activation_dialog_title"),children:(0,C.tZ)(l.nvN,{children:n("team_activation_dialog_paragrah")})}):null};var cm=n(918007),dm=n(909748);const um={teamCaptain:"team_members_assignment_dialog_admin_description",groupManager:"team_members_assignment_dialog_group_manager_description",member:"team_members_assignment_dialog_member_description"},_m=({member:e,newRole:t,updateUsersRights:n,closeDialog:a})=>{const{translate:i}=(0,y.Z)(),s=(0,da.V)(),c=(0,dm.U)(),d=hm(e),[u,_]=(0,r.useState)(null!=t?t:d);return null===c?null:(0,C.BX)(l.VqE,{isOpen:!0,onClose:a,closeIconName:i("_common_dialog_dismiss_button"),children:[(0,C.tZ)(l.$N8,{title:i("team_members_assignment_dialog_title",{user:e.login})}),(0,C.BX)(l.a7O,{children:[(0,C.tZ)(ki.S,{value:u,onChange:e=>{_(e.target.value)},groupName:"roles",children:Object.values(gm).map((e=>{return(0,C.BX)(ki.E,{value:e,disabled:(t=e,!(!c||t===gm.TeamCaptain||t===u)),children:[(0,C.tZ)(l.nvN,{color:"ds.text.neutral.standard",size:"small",children:i(bm[e])}),(0,C.tZ)(l.nvN,{color:"ds.text.neutral.quiet",size:"small",children:i(um[e])})]},e);var t}))}),u!==gm.Member?(0,C.tZ)(o.ke,{mood:"brand",title:i("team_members_assignment_dialog_groups_infobox")}):null]}),(0,C.tZ)(l.cNS,{primaryButtonTitle:i("team_members_assignment_dialog_update_button"),primaryButtonOnClick:async()=>{if(u===d)return a();try{const t=await n([{member:e,oldRole:d,newRole:u}]);if(!t)return;if(t.successes.length)s.showAlert(i("team_members_assignment_single_success",{username:e.name||e.login||"Member",previousRole:i(bm[d]),newRole:i(bm[u])}),l.BLW.SUCCESS);else if(t.errors.length)throw t.errors[0].error}catch{s.showAlert(i("team_members_assignment_single_error",{username:e.name||e.login||"Member"}),l.BLW.ERROR)}finally{a()}},primaryButtonProps:{type:"button",style:{padding:"0 20px"},disabled:u===d},secondaryButtonTitle:i("team_members_assignment_dialog_cancel_button"),secondaryButtonOnClick:a,secondaryButtonProps:{type:"button",style:{border:"none",padding:"0 20px",color:"ds.text.neutral.catchy",backgroundColor:"ds.container.expressive.neutral.quiet.idle"}}})]})},mm="team_members_assignment_multiple_error",pm=({selectedMembers:e,newRole:t,updateUsersRights:n,closeDialog:a})=>{const{translate:i}=(0,y.Z)(),r=(0,da.V)();return(0,C.tZ)(gr.o,{isOpen:!0,footer:(0,C.tZ)(l.cNS,{intent:"primary",primaryButtonTitle:i("team_members_assignment_multiple_dialog_submit"),primaryButtonOnClick:async()=>{const s=e.map((e=>({member:e,oldRole:hm(e),newRole:t})));try{const e=await n(s);if(!e)return;const a=i(bm[t]);e.successes.length&&e.errors.length?r.showAlert(i("team_members_assignment_multiple_partial_success",{countSuccess:e.successes.length,countTotal:s.length,newRole:a}),l.BLW.WARNING):e.successes.length?r.showAlert(i("team_members_assignment_multiple_success",{count:e.successes.length,newRole:a}),l.BLW.SUCCESS):e.errors.length&&r.showAlert(i(mm,{count:e.errors.length}),l.BLW.ERROR)}catch{r.showAlert(i(mm,{count:e.length}),l.BLW.ERROR)}finally{a()}},secondaryButtonTitle:i("team_members_assignment_multiple_dialog_cancel"),secondaryButtonOnClick:a}),onRequestClose:a,title:i("team_members_assignment_multiple_dialog_title",{countTotal:e.length,newRole:i(bm[t])}),children:(()=>{switch(t){case gm.TeamCaptain:return i("team_members_assignment_multiple_dialog_admin_message");case gm.GroupManager:return i("team_members_assignment_multiple_dialog_group_manager_message");default:return i("team_members_assignment_multiple_dialog_member_message")}})()})};let gm=function(e){return e.TeamCaptain="teamCaptain",e.GroupManager="groupManager",e.Member="member",e}({});const hm=e=>e.isTeamCaptain?gm.TeamCaptain:e.isGroupManager?gm.GroupManager:gm.Member,bm={teamCaptain:"team_members_assignment_dialog_admin_label",groupManager:"team_members_assignment_dialog_group_manager_label",member:"team_members_assignment_dialog_member_label"},ym=({selectedMembers:e,newRole:t,lee:n,closeDialog:a})=>{const{reportTACError:i}=K(),{translate:r}=(0,y.Z)(),{addGroupManager:s,removeGroupManager:o}=(0,$.u)(cm.J),c=async e=>{const t=(0,Ti.v0)(n.globalState);if(!t)return void i(new Error(Ci.N));const{teamId:a}=t;if(!a)throw new Error("No team ID when attempting role assignment");const r={errors:[],successes:[]};for await(const{member:t,oldRole:i,newRole:l}of e)try{switch(i){case gm.TeamCaptain:await(0,Se.Lx)({teamId:a,memberLogin:t.login}),n.dispatch(tm.bj(t)),await(0,Se.hh)({teamId:a,action:"adminDemoted",users:[t.login]});break;case gm.GroupManager:await o({memberLogin:t.login,teamId:a}),n.dispatch(tm.vE(t))}switch(l){case gm.TeamCaptain:await(0,Se.JQ)({teamId:a,memberLogin:t.login}),n.dispatch(tm.VW(t)),await(0,Se.hh)({teamId:a,action:"adminPromoted",users:[t.login]});break;case gm.GroupManager:await s({memberLogin:t.login,teamId:a}),n.dispatch(tm.lp(t))}r.successes.push(t.login)}catch(e){r.errors.push({member:t.login,error:e})}return r};return e.length?1===e.length?(0,C.tZ)(_m,{member:e[0],newRole:t,updateUsersRights:c,closeDialog:a}):(0,C.tZ)(pm,{selectedMembers:e,newRole:null!=t?t:gm.Member,updateUsersRights:c,closeDialog:a}):(0,C.tZ)(gr.o,{isOpen:!0,footer:(0,C.tZ)(l.cNS,{intent:"secondary",secondaryButtonTitle:r("team_members_assignment_nobody_dialog_cancel"),secondaryButtonOnClick:a}),onRequestClose:a,title:r("team_members_assignment_nobody_dialog_title"),children:r("team_members_assignment_nobody_dialog_message",{newRole:t?r(bm[t]):""})})},xm=e=>e.filter((e=>["pending","proposed"].includes(e.status)));var vm;const Sm={SUMMARY_CARD:{display:"flex",flexDirection:"column",justifyContent:"space-between",gap:"16px",flex:1},BUTTON_AND_BADGE_AREA:{display:"flex",flexDirection:"row",gap:"16px",alignItems:"center"}},fm=({title:e,titleColor:t,subtitle:n,action:a,isLoading:i,badge:r})=>(0,C.BX)("div",{sx:Sm.SUMMARY_CARD,children:[i?vm||(vm=(0,C.tZ)(o.ZX,{mood:"brand"})):(0,C.tZ)(o.nv,{textStyle:"ds.specialty.monospace.medium",color:null!=t?t:"ds.text.neutral.quiet",children:e}),(0,C.tZ)(o.nv,{as:"h2",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:n}),(0,C.BX)("div",{sx:Sm.BUTTON_AND_BADGE_AREA,children:[(0,C.tZ)(o.zx,{disabled:a.disabled,mood:a.mood,intensity:a.intensity,onClick:a.onClick,layout:"iconTrailing",icon:a.icon,children:a.label}),null!=r?r:null]})]}),Zm=({onReinviteAllClick:e})=>{const{translate:t}=(0,y.Z)(),{routes:n}=(0,i.Xo)(),a=(0,i.k6)(),{data:s,status:l}=(0,d.k)(El.B,"getReport"),u=(0,d.k)(Oe.t,"getIdPFailedProvisioningsData"),_=(0,me.o)(Qa.w.EcommerceWebIdPErrorsPhase2),{openDialog:m,shouldShowFrozenStateDialog:p}=(0,M.Ub)(),[g,b]=(0,r.useState)(!0),[x,v]=(0,r.useState)(0),[S,f]=(0,r.useState)(0),[Z,T]=(0,r.useState)(0),[D,k]=(0,r.useState)(0),[E,w]=(0,r.useState)(0),[I,N]=(0,r.useState)(!0),A=u.status===Te.rq.Success?u.data?.requiredSeats:0;return(0,r.useEffect)((()=>{"success"===l&&null!==p&&(k(s.seats.pending),v(s.seats.provisioned-s.seats.used),f(s.seats.provisioned),T(s.seats.used/s.seats.provisioned),w(s.passwordHealth.securityIndex),b(!1),N(0===s.seats.pending&&1===s.seats.used))}),[s,l,p]),(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px",padding:"24px"},children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("team_members_summary_title")}),(0,C.BX)("div",{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:"24px"},children:[(0,C.tZ)(fm,{isLoading:g,title:`${x}`,titleColor:Z<=.5?"ds.text.positive.quiet":Z<=.9?"ds.text.warning.quiet":"ds.text.danger.quiet",subtitle:t("team_members_summary_seat_count_content",{totalSeats:S}),action:{label:t("team_members_summary_seat_count_cta"),disabled:g,mood:"brand",intensity:Z>.5?"catchy":"quiet",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.BuySeats,clickOrigin:c.ClickOrigin.UsersSummary})),p?m():a.push(`${n.teamAccountRoutePath}?showSeatsDialog=true`)}},badge:A&&_?(0,C.tZ)(Ja,{requiredSeatsForIdP:A}):void 0}),(0,C.tZ)("div",{sx:{width:"1px",backgroundColor:"ds.border.neutral.quiet.idle"}}),(0,C.tZ)(fm,{isLoading:g,title:`${D||(I?"-":t("team_members_summary_reinvite_users_no_new_invites_label"))}`,titleColor:I?"ds.text.neutral.quiet":0===D?"ds.text.positive.quiet":"ds.text.warning.quiet",subtitle:0===D?t(I?"team_members_summary_reinvite_users_no_members_content":"team_members_summary_reinvite_users_no_new_invites_content"):t("team_members_summary_reinvite_users_content",{count:D}),action:{label:t("team_members_summary_reinvite_users_cta",{count:D}),mood:"neutral",intensity:"quiet",disabled:g||0===D,onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.ReInviteUsers,clickOrigin:c.ClickOrigin.UsersSummary})),p?m():e()}}}),(0,C.tZ)("div",{sx:{width:"1px",backgroundColor:"ds.border.neutral.quiet.idle"}}),(0,C.tZ)(fm,{isLoading:g,title:`${E||"-"}`,titleColor:E>=80?"ds.text.positive.quiet":E>=40?"ds.text.warning.quiet":E>0?"ds.text.danger.quiet":"ds.text.neutral.quiet",subtitle:t(!E||g?"team_members_summary_security_score_content_no_data":"team_members_summary_security_score_content"),action:{label:t("team_members_summary_security_score_cta"),mood:"neutral",intensity:"quiet",icon:"ActionOpenExternalLinkOutlined",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.CheckImproveHealthScore,clickOrigin:c.ClickOrigin.UsersSummary})),(0,q.Yo)("https://support.dashlane.com/hc/en-us/articles/360016225300-Manage-the-Password-Health-of-your-Starter-Team-or-Business-plan")}}})]})]})};var Cm=n(196266),Tm=n(89368);const Dm=({title:e,icon:t,description:n,onClick:a,key:i})=>(0,C.tZ)(l.W7o,{fullWidth:!0,onClick:a,sx:{height:"auto",textAlign:"left"},children:(0,C.BX)(l.T5p,{gap:"4px",gridTemplateColumns:"20px auto",gridTemplateRows:"auto auto",children:[(0,C.tZ)(l.dDn,{children:(0,C.tZ)(o.JO,{name:t,size:"medium"})}),(0,C.tZ)(l.dDn,{children:(0,C.tZ)(o.nv,{as:"span",textStyle:"ds.body.standard.strong",children:e})}),n?(0,C.tZ)(l.dDn,{gridArea:"2 / 2 / 3 / 3",sx:{textWrap:"wrap"},children:(0,C.tZ)(o.nv,{as:"span",color:"ds.text.neutral.quiet",textStyle:"ds.title.block.small",children:n})}):null]})},i);var km;const Em=({members:e,onMembersActionSelect:t})=>{const{translate:n}=(0,y.Z)(),{getInviteLinkDataForAdmin:a}=(0,lu.h)();return(0,C.tZ)(l.h_2,{sx:{zIndex:1001},content:[(0,C.tZ)(Dm,{onClick:()=>{t("reinviteAll",xm(e))},icon:"NotificationOutlined",title:n("team_members_resend_invite_all")},"resendInvite"),(0,C.tZ)(Dm,{onClick:async()=>{const e=await a();t(!e?.teamKey||e?.disabled?"enableInviteLink":"shareInviteLink")},icon:"ActionCopyOutlined",title:n("team_members_share_invite_link")},"shareInviteLink"),(0,C.tZ)(Dm,{onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.DownloadCsv})),(e=>{(0,vs.S)((e=>{const t=e.map((e=>{var t,n,a,i;return[e.login,e.status,e.twoFAInformation.type,null!=(t=e.nbrPasswords)?t:0,null!=(n=e.weakPasswords)?n:0,null!=(a=e.reused)?a:0,null!=(i=e.compromisedPasswords)?i:0,e.nbrPasswords>=5?e.securityIndex:"unavailable",e.ssoStatus,e.recoveryCreationDateUnix?"enabled":"disabled",e.lastUpdateDateUnix?(0,an.Z)(e.lastUpdateDateUnix).toISOString():e.revokedDateUnix?(0,an.Z)(e.revokedDateUnix).toISOString():e.status].join(",")})).join("\n");return`${["login email","status","twoFA_Status","number_passwords","weak_passwords","reused_passwords","compromised_passwords","password_health_score","sso_status","admin_recovery_status","last_active"].join(",")}\n${t}`})(e),"team-members.csv","text/csv;charset=utf-8")})(e)},icon:"DownloadOutlined",title:n("team_members_download_csv"),description:n("team_members_download_csv_description")},"exportUserCSV")].filter(Boolean),children:(0,C.tZ)(o.zx,{id:"expand-invite-option","aria-label":n("team_members_expand_invite_option"),intensity:"quiet",mood:"neutral",size:"medium",layout:"iconOnly",sx:{marginLeft:"16px"},icon:km||(km=(0,C.tZ)(o.JO,{name:"ActionMoreOutlined",size:"medium",color:"ds.text.neutral.standard"}))})})};var wm=n(57341),Im=n(207867);const Nm=({onMultipleReassignActionSelect:e})=>{const{translate:t}=(0,y.Z)(),{openDialog:n,shouldShowFrozenStateDialog:a}=(0,M.Ub)(),[i,s]=r.useState(!1),o=t=>{a&&t!==gm.TeamCaptain?n():e(t),s(!1)};return(0,C.tZ)(Im.j,{onOutsideClick:()=>{s(!1)},children:(0,C.BX)("div",{className:"container--zGfanmJ20J",children:[(0,C.tZ)(wm.Z,{label:t("team_members_bulk_actions_menu_label"),onClick:()=>{s(!i)},classNames:["dropdownButton--eX1Pwf6noX"],icon:(0,C.tZ)("img",{className:P()("buttonIcon--K7qOhGWIeC",{"flip--CjjllwCv0e":i}),src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAiIGhlaWdodD0iNiIgdmlld0JveD0iMCAwIDEwIDYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTkuNSAwLjVMNSA1LjVMMC41IDAuNSIgc3Ryb2tlPSIjNkU4NjhCIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiLz4KPC9zdmc+Cg==",role:"none"}),iconClassName:["iconContainer--_MWkwTD793"],iconPosition:"right"}),i?(0,C.BX)("ul",{className:"menu--svPbw6Qghp",children:[(0,C.tZ)("li",{onClick:()=>o(gm.TeamCaptain),children:t("team_members_bulk_actions_menu_admin")},"admin"),(0,C.tZ)("li",{onClick:()=>o(gm.GroupManager),children:t("team_members_bulk_actions_menu_group_manager")},"groupManager"),(0,C.tZ)("li",{onClick:()=>o(gm.Member),children:t("team_members_bulk_actions_menu_member")},"member")]}):null]})})};var Am=function(e){return e[e.TEAM_CAPTAIN=0]="TEAM_CAPTAIN",e[e.GROUP_MANAGER=1]="GROUP_MANAGER",e[e.BILLING_ADMIN=2]="BILLING_ADMIN",e[e.ACCEPTED=3]="ACCEPTED",e[e.PENDING_PROPOSED=4]="PENDING_PROPOSED",e[e.DEFAULT=5]="DEFAULT",e}(Am||{});const Mm=({isTeamCaptain:e,isBillingAdmin:t,isGroupManager:n,status:a})=>{switch(!0){case e:return Am.TEAM_CAPTAIN;case n:return Am.GROUP_MANAGER;case t:return Am.BILLING_ADMIN;case"accepted"===a:return Am.ACCEPTED;case["pending","proposed"].includes(a):return Am.PENDING_PROPOSED;default:return Am.DEFAULT}},Om=(e,t)=>"number"==typeof e?e:t&&["pending","proposed","removed","revoked"].includes(t)?-1:0,Lm=e=>e.map((e=>{return{...e,filterableStatus:(t=e.status,"proposed"===t?"pending":"revoked"===t?"removed":"unproposed"!==t?t:void 0),sortableLastActivity:e.revokedDateUnix||e.lastUpdateDateUnix||0,sortablePasswords:Om(e.nbrPasswords,e.status),sortableRights:Mm(e),sortableSecurityScore:Om(e.securityIndex,e.status),sortableSafePasswords:Om(e.safePasswords,e.status),sortableWeakPasswords:Om(e.weakPasswords,e.status),sortableReused:Om(e.reused,e.status),sortableCompromisedPasswords:Om(e.compromisedPasswords,e.status)};var t}));var Bm=n(573630);const Rm=({member:e,onDismiss:t,onMemberActionSelect:n})=>{const{translate:a}=(0,y.Z)(),i=!!e.twoFAInformation&&("totp_device_registration"===e.twoFAInformation.type||"totp_login"===e.twoFAInformation.type);return(0,C.tZ)(Im.j,{onOutsideClick:t,children:(0,C.tZ)("ul",{className:"menu--tp5V4puFsY",children:(()=>{if("removed"===e.status)return(0,C.BX)("li",{id:"reactivate-quick-action",onClick:()=>n("reactivate",e),children:[(0,C.tZ)(o.JO,{name:"ItemEmailOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_reactivate_single_label")]},"reactivate");const t=[];return"pending"!==e.status&&"proposed"!==e.status||t.push((0,C.BX)("li",{id:"reinvite-quick-action",onClick:()=>n("reinvite",e),children:[(0,C.tZ)(o.JO,{name:"ItemEmailOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_resend_invite_label")]},"resendInvite")),"pending"!==e.status&&"proposed"!==e.status&&t.push((0,C.BX)("li",{id:"reassign-quick-action",onClick:()=>n("reassign",e),children:[(0,C.tZ)(o.JO,{name:"ItemPersonalInfoOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_change_role_label")]},"reassign")),t.push((0,C.tZ)(o.u,{content:a("team_members_assignment_dialog_remove_billing_contact_tooltip"),location:"top",passThrough:!e.isBillingAdmin,sx:{whiteSpace:"normal"},children:(0,C.BX)("li",{id:"revoke-quick-action",onClick:e.isBillingAdmin?void 0:()=>n("revoke",e),sx:e.isBillingAdmin?{cursor:"not-allowed !important",opacity:"0.5"}:void 0,children:[(0,C.tZ)(o.JO,{name:"ActionDeleteOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_revoke_single_label")]},"revoke")},"revoke")),i&&"pending"!==e.status&&"proposed"!==e.status&&t.push((0,C.BX)("li",{id:"generate-2fa-recovery-code-quick-action",onClick:()=>n("generateBackupCode",e),children:[(0,C.tZ)(o.JO,{name:"RecoveryKeyOutlined",color:"ds.text.neutral.quiet",sx:{marginRight:"16px"}}),a("team_members_generate_recovery_codes_label")]},"generate2FABackupCodes")),t})()})})},zm="securityScoreOver80--Hgr2G6S0v_",Pm="securityScoreOver60--_JHvGMsVMu",Xm="securityScoreOver40--uopteVjbhe",jm="securityScoreOver20--DGwlRT6aTn",Um="securityScoreOver0--KWOlPM746R",qm="securityScoreUnknown--X1UUUGTTOI",Gm="box--b300GjbePX",Fm="shield--aR0K8YOyOo",$m="medium--oK53lyprG3",Vm="small--Y3Ur7GidSI",Hm=({score:e,size:t,children:n})=>{const a="small"===t?Vm:$m;return(0,C.BX)("div",{className:P()(Gm,(i=e,i.caseOf({nothing:()=>qm,just:e=>e>=80?zm:e>=60?Pm:e>=40?Xm:e>=20?jm:Um})),a),children:[(0,C.tZ)("div",{className:Fm}),(0,C.tZ)("div",{children:n})]});var i};var Wm,Ym;const Km={LOGIN_TEXT:{variant:"text.ds.body.reduced.regular",wordBreak:"break-word",color:"ds.text.neutral.catchy",marginLeft:"16px",maxWidth:"280px",minWidth:"140px"},ROW:{boxShadow:"inset 0 -1px 0 0 ds.border.neutral.quiet.idle",height:"60px",variant:"text.ds.body.reduced.regular",td:{padding:"16px",verticalAlign:"middle"}},ACTIVE:{color:"ds.text.neutral.standard"},REVOKED:{color:"ds.text.neutral.quiet"}},Qm="team_members_row_invitation_pending",Jm=({checkedMembers:e,currentLoggedLogin:t,members:n,onMemberActionSelect:a,onMemberToggleCheck:i})=>{var s,c;const{translate:d}=(0,y.Z)(),[u,_]=(0,r.useState)(null),m=e=>{_(e===u?null:e)},p=(e,t)=>{m(u),a(e,t)},g=()=>(0,C.BX)(l.Ejs,{gap:"4px",children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:d("team_members_row_security_score_unavailable")}),(0,C.tZ)(o.u,{wrapTrigger:!0,location:"bottom",content:d("team_members_row_security_score_breakdown_less_than_five"),children:(0,C.tZ)("div",{sx:{display:"flex",alignItems:"center"},children:Wm||(Wm=(0,C.tZ)(o.JO,{name:"FeedbackInfoOutlined",color:"ds.text.neutral.quiet",size:"xsmall"}))})})]}),h=e=>{const t=Wu.Maybe.maybe(e.nbrPasswords>=5||!e.nbrPasswords&&e.securityIndex&&e.securityIndex>0?e.securityIndex:null);return t.caseOf({just:e=>0===e?s||(s=(0,C.tZ)(g,{})):(0,C.tZ)(Hm,{score:t,size:"small",children:(0,C.tZ)("div",{className:"securityScoreCellText--uh3PGGldwN",children:`${Ml(e)}%`})}),nothing:()=>c||(c=(0,C.tZ)(g,{}))})},b=e=>{switch(!0){case["pending","proposed"].includes(e.status):return d(Qm);case Boolean(e.lastUpdateDateUnix||e.revokedDateUnix):return(0,C.tZ)(Bu.Z,{date:(0,an.Z)(e.lastUpdateDateUnix||e.revokedDateUnix)});case"pending"===e.status:return d(Qm);default:return d("team_members_row_never_logged_in")}},x=e=>"removed"===e.status?d("team_members_row_revoked"):e.isTeamCaptain?d("team_members_row_captain"):e.isGroupManager?d("team_members_row_group_manager"):d("team_members_row_member"),v=e=>(0,C.tZ)(Rm,{member:e,onDismiss:()=>m(e.login),onMemberActionSelect:p});return(0,C.tZ)("tbody",{className:"tableBody--UVKDDE_osD",children:(()=>{const a=(e,t)=>null!=t?t:"accepted"!==e?"-":0;return n.map((n=>{return(0,C.BX)("tr",{id:"removed"===n.status?"revoked":"active",sx:(0,o.jM)([Km.ROW,"removed"===n.status?Km.REVOKED:Km.ACTIVE]),children:[(0,C.tZ)("td",{children:n.login!==t&&"removed"!==n.status&&(0,C.tZ)(o.XZ,{checked:!!Array.from(e).find((e=>e.login===n.login)),"aria-label":"Select user",onChange:()=>i(n)})}),(0,C.BX)("td",{className:"loginCell--zmWQn6nt_m",children:[(0,C.tZ)(js.q,{email:n.login,size:30}),(0,C.tZ)("div",{sx:Km.LOGIN_TEXT,className:"automation-tests-member-login",children:(0,C.tZ)(Bm.Z,{tooltipText:n.login,children:n.login})})]}),(0,C.tZ)("td",{className:"securityScoreCell--TRrWX93JKm",children:h(n)}),(0,C.BX)("td",{className:"passwordsCell--gft4asedk5",children:[(0,C.tZ)("span",{className:"passwordsCellIcon--oJaMYYHQ_9"}),(r=n.status,s=n.nbrPasswords,"accepted"!==r?"-":!s||s<5?"<5":s)]}),(0,C.tZ)("td",{children:a(n.status,n.safePasswords)}),(0,C.tZ)("td",{children:a(n.status,n.weakPasswords)}),(0,C.tZ)("td",{children:a(n.status,n.reused)}),(0,C.tZ)("td",{children:a(n.status,n.compromisedPasswords)}),(0,C.tZ)("td",{children:b(n)}),(0,C.BX)("td",{children:[n.isBillingAdmin?(0,C.tZ)(o.u,{location:"top",content:d("team_account_heading_billing_admin_tooltip"),sx:{textAlign:"start"},children:(0,C.BX)("div",{sx:{display:"flex",alignItems:"center"},children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.strong",sx:{display:"inline-block"},children:d("team_account_heading_billing_admin")}),(0,C.tZ)(o.JO,{color:"ds.text.neutral.standard",name:"FeedbackInfoOutlined",sx:{display:"inline-block",marginLeft:"4px"},size:"small"})]})}):null,x(n)]}),(0,C.BX)("td",{className:"actionsCell--NotN6ngLnK",style:{position:"relative"},children:[n.login===u?v(n):null,n.login!==t?(0,C.tZ)(o.zx,{id:"users-action-menu-button","aria-label":d("team_members_row_aria_label_users_actions"),onClick:()=>m(n.login),layout:"iconOnly",intensity:"supershy",icon:Ym||(Ym=(0,C.tZ)(o.JO,{name:"SettingsOutlined",color:"ds.text.neutral.standard"}))}):null]})]},n.login);var r,s}))})()})},ep={TOP:{display:"flex",justifyContent:"space-between",height:"90px",marginBottom:"16px",color:"ds.text.neutral.quiet"},TOP_PAGINATION_TEXT:{whiteSpace:"nowrap",display:"flex",gap:"5px",alignItems:"center",maxHeight:"42px",overflowY:"hidden",marginRight:"16px"}},tp="team_members_heading_name",np="team_members_heading_security_score",ap="team_members_heading_password_count",ip="team_members_heading_last_login",rp=24,sp=({lee:e,members:t,onMembersActionSelect:n,onMembersInvite:a})=>{var i;const{translate:s}=(0,y.Z)(),l=(0,Ti.v0)(e.globalState),c=null!=(i=l?.login)?i:"",[d,u]=(0,r.useState)(Lm(t)),[_,m]=(0,r.useState)(new Set),[p,g]=(0,r.useState)(0),[h,b]=(0,r.useState)(["accepted","pending","removed"]),[x,v]=(0,r.useState)(""),[S,f]=(0,r.useState)({sortBy:"sortableRights",sortOrder:"asc"});(0,r.useEffect)((()=>{m(new Set),u(Lm(t))}),[t]);const Z=()=>{const e=x?.toLocaleUpperCase(),t="asc"===S.sortOrder?Zi.ascend:Zi.descend;return(0,Zi.sortWith)([t((0,Zi.prop)(S.sortBy))])(d.filter((e=>e.filterableStatus&&h.includes(e.filterableStatus))).filter((t=>!x||t.login.toLocaleUpperCase().includes(e))))},T=e=>{g(e)},D=e=>{const t=e===S.sortBy&&"asc"===S.sortOrder?"desc":"asc";f({sortBy:e,sortOrder:t})},k=e=>{g(0),b((t=>t.includes(e)?t.filter((t=>t!==e)):t.concat([e])))},E=e=>!e.isBillingAdmin&&["accepted","pending","proposed"].includes(e.status),w=()=>{m(new Set)},I=()=>{const e=p*rp,t=new Set;Z().slice(e,e+rp).reduce(((e,t)=>(c===t.login||e.add({...t}),e)),t),Array.from(_).forEach((e=>t.add({...e}))),m(t)},N=p*rp,A=Z(),M={first:A.length?N+1:0,last:Math.min(A.length,N+rp)},O=A.slice(N,N+rp),L=(e=>{const t=e.filter((e=>Array.from(_).find((t=>t.login===e.login)))).length;let n;return e.find((e=>e.login===c)),e.length,n=0===t?I:w,(0,C.tZ)(o.XZ,{onChange:n,"aria-label":"select-all"})})(O),B=[{headerLabel:"",headerElement:L,headerKey:"checkbox"},{headerLabel:s(tp),tooltipLabel:s(tp),onClick:()=>D("login"),sortOrder:"login"!==S.sortBy?void 0:S.sortOrder,headerKey:"login"},{headerLabel:s(np),tooltipLabel:s(np),onClick:()=>D("sortableSecurityScore"),sortOrder:"sortableSecurityScore"!==S.sortBy?void 0:S.sortOrder,headerKey:"security-score"},{headerLabel:s(ap),tooltipLabel:s(ap),onClick:()=>D("sortablePasswords"),sortOrder:"sortablePasswords"!==S.sortBy?void 0:S.sortOrder,headerKey:"num-passwords"},{headerLabel:s("team_members_heading_safe"),tooltipLabel:s("team_members_heading_safe_tooltip"),onClick:()=>D("sortableSafePasswords"),sortOrder:"sortableSafePasswords"!==S.sortBy?void 0:S.sortOrder,headerKey:"safe-passwords"},{headerLabel:s("team_members_heading_weak"),tooltipLabel:s("team_members_heading_weak_tooltip"),onClick:()=>D("sortableWeakPasswords"),sortOrder:"sortableWeakPasswords"!==S.sortBy?void 0:S.sortOrder,headerKey:"weak-passwords"},{headerLabel:s("team_members_heading_reused"),tooltipLabel:s("team_members_heading_reused_tooltip"),onClick:()=>D("sortableReused"),sortOrder:"sortableReused"!==S.sortBy?void 0:S.sortOrder,headerKey:"reused-passwords"},{headerLabel:s("team_members_heading_compromised"),tooltipLabel:s("team_members_heading_compromised_tooltip"),onClick:()=>D("sortableCompromisedPasswords"),sortOrder:"sortableCompromisedPasswords"!==S.sortBy?void 0:S.sortOrder,headerKey:"compromised-passwords"},{headerLabel:s(ip),tooltipLabel:s(ip),onClick:()=>D("sortableLastActivity"),sortOrder:"sortableLastActivity"!==S.sortBy?void 0:S.sortOrder,headerKey:"last-login"},{headerLabel:(0,C.BX)("span",{sx:{display:"flex",alignItems:"center"},children:[s("team_members_heading_rights")," ",(0,C.tZ)(o.JO,{color:"ds.text.neutral.quiet",name:"FeedbackInfoOutlined",sx:{display:"inline-block",marginLeft:"4px"},size:"small"})]}),tooltipLabel:(0,C.tZ)("div",{sx:{"& > * > p:not(:last-child)":{marginBottom:"10px"}},children:s.markup("team_members_heading_rights_tooltip_markup")}),onClick:()=>D("sortableRights"),sortOrder:"sortableRights"!==S.sortBy?void 0:S.sortOrder,headerKey:"permissions"},{headerLabel:s("team_members_heading_actions"),headerKey:"actions"}];return(0,C.BX)("div",{className:"container--lTIFkRrWrT",children:[(0,C.tZ)("div",{sx:ep.TOP,children:(0,C.BX)("div",{className:"tableHeaderContainer--NOzH1jto0x",children:[(0,C.tZ)(Tm.n,{type:"search",containerStyle:{flexGrow:1,maxWidth:"300px",marginBottom:"15px"},onChange:e=>{g(0),v(e.currentTarget.value)},placeholder:s("team_members_filter_control_search_placeholder"),placeholderIcon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjEiIGhlaWdodD0iMjEiIHZpZXdCb3g9IjAgMCAyMSAyMSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNNy4zNzUgMTMuNzY0Nkw0LjM3NSAxNi43NjQ2TTE2LjM3NSA5LjI2NDY1QzE2LjM3NSAxMS43NDk5IDE0LjM2MDMgMTMuNzY0NiAxMS44NzUgMTMuNzY0NkM5LjM4OTcyIDEzLjc2NDYgNy4zNzUgMTEuNzQ5OSA3LjM3NSA5LjI2NDY1QzcuMzc1IDYuNzc5MzcgOS4zODk3MiA0Ljc2NDY1IDExLjg3NSA0Ljc2NDY1QzE0LjM2MDMgNC43NjQ2NSAxNi4zNzUgNi43NzkzNyAxNi4zNzUgOS4yNjQ2NVoiIHN0cm9rZT0iI0NDQzdDMiIgc3Ryb2tlLXdpZHRoPSIxLjUiLz4KPC9zdmc+Cg=="}),(0,C.BX)("div",{className:"topContainer--ST6B1mEZjJ",children:[(0,C.tZ)("div",{className:"topLeft--viTEuhR25Z",children:(0,C.BX)("div",{className:"statusFilters--SMNEn98faE",children:[(0,C.tZ)(o.XZ,{label:s("team_members_filter_control_include_active"),onChange:()=>k("accepted"),checked:h.includes("accepted")}),(0,C.tZ)(o.XZ,{label:s("team_members_filter_control_include_invited"),onChange:()=>k("pending"),checked:h.includes("pending")}),(0,C.tZ)(o.XZ,{label:s("team_members_filter_control_include_revoked"),onChange:()=>k("removed"),checked:h.includes("removed")})]})}),_.size>0&&[(0,C.tZ)(Nm,{onMultipleReassignActionSelect:e=>{let t=[..._];switch(e){case"member":t=t.filter((e=>e.isTeamCaptain||e.isGroupManager));break;case"teamCaptain":t=t.filter((e=>!e.isTeamCaptain&&"accepted"===e.status));break;case"groupManager":t=t.filter((e=>!e.isGroupManager&&"accepted"===e.status))}n("reassign",t,e)}},"dropdown"),(0,C.tZ)(Cm.Z,{classNames:["revokeButton--_sdxTpsqR2 topButton--vxY2fF8Lv4"],label:s("team_members_revoke_multiple_label"),disabled:![..._].some(E),onClick:()=>{let e=[..._];e=e.filter(E),n("revoke",e)}},"button")],(0,C.BX)("div",{className:"topRight--YZ2DF7wcrD",children:[(0,C.BX)("div",{className:"topPagination--rTlBiQ0EDF",children:[(0,C.BX)("div",{sx:ep.TOP_PAGINATION_TEXT,children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.catchy",children:s("team_members_filter_pagination_top_count",{first:M.first,last:M.last})}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:s("team_members_filter_pagination_top_total",{total:A.length})})]}),(0,C.tZ)(r_.Z,{currentPageIndex:p,isShort:!0,itemsLength:A.length,itemsPerPage:rp,onChange:T})]}),(0,C.tZ)(o.zx,{icon:"ActionAddOutlined",layout:"iconLeading",onClick:a,children:s("team_members_quota_progress_add")}),t.length>1&&(0,C.tZ)(Em,{members:t,onMembersActionSelect:n})]})]})]})}),(0,C.BX)("table",{className:"table--a8O2px0gHj",children:[(0,C.tZ)(Rs,{columns:B}),(0,C.tZ)(Jm,{checkedMembers:_,currentLoggedLogin:c,members:O,onMemberActionSelect:(e,t)=>{n(e,[t])},onMemberToggleCheck:e=>{m((t=>{const n=Array.from(t).find((t=>t.login===e.login)),a=new Set(t);return n?a.delete(n):a.add({...e}),a}))}})]}),(0,C.tZ)("div",{className:"bottom--b6BPTxGASq",children:(0,C.tZ)(r_.Z,{currentPageIndex:p,itemsLength:A.length,itemsPerPage:rp,onChange:T})})]})},op=[],lp=()=>{const{translate:e}=(0,y.Z)(),{shouldShowNonMembersInfobox:t,nonMembersCount:n,nonMembersList:a}=(()=>{const e=(0,d.k)(Ud.L,"getNonMembersCount"),t=(0,d.k)(Ud.L,"getHasAdminDismissedInfobox"),n=(0,d.k)(Ud.L,"getNonMembersList");return{shouldShowNonMembersInfobox:e.status===Te.rq.Success&&t.status===Te.rq.Success&&e.data>0&&!t.data,nonMembersCount:e.status===Te.rq.Success&&t.status===Te.rq.Success?e.data:0,nonMembersList:n.status===Te.rq.Success?n.data:op}})(),[i,s]=(0,r.useState)(!1),l=function(){const{dismissNonMembersInfobox:e}=(0,$.u)(Ud.L);return e}();return(0,r.useEffect)((()=>{i&&a.length&&(function(e){const t=e.map((e=>[e.userId,e.login,e.premiumStatus,e.proposedState,(0,an.Z)(e.lastActivityDateUnix).toISOString()].join(","))).join("\n");(0,vs.S)(`${["user_id","login","premium_status","proposedState","last_activity_date"].join(",")}\n${t}`,"non-members-list.csv","text/csv;charset=utf-8")}(a),s(!1))}),[i,a]),t?(0,C.tZ)(o.ke,{title:e("non_members_infobox_title",{count:n}),description:e("non_members_infobox_description"),mood:"warning",size:"large",actions:[(0,C.tZ)(o.zx,{intensity:"quiet",size:"small",onClick:()=>l(),children:e("non_members_infobox_dismiss_cta")},"dismiss-non-members-infobox"),(0,C.tZ)(o.zx,{size:"small",isLoading:i,onClick:()=>s(!0),children:e("non_members_infobox_download_cta")},"download-non-members-list")]}):null};var cp,dp;const up="_common_toast_close_label",_p=({lee:e,location:t})=>{const n=(0,r.useRef)(!1),{translate:a}=(0,y.Z)(),{reportTACError:i}=K(),s=(0,da.V)(),l=(0,$_.v)(),{proposeMembers:d}=(0,$.u)(Ud.L),{showToast:u}=(0,o.pm)(),{openDialog:_,shouldShowFrozenStateDialog:m}=(0,M.Ub)(),[p,g]=(0,r.useState)(!0),{invitePartialSuccessState:b,setInvitePartialSuccessState:x,handleInvitationResultClosed:v}=su(),[S,f]=(0,r.useState)(null),[Z,T]=(0,r.useState)(!1),[D,k]=(0,r.useState)({showError:!1,membersWithoutPublicKey:[]}),E=(0,r.useCallback)((()=>{const t=(0,Ti.v0)(e.globalState);return t||i(new Error(Ci.N)),t}),[e.globalState,i]),w=(0,r.useCallback)((()=>{m?_():(T(!0),(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Start,inviteCount:0,inviteFailedCount:0,inviteResentCount:0,inviteSuccessfulCount:0,isImport:!1,isResend:!1})))}),[m]),I=t=>{e.dispatch(tm.eY(t))},A=(e,t)=>{x({show:!0,invitedMembers:e,refusedMembers:t}),I(Object.keys(e))},O=(0,r.useCallback)(((t,n=[],i)=>{const r=async()=>{if(n.forEach((t=>{e.dispatch(tm.bh(t))})),!E())return;const t=n.map((e=>e.login));try{const i=await d({proposedMemberLogins:t});if("failure"===i.tag)throw new Error(i.error);if(i.data&&(0,Fd.e)(i.data)){const{refusedMembers:a}=i.data.content;Object.values(a).forEach((t=>{const a=n.find((e=>e.login===t));A(i.data.proposedMembers,i.data.refusedMembers),e.dispatch(tm.S2(a))})),(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Complete,inviteCount:t.length+Object.keys(a).length,inviteFailedCount:Object.keys(a).length,inviteResentCount:t.length,inviteSuccessfulCount:t.length-Object.keys(a).length,isImport:!1,isResend:!0}))}else u({description:a("team_members_invite_success_message"),mood:"brand",closeActionLabel:a(up)}),(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Complete,inviteCount:t.length,inviteFailedCount:0,inviteResentCount:t.length,inviteSuccessfulCount:t.length,isImport:!1,isResend:!0}))}catch(i){const{message:r="",data:s={}}=i,o=a("team_members_invite_error_message_no_free_slot"),l=a("team_members_invite_error_message"),{content:{error:d=r}={}}=s,_=["no_free_slot_free_plan","no_free_slot"].includes(d)?o:l;n.forEach((t=>{e.dispatch(tm.S2(t))})),u({description:_,mood:"danger",closeActionLabel:a(up)}),(0,h.Kz)(new c.UserSendManualInviteEvent({flowStep:c.FlowStep.Error,inviteCount:t.length,inviteFailedCount:t.length,inviteResentCount:t.length,inviteSuccessfulCount:0,isImport:!1,isResend:!0}))}},s=n.map((e=>e.login));switch(t){case"reassign":return f((0,C.tZ)(ym,{lee:e,selectedMembers:n,newRole:i,closeDialog:()=>f(null)}));case"reactivate":case"reinvite":return m?void _():void r();case"reinviteAll":return m?void _():f((0,C.tZ)(nm,{resendOrReactivate:r,closeDialog:()=>f(null)}));case"revoke":return f((0,C.tZ)(im,{lee:e,selectedMembers:n,closeDialog:()=>f(null)}));case"generateBackupCode":return f((0,C.tZ)(em,{memberLogin:s[0],isOpen:!0,closeBackupCodeDialog:()=>f(null)}));case"enableInviteLink":return m?void _():f((0,C.tZ)(lm,{closeDialog:()=>f(null),applyActionOnMembers:O}));case"shareInviteLink":return m?void _():f((0,C.tZ)(sm,{closeDialog:()=>f(null)}))}}),[s,E,A,m,a]);(0,r.useEffect)((()=>{if(n.current||null===l||null===m)return;n.current=!0;const a=E();if(!a)return;const{teamId:r}=a;r&&((new Di.Z).status({auth:a}).then((t=>{var n;return e.dispatch(tm.xF({extraFreeSlots:t.content.team.extraFreeSlots,membersNumber:t.content.team.membersNumber,isFreeTrial:t.content.team.isFreeTrial,teamName:null!=(n=t.content.team.info.name)?n:"",teamSecurityScore:t.content.team.securityIndex})),(0,Se.YY)({teamId:r})})).then((n=>{e.dispatch(tm.Wq({members:n})),g(!1);const a=n&&1===n.length,i=t.state?.openSendInvitesDialog;if(!m&&(!l&&a||i))w();else if(t.state?.openResendPendingInvitationsDialog&&!m)return void O("reinviteAll",xm(n));const r=n.filter((e=>!e.hasPublicKey)).filter((e=>"accepted"===e.status));r.length&&k({showError:!0,membersWithoutPublicKey:r})})).catch(i),(0,h.Nc)(c.PageView.TacUserList))}),[w,O,E,e,t.state?.openResendPendingInvitationsDialog,t.state?.openSendInvitesDialog,l,i,m,a]);const L=jd(e.state.members.valueOr([]));return(0,C.tZ)(hs,{header:(0,C.tZ)(o.X6,{as:"h1",color:"ds.text.neutral.standard",textStyle:"ds.title.section.large",children:a("team_members_page_title")}),children:(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[cp||(cp=(0,C.tZ)(lp,{})),dp||(dp=(0,C.tZ)(H_,{})),(0,C.tZ)(Zm,{onReinviteAllClick:()=>{O("reinviteAll",xm(e.state.members.valueOr([])))}}),(0,C.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:p?(0,C.tZ)(fr.Z,{containerStyle:{minHeight:240}}):(0,C.tZ)(sp,{lee:e,members:e.state.members.valueOr([]),onMembersActionSelect:O,onMembersInvite:w})}),D.showError?(0,C.tZ)(om,{membersWithoutPublicKey:D.membersWithoutPublicKey,onClose:()=>k((e=>({...e,showError:!1})))}):null,S,(0,C.tZ)(mu,{lee:e,teamId:(0,N.ev)(e.globalState),totalSeatCount:e.state.totalSeatCount.valueOr(0),numSeatsTaken:L,excludedInviteMembers:e.state.members.valueOr([]).filter((({status:e})=>"removed"!==e)).map((({login:e})=>e)),isFreeTrial:e.state.isFreeTrial.valueOr(!0),shouldShowInviteDialog:Z,handleCloseInviteDialog:()=>T(!1),handleInvitePartialSuccess:A,handleInviteCompleteSuccess:I,invitePartialSuccessState:b,handleInvitationResultClosed:v})]})})};var mp=n(678128);const pp={settingsPage:"settingsPage--k2Ztg5L3TZ",withoutHeader:"withoutHeader--K7wlLBUI31",settingsContainer:"settingsContainer--nyZHFHWont",settingsRow:"settingsRow--Mid_I3S6Qx",settingsLabelContainer:"settingsLabelContainer--rCMIUljV94",settingsGreyedLabel:"settingsGreyedLabel--L0ZP86y4UJ",textSettingRow:"textSettingRow--JwyTaO5qbq",selectSettingRow:"selectSettingRow--CRjY3loqBA",switchSettingRow:"switchSettingRow--THK1RoaDKQ",textFieldInputColumn:"textFieldInputColumn--G3ALnYhur_",helperLabelPanel:"helperLabelPanel--gGU7C6m_r2",infoBoxPanel:"infoBoxPanel--TMnBp9xS5d",textWithButtonSettingRow:"textWithButtonSettingRow--rWQRX8E5Np",versionContainer:"versionContainer--eWfpg9oE65",versionNumber:"versionNumber--uHC_eBvZbs",confirmationContent:"confirmationContent--C7lnmdM6Vl"};var gp;const hp={SETTINGS_PANEL:{display:"inline-block",backgroundColor:"ds.container.agnostic.neutral.supershy",padding:"32px",marginBottom:"10px",flex:"1",borderRadius:"8px"}},bp=({children:e,leadingContent:t,trailingContent:n,title:a,isLoading:i=!1})=>i?gp||(gp=(0,C.tZ)(Al.a,{scopedToPage:!0})):(0,C.tZ)("div",{className:P()(pp.settingsPage,{[pp.withoutHeader]:!a}),children:(0,C.BX)("div",{className:pp.settingsContainer,children:[a?(0,C.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",color:"ds.text.neutral.catchy",sx:{marginBottom:"32px"},children:a}):null,t,(0,C.tZ)("div",{sx:hp.SETTINGS_PANEL,children:e}),n]})});var yp=n(723104),xp=n(599203);const vp=({data:e,targetUri:t,...n})=>{const a=(0,r.useRef)(null);return(0,C.BX)("form",{action:t,method:"post",ref:a,target:"_blank",rel:"noopener",children:[(()=>{const t=[];return Object.keys(e).forEach((n=>t.push((0,C.tZ)("input",{defaultValue:e[n],type:"hidden",name:n},String(65535*Math.random()).replace(/\./,""))))),(0,C.tZ)("div",{children:t})})(),(0,C.tZ)(Cm.Z,{onClick:()=>a.current?.submit(),...n})]})},Sp={uploadCsvLabel:"uploadCsvLabel--sX4DnYKGlL",fileContainer:"fileContainer--M2SFpr0Pvl",file:"file--dJtQQDGzSk",fileIcon:"fileIcon--MKumqlXPl7",fileTitle:"fileTitle--d2cupH4GiA",fileTitleHeader:"fileTitleHeader--jqYDFR_MsK",fileTitleHint:"fileTitleHint--g2OBjT1L4G",fileTitleHintError:"fileTitleHintError--F4iw3QsNVb",fileTitleHintSuccess:"fileTitleHintSuccess--JPyWdw7GS8",fileProgressBackground:"fileProgressBackground--NEs2tyO8Pe",fileProgress:"fileProgress--cr0wc0wF3w",fileProgressAnimation:"fileProgressAnimation--aFpkqnmOMV",fileProgressComplete:"fileProgressComplete--y2f1JLicyr",fileButtons:"fileButtons--ofyh4FIc7u",fileError:"fileError--RHrDBIVtVA",fileErrorTitle:"fileErrorTitle--Jx5QASYwkS",fileErrorTitleIcon:"fileErrorTitleIcon--b8GGJ4i0UT",fileErrorContent:"fileErrorContent--G67_aw40u7"},fp="team_settings_duo_header_general",Zp=e=>{const{translate:t}=(0,y.Z)(),{reportTACError:n}=K(),a=(0,r.useRef)(null),[i,s]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[v,S]=(0,r.useState)(!1),[f,Z]=(0,r.useState)(null),[T,D]=(0,r.useState)(!1),[k,E]=(0,r.useState)(null),w=(()=>{const e=(0,d.k)(_.o,"getTeamDuoInfo");return{status:e.status,data:e.data,error:e.error}})(),I=e.lee.apiMiddleware.teamPlans?e.lee.apiMiddleware.teamPlans:(n(new Error("teamPlans service not set in apiMiddleware")),null),N=e.lee.apiMiddleware.strongAuth?e.lee.apiMiddleware.strongAuth:(n(new Error("strongAuth service not set in apiMiddleware")),null);return(0,r.useEffect)((()=>{(()=>{if(w.status===Te.rq.Success&&w.data){const{duo:t,duoIntegrationKey:n,duoSecretKey:a,duoApiHostname:i}=w.data;e.lee.dispatch(mp.k0({duo:t,duoIntegrationKey:n,duoSecretKey:a,duoApiHostname:i}))}else w.status===Te.rq.Error&&console.error(`DuoSettings: fetchData failed with error: ${w.error}`)})()}),[w.data,w.error,w.status]),(0,C.BX)(bp,{title:t(fp),children:[(0,C.tZ)("p",{className:pp.settingsHeader,children:t(fp)}),(0,C.tZ)(Jc,{label:t("team_settings_duo_enable_label"),labelHelper:t("team_settings_duo_enable_helper"),children:(0,C.tZ)(yp.Z,{genericErrorMessage:t("_common_generic_error"),isDisabled:w.status===Te.rq.Loading||i,saveValueFunction:()=>{const t=!e.lee.state.hasDuo;return s(!0),e.lee.dispatch(mp.FC(t)),I?.setSettings({duo:t}).then((()=>s(!1))).catch((()=>{}))},value:e.lee.state.hasDuo})}),(0,C.tZ)("p",{className:pp.settingsHeader,children:t("team_settings_duo_header_setup")}),(0,C.BX)(Jc,{label:t("team_settings_duo_integration_key_label"),labelHelper:t("team_settings_duo_integration_key_helper"),children:[(0,C.tZ)(Tm.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoIntegrationKey,isDisabled:o,onBlur:t=>{if(o)return;const n=t.target.value;e.lee.dispatch(mp.a2(n)),l(!0),u(!1),I&&I.setSettings({duoIntegrationKey:n}).then((()=>{l(!1)})).catch((()=>{}))},onFocus:()=>u(!0),placeholder:t("team_settings_duo_integration_key_hint")}),c||o?(0,C.tZ)("div",{children:(0,C.tZ)(Cm.Z,{label:t("team_settings_duo_integration_key_button"),loading:o})}):null]}),(0,C.BX)(Jc,{label:t("team_settings_duo_secret_key_label"),labelHelper:t("team_settings_duo_secret_key_helper"),children:[(0,C.tZ)(Tm.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoSecretKey,isDisabled:m,onBlur:(t=>{if(m)return;const n=t.target.value;e.lee.dispatch(mp.E4(n)),p(!0),h(!1),I&&I.setSettings({duoSecretKey:n}).then((()=>{p(!1)})).catch((()=>{}))}).bind(void 0),onFocus:()=>h(!0),placeholder:t("team_settings_duo_secret_key_hint")}),g||m?(0,C.tZ)("div",{children:(0,C.tZ)(Cm.Z,{label:t("team_settings_duo_secret_key_button"),loading:m})}):null]}),(0,C.BX)(Jc,{label:t("team_settings_duo_api_host_label"),labelHelper:t("team_settings_duo_api_host_helper"),children:[(0,C.tZ)(Tm.n,{containerStyle:{width:"300px"},inputStyle:{minHeight:42},defaultValue:e.lee.state.duoApiHostname,isDisabled:b,onBlur:(t=>{if(b)return;const n=t.target.value;e.lee.dispatch(mp.qf(n)),x(!0),S(!1),I&&I.setSettings({duoApiHostname:n}).then((()=>{x(!1)})).catch((()=>{}))}).bind(void 0),onFocus:()=>S(!0),placeholder:t("team_settings_duo_api_host_hint")}),v||b?(0,C.tZ)("div",{children:(0,C.tZ)(Cm.Z,{label:t("team_settings_duo_api_host_button"),loading:b})}):null]}),(0,C.tZ)("p",{className:pp.settingsHeader,children:t("team_settings_duo_header_directory")}),(0,C.tZ)(Jc,{label:t("team_settings_duo_upload_csv_label"),labelHelper:(0,C.BX)("ol",{className:Sp.uploadCsvLabel,children:[(0,C.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_one")}),(0,C.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_two")}),(0,C.tZ)("li",{children:t("team_settings_duo_upload_csv_helper_step_three")})]}),children:(0,C.BX)("div",{className:Sp.fileContainer,children:[(0,C.BX)("div",{className:Sp.file,children:[(0,C.tZ)("span",{className:Sp.fileIcon}),(0,C.tZ)("div",{className:Sp.fileTitle,children:k?[(0,C.tZ)("div",{className:Sp.fileTitleHeader,children:k},"header"),(0,C.tZ)("div",{className:Sp.fileProgressBackground,children:(0,C.tZ)("div",{className:T?Sp.fileProgressComplete:Sp.fileProgress})},"progress"),(0,C.tZ)("p",{className:[Sp.fileTitleHint,T&&f?Sp.fileTitleHintError:Sp.fileTitleHintSuccess].join(" "),children:t(T?f?"team_settings_duo_upload_csv_feedback_error":"team_settings_duo_upload_csv_feedback_success":"team_settings_duo_upload_csv_feedback_progress")},"hint")]:[(0,C.tZ)("div",{className:Sp.fileTitleHeader,children:"duo_usernames.csv"},"header")]})]}),(0,C.BX)("div",{className:Sp.fileButtons,children:[(0,C.tZ)("input",{type:"file",id:"file",accept:"text/csv, text/plain, .csv",ref:a,style:{display:"none"},onChange:(()=>{var e;k&&E(null);const t=null!=(e=a.current?.files?.[0])?e:{name:""};E(t.name),N&&N.uploadDuoCsv(t).then((()=>{D(!0),setTimeout((()=>E(null)),2e3)})).catch((e=>{Z(e.code.toLowerCase()),D(!0)}))}).bind(void 0)}),(0,C.tZ)(xp.Z,{label:t("team_settings_duo_upload_csv_button_upload"),onClick:(()=>{a.current?.click()}).bind(void 0)}),(0,C.tZ)(vp,{data:{login:e.lee.globalState.user.session.login,uki:e.lee.globalState.user.session.uki},label:t("team_settings_duo_upload_csv_button_download"),style:{marginLeft:"16px"},targetUri:"https://ws1.dashlane.com/3/strongauth/exportDuoUsernames"})]}),f?(0,C.BX)("div",{className:Sp.fileError,children:[(0,C.BX)("div",{className:Sp.fileErrorTitle,children:[(0,C.tZ)("span",{className:Sp.fileErrorTitleIcon,children:"!"}),t("team_settings_duo_upload_csv_error_title")]}),(0,C.tZ)("p",{className:Sp.fileErrorContent,children:t(`team_settings_duo_upload_csv_error_${f}`)})]}):null]})})]})};var Cp=n(157457);const Tp=()=>(0,d.k)(_.o,"getTeamPolicies");var Dp=n(874466);const kp=({content:e,header:t,index:n})=>(0,C.BX)(l.Ejs,{gap:"8px",sx:{flexFlow:"row",flexBasis:"25%"},children:[(0,C.tZ)(l.Ejs,{justifyContent:"center",alignItems:"center",sx:{width:36,height:36,borderRadius:36,flexShrink:0,backgroundColor:"ds.container.expressive.brand.quiet.idle",color:"ds.text.brand.standard"},children:n}),(0,C.BX)("section",{children:[(0,C.tZ)(o.X6,{as:"h4",textStyle:"ds.title.block.medium",sx:{marginBottom:"8px"},children:t}),(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:e})]})]}),Ep=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)("div",{sx:{display:"flex",flexDirection:"row",marginBottom:40,gap:"24px"},children:[(0,C.tZ)(kp,{index:1,header:e("team_settings_master_password_policies_settings_stepper_step_request_title"),content:e("team_settings_master_password_policies_settings_stepper_step_request_subtitle")}),(0,C.tZ)(kp,{index:2,header:e("team_settings_master_password_policies_settings_stepper_step_approval_title"),content:e("team_settings_master_password_policies_settings_stepper_step_approval_subtitle")}),(0,C.tZ)(kp,{index:3,header:e("team_settings_master_password_policies_settings_stepper_step_recover_title"),content:e("team_settings_master_password_policies_settings_stepper_step_recover_subtitle")}),(0,C.tZ)(kp,{index:4,header:e("team_settings_master_password_policies_settings_stepper_step_login_title"),content:e("team_settings_master_password_policies_settings_stepper_step_login_subtitle")})]})};var wp;const Ip=e=>{const[t,n]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),[l,d]=(0,r.useState)(!1),[u,_]=(0,r.useState)(!1),[m,p]=(0,r.useState)(""),[g,b]=(0,r.useState)(!1),{translate:x}=(0,y.Z)(),{reportTACError:v}=K(),S=(0,dm.U)(),{status:f,data:Z}=Tp(),{showToast:T}=(0,o.pm)();if((0,r.useEffect)((()=>{null!==S&&((0,h.Nc)(c.PageView.TacSettingsAccountRecovery),(async()=>{if(n(!0),(0,Ti.v0)(e.lee.globalState))try{const t=Z?.recoveryEnabled;e.lee.dispatch(Dp.x({recoveryEnabled:t}));const n=await(async()=>{const t=(0,Ti.v0)(e.lee.globalState);if(t&&t.teamId){const e=await(0,Se.mP)({teamId:t.teamId});return Boolean(e.length)}return v(new Error(Ci.N)),!1})();_(n)}catch(e){console.error(e)}finally{n(!1)}else v(new Error(Ci.N))})())}),[S,Z]),f!==Te.rq.Success||!Z)return null;const D=async t=>{n(!0);const a=(0,N.ev)(e.lee.globalState);if(a)try{await(0,Se.jy)({teamId:a,settings:{recoveryEnabled:t}}),e.lee.dispatch(Dp.Zn(t)),T({id:"toggleRecovery",description:x(t?"team_settings_master_password_policies_dialog_alert_label_available":"team_settings_master_password_policies_dialog_alert_label_unavailable"),action:{label:x("common_alert_undo_action"),onClick:()=>{D(!t)}}}),n(!1)}catch(e){n(!1)}else v(new Error(Ci.N))},k=async()=>{d((e=>!e))},E=async()=>{s(!0);const t=await(0,Se.RR)({masterPassword:m});s(!1),t?(await Promise.all([k(),D(!e.lee.state.recoveryEnabled)]),p(""),b(!1)):b(!0)},w=u&&e.lee.state.recoveryEnabled;return(0,C.BX)(bp,{title:x("team_settings_menu_title_account_recovery"),children:[(0,C.BX)("div",{children:[(0,C.BX)("div",{sx:{position:"relative"},children:[(0,C.tZ)(o.X6,{textStyle:"ds.title.section.medium",as:"h3",sx:{marginBottom:"8px"},children:x("team_settings_master_password_policies_settings_recover_label")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"40px",paddingRight:"80px"},children:x("team_settings_master_password_policies_settings_recover_label_helper")}),(0,C.tZ)(o.ZD,{sx:{position:"absolute",top:0,right:0},disabled:t||w,readOnly:!!S,tooltip:S?x("team_settings_master_password_policies_settings_recovery_blocked_discontinued"):void 0,checked:e.lee.state.recoveryEnabled,onChange:k})]}),(0,C.tZ)(o.X6,{textStyle:"ds.title.section.medium",as:"h3",sx:{marginBottom:"24px"},children:x("team_settings_master_password_policies_settings_how_it_works_label")}),wp||(wp=(0,C.tZ)(Ep,{})),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{marginBottom:"4px"},children:x("team_settings_master_password_policies_settings_how_it_works_label_helper")}),(0,C.tZ)(o.Qj,{isExternal:!0,href:a.WW,children:x("team_settings_master_password_policies_settings_how_it_works_label_helper_link_text")})]}),(0,C.tZ)(Cp.Z,{isOpen:l,title:e.lee.state.recoveryEnabled?x("team_settings_master_password_policies_dialog_title_disable"):x("team_settings_master_password_policies_dialog_title_enable"),labelDismiss:x("team_settings_master_password_policies_dialog_cta_cancel_label"),labelConfirm:e.lee.state.recoveryEnabled?x("team_settings_master_password_policies_dialog_cta_confirm_label_disable"):x("team_settings_master_password_policies_dialog_cta_confirm_label_enable"),onDismiss:()=>{p(""),b(!1),d(!1)},onConfirm:()=>E(),ctaIsDisabled:i||!m,onChange:e=>{p(e.target.value),b(!1)},isMasterPasswordInvalid:g,onKeyDown:e=>{(async e=>{13===e.keyCode&&m&&await E()})(e)},children:e.lee.state.recoveryEnabled?(0,C.BX)("div",{children:[(0,C.tZ)(o.nv,{children:x.markup("team_settings_master_password_policies_confirmation_dialog_disable_label_markup")}),(0,C.tZ)(o.nv,{children:x("team_settings_master_password_policies_confirmation_dialog_disable_sublabel")})]}):(0,C.BX)("div",{children:[(0,C.tZ)(o.nv,{children:x.markup("team_settings_master_password_policies_confirmation_dialog_enable_label_markup",{},{linkTarget:"_blank"})}),(0,C.tZ)(o.nv,{children:x("team_settings_master_password_policies_confirmation_dialog_enable_sublabel")})]})})]})},Np=({header:e})=>(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:e.label},e.label),Ap=({onClick:e,content:t})=>(0,C.tZ)(o.zx,{mood:"brand",intensity:"quiet",onClick:e,sx:{maxWidth:"fit-content"},children:t}),Mp="team_settings_saving_label",Op="team_settings_save_success_label",Lp={SETTINGS_LABEL_MARGIN_TOP:{marginTop:"13px"},HELPER_LABEL_PANEL:{color:"ds.text.neutral.standard",marginTop:"13px",marginBottom:"8px",paddingRight:"70px",fontSize:"12px",fontWeight:"400"}},Bp=({field:e,editSettings:t,checkForAuthenticationError:n})=>{const{translate:a}=(0,y.Z)(),{reportTACError:i}=K(),s=!!e.multiLine,o=e.deserializer?e.deserializer(e.value):e.value,l=(0,r.useCallback)((async a=>{var r;if(!t)return;if(e.validator){const t=e.serializer?e.serializer(a):a,n=e.validator(t);if(n)throw new Error(e.getErrorMessageForKey?.(n))}if(n?.())return;const s={};if(["disableAutoLoginDomains","teamDomain"].includes(null!=(r=e.feature)?r:"")){const t=e.value;if(t.length){const n=e.serializer?.(a),i=t.filter((e=>!n.some((t=>t===e)))),r=n.filter((e=>!t.some((t=>t===e))));e.feature&&(s[e.feature]={removed:i,added:r.map((e=>e.toLowerCase()))})}else e.serializer&&e.feature&&(s[e.feature]={added:e.serializer(a)})}else e.feature&&(s[e.feature]=e.serializer?e.serializer(a):a);if(Object.keys(s).length)try{await t(s)}catch(t){i(t,e.getErrorMessageForKey?.(t.message))}}),[n,t,e,i]);return(0,C.tZ)(Ga.X,{multiLine:s,defaultValue:o,ariaLabelledBy:e.feature,saveBtnLabel:a("team_settings_button_save_label"),savingBtnLabel:a(Mp),editBtnLabel:a("team_settings_button_edit_label"),placeholder:e.hintText,inputStyle:e.inputStyle,hintStyle:e.hintStyle,successMessage:a(Op),onSave:l,textFieldClassName:pp.textFieldInputColumn,isDisabled:e.isReadOnly},e.label)};var Rp=n(259284);var zp,Pp;const{accessibleValidatorGreen:Xp}=l.colors,jp=({value:e,isDisabled:t,onSelectElementClick:n,options:a,saveValueFunction:i,successMessage:s,savingMessage:c})=>{const[d,u]=(0,r.useState)(""),[_,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(!1);return(0,C.BX)("div",{className:"container--Wz5267l08y",children:[(0,C.tZ)("div",{className:"select--EypTcJ6Y5l",children:(0,C.tZ)(Rp.m,{value:e,disabled:t||_,onChangeExtended:(e,t,n)=>{m(!0),i(n).then((()=>{m(!1),g(!0),u(""),setTimeout((()=>{g(!1)}),1e3)})).catch((e=>{m(!1),g(!1);const t=(0,Pr.i)(e);u(t)}))},onClick:n,errorText:d,successText:p?s:_?c:"",style:{marginTop:"-1.5em",width:320},children:a.map((e=>(0,C.tZ)(Rp.t,{value:e.value,primaryText:e.label,disabled:e.disabled},e.value)))})}),_||p?(0,C.tZ)("div",{className:"feedback--XqG4rKApan",children:_?zp||(zp=(0,C.tZ)(o.ZX,{mood:"positive",size:18})):Pp||(Pp=(0,C.tZ)(l.rE2,{size:20,color:Xp}))}):null]})},Up=({field:e,checkForAuthenticationError:t,editSettings:n})=>{const{translate:a}=(0,y.Z)(),{reportTACError:i}=K(),s=(0,r.useCallback)((async a=>{if(!n||t?.()||!e.feature)return;const r={};r[e.feature]="unset"===a?null:e.serializer?e.serializer(a):a;try{await n(r)}catch(t){const n=t.data?.content||{},a=e.getErrorMessageForKey?.(n.error);i(t,a)}}),[t,n,e,i]);return(0,C.tZ)(jp,{value:e.value,saveValueFunction:s,successMessage:a(Op),savingMessage:a(Mp),options:e.options,isDisabled:e.isReadOnly},e.label)},qp=({field:e,editSettings:t,checkForAuthenticationError:n,policies:a})=>{var i;const{translate:s}=(0,y.Z)(),{reportTACError:l}=K(),[c,d]=(0,r.useState)(!1),[u,_]=(0,r.useState)(""),[m,p]=(0,r.useState)(!1),g=null!=(i=e.value)&&i?e.confirmDisable:e.confirmEnable,h=e.value?e.confirmDisable:e.confirmEnable,b=(0,r.useCallback)((async()=>{if(!t||n?.())return;const a={};if(e.feature){const t=void 0!==e.value&&!e.value;a[e.feature]=e.serializer?e.serializer(t):t,t||e.constraintsFromOtherFields?.requiredFor?.forEach((e=>e.reset?.(a)))}try{await t(a)}catch(t){const n=t.data?.content||429===t.code&&{error:"too_many_requests"}||"not_authorized"===t.message&&{error:"not_authorized"}||{},a=e.getErrorMessageForKey?.(n.error);l(t,a)}}),[n,t,e,l]),x=(0,r.useCallback)((()=>{d(!1),_(""),p(!1)}),[]),v=(0,r.useCallback)((()=>(d(!0),_(""),p(!1),Promise.resolve())),[]),S=(0,r.useCallback)((async()=>{const e=await(0,Se.RR)({masterPassword:null!=u?u:""});return p(!e),e?(x(),b()):Promise.resolve()}),[b,x,u]),f=(0,r.useCallback)((e=>{_(e.target.value),p(!1)}),[]),Z=(0,r.useCallback)((e=>{"Enter"===e.key&&u&&S()}),[S,u]),T=(0,r.useCallback)((async()=>{e.customSwitchHandler?await e.customSwitchHandler():g?await v():await b()}),[g,e,b,v]);return(0,C.BX)(C.HY,{children:[(0,C.tZ)(yp.Z,{isLoading:e.isLoading,genericErrorMessage:s("_common_generic_error"),ariaLabelledBy:e.feature,value:e.value,isReadOnly:e.isReadOnly,isDisabled:e.constraintsFromOtherFields?.disabledWhen?.some((e=>a&&e?.condition?.(a))),disabledFeedbackMessage:e.constraintsFromOtherFields?.disabledWhen?.find((e=>a&&e?.condition?.(a)&&e?.warningMessage))?.warningMessage,saveValueFunction:T,successMessage:s("team_settings_save_success_label"),savingMessage:s("team_settings_saving_label")},e.label),c&&h?(0,C.BX)(Cp.Z,{isOpen:!0,title:h.title,labelDismiss:h.dismiss,labelConfirm:h.confirm,onDismiss:x,onConfirm:S,onChange:f,isMasterPasswordInvalid:m,ctaIsDisabled:!u,onKeyDown:Z,children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:h.helper1}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:h.helper2}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:h.label})]}):null]})},Gp=e=>{const{field:t,...n}=e;switch(t.type){case"text":return(0,C.tZ)(Bp,{field:t,...n});case"select":return(0,C.tZ)(Up,{field:t,...n});case"switch":return(0,C.tZ)(qp,{...e});case"cta":return(0,C.tZ)(Ap,{onClick:t.ctaAction,content:t.ctaLabel});default:return null}},Fp=e=>{var t;const n={"> *":{flex:"1"},display:"flex",gap:"8px",alignItems:"flex-start",flexDirection:"row",marginBottom:"32px"},{field:a}=e;switch(a.type){case"text":n.marginTop="7px";break;case"select":n.marginTop="4px";break;case"switch":case"cta":n.marginTop="20px"}return(0,C.BX)("div",{sx:n,children:[(0,C.BX)("div",{sx:{maxWidth:"50%"},children:[(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"8px"},children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:"select"===a.type||"text"===a.type?Lp.SETTINGS_LABEL_MARGIN_TOP:{},id:a.feature,children:a.label.split("//").map(((e,t)=>t%2?(0,C.tZ)("span",{sx:{color:"ds.text.oddity.disabled",fontWeight:"300"},children:e},e):e))}),a.badgeLabel?(0,C.tZ)(o.Ct,{label:a.badgeLabel,mood:"brand",iconName:a.badgeIconName,layout:"iconLeading"}):null]}),a.helperLabel?(0,C.tZ)("div",{id:"helper-label-panel",sx:Lp.HELPER_LABEL_PANEL,children:a.helperLabel}):null,a.infoBox?(0,C.tZ)("div",{sx:{marginTop:"20px"},children:(0,C.tZ)(o.ke,{size:"large",title:a.infoBox.title,description:a.infoBox.description,mood:null!=(t=a.infoBox.mood)?t:"neutral"})}):null]}),(0,C.tZ)(Gp,{...e})]},a.feature)},$p="_common_generic_error",Vp=()=>{const{translate:e}=(0,y.Z)(),{inviteLinkDataForAdmin:t,getInviteLinkDataForAdmin:n,inviteLinkDataLoading:a,createInviteLink:i,toggleInviteLink:s}=(0,lu.h)(),o=Fa(),c=(0,dm.U)();if((0,r.useEffect)((()=>{n()}),[n]),!o||null===c)return null;const d={type:"header",label:e("team_settings_header_user_access")},u={type:"switch",isLoading:a,label:e("team_settings_enable_invite_link_label"),isReadOnly:c,feature:"inviteLink",helperLabel:(0,C.BX)(C.HY,{children:[e("team_settings_disable_enable_invite_link_helper"),!1===t?.disabled?(0,C.BX)(l.Ejs,{flexDirection:"row",flexWrap:"nowrap",alignItems:"center",gap:"8px",sx:{marginTop:"12px"},children:[(0,C.tZ)(uu.q,{mood:"neutral",intensity:"supershy",iconProps:{color:"ds.text.neutral.standard"},copyValue:(0,ie.cI)(t.teamKey)}),(0,C.tZ)(l.nvN,{bold:!0,size:"x-small",sx:{textDecoration:"underline"},children:(0,ie.cI)(t.teamKey)})]}):null]}),value:!1===t?.disabled,customSwitchHandler:async()=>{const a=t?.teamKey;if(a){if(!await s(!t?.disabled))throw Error(e($p))}else if(!await i(o))throw Error(e($p));if(!await n())throw Error(e($p))}};return(0,C.BX)(C.HY,{children:[(0,C.tZ)(Np,{header:d}),(0,C.tZ)(Fp,{field:u})]})},Hp=({settingRow:e,editSettings:t,checkForAuthenticationError:n})=>{const{reportTACError:a}=K();return(0,C.tZ)(o.ke,{sx:{margin:"16px 0"},title:e.label,description:e.description,icon:e.icon,size:"large",mood:e.mood,actions:[e.actions?.secondary?(0,C.tZ)(o.zx,{mood:e.mood,intensity:"quiet",icon:"ActionOpenExternalLinkOutlined",layout:"iconLeading",onClick:e.actions?.secondary.onClick,children:e.actions?.secondary.label},e.actions?.secondary.label):null,e.actions?.primary?(0,C.tZ)(o.zx,{mood:e.mood,intensity:"catchy",onClick:async()=>{if(t&&e.featuresToDisable&&!n?.())try{await t(e.featuresToDisable)}catch(e){a(e)}},children:e.actions?.primary.label},e.actions?.primary.label):null]})},Wp=({textWithButton:e})=>(0,C.BX)("div",{sx:{display:"flex",alignItems:"flex-start",flexDirection:"row",marginBottom:"32px",marginTop:"7px"},children:[(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",sx:Lp.SETTINGS_LABEL_MARGIN_TOP,children:e.label.split("//").map(((e,t)=>t%2?(0,C.tZ)("span",{sx:{color:"ds.text.oddity.disabled",fontWeight:"300"},children:e},e):e))}),e.helperLabel?(0,C.tZ)("div",{id:"helper-label-panel",sx:Lp.HELPER_LABEL_PANEL,children:e.helperLabel}):null]}),(0,C.tZ)("div",{children:(0,C.tZ)(xp.Z,{label:e.buttonLabel,onClick:e?.onClick})})]},e.label),Yp=({settingRow:e,...t})=>{switch(e.type){case"header":return(0,C.tZ)(Np,{header:e});case"textwithbutton":return(0,C.tZ)(Wp,{textWithButton:e});case"quickDisable":return(0,C.tZ)(Hp,{settingRow:e});default:return(0,C.tZ)(Fp,{field:e,...t})}},Kp=({className:e})=>{const{translate:t}=(0,y.Z)(),n=(0,me.o)("monetization_extension_policies_revert_notice"),a=(0,$.u)(Oe.t),i=(0,d.k)(Oe.t,"HasSeenStarterRepackagePolicyInfobox");return!n||i.status!==Te.rq.Success||i.data?null:(0,C.tZ)(o.ke,{title:t("team_settings_starter_repackage_policy_change_title"),description:t("team_settings_starter_repackage_policy_change_description"),size:"large",actions:[(0,C.tZ)(o.zx,{onClick:()=>{a.markStarterRepackagePolicyInfoboxSeen()},children:t("team_settings_starter_repackage_policy_change_cta")},"dismiss")],sx:{whiteSpace:"break-spaces"},className:e})},Qp=({className:e})=>{const{translate:t}=(0,y.Z)(),n=(0,j.B)(),a=`${ie.ub}?plan=business&subCode=${n?.subscriptionCode}`;return(0,C.tZ)(o.ke,{className:e,title:t("team_settings_in_trial_paywall_repackage_policies_title"),size:"large",actions:[(0,C.tZ)(o.zx,{onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.UpgradeBusinessTier,clickOrigin:c.ClickOrigin.BannerTacSettingsPoliciesPaywall}))},as:"a",href:a,rel:"noreferrer",target:"_blank",children:t("team_settings_in_trial_paywall_repackage_policies_cta")},"cta")]})},Jp={CONTAINER:{display:"flex",flexDirection:"column",gap:"24px",padding:"24px",backgroundColor:"ds.container.agnostic.neutral.supershy",border:"1px solid ds.border.neutral.quiet.idle",borderRadius:"8px"},HEADER:{display:"flex",flexDirection:"column",gap:"8px"},FEATURES_LIST:{display:"grid",gap:"16px",gridTemplateColumns:"1fr 1fr"}},eg=()=>{const{translate:e}=(0,y.Z)(),{routes:t}=(0,i.Xo)(),n=`${t.teamAccountChangePlanRoutePath}?plan=business`;return(0,C.BX)("div",{sx:Jp.CONTAINER,children:[(0,C.BX)("div",{sx:Jp.HEADER,children:[(0,C.tZ)(o.X6,{as:"h5",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("team_settings_starter_repackage_upgrade_tile_title")}),(0,C.BX)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:[e("team_settings_starter_repackage_upgrade_tile_subtitle")," "]})]}),(0,C.BX)("div",{sx:Jp.FEATURES_LIST,children:[(0,C.tZ)(ja,{iconName:"SettingsOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_advanced_policies")}),(0,C.tZ)(ja,{iconName:"GroupOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_unlimited_seats")}),(0,C.tZ)(ja,{iconName:"ToolsOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_sso")}),(0,C.tZ)(ja,{iconName:"SharedOutlined",children:e("team_settings_starter_repackage_upgrade_tile_feature_scim")})]}),(0,C.tZ)(o.zx,{fullsize:!0,mood:"brand",intensity:"catchy",layout:"iconLeading",icon:"PremiumOutlined",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.UpgradeBusinessTier,clickOrigin:c.ClickOrigin.FeatureLimitationsBlock}))},as:i.rU,to:n,children:e("team_settings_starter_repackage_upgrade_tile_cta")})]})};var tg,ng;const ag={CONTAINER:{display:"flex",flexDirection:"column",gap:"24px",marginBottom:"24px"}},ig=()=>{const{hasStarterPaywall:e,hasTrialBusinessPaywall:t}=Ee();return e?(0,C.BX)("div",{sx:ag.CONTAINER,children:[tg||(tg=(0,C.tZ)(Kp,{})),ng||(ng=(0,C.tZ)(eg,{}))]}):t?(0,C.tZ)(Qp,{sx:{marginBottom:"24px"}}):null},rg="team_settings_space_management_infobox_learn_more_button",sg="team_settings_too_many_requests",og="team_settings_enable_space_restrictions_save_error_msg_generic_error",lg="team_settings_available_in_business_plan",cg="team_settings_too_many_requests",dg=(e,t,n,a,r,s,o)=>{const l=[],d=s("sharingDisabled");return l.push({type:"header",label:e("team_setting_header_sharing")}),l.push(((e,t,n,a,i)=>({type:"switch",isReadOnly:t||a,label:e("team_settings_allow_sharing"),helperLabel:e("team_settings_allow_sharing_helper"),value:n.allowSharing,feature:"allowSharing",badgeIconName:a||i?"PremiumOutlined":void 0,badgeLabel:a||i?e(lg):void 0,getErrorMessageForKey:t=>e("too_many_requests"===t?cg:"team_settings_allow_sharing_save_error_msg_generic_error"),constraintsFromOtherFields:{requiredFor:[{feature:"restrictSharingToTeam",reset:e=>e.restrictSharingToTeam=!1}]}}))(e,r,n,d,o)),l.push(((e,t,n,a,r)=>{const{accountSubscriptionCode:s,shouldShowBuyPaywall:o,shouldShowUpgradePaywall:l}=a,d=`${ie.ub}?plan=business&subCode=${s}&utm_source=button:buy_dashlane+click_origin:restrict_sharing_to_team_activation_setting+origin_page:tac/settings/policies+origin_component:main_app`,u=()=>(0,h.Kz)(new c.UserClickEvent({button:c.Button.SeeB2bPlanTiers,clickOrigin:c.ClickOrigin.TacSettingsPolicies}));let _,m;return o?(_=()=>{u(),(0,q.Yo)(d)},m=e("team_settings_buy_dashlane_cta")):l&&(_=()=>{u(),(0,i.uX)(`${t.teamAccountChangePlanRoutePath}`)},m=e("team_settings_see_plans_cta")),{type:o||l?"cta":"switch",badgeIconName:o||l?"PremiumOutlined":void 0,badgeLabel:o||l?e(lg):void 0,ctaAction:_,ctaLabel:m,isReadOnly:r,label:e("team_settings_restrict_sharing_to_team_title"),helperLabel:e("team_settings_restrict_sharing_to_team_description"),value:n.restrictSharingToTeam,feature:"restrictSharingToTeam",getErrorMessageForKey:t=>e("too_many_requests"===t?cg:"team_settings_restrict_sharing_to_team_generic_error"),constraintsFromOtherFields:{disabledWhen:[{feature:"allowSharing",condition:e=>!e.allowSharing,warningMessage:e("team_settings_restrict_sharing_to_team_enable_sharing_first")}]}}})(e,t,n,a,r)),l};var ug=n(164718);const _g="team_settings_available_in_business_plan",mg="team_settings_too_many_requests",pg="team_settings_lock_on_exit_save_error_msg_generic_error",gg=(e,t,n,a,r,s,o,l)=>{const d=[],u=o("forceAutomaticLogout"),_=o("lockOnExit"),m=o("collectSensitiveDataAuditLogsEnabled"),g=o("secureWifiEnabled");return d.push({type:"header",label:e("team_settings_header_security")}),d.push(((e,t,n)=>({type:"select",label:e("team_settings_force_crypto_payload_label"),isReadOnly:n,helperLabel:e("team_settings_force_crypto_payload_helper"),value:t.cryptoForcedPayload,feature:"cryptoForcedPayload",options:[{label:e("team_settings_force_crypto_payload_option_disabled"),value:""},{label:e("team_settings_force_crypto_payload_option_argon2"),value:"$1$argon2d$16$3$32768$2$aes256$cbchmac$16$"},{label:e("team_settings_force_crypto_payload_option_pbkdf2_advanced"),value:"$1$pbkdf2$16$200000$sha256$aes256$cbchmac$16$"},{label:e("team_settings_force_crypto_payload_option_pbkdf2_standard"),value:"KWC3",disabled:!0}],getErrorMessageForKey:t=>e("too_many_requests"===t?mg:"team_settings_force_crypto_payload_save_error_msg_generic_error")}))(e,t,r)),d.push(((e,t,n)=>({type:"switch",isReadOnly:n,label:e("team_settings_enforce_2fa"),helperLabel:e("team_settings_enforce_2fa_helper"),infoBox:{title:e("team_settings_generate_recovery_codes_infobox_title"),description:e.markup("team_settings_generate_recovery_codes_infobox_description_markup")},value:t.enforce2FA,feature:"enforce2FA",confirmEnable:{title:e("team_settings_enforce_2fa_confirm_enable_title"),label:e("team_settings_enforce_2fa_confirm_enable_helper2"),dismiss:e("team_settings_enforce_2fa_confirm_enable_dismiss"),confirm:e("team_settings_enforce_2fa_confirm_enable_confirm")},getErrorMessageForKey:t=>e("too_many_requests"===t?mg:"team_settings_enforce_2fa_save_error_msg_generic_error")}))(e,t,r)),s||d.push(((e,t,n)=>({type:"switch",label:e("team_settings_allow_export"),helperLabel:e("team_settings_allow_export_helper"),infoBox:n?{title:e("team_settings_allow_export_infobox_title"),description:e("team_settings_allow_export_infobox_subtitle"),mood:"brand"}:void 0,value:t.vaultExportEnabled,feature:"vaultExportEnabled",getErrorMessageForKey:t=>e("too_many_requests"===t?mg:"_common_generic_error")}))(e,t,r)),d.push(((e,t,n,a,i)=>({type:"select",isReadOnly:n||a,label:e("team_settings_force_auto_logout_after"),helperLabel:e("team_settings_force_auto_logout_after_helper"),badgeIconName:a||i?"PremiumOutlined":void 0,badgeLabel:a||i?e(_g):void 0,value:t.forceAutomaticLogout,feature:"forceAutomaticLogout",options:["unset","15","30","60"].map((t=>({label:e("team_settings_force_auto_logout_after_"+t),value:t}))),getErrorMessageForKey:t=>e("too_many_requests"===t?mg:"team_settings_force_auto_logout_after_save_error_msg_generic_error")}))(e,t,r,u,l)),d.push(((e,t,n,a,i)=>({type:"switch",isReadOnly:n||a,label:e("team_settings_lock_on_exit"),helperLabel:e("team_settings_lock_on_exit_helper"),value:t.lockOnExit,feature:"lockOnExit",badgeIconName:a||i?"PremiumOutlined":void 0,badgeLabel:a||i?e(_g):void 0,getErrorMessageForKey:t=>e("too_many_requests"===t?mg:pg)}))(e,t,r,_,l)),d.push(((e,t,n,a,i,r)=>({type:"switch",isReadOnly:n||i,label:e("team_settings_collect_sensitive_data_audit_logs_enabled"),helperLabel:e(a?"team_settings_collect_sensitive_data_audit_logs_enabled_helper":"team_settings_collect_sensitive_data_audit_logs_enabled_helper_without_space"),badgeIconName:i||r?"PremiumOutlined":void 0,badgeLabel:i||r?e(_g):void 0,value:t.collectSensitiveDataAuditLogsEnabled,feature:"collectSensitiveDataAuditLogsEnabled",getErrorMessageForKey:t=>e("too_many_requests"===t?mg:pg)}))(e,t,r,s,m,l)),d.push(((e,t,n,a,r,s)=>{const{shouldShowBuyOrUpgradePaywall:o,isTrialOrGracePeriod:l,accountSubscriptionCode:d,planType:u}=e,_=!r&&o&&l,m=!r&&o&&"starter"===u,g=`${ie.ub}?plan=${u===p.lD.Team?"team":"business"}&subCode=${d}&utm_source=button:buy_dashlane+click_origin:vpn_feature_activation_setting+origin_page:tac/settings/policies+origin_component:main_app`;let b,y,x;return _?(b=t("team_settings_available_in_paid_subscription_badge"),y=()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.BuyDashlane,clickOrigin:c.ClickOrigin.VpnFeatureActivationSetting})),(0,q.Yo)(g)},x=t("team_settings_buy_dashlane_cta")):m?(b=t("team_settings_upgrade_badge"),y=()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.SeePlan,clickOrigin:c.ClickOrigin.VpnFeatureActivationSetting})),(0,i.uX)(`${a.teamAccountChangePlanRoutePath}`)},x=t("team_settings_see_plans_cta")):(r||s)&&(b=t("team_settings_available_in_business_plan")),{type:m||_?"cta":"switch",badgeIconName:m||_||r||s?"PremiumOutlined":void 0,badgeLabel:b,ctaAction:y,ctaLabel:x,isReadOnly:r,label:t("team_settings_vpn"),helperLabel:t("team_settings_vpn_helper"),value:n.enableVPN,feature:"enableVPN",getErrorMessageForKey:e=>{switch(e){case"too_many_requests":return t("team_settings_too_many_requests");case"not_authorized":return t("team_settings_vpn_disabled_for_free_trial");default:return t("team_settings_vpn_save_error_msg_generic_error")}}}})(a,e,t,n,g,l)),d.push(((e,t)=>({type:"switch",label:e("team_settings_rich_icons"),helperLabel:e("team_settings_rich_icons_helper"),value:t.richIconsEnabled,feature:"richIconsEnabled",getErrorMessageForKey:t=>e("too_many_requests"===t?"team_settings_too_many_requests":"team_settings_server_error")}))(e,t)),d},hg=(e,t,n,a,i,r,s,o,l)=>{const c=[],d=r.enablePersonalSpace;return d&&c.push(...((e,t,n)=>{const a=[],i=n&&(t.enableForcedDomains||t.enableRemoveForcedContent),r=n&&!t.enableForcedDomains&&!t.enableRemoveForcedContent;return a.push({type:"header",label:e("team_settings_header_team_space_options")}),i&&a.push((e=>({type:"quickDisable",label:e("team_settings_space_management_click_to_disable_infobox_title"),description:e("team_settings_space_management_click_to_disable_infobox_subtitle"),mood:"brand",featuresToDisable:{enableForcedDomains:!1,enableRemoveForcedContent:!1},actions:{primary:{label:e("team_settings_space_management_infobox_disable_button")},secondary:{label:e(rg),onClick:()=>(0,q.Yo)(ie.Rf)}}}))(e)),r&&a.push((e=>({type:"quickDisable",label:e("team_settings_space_management_disabled_infobox_title"),description:e("team_settings_space_management_disabled_infobox_subtitle"),icon:"FeedbackSuccessOutlined",mood:"positive",actions:{secondary:{label:e(rg),onClick:()=>(0,q.Yo)(ie.Rf)}}}))(e)),a.push(((e,t,n)=>({type:"text",multiLine:!0,isReadOnly:n,label:e("team_settings_team_domain"),helperLabel:e("team_settings_team_domain_helper"),hintText:e("team_settings_team_domain_placeholder"),feature:"teamDomain",value:t.teamDomain,serializer:e=>e?e.split(";").map((e=>e.trim().toLowerCase())).filter((e=>Boolean(e.length))):[],deserializer:e=>e?.length?e.join(";"):"",validator:e=>e.some((e=>!$c().isFQDN(e)))?"wrong_url":e.some((e=>e.length>255))?"wrong_size":null,getErrorMessageForKey:t=>{switch(t){case"wrong_size":return e("team_settings_team_domain_save_error_msg_wrong_size",{lengthLimit:255});case"wrong_url":return e("team_settings_team_domain_save_error_msg_wrong_url");case"too_many_requests":return e(sg);default:return e("team_settings_team_domain_save_error_msg_generic_error")}}}))(e,t,r)),a.push(((e,t,n)=>({type:"switch",isReadOnly:n,label:e("team_settings_enable_space_restrictions"),helperLabel:e("team_settings_enable_space_restrictions_helper"),value:t.enableForcedDomains,feature:"enableForcedDomains",getErrorMessageForKey:t=>e("too_many_requests"===t?sg:og),constraintsFromOtherFields:{disabledWhen:[{feature:"teamDomain",condition:e=>!e.teamDomain?.length,warningMessage:e("team_settings_enable_space_restrictions_define_team_domain_first")}],requiredFor:[{feature:"enableRemoveForcedContent",reset:e=>e.enableRemoveForcedContent=!1}]}}))(e,t,r)),a.push(((e,t,n)=>({type:"switch",label:e("team_settings_remove_forced_content"),isReadOnly:n,helperLabel:e("team_settings_remove_forced_content_helper"),value:t.enableRemoveForcedContent,feature:"enableRemoveForcedContent",getErrorMessageForKey:t=>e("too_many_requests"===t?sg:og),constraintsFromOtherFields:{disabledWhen:[{feature:"teamDomain",condition:e=>!e.teamDomain?.length,warningMessage:e("team_settings_remove_forced_content_define_team_domain_first")},{feature:"enableForcedDomains",condition:e=>!e.enableForcedDomains,warningMessage:e("team_settings_remove_forced_content_enable_forced_domains_first")}]}}))(e,t,r)),a})(e,r,i)),c.push(...gg(e,r,s,t,a,d,o,l)),c.push(...dg(e,s,r,n,a,o,l)),c.push(...((e,t,n,a,i)=>{const r=[],s=a("autologinDomainDisabledArray");return r.push({type:"header",label:e("team_settings_header_browser_settings")}),r.push({type:"text",isReadOnly:n||s,multiLine:!0,label:e("team_settings_disable_auto_login_domains"),helperLabel:e("team_settings_disable_auto_login_domains_helper"),hintText:e("team_settings_disable_auto_login_domains_placeholder"),value:t.disableAutoLoginDomains,badgeIconName:s||i?"PremiumOutlined":void 0,badgeLabel:s||i?e("team_settings_available_in_business_plan"):void 0,serializer:e=>(e.length?e.split(";"):[]).filter((e=>!!e.length)).map((e=>e.trim())),deserializer:e=>e?.length?e.join(";"):"",validator:e=>e.some((e=>!new ug.Y(e).isUrlValid()))?"wrong_url":e.some((e=>e.length>255))?"wrong_size":null,feature:"disableAutoLoginDomains",getErrorMessageForKey:t=>{switch(t){case"wrong_size":return e("team_settings_disable_auto_login_domains_save_error_msg_wrong_size",{lengthLimit:255});case"wrong_url":return e("team_settings_disable_auto_login_domains_save_error_msg_wrong_url");case"too_many_requests":return e("team_settings_too_many_requests");default:return e("team_settings_disable_auto_login_domains_save_error_msg_generic_error")}}}),r})(e,r,a,o,l)),c};var bg,yg,xg;const vg=({lee:e})=>{const{routes:t}=(0,i.Xo)(),{translate:n}=(0,y.Z)(),a=ve(e.permission.adminAccess),s=function(e){var t;const n=(0,j.B)(),a=(0,se.C)();if(!a||!n)return null;const i=e.hasBillingAccess,r=a.isFreeTrial||a.isGracePeriod;return{shouldShowBuyPaywall:i&&r,shouldShowUpgradePaywall:i&&!r&&a.spaceTier!==p.lD.Business,accountSubscriptionCode:null!=(t=n?.subscriptionCode)?t:""}}(e.permission.adminAccess),o=(0,dm.U)(),l=(()=>{const e=(0,re.lZ)(),t=(0,me.o)(Qa.w.EcommerceWebB2BDiscontinuationDev);return e.isLoading||"boolean"!=typeof t?null:t&&!!e.isTeamSoftDiscontinued&&!!e.isTrial})(),{reportTACError:d}=K(),{data:u,status:m}=Tp(),g=(()=>{const{editTeamPolicies:e}=(0,$.u)(_.o);return e})(),{hasExcludedPolicy:b,hasTrialBusinessPaywall:x}=Ee();(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacSettingsPolicies)}),[]);const v=async t=>{const n=(0,Ti.v0)(e.globalState);if(0===Object.keys(t).length||!n?.teamId)return Promise.resolve();await g({teamId:n.teamId,policyUpdates:t})},S=()=>!(0,Ti.v0)(e.globalState)&&(d(new Error(Ci.N)),!0);return a&&s&&null!==o&&null!==l?(m===Te.rq.Error&&d(new Error("Error loading team policies")),(0,C.BX)(bp,{title:n("team_settings_menu_title_policies"),isLoading:m===Te.rq.Loading,leadingContent:yg||(yg=(0,C.tZ)(ig,{})),children:[xg||(xg=(0,C.tZ)(Vp,{},"inviteLinkPolicy")),m===Te.rq.Success?(f=u,hg(n,a,s,o,l,f,t,b,x)).map((e=>(0,C.tZ)(Yp,{checkForAuthenticationError:S,policies:u,editSettings:v,settingRow:e},e.label))):null]})):bg||(bg=(0,C.tZ)(Al.a,{}));var f};var Sg=n(364534);const fg=new Map([[p.lD.Business,c.B2bPlanTier.Business],[p.lD.Team,c.B2bPlanTier.Team],[p.lD.Legacy,c.B2bPlanTier.Legacy],[p.lD.Enterprise,c.B2bPlanTier.Business]]),Zg=({currentBillingPlanTier:e,emailDomainError:t,emailDomainSubmittedCount:n,emailDomainValidatedCount:a,encryptionServicePlatformSelected:i,idpValidationResponse:r,ssoSetupStep:s,ssoSolutionChosen:o,testSsoResponse:l})=>{(0,h.Kz)(new c.UserSetupSsoEvent({currentBillingPlanTier:e,emailDomainError:null!=t?t:c.EmailDomainError.OtherError,emailDomainSubmittedCount:null!=n?n:0,emailDomainValidatedCount:null!=a?a:0,encryptionServicePlatformSelected:null!=i?i:c.EncryptionServicePlatformSelected.AmazonWebServices,idpValidationResponse:null!=r?r:c.IdpValidationResponse.Success,ssoSetupStep:s,ssoSolutionChosen:o,testSsoResponse:null!=l?l:c.TestSsoResponse.NotTested}))},Cg=e=>e&&fg.get(e)||c.B2bPlanTier.Business,Tg=e=>{Zg({...e,currentBillingPlanTier:Cg(e.currentBillingPlanTier),ssoSolutionChosen:c.SsoSolutionChosen.SelfHostedSso})},Dg=e=>{Zg({...e,currentBillingPlanTier:Cg(e.currentBillingPlanTier),ssoSolutionChosen:c.SsoSolutionChosen.NitroSso})};var kg=n(533258),Eg=n(605961),wg=n.n(Eg),Ig=n(324047);const Ng=e=>{const{markdownValue:t="",linkParams:n={},linkProps:a}=e,{linkTarget:i,onLinkClicked:r=(()=>{})}=n,s=t.includes("\n");return(0,C.tZ)(wg(),{source:t,allowedTypes:["Text","Link","Emph","Strong","Paragraph","Softbreak","List","Item","Code"],containerTagName:"span",softBreak:"br",renderers:{Paragraph:s?"p":"span",Link:function(e){return(0,C.tZ)(Ig.Z,{...a,"aria-label":t,href:e.href,target:i,onClick:()=>{r(e.href)},children:e.children})}}})},Ag=({onClose:e,onConfirm:t,titleText:n,bodyText:a})=>{const{translate:i}=(0,y.Z)(),[s,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),_=i("_common_action_cancel");return(0,C.BX)(l.VqE,{isOpen:!0,disableOutsideClickClose:!0,disableScrolling:!0,closeIconName:_,onClose:e,children:[(0,C.tZ)(l.$N8,{title:n}),(0,C.tZ)(l.a7O,{children:(0,C.tZ)(l.nvN,{color:d?"ds.text.danger.standard":"ds.text.neutral.standard",children:null!=d?d:a})}),(0,C.BX)(l.cNS,{children:[(0,C.tZ)(o.zx,{sx:{mr:"12px"},mood:"neutral",intensity:"quiet",onClick:()=>{e()},disabled:s,children:_}),(0,C.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:async()=>{c(!0),u(null);try{await t(),c(!1),e()}catch(e){u(e instanceof Error?e.message:i("_common_generic_error")),c(!1)}},isLoading:s,disabled:s,children:"Yes, clear setup"})]})]})};let Mg=function(e){return e.ChooseSso="ChooseSso",e.SelfHosted="SelfHosted",e.Nitro="Nitro",e}({});const Og=({pageContext:e,onSetupClear:t})=>{const{routes:n}=(0,i.Xo)(),a=(0,j.B)(),{translate:s}=(0,y.Z)(),[l,u]=(0,r.useState)(!1),{teamId:_}=(0,Ce.fV)(),{clearSettings:m,initSsoProvisioning:p}=(0,$.u)(Sg.y),{status:g,data:b}=(0,d.k)(Sg.y,"ssoProvisioning");if(g!==Te.rq.Success||b.enableSSO.ssoEnabled)return null;const{global:{inferredSsoState:x,ssoCapable:v}}=b;if(!1===v)return(0,C.tZ)(o.ke,{mood:"neutral",size:"large",title:s("team_settings_es_sso_plan_error_header"),description:s("team_settings_es_sso_plan_missing_body"),actions:a?.premiumStatus?[(0,X.wt)(a.premiumStatus)?(0,C.tZ)(o.zx,{onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.BuyDashlane,clickOrigin:c.ClickOrigin.SsoPaywallBanner})),(0,q.Yo)(`${ie.ub}?plan=business&subCode=${a?.subscriptionCode}`)},role:"link",children:s("team_account_teamplan_plan_buy_dashlane")},"buy"):(0,C.tZ)(i.rU,{to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:(0,C.tZ)(o.zx,{children:s("team_settings_es_sso_plan_missing_button")})},"upgrade")]:[]});const S=[kg.s5.enum.NitroIncomplete,kg.s5.enum.SelfHostedIncomplete];if(e!==Mg.ChooseSso&&S.includes(x)){let n=null,a=async()=>{await(t?.()),Tg({ssoSetupStep:c.SsoSetupStep.ClearSsoSettings})};e===Mg.SelfHosted&&_&&x===kg.s5.enum.NitroIncomplete?(n={title:"To use self-hosted SSO, clear Confidential SSO setup",description:"If you want to use self-hosted SSO, which supports SCIM provisioning, select **Clear setup** to erase your progress in Dashlane. Make sure to also delete your progress in your IdP.",cta:"Clear setup"},a=async()=>{await m({teamId:_}),await p({teamId:`${_}`}),await(t?.())}):e===Mg.Nitro&&x===kg.s5.enum.SelfHostedIncomplete&&(n={title:"To use Confidential SSO, clear self-hosted SSO setup",description:"If you want to use Confidential SSO, select **Clear setup** to erase your progress in Dashlane. Make sure to also delete your progress in your IdP.",cta:"Clear setup"},a=async()=>{await fe.C.clearSelfHostedESSettings(),await p({teamId:`${_}`}),await(t?.())});const i=[kg.s5.enum.NitroComplete,kg.s5.enum.SelfHostedComplete];if(n&&!i.includes(x))return(0,C.BX)(C.HY,{children:[l?(0,C.tZ)(Ag,{onClose:()=>u(!1),onConfirm:a,titleText:"Are you sure?",bodyText:"This action can’t be undone."}):null,(0,C.tZ)(o.ke,{mood:"neutral",size:"large",title:n.title,description:(0,C.tZ)(Ng,{markdownValue:n.description}),actions:[(0,C.tZ)(o.zx,{onClick:()=>u(!0),children:n.cta},"clear")]})]})}return(0,C.tZ)(o.ke,{mood:"warning",size:"large",title:"Switching between SSO options isn't available right now",description:"We're in the process of adding new capabilities to Confidential SSO. During this period, you can't switch between the two options. Before turning on your chosen SSO option, please make sure it meets your organization's needs."})};var Lg,Bg=n(165911);const Rg=[{li:"In a separate window, log in to your IdP account."},{li:"Find the section to create a new SSO application.",ol:[{li:"Add the ID and URLs provided here to your application."},{li:"Add members who will log in to Dashlane with SSO to your application."}]}],zg=({content:e})=>(0,C.tZ)("ol",{sx:{color:"ds.text.neutral.quiet"},children:e.map((({li:e,ol:t},n)=>(0,C.BX)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",children:[(0,C.tZ)(Ng,{markdownValue:e}),t?(0,C.tZ)(zg,{content:t}):null]},n)))}),Pg=()=>{var e,t,n;const{translate:a}=(0,y.Z)(),i=(0,d.k)(Sg.y,"ssoProvisioning"),r=i.status===Te.rq.Loading,s={entityId:null!=(e=i.data?.idpApplication.entityId)?e:"",acsUrl:null!=(t=i.data?.idpApplication.acsUrl)?t:"",signOnUrl:null!=(n=i.data?.idpApplication.signOnUrl)?n:""};return(0,C.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"24px",marginBottom:"32px"},children:[(0,C.BX)("div",{sx:{ol:{listStyleType:"decimal",ml:"20px",ol:{listStyleType:"lower-alpha"}}},children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{mb:"8px"},children:a("sso_confidential_idp_setup_page_title")}),Lg||(Lg=(0,C.tZ)(zg,{content:Rg}))]}),(0,C.tZ)(o.ke,{mood:"brand",size:"small",title:a("sso_confidential_idp_setup_infobox_message")}),(0,C.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"24px"},children:[(0,C.tZ)(Bg.x,{isLoading:r,value:s.entityId,label:a("sso_confidential_idp_setup_entity_id_label"),readOnly:!0}),(0,C.tZ)(Bg.x,{isLoading:r,value:s.acsUrl,label:a("sso_confidential_idp_setup_acs_url_label"),readOnly:!0}),(0,C.tZ)(Bg.x,{isLoading:r,value:s.signOnUrl,label:a("sso_confidential_idp_setup_sign_on_url_label"),readOnly:!0})]})]})},Xg="sso_confidential_metadata_form_field_placeholder",jg="sso_confidential_metadata_form_error_could_not_find_entrypoint",Ug="sso_confidential_metadata_form_error_cound_not_validate_certificate",qg="sso_confidential_metadata_form_error_server_error",Gg={XML_PARSE_FAILED:"sso_confidential_metadata_form_error_could_not_read_metadata",KEY_DESCRIPTOR_NOT_FOUND:jg,IDP_ENTRYPOINT_NOT_FOUND:jg,INVALID_IDP_SSO_DESCRIPTOR:jg,MISSING_CERTIFICATE:"sso_confidential_metadata_form_error_no_certificate",MULTIPLE_CERTIFICATES:"sso_confidential_metadata_form_error_multiple_certificates",INVALID_ENTRYPOINT:"sso_confidential_metadata_form_error_invalid_entrypoint",CERTIFICATE_TOO_SHORT:Ug,CERTIFICATE_TOO_LONG:Ug,CERTIFICATE_DECODE_FAILED:Ug},Fg={INVALID_METADATA_CONTENT:"sso_confidential_metadata_form_error_invalid_metadata_content",INVALID_METADATA_URL:"sso_confidential_metadata_form_error_invalid_metadata_url",DOMAIN_UPDATE_FAILED:qg,SAVE_METADATA_FAILED:qg,INTERNAL_ERROR:"sso_confidential_metadata_form_error_internal_error"},$g="Unexpected server error. Please try again or contact Customer Support.",Vg="ssoIdpMetadata",Hg=()=>{var e;const[t,n]=(0,r.useState)(!1),{translate:a}=(0,y.Z)(),i=(0,d.k)(Sg.y,"ssoProvisioning"),{createTeam:s,validateMetadata:l,updateMetadata:u}=(0,$.u)(Sg.y),_=i.status===Te.rq.Loading,m=null!=(e=i.data?.idpMetadata.metadataValue)?e:"",p={ssoIdpMetadata:m},g=i.data?.global.inferredSsoState,h=[kg.s5.enum.SelfHostedIncomplete,kg.s5.enum.SelfHostedComplete].includes(g),b=(0,r.useCallback)((async(e,t)=>{try{n(!0);const r=i.data?.global.isTeamProvisionedInNitro;r||(await s(),Dg({ssoSetupStep:c.SsoSetupStep.CreateSsoApplication})),Dg({ssoSetupStep:c.SsoSetupStep.UpdateIdpSettings});const o=await u({metadata:""===e.ssoIdpMetadata?null:e.ssoIdpMetadata});if(n(!1),(0,V.hx)(o)){const e=o.error.tag.toUpperCase();return t.setFieldError(Vg,a(e in Fg?Fg[e]:$g))}}catch(e){return t.setFieldError(Vg,$g)}}),[s,i.data?.global.isTeamProvisionedInNitro,a,u]),x=async e=>{var t;if(e&&!new ug.Y(e).isUrlValid())try{const n=await l({metadata:e});if(Dg({ssoSetupStep:c.SsoSetupStep.ValidateIdpMetadata,idpValidationResponse:(t=n,(0,V.hx)(t)?Object.values(c.IdpValidationResponse).includes(t.error.tag)?t.error.tag:c.IdpValidationResponse.XmlParseFailed:c.IdpValidationResponse.Success)}),(0,V.hx)(n)){const e=n.error.tag.toUpperCase();return a(e in Gg?Gg[e]:Gg.XML_PARSE_FAILED)}}catch(e){return e instanceof Error?e.message:"Unknown error"}};return(0,C.tZ)(ca.J9,{initialValues:p,onSubmit:b,enableReinitialize:!0,children:({isSubmitting:e,isValid:n,isValidating:i,dirty:r})=>{const s=h||e||_,l=s||!n||i||!r;return(0,C.tZ)(ca.l0,{noValidate:!0,children:(0,C.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"8px"},children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:a("sso_confidential_metadata_form_section_heading")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{marginBottom:"24px"},children:a("sso_confidential_metadata_form_paragraph")}),(0,C.tZ)(ca.gN,{name:Vg,validateOnChange:!0,validate:x,children:({field:t,meta:{error:n}})=>(0,C.tZ)(o.Kx,{required:!0,id:t.name,label:a("sso_confidential_metadata_form_field_label"),placeholder:a(Xg),"aria-label":a(Xg),autoCorrect:"off",autoComplete:"off",spellCheck:"false",disabled:s,feedback:!n||e||i?void 0:{text:n},error:!(!n||e||i),...t})}),(0,C.tZ)(o.zx,{type:"submit",sx:{mt:"12px",justifySelf:"end"},mood:m?"neutral":"brand",intensity:m?"quiet":"catchy",disabled:l,isLoading:t,children:a("sso_confidential_metadata_form_button_submit")})]})})}})},Wg="sso_confidential_enable_nitro_sso_confirm_dialog_cancel",Yg=({title:e,body:t,primaryActionLabel:n,onConfirm:a,onCancel:i})=>{const{translate:s}=(0,y.Z)(),[l,c]=(0,r.useState)(!1);return(0,C.tZ)(o.Vq,{closeActionLabel:s(Wg),title:e,isOpen:!0,onClose:i,actions:{primary:{children:n,onClick:async()=>{try{c(!0),await a()}catch{c(!1)}},disabled:l,isLoading:l},secondary:{children:s(Wg),onClick:i,disabled:l}},children:t})},Kg=()=>{const{translate:e}=(0,y.Z)(),{showAlert:t}=(0,da.V)(),[n,a]=(0,r.useState)(!1),i=(0,d.k)(Sg.y,"ssoProvisioning"),{enableSso:s}=(0,$.u)(Sg.y),u=i.data?.domainSetup[0]?.domainName,_=u?i.data?.domainVerificationInfo[u]:null,m=_?.verificationStatus!==kg.X5.enum.valid,p=i.data?.enableSSO.ssoEnabled,g=Boolean(m||p);return(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{sx:{display:"grid",gap:"8px"},children:[(0,C.tZ)(o.nv,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",children:e("sso_confidential_enable_nitro_sso_section_heading")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",sx:{mb:"4px",gridRow:"2",gridColumn:"1/1"},children:e("sso_confidential_enable_nitro_sso_description")}),(0,C.tZ)("div",{sx:{justifySelf:"end"},children:(0,C.tZ)(o.zx,{id:"enableSso",onClick:()=>{a(!0),Dg({ssoSetupStep:c.SsoSetupStep.TurnOnSso})},disabled:g,children:e("sso_confidential_enable_nitro_sso_button_label")})})]}),n?(0,C.tZ)(Yg,{title:e("sso_confidential_enable_nitro_sso_confirm_dialog_title"),body:e("sso_confidential_enable_nitro_sso_confirm_dialog_body"),primaryActionLabel:e("sso_confidential_enable_nitro_sso_confirm_dialog_primary_action_label"),onConfirm:async()=>{await(async()=>{const n=await s();(0,V.d6)(n)?t(e("sso_confidential_enable_nitro_sso_success_feedback"),l.BLW.SUCCESS):t(n.error.tag,l.BLW.ERROR)})(),Dg({ssoSetupStep:c.SsoSetupStep.CompleteSsoSetup}),a(!1)},onCancel:()=>{a(!1)}}):null]})};var Qg=n(873670);const Jg=()=>{var e;const{translate:t}=(0,y.Z)(),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1),[u,_]=(0,r.useState)(!1),{testLoginUserWithEnclaveSSO:m}=(0,$.u)(Sg.y),p=(0,d.k)(Sg.y,"ssoProvisioning"),g=null!=(e=p.data?.domainSetup[0]?.domainName)?e:"",h=p.data?.domainVerificationInfo[g]?.verificationStatus!==kg.X5.enum?.valid||!1;return(0,C.BX)("div",{sx:{display:"grid",gridTemplateColumns:"auto",gridAutoRows:"auto",gap:"8px"},children:[(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.standard",sx:{mb:"8px"},children:t("sso_confidential_test_nitro_sso_section_heading")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t("sso_confidential_test_nitro_sso_description")})]}),(0,C.tZ)("div",{sx:{justifySelf:"end",gridColumn:"2"},children:(0,C.tZ)(Qg.M,{disabled:h,onClick:async()=>{a(!0);try{const e=await m({domainName:g}),t=(0,V.d6)(e);Dg({ssoSetupStep:c.SsoSetupStep.TestSsoConnection,testSsoResponse:t?c.TestSsoResponse.Success:c.TestSsoResponse.Failure}),s(t),_(!t)}finally{a(!1)}},loading:n,content:t("sso_confidential_test_nitro_sso_no_extension_feedback"),neverShowTooltip:!0,children:t("sso_confidential_test_nitro_sso_button_label")})}),i?(0,C.tZ)("div",{sx:{gridColumn:"1/span 2"},children:(0,C.tZ)(l.bZj,{showIcon:!0,size:l.k3y.SMALL,severity:l.BLW.SUCCESS,onClose:()=>{s(!1)},closeIconName:"Close",children:t("sso_confidential_test_nitro_sso_success_feedback")})}):null,u?(0,C.tZ)("div",{sx:{gridColumn:"1/span 2"},children:(0,C.tZ)(l.bZj,{showIcon:!0,size:l.k3y.SMALL,severity:l.BLW.ERROR,onClose:()=>{_(!1)},closeIconName:"Close",children:t("sso_confidential_test_nitro_sso_error_feedback")})}):null]})},eh=({domainName:e,showModal:t,onClose:n})=>{var a,i;const{translate:s}=(0,y.Z)(),l=(0,d.k)(Sg.y,"ssoProvisioning"),{checkDNSValidation:c}=(0,$.u)(Sg.y),[u,_]=(0,r.useState)(!1);if(l.status!==Te.rq.Success)return null;const m=e?l.data.domainVerificationInfo[e]:void 0;if(!m)return null;let p=s("sso_confidential_verify_domain_modal_verify_domain_button");return"valid"===m.verificationStatus?p=s("sso_confidential_verify_domain_modal_verify_domain_button_close"):("pending"===m.verificationStatus&&m.pendingReason||"invalid"===m.verificationStatus)&&(p=s("sso_confidential_verify_domain_modal_verify_domain_button_retry")),(0,C.BX)(o.Vq,{closeActionLabel:s("_common_dialog_dismiss_button"),title:s("sso_confidential_verify_domain_modal_title",{domainName:e}),isOpen:t,onClose:n,actions:{primary:{children:p,onClick:"valid"===m.verificationStatus?n:async()=>{_(!0);try{await c({domainName:e})}finally{_(!1),n()}},isLoading:u}},children:[(0,C.BX)("ol",{sx:{listStyleType:"decimal",ml:"20px"},children:[(0,C.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:s("sso_confidential_verify_domain_modal_instruction_1")}),(0,C.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:s("sso_confidential_verify_domain_modal_instruction_2")}),(0,C.tZ)(o.nv,{as:"li",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:s.markup("sso_confidential_verify_domain_modal_instruction_3_markup")})]}),(0,C.tZ)(o.ke,{title:s("sso_confidential_verify_domain_modal_infobox_title"),mood:"brand"}),(0,C.tZ)(Bg.x,{label:s("sso_confidential_verify_domain_modal_subdomain_label"),value:null!=(a=m.subdomainValue)?a:"",readOnly:!0}),(0,C.tZ)(Bg.x,{label:s("sso_confidential_verify_domain_modal_txt_label"),value:null!=(i=m.txtValue)?i:"",readOnly:!0}),m.verificationStatus===kg.X5.enum.pending&&m.pendingReason===kg.Q8.enum.invalidToken?(0,C.tZ)(o.ke,{title:s("sso_confidential_verify_domain_modal_error_infobox_title_invalid_token"),description:m.tokenFound,mood:"danger",size:"medium"}):null,m.verificationStatus===kg.X5.enum.pending&&m.pendingReason===kg.Q8.enum.tokenNotFound?(0,C.tZ)(o.ke,{title:s("sso_confidential_verify_domain_modal_error_infobox_title_token_not_found"),description:s("sso_confidential_verify_domain_modal_error_infobox_description_token_not_found"),mood:"danger",size:"medium"}):null,m.verificationStatus===kg.X5.enum.invalid?(0,C.tZ)(o.ke,{title:s("sso_confidential_verify_domain_modal_error_infobox_title_generic_error"),mood:"danger",size:"medium"}):null]})};var th;const nh=()=>{const{translate:e}=(0,y.Z)(),[t,n]=(0,r.useState)(!1),{data:a,editTeamPolicies:i,status:s}=(()=>{const{data:e,status:t}=(0,d.k)(_.o,"getTeamId"),{data:n,status:a}=(0,d.k)(_.o,"getTeamPolicies"),{editTeamPolicies:i}=(0,$.u)(_.o);return a===Te.rq.Error||t===Te.rq.Error?{status:Te.rq.Error}:a===Te.rq.Loading||t===Te.rq.Loading?{status:Te.rq.Loading}:{status:Te.rq.Success,data:{teamPolicies:n},editTeamPolicies:t=>i({teamId:Number(e.teamId),policyUpdates:t})}})(),l=(0,d.k)(Sg.y,"ssoProvisioning");return(0,r.useEffect)((()=>{if(l.status===Te.rq.Success){var e;const a=null!=(e=l.data?.global.inferredSsoState)?e:"";var t;["SelfHostedComplete","SelfHostedIncomplete"].includes(a)?fe.C.getTeamDomains().then((e=>{e.success&&n(e.domains.some((e=>"valid"===e.status)))})):n((null!=(t=l.data?.domainSetup)?t:[]).some((e=>e.verificationStatus===kg.X5.enum.valid)))}}),[l]),(0,C.BX)("div",{sx:{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"8px",padding:"24px",display:"flex",flexDirection:"column",gap:"16px"},children:[(0,C.BX)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:[e("jit_provisioning_cat_title")," "]})," ",(0,C.BX)("div",{sx:{display:"flex",flexDirection:"row",gap:"16px"},children:[(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px"},children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("jit_provisioning_title")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("jit_provisioning_description")})]}),(0,C.tZ)("div",{children:s===Te.rq.Loading?th||(th=(0,C.tZ)(o.ZX,{mood:"brand"})):(0,C.tZ)(o.ZD,{disabled:!t,onChange:e=>{e.preventDefault(),s===Te.rq.Success&&i?.({ssoProvisioning:e.target.checked})},defaultChecked:!!a?.teamPolicies.ssoProvisioning})})]})]})};var ah,ih,rh;const sh="sso_confidential_verify_domain_step_domain_input_label",oh="sso_confidential_verify_domain_step_domain_input_button_view_details",lh={valid:3,pending:2,expired:1,invalid:0},ch=({status:e,ssoActive:t})=>{const{translate:n}=(0,y.Z)();let a,i,r;switch(e){case kg.X5.enum.valid:a=n(t?"sso_confidential_verify_domain_step_sso_status_active":"sso_confidential_verify_domain_step_sso_status_verified"),r=t?"catchy":"quiet",i="positive";break;case kg.X5.enum.expired:case kg.X5.enum.invalid:a=n("sso_confidential_verify_domain_step_sso_status_error"),i="danger",r="quiet";break;case kg.X5.enum.pending:default:a=n("sso_confidential_verify_domain_step_sso_status_unverified"),r="quiet",i="neutral"}return(0,C.tZ)(o.Ct,{mood:i,intensity:r,label:a})},dh=({disabled:e,domainName:t,domainVerificationInfo:n,isDuplicate:a,onModalOpen:i,onDeleteDomain:s,onUpdateDomain:c,ssoActive:d,totalDomains:u})=>{var _;const{translate:m}=(0,y.Z)(),{provisionDomain:p,deleteDomain:g}=(0,$.u)(Sg.y),[h,b]=(0,r.useState)(!1),[x,v]=(0,r.useState)(0===t.length);return(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.dDn,{sx:{display:"flex",alignItems:"center"},children:(0,C.tZ)(ch,{status:n?.pendingReason||a?"invalid":null!=(_=n?.verificationStatus)?_:null,ssoActive:d&&!a})}),(0,C.tZ)(l.dDn,{children:(0,C.tZ)(o.qo,{label:m(sh),placeholder:m(sh),labelPersists:!1,autoCorrect:"off",autoComplete:"off",disabled:e,readOnly:n?.verificationStatus===kg.X5.enum.valid,onChange:({target:{value:e}})=>{v(0===e.length)},onBlur:e=>{c(e.currentTarget.value)},value:t,sx:{width:"400px"},error:n?.verificationStatus===kg.X5.enum.invalid||n?.verificationStatus===kg.X5.enum.pending&&!!n?.pendingReason||a,feedback:a?{text:m("sso_confidential_verify_domain_error_domain_already_provisioned")}:n?.verificationStatus===kg.X5.enum.valid&&d?{text:m("sso_confidential_verify_domain_step_domain_input_feedback_sso_active")}:n?.verificationStatus===kg.X5.enum.pending&&n?.pendingReason===kg.Q8.enum.invalidToken?{text:m("sso_confidential_verify_domain_step_domain_input_feedback_sso_error_invalid_token")}:n?.verificationStatus===kg.X5.enum.pending&&n?.pendingReason===kg.Q8.enum.tokenNotFound?{text:m("sso_confidential_verify_domain_step_domain_input_feedback_sso_error_token_not_found")}:n?.verificationStatus===kg.X5.enum.invalid?{text:m("sso_confidential_verify_domain_step_domain_input_feedback_sso_error_generic")}:void 0})}),n?.verificationStatus===kg.X5.enum.valid&&d&&!a?(0,C.tZ)(l.dDn,{justifySelf:"end",alignSelf:"center",gridColumnStart:"3",gridColumnEnd:"5",children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:i,disabled:e||a,children:m(oh)})}):n?.verificationStatus===kg.X5.enum.valid?(0,C.tZ)(l.dDn,{justifySelf:"end",alignSelf:"center",children:(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:i,disabled:e||a,children:m(oh)})}):(0,C.tZ)(l.dDn,{justifySelf:"end",alignSelf:"center",children:(0,C.tZ)(o.zx,{mood:"brand",intensity:"quiet",disabled:x||e||a,isLoading:h,onClick:async()=>{n||a||(b(!0),await p({domainName:t}),b(!1)),i()},sx:{position:"relative"},children:m("sso_confidential_verify_domain_step_domain_input_button_verify")})}),n?.verificationStatus===kg.X5.enum.valid&&d?null:(0,C.tZ)(l.dDn,{justifySelf:"end",alignSelf:"center",sx:{display:"flex",alignItems:"center"},children:(0,C.tZ)(o.zx,{disabled:1===u,mood:"danger",intensity:"supershy",layout:"iconOnly",icon:ah||(ah=(0,C.tZ)(o.JO,{name:"ActionDeleteOutlined"})),isLoading:h,onClick:async()=>{n&&!a&&(b(!0),await g({domainName:t}),b(!1)),s()},sx:{position:"relative"}})})]})},uh=()=>{var e,t,n;const{translate:a}=(0,y.Z)(),[i,s]=(0,r.useState)([]),[c,u]=(0,r.useState)(null),{spaceDetails:_}=(0,Ce.fV)(),m=(0,d.k)(Sg.y,"ssoProvisioning"),p=null!=(e=_?.associatedEmail.split("@")[1])?e:"",g=m.data?.domainVerificationInfo,h=(0,r.useCallback)(((e,t)=>{if(!g)return 0;const n=g[e],a=g[t];if(null===n?.verificationStatus&&null===a?.verificationStatus)return 0;const i=n?.verificationStatus?lh[n.verificationStatus]:-1,r=a?.verificationStatus?lh[a.verificationStatus]:-1;if(i>r)return-1;if(r>i)return 1;const s=e.toLowerCase().replace(/ /g,""),o=t.toLowerCase().replace(/ /g,"");return s===o?0:o<s?""!==o?1:-1:s<o?""!==s?-1:1:0}),[g]),b=null!=(t=m.data?.enableSSO.ssoEnabled)&&t,x=null!=(n=m.data?.global.isTeamProvisionedInNitro)&&n&&m.data?.idpMetadata.metadataValue;return(0,r.useEffect)((()=>{if(m.data?.domainVerificationInfo&&0===i.length){var e;const t=Object.keys(null!=(e=m.data?.domainVerificationInfo)?e:{}).sort(((e,t)=>h(e,t)));s(t.length>0?t.map((e=>e)):[p])}}),[i.length,p,m.data?.domainVerificationInfo,h]),m.status!==Te.rq.Success?null:(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px"},children:[(0,C.tZ)(o.X6,{as:"h3",color:"ds.text.neutral.standard",textStyle:"ds.title.section.medium",children:a("sso_confidential_verify_domain_step_title")}),(0,C.BX)(l.T5p,{gap:"16px 10px",gridTemplateColumns:"100px 1fr 126px 40px",sx:{"& > *::after":{content:'""',position:"absolute",borderBottom:"1px solid #8C8F90"}},children:[(0,C.tZ)(l.dDn,{sx:{"& > ::after":{content:'""',borderBottom:"1px solid #8C8F90"}},children:(0,C.tZ)(o.X6,{as:"h4",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:a("sso_confidential_verify_domain_step_table_header_status")})}),(0,C.tZ)(l.dDn,{gridColumnStart:2,gridColumnEnd:5,children:(0,C.tZ)(o.X6,{as:"h4",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:a("sso_confidential_verify_domain_step_table_header_domain")})}),(()=>{const e=new Set;return i.map(((t,n)=>{const a=g?(0,C.tZ)(dh,{disabled:!x,domainName:t,domainVerificationInfo:g[t],isDuplicate:e.has(t),onDeleteDomain:()=>(async e=>{i.splice(e,1),s([...i])})(n),onModalOpen:()=>(async e=>{const t=i[e];s([...i]),u(t)})(n),onUpdateDomain:e=>((e,t)=>{const n=i.map(((n,a)=>a===e?t:n));s(n)})(n,e),ssoActive:b,totalDomains:i.length},t+n):null;return e.add(t),a}))})(),(0,C.tZ)(l.dDn,{gridColumnStart:2,children:(0,C.tZ)(o.zx,{mood:"brand",intensity:"supershy",layout:"iconLeading",icon:ih||(ih=(0,C.tZ)(o.JO,{name:"ActionAddOutlined"})),size:"small",onClick:()=>{s([...i,""])},disabled:!x,children:a("sso_confidential_verify_domain_step_add_domain_button_label")})})]}),rh||(rh=(0,C.tZ)(nh,{})),(0,C.tZ)(eh,{domainName:null!=c?c:"",showModal:null!==c,onClose:()=>{u(null)}})]})},_h=({title:e,paragraph:t,badgeLabel:n,children:a,onBackClicked:i,showBackButton:r=!0})=>{const s=(0,we.k6)(),c=null!=i?i:()=>{s.push(".")};return(0,C.BX)("div",{sx:{padding:"24px 0"},children:[(0,C.BX)("div",{sx:{padding:"0 32px"},children:[(0,C.BX)(l.Ejs,{flexDirection:"row",gap:"8px",sx:{marginBottom:"16px"},alignItems:"center",children:[r,(0,C.tZ)(o.zx,{layout:"iconOnly",icon:"CaretLeftOutlined",intensity:"supershy",mood:"neutral",onClick:c}),(0,C.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",children:e}),n?(0,C.tZ)(o.Ct,{label:n,mood:"brand"}):null]}),t?(0,C.tZ)(o.nv,{sx:{marginBottom:"32px"},children:t}):null]}),a]})};var mh,ph,gh,hh,bh,yh;const xh={CARD_1_HEADING:"Before you start",CARD_1_BODY_INTRO:"To set up SSO, you'll need:",CARD_1_BODY_POINTS:["Access to your IdP and public DNS provider accounts","A list of members to add to your SSO application","IdP metadata","Email domain"],CARD_1_SUB_HEADING:"Need help?",CARD_1_SUB_BODY:"For help setting up SSO, contact our Customer Support.",CARD_2_HEADING:"After turning on SSO",CARD_2_BODY_FIRST:"After SSO is turned on, non-admin members are required to log in with SSO.",CARD_2_BODY_SECOND:"They must use the browser extension when using Dashlane on a computer. They can also log in with SSO on mobile.",CARD_2_BODY_THIRD:"Admins can't log in with SSO. They still need to enter their Master Password."},vh="support@dashlane.com",Sh=()=>{const{status:e,data:t}=(0,d.k)(Sg.y,"ssoProvisioning");if(e!==s.rq.Success)return null;const n=e===s.rq.Success?!t.enableSSO.ssoEnabled:null;return(0,C.tZ)("div",{children:(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"32px",sx:{flexGrow:1},children:[n?(0,C.tZ)(Og,{pageContext:Mg.Nitro}):null,(0,C.BX)(l.Zbd,{sx:{padding:"32px"},children:[mh||(mh=(0,C.tZ)(Pg,{})),ph||(ph=(0,C.tZ)(Hg,{}))]}),(0,C.tZ)(l.Zbd,{sx:{padding:"32px"},children:gh||(gh=(0,C.tZ)(uh,{}))}),(0,C.tZ)(l.Zbd,{sx:{padding:"32px"},children:hh||(hh=(0,C.tZ)(Jg,{}))}),(0,C.tZ)(l.Zbd,{sx:{padding:"32px"},children:bh||(bh=(0,C.tZ)(Kg,{}))})]})})},fh=e=>(0,C.BX)("div",{sx:{border:"none",display:"flex",gap:"24px",flexDirection:"column"},...e,children:[(0,C.BX)(Lo,{children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:xh.CARD_1_HEADING}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:xh.CARD_1_BODY_INTRO}),(0,C.tZ)(o.nv,{as:"ul",textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",sx:{margin:"0px 0px 8px 20px",listStyleType:"disc"},children:xh.CARD_1_BODY_POINTS.map((e=>(0,C.tZ)("li",{children:e},e)))}),(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:xh.CARD_1_SUB_HEADING}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:xh.CARD_1_SUB_BODY}),(0,C.tZ)(Ro,{href:`mailto:${vh}`,sx:{fontSize:"14px"},children:vh})]}),(0,C.BX)(Lo,{children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",children:xh.CARD_2_HEADING}),(0,C.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:xh.CARD_2_BODY_FIRST}),(0,C.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:xh.CARD_2_BODY_SECOND}),(0,C.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.danger.standard",children:xh.CARD_2_BODY_THIRD})]})]}),Zh=({backRoute:e})=>{const{data:t}=(0,d.k)(Sg.y,"ssoProvisioning"),{translate:n}=(0,y.Z)(),a=!t?.enableSSO.ssoEnabled,r=!t?.enableSSO.ssoEnabled;return(0,C.tZ)(_h,{title:n("sso_confidential_page_title"),badgeLabel:a?n("team_new_label"):"",showBackButton:r,onBackClicked:()=>{Dg({ssoSetupStep:c.SsoSetupStep.ReturnToSsoSelection}),(0,i.uX)(e)},children:yh||(yh=(0,C.tZ)(No,{mainContent:(0,C.tZ)(Sh,{}),secondaryContent:(0,C.tZ)(fh,{})}))})};var Ch=n(823512);const Th=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),i=(0,r.useCallback)((async()=>{try{return await fe.C.getEncryptionServiceConfig()}catch{return{success:!1,error:{code:Ch.S2}}}}),[]),s=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||t(!0);const n=await i();return e.signal.aborted||(n.success&&a(n.data),t(!1)),n}),[i]);return(0,r.useEffect)((()=>{const e=new AbortController;return s(e),()=>{e.abort()}}),[s]),{esConfigLoading:e,esConfig:n,refreshEncryptionServiceConfig:s}};var Dh=n(320144),kh=n(40010),Eh=n(454661);const wh="esConfigurationLabel",Ih=({value:e,disabled:t,error:n,isLoading:a=!1,configRegenRequired:i,lastGeneratedTimeStamp:r})=>{const{translate:s}=(0,y.Z)(),c=r?(0,C.BX)(l.Ejs,{gap:"4px",sx:{mt:"8px"},justifyContent:"center",children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.strong",children:s("team_settings_encryption_service_generate_configuration_timestamp")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",children:(0,an.Z)(r).toLocaleString(navigator.language,{...hn.qG.lll,timeZoneName:"short"})})]}):null;return(0,C.BX)(l.T5p,{gridTemplateAreas:"'label button' 'description button' 'timestamp timestamp' 'config buttons'",gridTemplateColumns:"3fr 1fr",sx:{gridColumnGap:"8px"},children:[(0,C.tZ)(l.dDn,{gridArea:"label",sx:{paddingBottom:"8px"},as:o.nv,innerAs:"label",id:wh,textStyle:"ds.title.block.medium",children:s("team_settings_encryption_service_generate_configuration_label")}),(0,C.tZ)(l.dDn,{gridArea:"description",as:o.nv,children:s("team_settings_encryption_service_generate_configuration_label_helper")}),(0,C.BX)(l.dDn,{gridArea:"button",children:[(0,C.tZ)(o.zx,{disabled:t||a,mood:e&&!i?"neutral":"brand",intensity:e&&!i?"quiet":"catchy",fullsize:!0,type:"submit",isLoading:a,children:s("team_settings_encryption_service_generate_configuration_button")}),i?null:c]}),e?(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.dDn,{gridArea:"config",sx:{marginTop:"18px"},children:(0,C.tZ)(o.Kx,{"aria-labelledby":wh,readOnly:!0,disabled:i,value:e,feedback:n?{text:n}:void 0,error:!!n})}),(0,C.BX)(l.dDn,{as:l.Ejs,gridArea:"buttons",sx:{marginTop:"18px"},flexDirection:"column",gap:"8px",children:[(0,C.tZ)(uu.q,{disabled:i,copyValue:e,buttonText:s("input_copy_button"),fullsize:!0}),(0,C.tZ)(Eh.o,{disabled:i,buttonText:s("team_settings_encryption_service_config_download_button"),downloadString:e,fileName:"dashlane-encryption-service-config.txt",fileType:"text/plain",fullsize:!0})]})]}):null]})};function Nh(e){const t=(0,r.useMemo)((()=>e),[e]),[n,a]=(0,r.useState)(!1),[i,s]=(0,r.useState)(),o=(0,r.useCallback)((async()=>{const e={success:!1,error:{code:Ch.S2}};try{return t?await fe.C.getTeamDevice({teamDeviceAccessKey:t}):e}catch{return e}}),[t]),l=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||a(!0);const t=await o();return e.signal.aborted||(t.success&&s(t.data.teamDevice),a(!1)),t}),[o]);return(0,r.useEffect)((()=>{const e=new AbortController;return l(e),()=>{e.abort()}}),[l]),{teamDeviceLoading:n,teamDevice:i,refreshTeamDevice:l}}const Ah={AWS:"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGN0C8B9HMKRD8J0BSYRAH","Microsoft Azure":"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGMVBAEK5GB0TZJ86K7ZWE"},Mh=({context:e="GENERIC",...t})=>{var n,a;const{esConfig:i,esConfigLoading:s}=Th(),{teamDevice:l,teamDeviceLoading:c}=Nh(i?.deviceAccessKey),[d,u]=(0,r.useState)(!1),{translate:_}=(0,y.Z)(),m={CONTENT:_.markup("team_settings_encryption_service_restart_failed_info_content_markup",{helpArticle:null!=(n=Ah[null!=(a=i?.deploymentLocation)?a:""])?n:"",supportLink:"https://support.dashlane.com/hc/requests/new?utm_source=extension"},{linkTarget:"_blank"})},p={GENERIC:{TITLE:_("team_settings_encryption_service_restart_failed_info_title"),...m},SCIM:{TITLE:_("team_settings_encryption_service_restart_failed_info_title_scim"),...m},ES:{TITLE:_("team_settings_encryption_service_restart_failed_info_title_es"),...m},SSO:{TITLE:_("team_settings_encryption_service_restart_failed_info_title_sso"),...m}};return(0,r.useEffect)((()=>{if(!c&&!s&&l&&i){const t=!l.hasLatestConfig&&"GENERIC"===e||"GENERIC"!==e;u(t)}}),[l,i,c,s,e]),d?(0,C.tZ)(o.ke,{mood:"warning",size:"large",title:p[e].TITLE,description:p[e].CONTENT,actions:p[e].BUTTON?[(0,C.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:()=>{u(!1)},children:p[e].BUTTON},"primary")]:void 0,...t}):null};var Oh,Lh,Bh,Rh,zh;const Ph="team_settings_encryption_service_enter_endpoint_placeholder_aws_linux",Xh="_common_generic_error",jh="https://",Uh={AWS:"https://eu-west-1.console.aws.amazon.com/acm/home?region=eu-west-1#/welcome","Microsoft Azure":"https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fget.dashlane.com%2Fazure%2Farm%2Fes%2Fazuredeploy.json"},qh={AWS:"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGN0C8B9HMKRD8J0BSYRAH","Microsoft Azure":"https://support.dashlane.com/hc/articles/4404322174482-Dashlane-Encryption-Service-Overview-and-Setup?utm_source=extension#h_01FTXGMVBAEK5GB0TZJ86K7ZWE"},Gh={AWS:"team_settings_encryption_service_go_to_label_helper_aws_markup","Microsoft Azure":"team_settings_encryption_service_go_to_label_helper_azure_markup"},Fh={AWS:"team_settings_encryption_service_enter_endpoint_helper_aws_linux","Microsoft Azure":"team_settings_encryption_service_enter_endpoint_helper_azure"},$h={"Microsoft Azure":"team_settings_encryption_service_enter_endpoint_placeholder_azure",AWS:Ph},Vh="config",Hh="deploymentLocation",Wh="encryptionServiceEndpoint",Yh="ssoConnectorKey",Kh="-sso.azurewebsites.net",Qh=({migratingFromSSOConnector:e=!1,esConfig:t,onSave:n,teamSettings:a,updateTeamSettings:s})=>{var d,u,_;const[m,p]=(0,r.useState)(!1),[g,h]=(0,r.useState)(""),[b,x]=(0,r.useState)(!1),[v,S]=(0,r.useState)(!1),{translate:f}=(0,y.Z)(),{spaceDetails:Z,teamId:T}=(0,Ce.fV)(),{initSsoProvisioning:D}=(0,$.u)(Sg.y),k=null!=(d=Z?.associatedEmail)?d:"",E=(0,i.k6)(),w=a?.ssoServiceProviderUrl,I={encryptionServiceEndpoint:(null!=w?w:"").replace(jh,""),config:null!=(u=t?.config)?u:"",deploymentLocation:null!=(_=t?.deploymentLocation)?_:"",ssoConnectorKey:""},N=()=>E.goBack(),A=e=>e?null:f("team_settings_encryption_service_error_select_service"),M=e=>{const t=f("team_settings_encryption_service_error_invalid_ssoConnectorKey");try{const[t,n]=e.split("|"),a=atob(n);if(!t||!n||!a||36!==t.length||64!==a.length)throw new Error("Invalid key format")}catch{return t}return null},O=e=>{const t=f("team_settings_encryption_service_error_invalid_endpoint");if(!e)return t;let n;try{n=new URL(`${jh}${e}`)}catch(e){return t}return"/"!==n.pathname||""!==n.search||""!==n.hash||n.href.includes("?")?t:null};return(0,C.tZ)(ca.J9,{onSubmit:async(t,{setFieldValue:a,setFieldTouched:i})=>{h(""),p(!0),S(!1);const{deploymentLocation:r,encryptionServiceEndpoint:o,ssoConnectorKey:l}=t;if(!r)return void i(Hh);if(e&&!l)return void i(Yh);a(Vh,"");const d=e=>e.replace(/\/$/,"").toLowerCase();try{const i={deploymentLocation:r,encryptionServiceEndpoint:jh+d(o),updateTeamDeviceConfigParams:{}};e&&l&&(i.updateTeamDeviceConfigParams.ssoConnectorKey=l);const u=await fe.C.generateAndSaveEncryptionServiceConfig(i);if(!u.success)return void h(f(Xh));const _=u.data.basicConfig;if(a(Vh,_.config),t[Wh]!==I.encryptionServiceEndpoint&&(await s({ssoServiceProviderUrl:t[Wh]?`${jh}`+d(`${t[Wh]}`):null}),await D({teamId:`${T}`})),p(!1),u.data.encryptionServiceReloadingStatus!==Dh.x.OK)return S(!0),x(!1),void n?.();Tg({ssoSetupStep:c.SsoSetupStep.GenerateAndSaveConfiguration}),g||n?.()}catch(e){p(!1),h(f(Xh))}},initialValues:I,onReset:N,children:n=>{var a,i;return(0,C.BX)(ca.l0,{autoComplete:"off",children:[(0,C.tZ)(kh.X,{dirty:n.dirty&&!m&&!v}),(0,C.BX)(l.Zbd,{children:[(0,C.tZ)(l.Ol2,{children:f("team_settings_encryption_service_header")}),(0,C.BX)(l.aYP,{children:[e?(0,C.BX)(C.HY,{children:[(0,C.BX)(l.T5p,{gridTemplateAreas:"'header header' 'description description' 'input button'",gridTemplateColumns:"1fr auto",gap:"10px",children:[(0,C.tZ)(l.dDn,{gridArea:"header",children:(0,C.tZ)(o.nv,{as:"h3",textStyle:"ds.title.block.medium",children:f("team_settings_encryption_service_migrate_sso_title")})}),(0,C.tZ)(l.dDn,{gridArea:"description",children:(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:f.markup("team_settings_encryption_service_migrate_sso_description_markup")})}),(0,C.tZ)(l.dDn,{gridArea:"input",children:(0,C.tZ)(ca.gN,{name:Yh,validate:M,children:({field:{onChange:e,...t},meta:{error:a,touched:i}})=>(0,C.tZ)(l.oil,{onChange:t=>{e(t)},id:"ssoConnectorKey",placeholder:f("team_settings_encryption_service_sso_connector_key_placeholder"),fullWidth:!0,feedbackText:i&&a?a:void 0,feedbackType:i&&a?"error":void 0,"aria-invalid":i&&!!a,readOnly:n.isSubmitting,...t})})})]}),Oh||(Oh=(0,C.tZ)("hr",{}))]}):null,(0,C.BX)(l.T5p,{gridTemplateAreas:"'label select' 'desc select'",gap:"8px",children:[(0,C.tZ)(l.dDn,{gridArea:"label",as:o.nv,innerAs:"label",htmlFor:"deploymentLocation",sx:{gridArea:"label"},textStyle:"ds.title.block.medium",children:f("team_settings_encryption_service_deploy_label")}),(0,C.tZ)(l.dDn,{gridArea:"desc",as:o.nv,children:f.markup("team_settings_encryption_service_deploy_label_helper_markup",{customerSupport:"https://support.dashlane.com/hc/requests/new?utm_source=extension"},{linkTarget:"_blank"})}),(0,C.tZ)(l.dDn,{gridArea:"select",children:(0,C.tZ)(ca.gN,{name:Hh,validate:A,children:({field:{onChange:e,...t},meta:{error:a,touched:i}})=>(0,C.tZ)(l.PhF,{onChange:t=>{n.setFieldValue(Wh,((e,t)=>{if(!e||!t)return"";const n=e.replace(/.+@/,"");if("Microsoft Azure"===t){const[e,t,...a]=n.split(".").reverse(),i=t+Kh;return i.length<=42?i:t.slice(0,42-Kh.length)+Kh}return"AWS"===t?"dashlane-sso."+n:""})(k,t.target.value)),x(I.deploymentLocation!==t.target.value),Tg({ssoSetupStep:c.SsoSetupStep.SelectEncryptionServicePlatform,encryptionServicePlatformSelected:"AWS"===t.target.value?c.EncryptionServicePlatformSelected.AmazonWebServices:c.EncryptionServicePlatformSelected.Azure}),e(t)},feedbackId:"deploymentLocationFeedback",selectId:"deploymentLocation",options:Object.keys(Fh),placeholder:f("team_settings_encryption_service_select_host"),intent:i&&a?"error":void 0,feedbackText:i&&a?a:void 0,readOnly:n.isSubmitting,...t})})})]}),Lh||(Lh=(0,C.tZ)("hr",{})),(0,C.BX)(l.T5p,{gridTemplateColumns:"auto",gap:"8px",children:[(0,C.tZ)(l.dDn,{as:o.nv,innerAs:"label",htmlFor:"endpointInput",textStyle:"ds.title.block.medium",children:f("team_settings_encryption_service_enter_endpoint_label")}),(0,C.tZ)(l.dDn,{as:o.nv,sx:{mb:"16px"},children:f(null!=(a=Fh[n.values[Hh]])?a:"team_settings_encryption_service_enter_endpoint_label_helper_no_selection")}),e?(0,C.BX)(o.nv,{children:[f("team_settings_encryption_service_current_endpoint_label")," ",w]}):null,(0,C.tZ)(ca.gN,{name:Wh,validate:O,children:({field:{onChange:e,...t},meta:{error:a,touched:i},form:{values:{deploymentLocation:r}}})=>{var s;return(0,C.tZ)(l.oil,{sx:{pl:0},onChange:t=>{x(I.encryptionServiceEndpoint!==t.target.value),e(t)},startAdornment:Bh||(Bh=(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",children:jh})),id:"endpointInput",placeholder:f(null!=(s=$h[r])?s:Ph),fullWidth:!0,feedbackText:i&&a?a:void 0,feedbackType:i&&a?"error":void 0,"aria-invalid":i&&!!a,readOnly:n.isSubmitting,...t})}})]}),Rh||(Rh=(0,C.tZ)("hr",{})),v?(0,C.tZ)(Mh,{sx:{marginBottom:"20px"},context:"ES"}):null,(0,C.tZ)(ca.gN,{name:Vh,children:({field:a,meta:i,form:{values:{deploymentLocation:r,ssoConnectorKey:s}}})=>{var o;return(0,C.tZ)(Ih,{configRegenRequired:b,disabled:!r||e&&!s,lastGeneratedTimeStamp:t?.lastGeneratedTimeStamp,value:a.value,error:(null!=(o=i.error)?o:!n.isSubmitting&&b)?f("team_settings_encryption_service_config_regen_warning"):void 0,isLoading:m||n.isSubmitting})}}),zh||(zh=(0,C.tZ)("hr",{})),(0,C.BX)(l.T5p,{gridTemplateAreas:"'header button' 'description button'",gap:"8px",children:[(0,C.tZ)(l.dDn,{gridArea:"header",as:o.nv,textStyle:"ds.title.block.medium",children:f("team_settings_encryption_service_go_to_label")}),(0,C.tZ)(l.dDn,{gridArea:"description",as:o.nv,sx:{mb:"16px"},children:(i=n.values.deploymentLocation,i||(i="AWS"),f.markup(Gh[i],{setupGuide:qh[i]},{linkTarget:"_blank"}))}),(0,C.tZ)(l.dDn,{gridArea:"button",as:o.zx,type:"button",mood:n.values.config&&!b?"brand":"neutral",disabled:!n.values[Hh]||!n.values[Vh]||b,onClick:()=>{Tg({ssoSetupStep:c.SsoSetupStep.AddConfigurationToServiceHost}),(0,q.Yo)(Uh[n.values[Hh]])},icon:"ActionOpenExternalLinkOutlined",layout:"iconTrailing",sx:{gridArea:"button",height:"fit-content"},children:f("team_settings_encryption_service_go_to_button")})]})]}),(0,C.BX)(l.eWM,{flexWrap:"nowrap",children:[g?(0,C.tZ)(o.nv,{sx:{width:"40%",ml:0,mr:"auto"},textStyle:"ds.title.supporting.small",color:"ds.text.danger.standard",children:g}):null,(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",size:"large",type:"button",onClick:()=>N(),children:f("team_settings_encryption_service_button_cancel")})]})]})]})}})};var Jh,eb=n(491684);const tb="team_settings_encryption_service_not_available",nb=({config:e})=>{var t;const{translate:n}=(0,y.Z)(),{teamDevice:a,refreshTeamDevice:i,teamDeviceLoading:r}=Nh(e.deviceAccessKey),s=n.markup("team_settings_encryption_service_tooltip_text_markup",{updateServiceUrl:"https://support.dashlane.com/hc/articles/360015973719"},{linkTarget:"_blank"},{color:"ds.text.inverse.catchy",hoverColor:"ds.text.brand.quiet",activeColor:"ds.text.brand.standard"});return(0,C.tZ)(eb.R,{children:r?Jh||(Jh=(0,C.tZ)(o.ZX,{})):(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"5px",children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${n("team_settings_encryption_service_last_restart")}\n                    ${a?.lastStartDateUnix?(0,an.Z)(a.lastStartDateUnix).toLocaleString(navigator.language,{...hn.qG.lll,timeZoneName:"short"}):n(tb)}`}),(0,C.BX)(l.Ejs,{gap:"8px",children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`\n                   ${n("team_settings_encryption_service_version")}\n                   ${null!=(t=a?.version)?t:n(tb)}\n                  `}),!1===a?.hasLatestVersion?(0,C.tZ)(o.u,{wrapTrigger:!0,content:s,children:(0,C.tZ)(o.Ct,{mood:"danger",iconName:"FeedbackWarningOutlined",layout:"iconLeading",label:n("team_settings_encryption_service_new_version")})}):null]}),(0,C.BX)(o.nv,{as:"a",color:"ds.text.brand.standard",sx:{textDecoration:"none",fontWeight:"normal"},onClick:()=>i(),textStyle:"ds.body.reduced.regular",children:[(0,C.tZ)(o.JO,{sx:{display:"inline",marginRight:"5px"},name:"ActionRefreshOutlined",size:"xsmall",color:"ds.text.brand.standard"}),n("team_settings_encryption_service_refresh")]})]})})};var ab;const ib=({esConfig:e,loading:t,parentPath:n,disableSetupButton:a})=>{const{translate:r}=(0,y.Z)(),s=(0,i.k6)(),d=!e&&!t;return(0,C.tZ)(l.Zbd,{children:(0,C.BX)(l.T5p,{as:l.aYP,gridTemplateAreas:"'header button' 'description button' 'status .'",gridTemplateColumns:"1fr auto",gap:"8px",sx:{bg:"white",border:"none"},children:[(0,C.BX)(l.dDn,{gridArea:"header",children:[e?null:(0,C.tZ)(o.X6,{as:"h3",color:"ds.text.neutral.quiet",textStyle:"ds.title.supporting.small",children:r("team_settings_encryption_service_get_started")}),(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.section.medium",children:r("team_settings_encryption_service_header")})]}),(0,C.BX)(l.dDn,{gridArea:"description",children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:r("team_settings_encryption_service_description")}),ab||(ab=(0,C.tZ)("br",{})),(0,C.tZ)(o.nv,{as:"a",textStyle:"ds.title.block.small",href:"https://support.dashlane.com/hc/articles/360013149040#why-encryption",color:"ds.text.brand.standard",rel:"noopener noreferrer",target:"_blank",children:r("team_settings_encryption_service_more_info_link")})]}),(0,C.tZ)(l.dDn,{id:"esSetupButton",as:o.zx,disabled:t||a,mood:d?"brand":"neutral",intensity:d?"catchy":"quiet",gridArea:"button",type:"button",alignSelf:"center",size:"large",onClick:()=>{Tg({ssoSetupStep:c.SsoSetupStep.SetUpEncryptionServiceSettings}),s.push(`${n}/encryption-service-settings`)},isLoading:t,children:r(e?"team_settings_button_edit_label":"team_settings_encryption_service_set_up")}),e?(0,C.tZ)(l.dDn,{gridArea:"status",sx:{mt:"20px"},children:(0,C.tZ)(nb,{config:e})}):null]})})};var rb=n(879869),sb=n(347418);const ob=({actions:e,endIcon:t,fieldName:n,feedbackType:a,feedbackText:i,handleAdd:r,...s})=>{const[{value:{name:o},onBlur:l,...c},{error:d},{setValue:u}]=(0,ca.U$)(n),_=o?null!=i?i:d:void 0,m=(null!=a?a:_)?"error":void 0;return(0,C.tZ)(sb.h,{textInputProps:{id:n,endAdornment:t,feedbackText:_,feedbackType:m,fullWidth:!0,value:o,...c,...s,onChange:({currentTarget:{value:e}})=>{u({name:e})},onKeyPress:e=>{"Enter"===e.key&&(r(),e.preventDefault(),e.stopPropagation())},onBlur:e=>{e.currentTarget.value&&!e.currentTarget.readOnly&&r(),l?.(e)}},tooltipProps:{passThrough:!0},replacementActions:e})};var lb,cb,db,ub;const{accessibleValidatorGreen:_b,orange00:mb,dashGreen02:pb}=l.colors,gb="team_settings_domain_register_invalid_error",hb=({fieldArrayName:e,domainLoadError:t,refreshDomains:n})=>{const{translate:a}=(0,y.Z)(),{values:i}=(0,ca.u6)(),[s,c]=(0,r.useState)({}),[d,u]=(0,r.useState)({}),[_,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),h=(e,t)=>{c((n=>({...n,[e]:t})))},b=async t=>{const n=t.trim();if(!$c().isFQDN(n))throw new Error(a(gb));if(i[e].reduce(((e,t)=>t.name===n?e+1:e),0)>1)throw new Error(a("team_settings_domain_register_duplicated_error"));(e=>{u((t=>({...t,[e]:!0})))})(t);const r=await fe.C.registerTeamDomain({domain:n});var s;if((e=>{u((({[e]:t,...n})=>n))})(t),!r.success)throw new Error(a(null!=(s={INVALID_PUBLIC_DOMAIN:"team_settings_domain_register_public_error",DOMAIN_CONTAINS_EXISTING_NONTEAM_USERS:"team_settings_domain_register_contact_support"}[r.error.code])?s:gb))},x=async e=>{await b(e.name),await n()};return t?(0,C.tZ)(l.Ejs,{fullWidth:!0,justifyContent:"center",children:(0,C.tZ)(l.j49,{color:"errors.4",children:t})}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.nvN,{as:"label",htmlFor:`${e}.${i[e].length-1}`,bold:!0,sx:{display:"inline-block",mb:"8px"},children:a("team_settings_domain_title")}),(0,C.tZ)(l.nvN,{size:"small",sx:{mb:"24px"},children:a("team_settings_es_sso_setup_domain_description")}),(0,C.tZ)(ca.F2,{name:e,children:e=>(0,C.tZ)(l.T5p,{justifyContent:"stretch",gridTemplateColumns:"auto",gap:"8px",gridAutoRows:"auto",children:i[e.name].map(((t,n)=>{var r,c;const u=d[t.name],_=t.status===wl.p.valid,p=t.status===wl.p.pending||t.status===wl.p.invalid||t.status===wl.p.expired,b=u?lb||(lb=(0,C.tZ)(o.ZX,{size:"medium"})):_?cb||(cb=(0,C.tZ)(l.rE2,{color:_b})):p?(0,C.tZ)(l.enX,{color:t.status===wl.p.pending?pb:mb}):void 0;return(0,C.tZ)(C.HY,{children:(0,C.tZ)(ob,{placeholder:a("team_settings_es_sso_domain_url_placeholder"),fieldName:`${e.name}.${n}`,readOnly:null!=(c=!!t.status)?c:u,autoFocus:n===i[e.name].length-1,endIcon:b,feedbackType:!t.status&&s[t.name]?"error":void 0,feedbackText:t.status?void 0:s[t.name],handleAdd:async()=>{try{await x(t),m(t.name)}catch(e){h(t.name,e.message)}},actions:(0,C.BX)(C.HY,{children:[t.status===wl.p.pending||void 0===t.status?(0,C.tZ)(l.zxk,{nature:"secondary",type:"button",disabled:u,onClick:()=>(async e=>{try{void 0===e.status&&await x(e),m(e.name)}catch(t){h(e.name,t.message)}})(t),children:a(void 0===t.status?"team_settings_es_sso_setup_add_domain":"team_settings_es_sso_setup_verify_button")}):null,t.name.length&&void 0!==t.status?(0,C.tZ)(rb.h,{nature:"secondary",type:"button",disabled:u,onClick:()=>g(t),icon:db||(db=(0,C.tZ)(l.XHJ,{}))}):null]})})},`${e.name}.${null!=(r=t.id)?r:n}`)}))})}),ub||(ub=(0,C.tZ)(nh,{})),_?(0,C.tZ)(vd,{domainName:_,onSuccess:async()=>{m(""),await n()},onDismiss:()=>m("")}):null,p?(0,C.tZ)(Yc,{domain:p,onDismiss:()=>g(null),onConfirm:async()=>{await(async e=>{if(!e)return;const t=await fe.C.deactivateTeamDomain({domain:e});return t.success?void 0:t.error.code})(p.name),await n()}}):null]})};var bb;const yb=({inputValue:e,labelText:t,disabled:n,loading:a,id:i})=>(0,C.tZ)(hd.x,{inputValue:e,textInputProps:{fullWidth:!0,readOnly:!0,disabled:n,id:i,startAdornment:a?bb||(bb=(0,C.tZ)(o.ZX,{})):void 0,label:(0,C.tZ)(l.nvN,{as:"label",bold:!0,sx:{mb:"4px"},htmlFor:i,children:t})},iconButtonProps:{disabled:n}}),xb=e=>{const t=(0,r.useMemo)((()=>{var t,n;return{draft:null!=(t=e?.draft)&&t,deviceAccessKey:null!=(n=e?.deviceAccessKey)?n:""}}),[e?.draft,e?.deviceAccessKey]),[n,a]=(0,r.useState)(!0),[i,s]=(0,r.useState)(null),[o,l]=(0,r.useState)(null),c=(0,r.useCallback)((async()=>{try{return await fe.C.getTeamDeviceEncryptedConfig(t)}catch{return{success:!1,error:{code:Ch.S2}}}}),[t]),d=(0,r.useCallback)((async(e=new AbortController)=>{e.signal.aborted||a(!0);const t=await c();return e.signal.aborted||(s(t.success?null:t.error.code),t.success&&l(t.data),a(!1)),t}),[c]),u=(0,r.useCallback)((async e=>{a(!0);try{return await fe.C.updateTeamDeviceEncryptedConfig(e)}catch{return{success:!1,error:{code:Ch.S2}}}finally{a(!1)}}),[]);return(0,r.useEffect)((()=>{const e=new AbortController;return d(e),()=>{e.abort()}}),[d]),{teamDeviceConfigLoading:n,loadTeamDeviceConfigErrorCode:i,teamDeviceConfig:o,updateTeamDeviceConfig:u,refreshTeamDeviceConfig:d}};var vb,Sb,fb,Zb;const{grey00:Cb}=l.colors,Tb="team_settings_es_sso_setup_header",Db="team_settings_domain_fetch_error",kb={GENERIC_ERROR:"_common_generic_error"},Eb=e=>e?`${e}/saml/callback`:"",wb="ssoIdpMetadata",Ib=()=>{var e;const{translate:t}=(0,y.Z)(),{teamId:n}=(0,Ce.fV)(),{updateTeamDeviceConfig:a}=xb(),[s,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(!1),[_,m]=(0,r.useState)([]),p=(0,r.useRef)(null),[g,h]=(0,r.useState)(!1),[b,x]=(0,r.useState)(""),{teamSettings:v={},teamSettingsLoading:S}=Ze(n),{ssoIdpMetadata:f,ssoServiceProviderUrl:Z=""}=v,T=(0,i.k6)(),D=(0,r.useCallback)((async()=>{try{x("");const e=await fe.C.getTeamDomains();if(e.success){const t=e.domains.length?e.domains:[];m([...t,{name:"",id:0}])}else x(t(Db))}catch(n){var e;x(null!=(e=n.message)?e:t(Db))}}),[t]);(0,r.useEffect)((()=>{h(!0),D().then((()=>h(!1)))}),[D]);const k={domains:_,ssoIdpMetadata:null!=(e=null!=f?f:p.current?.value)?e:""},E=()=>T.goBack();return S||g?(0,C.BX)(l.Zbd,{children:[(0,C.tZ)(l.Ol2,{children:t(Tb)}),vb||(vb=(0,C.tZ)(l.aYP,{children:(0,C.tZ)(l.Ejs,{fullWidth:!0,justifyContent:"center",children:(0,C.tZ)(o.ZX,{size:60})})}))]}):(0,C.tZ)(ca.J9,{onSubmit:async(e,n)=>{try{var i;c(!0),u(!1);const r=await a({ssoEnabled:!0,[wb]:e[wb],connectorEndpoint:Z||void 0,teamDeviceUrl:null!=(i=v.ssoServiceProviderUrl)?i:void 0});if(!r.success){const e=r.error.code.toUpperCase();if("DEACTIVATED_TEAM_DEVICE"===e)return;const a=t(kb[e]?kb[e]:kb.GENERIC_ERROR);return void n.setFieldError(wb,a)}if(r.data.encryptionServiceReloadingStatus!==Dh.x.OK)return void u(!0);E()}catch(e){n.setFieldError(wb,t(kb.GENERIC_ERROR)),c(!1)}},initialValues:k,enableReinitialize:!0,children:({isSubmitting:e,dirty:n})=>{return(0,C.BX)(ca.l0,{autoComplete:"off",noValidate:!0,children:[(0,C.tZ)(kh.X,{dirty:n&&!s&&!d}),(0,C.BX)(l.Zbd,{children:[(0,C.tZ)(l.Ol2,{children:t(Tb)}),(0,C.BX)(l.aYP,{children:[(0,C.tZ)(hb,{fieldArrayName:"domains",domainLoadError:b,refreshDomains:D}),Sb||(Sb=(0,C.tZ)("hr",{})),(0,C.tZ)(o.ke,{title:t.markup("team_settings_es_sso_setup_copy_info_to_idp_markup"),sx:{mb:"32px"}}),(0,C.BX)(l.T5p,{justifyContent:"stretch",gridTemplateColumns:"auto",gap:"32px",gridAutoRows:"auto",children:[(0,C.tZ)(yb,{id:"entity-id-input",inputValue:(a=Z,a?`${a}/saml/`:""),labelText:t("team_settings_es_sso_entity_id_label"),disabled:S||!Z,loading:S}),(0,C.tZ)(yb,{id:"acs-url-input",inputValue:Eb(Z),labelText:t("team_settings_es_sso_acs_url_label"),disabled:S||!Z,loading:S})]}),fb||(fb=(0,C.tZ)("hr",{})),(0,C.tZ)(l.nvN,{as:"label",bold:!0,htmlFor:"sso-metadata-input",children:t("team_settings_es_sso_metadata_label")}),(0,C.tZ)(l.nvN,{size:"small",color:Cb,sx:{mt:"8px",mb:"24px"},children:t("team_settings_es_sso_metadata_description")}),(0,C.tZ)(ca.gN,{name:wb,children:({field:e,meta:{error:t,touched:n}})=>(0,C.tZ)(l.oil,{id:"sso-metadata-input",sx:{height:"10em",resize:"vertical"},...e,ref:p,multiline:!0,fullWidth:!0,feedbackText:n&&t?t:void 0,feedbackType:n&&t?"error":void 0})})]}),(0,C.BX)(l.eWM,{children:[d?(0,C.tZ)(l.Ejs,{sx:{flexGrow:1,justifyContent:"center"},children:Zb||(Zb=(0,C.tZ)(Mh,{context:"SSO"}))}):null,(0,C.tZ)(l.zxk,{disabled:e,nature:"secondary",size:"large",type:"button",onClick:E,children:t("team_settings_es_sso_setup_cancel")}),(0,C.tZ)(l.zxk,{disabled:e,nature:"primary",type:"submit",size:"large",children:t("team_settings_es_sso_setup_save")})]})]})]});var a}})},{grey00:Nb}=l.colors,Ab="team_settings_enable_sso_test_button",Mb=({actionsDisabled:e,ssoServiceProviderUrl:t})=>{const{translate:n}=(0,y.Z)(),a=t?`${t}/saml/login?redirect=test_idp`:"";return(0,C.BX)(l.T5p,{gap:"8px",gridTemplateAreas:"'header buttons' 'description buttons' ",gridTemplateColumns:"1fr auto",children:[(0,C.tZ)(l.dDn,{as:l.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:n("team_settings_enable_sso_test_title")}),(0,C.tZ)(l.dDn,{gridArea:"description",as:l.nvN,size:"small",color:Nb,children:n("team_settings_enable_sso_test_description")}),(0,C.BX)(l.T5p,{gap:"8px",gridTemplateAreas:"'test copy'",as:l.dDn,gridArea:"buttons",children:[(0,C.tZ)(l.dDn,{gridArea:"test",children:(0,C.BX)(Qg.M,{onClick:()=>{(0,q.Yo)(a)},size:"medium","aria-label":n(Ab),disabled:null!=e?e:!a,content:n("team_settings_es_sso_setup_incomplete"),children:[n(Ab),(0,C.tZ)(l.RTC,{sx:{ml:"4px"},color:"white"})]})}),(0,C.tZ)(l.dDn,{gridArea:"copy",children:(0,C.tZ)(uu.q,{buttonText:n("team_settings_copy_sso_url_button"),disabled:null!=e?e:!a,copyValue:null!=a?a:""})})]})]})},Ob=({closeDialog:e})=>{const{translate:t}=(0,y.Z)();return(0,C.tZ)(gr.o,{isOpen:!0,onRequestClose:()=>e(nd.dismiss),footer:(0,C.tZ)(l.cNS,{primaryButtonTitle:t("team_settings_enable_sso_dialog_disable_action"),primaryButtonOnClick:()=>e(nd.action),secondaryButtonTitle:t("team_settings_enable_sso_cancel"),secondaryButtonOnClick:()=>e(nd.dismiss),intent:"danger"}),title:t("team_settings_enable_sso_dialog_disable_title"),children:t("team_settings_enable_sso_dialog_disable_description")})};var Lb;const{grey00:Bb}=l.colors,Rb=({actionsDisabled:e,ssoEnabled:t,updateTeamSettings:n,loading:a})=>{const{translate:i}=(0,y.Z)(),[s,d]=(0,r.useState)(!1),[u,_]=(0,r.useState)(!1),m=(0,da.V)(),{initSsoProvisioning:p}=(0,$.u)(Sg.y),{teamId:g}=(0,Ce.fV)(),h=()=>{m.showAlert(t?i("_common_generic_error"):i.markup("team_settings_enable_sso_action_toggle_warning_markup",void 0,{linkTarget:"_blank"}),l.BLW.ERROR)};return(0,C.BX)(C.HY,{children:[(0,C.BX)(l.T5p,{gap:"8px",gridTemplateAreas:"'header buttons' 'description toggle' ",gridTemplateColumns:"1fr auto",children:[(0,C.tZ)(l.dDn,{as:l.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:i("team_settings_enable_sso_action_title")}),(0,C.BX)(l.dDn,{gridArea:"description",as:l.nvN,size:"small",color:Bb,children:[i("team_settings_enable_sso_action_description"),Lb||(Lb=(0,C.tZ)("br",{})),i("team_settings_enable_sso_action_description_note")]}),(0,C.tZ)(l.dDn,{gridArea:"toggle",children:(0,C.tZ)(o.ZD,{disabled:e||a,checked:t,onChange:async()=>{t?d(!0):(_(!0),Tg({ssoSetupStep:c.SsoSetupStep.TurnOnSso}))}})})]}),s?(0,C.tZ)(Ob,{closeDialog:async e=>{if(d(!1),e!==nd.dismiss&&g)try{const e=!t;await n({ssoEnabled:e}),await p({teamId:g})}catch(e){h()}}}):null,u?(0,C.tZ)(Yg,{title:i("team_settings_enable_sso_confirm_dialog_title"),body:i("team_settings_enable_sso_confirm_dialog_body"),primaryActionLabel:i("team_settings_enable_sso_confirm_dialog_primary_action_label"),onCancel:()=>{_(!1)},onConfirm:async()=>{await(async()=>{if(g)try{await n({ssoEnabled:!0}),await p({teamId:g}),Tg({ssoSetupStep:c.SsoSetupStep.CompleteSsoSetup})}catch(e){h()}})(),_(!1)}}):null]})};var zb;const{grey00:Pb}=l.colors;var Xb=function(e){return e.UNKNOWN="UNKNOWN",e.LOADING="LOADING",e.COMPLETE="COMPLETE",e.INCOMPLETE="INCOMPLETE",e.NOT_STARTED="NOT_STARTED",e.UNAVAILABLE="UNAVAILABLE",e.ERROR="ERROR",e}(Xb||{});const jb=[kg.s5.enum.NitroComplete,kg.s5.enum.NitroIncomplete],Ub=({disableSetupButton:e,isSsoCapable:t})=>{var n;const{translate:a}=(0,y.Z)(),{teamId:s}=(0,Ce.fV)(),{teamSettings:o={},updateTeamSettings:c,teamSettingsLoading:u}=Ze(s),{ssoEnabled:_=!1,ssoServiceProviderUrl:m="",ssoIdpMetadata:p}=o,[g,h]=(0,r.useState)(Xb.UNKNOWN),b=(0,d.k)(Sg.y,"ssoProvisioning"),x=null!=(n=b.data?.global.inferredSsoState)?n:kg.s5.enum.Unknown;(0,r.useEffect)((()=>{h(Xb.LOADING),fe.C.getTeamDomains().then((e=>{if(!e.success)return void h(Xb.ERROR);const t=jb.includes(x);if(!m||t)return void h(Xb.UNAVAILABLE);const n=e.domains.some((({status:e})=>"valid"===e)),a=e.domains.length>0,i=!!p;switch(!0){case n&&i:h(Xb.COMPLETE);break;case!a&&i||a&&!i||!n&&a&&i:h(Xb.INCOMPLETE);break;case!a&&!i:h(Xb.NOT_STARTED)}}))}),[x,p,m]);const v=g===Xb.UNAVAILABLE||u||e,{path:S}=(0,i.$B)(),f=(0,i.k6)(),Z=[Xb.COMPLETE,Xb.INCOMPLETE].includes(g);return(0,C.BX)(l.Zbd,{children:[(0,C.BX)(l.T5p,{as:l.aYP,gridTemplateAreas:"'header button' 'description button'",gridTemplateColumns:"1fr auto",gap:"8px",sx:{bg:"white",border:"none"},children:[(0,C.tZ)(l.dDn,{as:l.nvN,innerAs:"h3",size:"large",bold:!0,gridArea:"header",children:a("team_settings_es_sso_setup_header")}),(0,C.tZ)(l.dDn,{gridArea:"description",as:l.nvN,size:"small",color:Pb,children:a("team_settings_es_sso_setup_description")}),(0,C.tZ)(l.dDn,{gridArea:"button",alignSelf:"center",children:(0,C.tZ)(Qg.M,{id:"ssoSetupButton",loading:u||g===Xb.LOADING,disabled:v,type:"button",size:"large",onClick:()=>{f.push(`${S}/sso-settings`)},content:a("team_settings_es_sso_setup_configure_es_tooltip"),neverShowTooltip:!t,mood:Z?"neutral":"brand",intensity:Z?"quiet":"catchy",children:a(Z?"team_settings_button_edit_label":"team_settings_es_sso_setup_button")})})]}),Z?(0,C.BX)(l.aYP,{sx:{bg:"white"},children:[(0,C.tZ)(Mb,{actionsDisabled:g!==Xb.COMPLETE,ssoServiceProviderUrl:m}),zb||(zb=(0,C.tZ)("br",{})),(0,C.tZ)(Rb,{actionsDisabled:g!==Xb.COMPLETE,ssoEnabled:_,loading:u,updateTeamSettings:c})]}):null]})};var qb,Gb,Fb;const{dashDarkerGreen00:$b,dashGreen00:Vb,dashGreen06:Hb,midGreen00:Wb}=l.colors,Yb=({backRoute:e})=>{const{translate:t}=(0,y.Z)(),{path:n}=(0,i.$B)(),{esConfig:a,esConfigLoading:r,refreshEncryptionServiceConfig:s}=Th(),{teamId:u}=(0,Ce.fV)(),{teamSettings:_,updateTeamSettings:m,teamSettingsLoading:p}=Ze(u),{status:g,data:h}=(0,d.k)(Sg.y,"ssoProvisioning");if(g!==Te.rq.Success)return null;const{global:{ssoCapable:b,inferredSsoState:x},enableSSO:{ssoEnabled:v}}=h,S=x===kg.s5.enum.NitroIncomplete,f=!v,Z=x===kg.s5.enum.SsoConnectorToSelfHostedMigration;return(0,C.BX)(l.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:[(0,C.BX)("div",{sx:{bg:Hb,px:"48px",pt:"32px",pb:"4px"},children:[(0,C.tZ)(ds,{title:t("team_settings_es_sso_title")}),f?(0,C.BX)(l.rUS,{color:Wb,hoverColor:Vb,activeColor:$b,onClick:()=>{Tg({ssoSetupStep:c.SsoSetupStep.ReturnToSsoSelection}),(0,i.uX)(e)},sx:{fontSize:"16px",display:"flex",textDecoration:"none",marginTop:"-18px"},children:[(0,C.tZ)(o.JO,{name:"ArrowLeftOutlined",size:"small",color:Vb,sx:{marginRight:"10px"}})," ","Back"]}):null]}),(0,C.tZ)(No,{mainContent:(0,C.tZ)(l.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,C.BX)(i.rs,{children:[(0,C.BX)(i.AW,{exact:!0,path:n,children:[(0,C.tZ)(Og,{pageContext:Mg.SelfHosted,onSetupClear:()=>m({ssoServiceProviderUrl:null})}),qb||(qb=(0,C.tZ)(Mh,{})),Z?(0,C.tZ)(o.ke,{title:t("team_settings_es_sso_migration_infobox_title"),description:t("team_settings_es_sso_migration_infobox_body")}):null,(0,C.tZ)(ib,{loading:r||null===b,esConfig:a,parentPath:n,disableSetupButton:!b||S}),(0,C.tZ)(Ub,{isSsoCapable:b,disableSetupButton:!b||!a?.config})]}),(0,C.tZ)(i.AW,{path:`${n}/encryption-service-settings`,children:r||p?Gb||(Gb=(0,C.tZ)(o.ZX,{})):(0,C.tZ)(Qh,{migratingFromSSOConnector:Z,onSave:()=>s(),teamSettings:_,updateTeamSettings:m,esConfig:a})}),(0,C.tZ)(i.AW,{path:`${n}/sso-settings`,children:Fb||(Fb=(0,C.tZ)(Ib,{}))})]})}),secondaryContent:(0,C.tZ)(Po,{description:t("team_settings_es_sso_setup_guide_description"),heading:t("team_settings_es_sso_setup_guide_heading"),linkText:t("team_settings_es_sso_setup_guide_link_text"),linkProps:{linkType:zo.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/360013149040"}})})]})},Kb=({closeDialog:e})=>{const{translate:t}=(0,y.Z)(),n=t.markup("team_settings_sso_desktop_infobox_warning_markup",{learnMore:ie.rh},{linkTarget:"_blank"});return(0,C.tZ)(l.VqE,{closeIconName:t("_common_dialog_dismiss_button"),isOpen:!0,onClose:()=>e(nd.dismiss),children:(0,C.BX)("div",{className:"container--m6KmsQvg_3",children:[(0,C.tZ)(l.$N8,{title:t("team_settings_enable_sso_dialog_activate_title")}),(0,C.tZ)(l.a7O,{children:(0,C.tZ)("div",{className:"toggleInfoBox--y5TmWAMYcl",children:n&&(0,C.tZ)(l.vDh,{severity:"warning",size:"small",title:n})})}),(0,C.tZ)(l.cNS,{primaryButtonOnClick:()=>e(nd.action),primaryButtonTitle:t("team_settings_enable_sso_dialog_activate_action"),secondaryButtonOnClick:()=>e(nd.dismiss),secondaryButtonTitle:t("team_settings_enable_sso_cancel")})]})})},Qb=({closeDialog:e})=>{const{translate:t}=(0,y.Z)();return(0,C.tZ)(gr.o,{isOpen:!0,onRequestClose:()=>e(nd.dismiss),footer:(0,C.tZ)(l.cNS,{primaryButtonTitle:t("team_settings_enable_sso_dialog_disable_action"),primaryButtonOnClick:()=>e(nd.action),secondaryButtonTitle:t("team_settings_enable_sso_cancel"),secondaryButtonOnClick:()=>e(nd.dismiss),intent:"danger"}),title:t("team_settings_enable_sso_dialog_disable_title"),children:t("team_settings_enable_sso_dialog_disable_description")})},Jb=({teamSettings:e,updateTeamSettings:t,teamId:n,planTier:a,setStepComplete:i})=>{var s;const[o,c]=(0,r.useState)(null!=(s=e?.ssoEnabled)&&s),[d,u]=(0,r.useState)(!1),[_,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)([]),[h,b]=(0,r.useState)(!1);(0,r.useEffect)((()=>{if(!o)return"legacy"===a||"team"===a?b(!0):void 0;i(ed.EnableSSO)}),[n,p,o,a,i]),(0,r.useEffect)((()=>{(async()=>{const e=await fe.C.getTeamDomains();e.success&&g(e.domains.filter((e=>"valid"===e.status)).map((e=>e.name)))})()}),[]);const{translate:x}=(0,y.Z)(),v=async e=>{if(m(!1),e!==nd.dismiss)try{const e=!o;await t({ssoEnabled:e}),c(e)}catch(e){u(!0)}};return(0,C.BX)("div",{className:"enableSSOContainer--VLsANoM8AQ",children:[(0,C.tZ)(Jc,{label:x("team_settings_enable_sso_test_title"),labelHelper:x("team_settings_enable_sso_test_description"),children:(0,C.tZ)(l.zxk,{type:"button",nature:"primary",onClick:()=>{(0,q.Yo)(`${e?.ssoServiceProviderUrl}/saml/login?redirect=test_idp`)},disabled:!(e&&e.ssoServiceProviderUrl),children:x("team_settings_enable_sso_test_button")})}),(0,C.tZ)(Jc,{label:x("team_settings_enable_sso_action_title"),labelHelper:x("team_settings_enable_sso_action_description"),children:h?(0,C.tZ)(l.zxk,{nature:"primary",onClick:()=>(0,q.Yo)(ie.Bw),type:"button",children:x("team_settings_enable_sso_contact_support")}):(0,C.BX)("div",{children:[(0,C.tZ)(l.ZDl,{onClick:()=>m(!0),checked:o,disabled:d}),o?(0,C.tZ)("div",{className:"toggleDescription--S3OccP6JDd",children:x("team_settings_enable_sso_action_toggle_description")}):null,d?(0,C.tZ)("div",{className:"toggleWarning--TU8a__FJDp",children:x.markup("team_settings_enable_sso_action_toggle_warning_markup")}):null]})}),_?o?(0,C.tZ)(Qb,{closeDialog:v}):(0,C.tZ)(Kb,{closeDialog:v}):null]})};var ey=n(568197);const ty=({isTeamSettingsLoading:e,teamSettings:t})=>{const{translate:n}=(0,y.Z)(),[a,i]=r.useState(""),[s,o]=r.useState(""),[l,c]=r.useState(""),d=t?.ssoServiceProviderUrl;return r.useEffect((()=>{!e&&d&&(i((0,ey.UQ)(d,"saml")),o((0,ey.UQ)(d,"saml/")),c((0,ey.UQ)(d,"saml/callback")))}),[e,d]),(0,C.BX)("div",{className:"configureIDPContainer--ACoVdM7s0N",children:[(0,C.tZ)(Jc,{label:n("team_settings_configure_idp_connector_metadata"),centerLabel:!0,children:(0,C.tZ)(hd.x,{inputValue:a,textInputProps:{fullWidth:!0,readOnly:!0}})}),(0,C.tZ)(Jc,{label:n("team_settings_configure_idp_entity_id"),centerLabel:!0,children:(0,C.tZ)(hd.x,{inputValue:s,textInputProps:{fullWidth:!0,readOnly:!0}})}),(0,C.tZ)(Jc,{label:n("team_settings_configure_idp_login_url"),centerLabel:!0,children:(0,C.tZ)(hd.x,{inputValue:l,textInputProps:{fullWidth:!0,readOnly:!0}})})]})};var ny=n(798783),ay=n.n(ny);const iy="connectorInfoContainer--e07d9cT8Hu",ry="textField--Nk7DpcX8Pp",sy="loading--sfYFOqhXPS",oy="installerButtonContainer--iP6MNTnQrn",ly="errorText--snbBoX2meA",cy=({keyValue:e,onGenerateClicked:t,isGeneratorDisabled:n,generatorDisabledText:a})=>{const{translate:i}=(0,y.Z)(),[s,o]=(0,r.useState)(!1),c=(0,r.useRef)(null);return(0,r.useEffect)((()=>{c.current&&new(ay())(c.current,{text:()=>e})}),[e]),(0,C.tZ)(Jc,{label:i("team_settings_connector_generator_title"),labelHelper:i("team_settings_connector_generator_description"),children:(0,C.tZ)("div",{className:"generatorContainer--_83Buo4tVF",children:(0,C.tZ)(l.ua7,{content:a,passThrough:!n,sx:{maxWidth:"210px"},children:(0,C.BX)("div",{className:n?"generatorDisableContent--Olv4UpdAqY":"",children:[(0,C.tZ)(l.zxk,{type:"button","aria-describedby":"errorKeyWarning",className:"generatorButton--I0z2qEK25R",onClick:()=>{o(!0),t()},disabled:n,children:i("team_settings_connector_generator_button")}),(0,C.tZ)("div",{className:"generatorInputContainer--M4lkXUrCCY",children:(0,C.tZ)(hd.x,{inputValue:e,textInputProps:{readOnly:!0,fullWidth:!0,disabled:n,style:{cursor:n?"not-allowed":"text"}},tooltipProps:{passThrough:n},iconButtonProps:{disabled:n}})}),s&&(0,C.tZ)("p",{id:"errorKeyWarning",className:ly,children:i("team_settings_connector_generator_warning")})]})})})})},dy="team_settings_connector_installer_tooltip",uy=({isTeamSettingsLoading:e,isSsoEnabled:t,idpMetadata:n,connectorUrl:a})=>{const{translate:i}=(0,y.Z)(),[s,o]=(0,r.useState)(""),[c,d]=(0,r.useState)("");(0,r.useEffect)((()=>{o("")}),[n,a]);const u=Boolean(n&&a&&(c||t));return(0,C.BX)(C.HY,{children:[(0,C.tZ)(cy,{keyValue:c,onGenerateClicked:async()=>{const e=await fe.C.generateSSOConnectorKey();d(e)},isGeneratorDisabled:t,generatorDisabledText:i("team_settings_connector_generator_instance_help")}),(0,C.tZ)(Jc,{label:i("team_settings_connector_installer_title"),labelHelper:i("team_settings_connector_installer_description"),children:(0,C.tZ)("div",{className:e?sy:oy,children:(0,C.BX)(l.ua7,{content:i(dy),passThrough:u,sx:{maxWidth:"210px"},children:[(0,C.BX)(l.zxk,{type:"button","aria-describedby":"configError",disabled:!u,onClick:async()=>{o("");const e=await fe.C.createSSOConnectorConfig({connectorUrl:a,connectorKey:c,idpMetadata:n});e.success?(0,vs.S)(e.config,"dashlane-sso-config.txt","text/plain"):e.success||o(e.error.code)},children:[(0,C.tZ)("div",{className:"downloadIcon--dtf6SHkd51",children:(0,C.tZ)(l._8t,{color:Wc()["--white"]})}),i("team_settings_connector_installer_config_button")]}),s?(0,C.tZ)("p",{id:"configError",className:ly,children:i("team_settings_connector_installer_error")}):null]})})}),(0,C.tZ)(Jc,{label:i("team_settings_connector_installer_setup_title"),labelHelper:i("team_settings_connector_installer_setup_description"),children:(0,C.tZ)("div",{className:e?sy:oy,children:(0,C.tZ)(l.ua7,{content:i(dy),passThrough:u,sx:{maxWidth:"210px"},children:(0,C.BX)(l.zxk,{type:"button",disabled:!u,onClick:()=>(0,q.Yo)(ie.nC),children:[(0,C.tZ)("div",{className:"openIcon--Jft6n3KJTS",children:(0,C.tZ)(l.RTC,{color:Wc()["--white"]})}),i("team_settings_connector_installer_button")]})})})})]})},_y="team_settings_connector_edit",my="team_settings_connector_save",py="team_settings_connector_saving",gy="team_settings_connector_success",hy=({isTeamSettingsLoading:e,saveConnectorURL:t,saveIdpMetadata:n,teamSettings:a})=>{var i,r;const{translate:s}=(0,y.Z)();return(0,C.BX)(C.HY,{children:[(0,C.tZ)(Jc,{label:s("team_settings_connector_metadata_title"),children:(0,C.tZ)("div",{className:iy,children:(0,C.tZ)(Ga.X,{isDisabled:e,multiLine:!0,defaultValue:null!=(i=a?.ssoIdpMetadata)?i:"",saveBtnLabel:s(my),savingBtnLabel:s(py),editBtnLabel:s(_y),placeholder:s("team_settings_connector_metadata_placeholder"),successMessage:s(gy),onSave:n,inputFieldClassName:"inputField--SXqAbTX3lX",textFieldClassName:ry})})}),(0,C.tZ)(Jc,{label:s("team_settings_connector_url_title"),labelHelper:s("team_settings_connector_url_description"),children:(0,C.tZ)("div",{className:iy,children:(0,C.tZ)(Ga.X,{isDisabled:e,defaultValue:null!=(r=a?.ssoServiceProviderUrl)?r:"",saveBtnLabel:s(my),savingBtnLabel:s(py),editBtnLabel:s(_y),placeholder:s("team_settings_connector_url_placeholder"),successMessage:s(gy),onSave:t,textFieldClassName:ry})})})]})},by=({setStepComplete:e,isTeamSettingsLoading:t=!1,teamSettings:n,updateTeamSettings:a})=>{var i,s,o;const{translate:l}=(0,y.Z)(),c=r.useCallback((async e=>{try{await a({ssoIdpMetadata:e})}catch(e){throw Error(l("team_settings_connector_metadata_error"))}}),[a,l]),d=r.useCallback((async e=>{try{const t=e?(0,ey.Yw)(e):null;await a({ssoServiceProviderUrl:t})}catch(e){throw Error(l("team_settings_connector_url_error"))}}),[a,l]),u=n?.ssoServiceProviderUrl,_=n?.ssoIdpMetadata;return r.useEffect((()=>{t||_&&u&&e(ed.SSOConnector)}),[t,u,_,e]),(0,C.BX)("div",{className:"ssoConnectorContainer--ndf4jAvwn0",children:[(0,C.tZ)(hy,{isTeamSettingsLoading:t,teamSettings:n,saveConnectorURL:d,saveIdpMetadata:c}),(0,C.tZ)(uy,{isTeamSettingsLoading:t,isSsoEnabled:null!=(i=n?.ssoEnabled)&&i,idpMetadata:null!=(s=n?.ssoIdpMetadata)?s:"",connectorUrl:null!=(o=n?.ssoServiceProviderUrl)?o:""})]})},yy=({lee:e})=>{const{translate:t}=(0,y.Z)(),[n,a]=(0,r.useState)(new Set),[i,s]=(0,r.useState)(new Set),[o,d]=(0,r.useState)(new Set([td.EnableSSO,td.SSOConnector]));(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacSettingsSsoLegacy)}),[]),(0,r.useEffect)((()=>{const e=new Set,t=new Set([td.EnableSSO,td.ConfigureIDP,td.SSOConnector]);n.has(ed.ClaimDomain)&&n.has(ed.VerifyDomain)&&(e.add(td.SSOConnector),e.add(td.ConfigureIDP),e.add(td.EnableSSO),t.delete(td.SSOConnector),t.delete(td.ConfigureIDP),t.delete(td.EnableSSO)),n.has(ed.EnableSSO)&&(e.delete(td.SSOConnector),e.delete(td.ConfigureIDP)),s(e),d(t)}),[n]);const u=(0,r.useCallback)((e=>{a((t=>{const n=e=>e.every((e=>t.has(e)));let a=!0;switch(e){case ed.EnableSSO|ed.VerifyDomain:a=!0;break;case ed.SSOConnector:a=n([ed.ClaimDomain,ed.VerifyDomain]);break;case ed.EnableSSO:a=n([ed.ClaimDomain,ed.VerifyDomain,ed.SSOConnector])}return a&&!t.has(e)?new Set([...t,e]):t}))}),[]),_=(0,r.useCallback)((e=>{a((t=>{const n=new Set(t);return e.forEach((e=>{n.delete(e)})),n}))}),[]),m=(0,N.ev)(e.globalState),{teamSettingsLoading:p,teamSettings:g,updateTeamSettings:b,planTier:x}=Ze(m),v=[{label:t("team_settings_sso_connector_title"),component:by,locked:o.has(td.SSOConnector),open:i.has(td.SSOConnector),index:2},{label:t("team_settings_sso_identity_provider_title"),component:ty,locked:o.has(td.ConfigureIDP),open:i.has(td.ConfigureIDP),index:3},{label:t("team_settings_sso_enable_title"),component:Jb,locked:o.has(td.EnableSSO),open:i.has(td.EnableSSO),index:4}];return(0,C.BX)(bp,{trailingContent:p?(0,C.tZ)(fr.Z,{containerClassName:"loadingContainer--Qcn7EL4GD5",size:40}):(0,C.tZ)(l.UQy,{size:"large",children:v.map((e=>(0,C.BX)(l.UlM,{open:e.open,readOnly:e.locked,children:[(0,C.tZ)(l._Oh,{children:`${e.index}. ${e.label}`}),(0,C.tZ)(l.rN7,{children:(0,C.tZ)("fieldset",{disabled:e.locked,children:(0,C.tZ)(e.component,{isTeamSettingsLoading:p,teamSettings:g,setStepComplete:u,updateTeamSettings:b,teamId:null!=m?m:null,planTier:null!=x?x:null})})})]},e.label)))}),title:t("team_settings_menu_title_single_sign_on"),children:[(()=>{if(!g||g.ssoEnabled)return null;if("team"===x||"legacy"===x){const e=t.markup("team_settings_sso_teamplan_infobox_warning_markup"),n=t("team_settings_sso_teamplan_infobox_warning_button");return(0,C.tZ)("div",{className:"infoBox--w1PtJInNuc",children:(0,C.tZ)(l.vDh,{title:e,size:"simple",secondaryLabel:n,secondary:()=>(0,q.Yo)(ie.Bw)})})}return null})(),(0,C.tZ)("p",{className:pp.settingsHeader,children:t("team_settings_sso_title")}),(0,C.tZ)(Jc,{label:t("team_settings_sso_guide_title"),labelHelper:t("team_settings_sso_guide_description"),children:(0,C.tZ)(xp.Z,{label:t("team_settings_sso_setup_button"),onClick:()=>{(0,q.Yo)(ie.nC)}})}),(0,C.tZ)(ld,{isTeamSettingsLoading:p,teamSettings:g,setStepComplete:u,uncompleteSteps:_,updateTeamSettings:b,teamId:m,planTier:x})]})};var xy=n(818995);const vy={title:"tac_settings_choose_sso_card_self_hosted_title",redirectUrl:"self-hosted-sso",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_self_hosted_card_not_simplified_setup_description",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"}]},Sy={title:"tac_settings_choose_sso_card_nitro_title",redirectUrl:"confidential-sso",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_nitro_card_simplified_setup_description",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"}]},fy={title:"tac_settings_choose_sso_card_sso_connector_title",redirectUrl:"sso-connector",supportedFeatures:[{title:"tac_settings_sso_self_hosted_card_zero_knowledge",description:"",isSupported:!0,iconName:"FeedbackSuccessOutlined"},{title:"tac_settings_sso_self_hosted_card_simplified_setup",description:"tac_settings_sso_self_hosted_card_not_simplified_setup_description",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_verified_domain",description:"",isSupported:!1,iconName:"FeedbackFailOutlined"},{title:"tac_settings_sso_self_hosted_card_scim_support",description:"",isSupported:!1,iconName:"FeedbackFailOutlined"}]},Zy=({backgroundColor:e,withBorder:t,paddingSize:n="normal",...a})=>(0,C.tZ)("div",{sx:{bg:null!=e?e:"ds.container.agnostic.neutral.quiet",p:"tight"===n?"24px":"32px 24px",border:t?"1px solid #8C8F9033":void 0,borderRadius:3,height:"fit-content"},...a});var Cy;const Ty=()=>{const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(!1),{teamId:i}=(0,Ce.fV)(),{clearSettings:s,initSsoProvisioning:c}=(0,$.u)(Sg.y);return i?(0,C.BX)(l.T5p,{as:Zy,backgroundColor:"ds.background.default",paddingSize:"normal",gridTemplateRows:"auto 1fr auto",justifyItems:"center",children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",children:"Use this button to reset the SSO configuration in case of error"}),(0,C.tZ)(o.zx,{layout:"iconLeading",tooltip:"Reset SSO configuration","aria-label":"Reset SSO Button",icon:"ActionRefreshOutlined",type:"button",isLoading:e,onClick:async()=>{try{t(!0);const e=await s({teamId:i});(0,V.d6)(e)&&i&&await c({teamId:i})}catch(e){console.error(e),a(!0)}finally{t(!1)}},children:"Reset"}),n?Cy||(Cy=(0,C.tZ)(o.nv,{color:"ds.text.danger.standard",textStyle:"ds.body.standard.regular",children:"Reset has fail, please check the console"})):null]}):null},Dy=({title:e,description:t,isSupported:n,iconName:a,disabled:i=!1})=>{const{translate:r}=(0,y.Z)();return(0,C.BX)(l.Ejs,{flexDirection:"row",gap:"8px",flexWrap:"nowrap",alignItems:"flex-start",children:[(0,C.tZ)("div",{sx:{padding:"10px",borderRadius:"12px",background:void 0===n?i?"ds.container.expressive.brand.quiet.disabled":"ds.container.expressive.brand.quiet.idle":n?"ds.container.expressive.positive.quiet.disabled":"ds.container.expressive.danger.quiet.disabled"},children:(0,C.tZ)(o.JO,{name:a,color:i?"ds.border.brand.quiet.idle":"ds.text.brand.standard"})}),(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"4px",children:[(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:i?"ds.text.oddity.disabled":"ds.text.neutral.catchy",children:r(e)}),t?(0,C.tZ)(o.nv,{textStyle:"ds.body.helper.regular",color:i?"ds.text.oddity.disabled":"ds.text.neutral.quiet",children:r(t)}):null]})]})},ky=({title:e,redirectUrl:t,optionNumber:n,supportedFeatures:a,buttonLabel:r,onCtaClick:s,disabled:c=!1,selected:d=!1,featureCardStatus:u="NOT_STARTED"})=>{const{translate:_}=(0,y.Z)(),m=(0,i.k6)(),p=`${(0,i.$B)().path}/${t}`;return(0,C.tZ)(l.Zbd,{sx:{padding:"24px",borderColor:d?"ds.border.brand.standard.idle":"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",width:"100%"},children:(0,C.BX)(l.T5p,{gridTemplateAreas:"'option badge' 'title title' 'body body' 'button button'",children:[(0,C.tZ)(l.dDn,{gridArea:"option",sx:{marginBottom:"8px"},children:(0,C.tZ)(o.nv,{color:c?"ds.text.oddity.disabled":"ds.text.neutral.quiet",textStyle:"ds.body.helper.regular",children:`${_("tac_settings_directory_sync_card_option")} ${n}`})}),"ACTIVATED"===u||"STARTED"===u?(0,C.tZ)(l.dDn,{gridArea:"badge",justifySelf:"right",children:(0,C.tZ)(o.Ct,{mood:"ACTIVATED"===u?"positive":"warning",intensity:"catchy",label:_("ACTIVATED"===u?"tac_settings_directory_sync_card_badge_enabled":"tac_settings_feature_card_badge_configuration_not_completed")})}):null,(0,C.tZ)(l.dDn,{gridArea:"title",sx:{marginBottom:"32px"},children:(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.section.medium",color:c?"ds.text.oddity.disabled":"ds.text.neutral.catchy",sx:{display:"inline-block"},children:_(e)})}),(0,C.tZ)(l.dDn,{gridArea:"body",children:(0,C.tZ)(l.Ejs,{gap:"32px",flexDirection:"column",sx:{marginBottom:"32px"},children:a.map((e=>(0,C.tZ)(Dy,{disabled:c,...e},n+e.title)))})}),(0,C.tZ)(l.dDn,{gridArea:"button",justifySelf:"right",children:(0,C.tZ)(o.zx,{role:"button",onClick:()=>{s?.(),m.push(p)},disabled:c,intensity:"catchy",children:r})})]})})},Ey={CouldNotGetTeamStatus:"COULD_NOT_GET_TEAM_STATUS",TeamIdNotFound:"TEAM_ID_NOT_FOUND",UserNotAuthorized:"USER_NOT_AUTHORIZED",InvalidSsoState:"INVALID_SSO_STATE",GenericSsoError:"GENERIC_SSO_ERROR"},wy={ERROR_HEADER:"team_settings_sso_error_header",RETRY:"team_settings_sso_error_button_retry",RESET:"team_settings_sso_error_button_reset",RETRY_MODAL_TITLE:"team_settings_sso_error_retry_modal_title",RETRY_MODAL_BODY:"team_settings_sso_error_retry_modal_body",RETRY_MODAL_CANCEL:"team_settings_sso_error_retry_modal_button_cancel",RETRY_MODAL_CONFIRM:"team_settings_sso_error_retry_modal_button_confirm",COULD_NOT_GET_TEAM_STATUS:"team_settings_sso_error_message_team_status",TEAM_ID_NOT_FOUND:"team_settings_sso_error_message_team_id",USER_NOT_AUTHORIZED:"team_settings_sso_error_message_not_authorized",INVALID_SSO_STATE:"team_settings_sso_error_message_invalid_sso_state",GENERIC_SSO_ERROR:"team_settings_sso_error_message_generic"},Iy=({onReloadData:e,errorTag:t})=>{const{translate:n}=(0,y.Z)(),{clearSettings:a}=(0,$.u)(Sg.y),i=(0,me.o)("setup_rollout_reset_confidential_button"),{teamId:s}=(0,Ce.fV)(),[c,d]=(0,r.useState)(!1),[u,_]=(0,r.useState)(!1);return s?(0,C.BX)(l.Ejs,{alignItems:"center",justifyContent:"center",fullWidth:!0,gap:"40px",sx:{mt:"20vh",flexDirection:"column"},children:[(0,C.tZ)(o.JO,{name:"FeedbackFailOutlined",color:"ds.text.danger.quiet",sx:{height:"64px",width:"64px"}}),(0,C.BX)(l.Ejs,{alignItems:"center",flexDirection:"column",gap:"8px",children:[(0,C.tZ)(o.X6,{textStyle:"ds.title.section.large",as:"h1",children:n(wy.ERROR_HEADER)}),(0,C.tZ)(o.nv,{children:n(wy[Ey[t]])})]}),(0,C.BX)(l.Ejs,{gap:"16px",children:[i?(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",onClick:()=>d(!0),isLoading:u,children:n(wy.RESET)}),(0,C.tZ)(o.Vq,{actions:{primary:{children:n(wy.RETRY_MODAL_CONFIRM),onClick:async()=>{d(!1),_(!0),await a({teamId:s}),e()}},secondary:{children:n(wy.RETRY_MODAL_CANCEL),onClick:()=>d(!1)}},closeActionLabel:"Close",onClose:()=>d(!1),title:n(wy.RETRY_MODAL_TITLE),isOpen:c,isDestructive:!0,children:(0,C.tZ)(o.nv,{children:n(wy.RETRY_MODAL_BODY)})})]}):null,(0,C.tZ)(o.zx,{mood:"brand",intensity:"catchy",onClick:e,disabled:u,children:n(wy.RETRY)})]})]}):null};var Ny,Ay,My;const Oy=()=>{const{translate:e}=(0,y.Z)(),[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!0),[s,_]=(0,r.useState)(null),m=(0,g.s)(),p=(0,u._)(),b=(0,d.k)(Sg.y,"ssoProvisioning"),x=(0,d.k)(xy.m,"scimConfiguration"),{initSsoProvisioning:v}=(0,$.u)(Sg.y),{teamId:S}=(0,Ce.fV)(),f=(0,r.useCallback)((async e=>{if(!e)return;_("");const t=await v({teamId:`${e}`});(0,V.hx)(t)&&_(t.error.tag)}),[v]);(0,r.useEffect)((()=>{f(S).then((()=>{n(!0)}))}),[f,S]),(0,r.useEffect)((()=>{(0,h.Nc)(c.Page.TacSso)}),[]);const{resetButtonFF:Z,ssoMigrationFF:T,ssoConnectorCardFF:D}=(()=>{if(p.status!==Te.rq.Success)return{};const{setup_rollout_reset_confidential_button:e,itadmin_tac_encryptionservice_SSOmigration_reset:t,setup_rollout_web_ssoconnector_card:n}=p.data;return{resetButtonFF:null!=e&&e,ssoMigrationFF:null!=t&&t,ssoConnectorCardFF:null!=n&&n}})();if((0,r.useEffect)((()=>{p.status===Te.rq.Success&&m&&b.status===Te.rq.Success&&x.status===Te.rq.Success&&t&&i(!1)}),[m,Z,b.status,x.status,t,p]),a)return(0,C.tZ)(l.T5p,{justifyItems:"center",children:(0,C.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})});if(s||b.status===Te.rq.Error||x.status===Te.rq.Error)return(0,C.tZ)(Iy,{onReloadData:()=>{f(S)},errorTag:null!=s?s:""});if(b.status!==Te.rq.Success||x.status!==Te.rq.Success||!m)return null;const{inferredSsoState:k,ssoCapable:E}=b.data.global,w=!E||k===kg.s5.enum.Unknown,I=k===kg.s5.enum.SelfHostedIncomplete||k===kg.s5.enum.SelfHostedComplete,N=k===kg.s5.enum.NitroIncomplete||k===kg.s5.enum.NitroComplete,A=k===kg.s5.enum.SsoConnectorIncomplete||k===kg.s5.enum.SsoConnectorComplete||D;return(0,C.BX)(l.T5p,{gap:"16px",alignContent:"start",sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,C.BX)(l.T5p,{fullWidth:!0,gap:"24px",gridTemplateColumns:A?"1fr 1fr 1fr":"1fr 1fr",children:[(0,C.tZ)(ky,{selected:N,optionNumber:1,...Sy,buttonLabel:e(N?"tac_settings_choose_sso_confidential_card_button_edit":"tac_settings_choose_sso_confidential_card_button_setup"),disabled:w||k===kg.s5.enum.SelfHostedComplete||A,featureCardStatus:k===kg.s5.enum.NitroComplete?"ACTIVATED":k===kg.s5.enum.NitroIncomplete?"STARTED":"NOT_STARTED",onCtaClick:()=>{Tg({currentBillingPlanTier:m.spaceTier,ssoSetupStep:c.SsoSetupStep.ChooseYourSsoSolution})}}),(0,C.tZ)(ky,{optionNumber:2,...vy,selected:I,buttonLabel:e(I?"tac_settings_choose_sso_self_hosted_card_button_edit":"tac_settings_choose_sso_self_hosted_card_button_setup"),disabled:w||k===kg.s5.enum.NitroComplete||!!x.data.token||A&&!T,featureCardStatus:k===kg.s5.enum.SelfHostedComplete?"ACTIVATED":k===kg.s5.enum.SelfHostedIncomplete?"STARTED":"NOT_STARTED",onCtaClick:()=>{Dg({currentBillingPlanTier:m.spaceTier,ssoSetupStep:c.SsoSetupStep.ChooseYourSsoSolution})}}),A?(0,C.tZ)(ky,{optionNumber:3,...fy,buttonLabel:e("tac_settings_choose_sso_sso_connector_card_button_edit"),disabled:N||I,featureCardStatus:"ACTIVATED"}):null]}),Z?Ny||(Ny=(0,C.tZ)(Ty,{})):null]})},Ly=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)(l.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:[(0,C.BX)(l.T5p,{sx:{px:"48px",pt:"32px",pb:"12px"},children:[(0,C.tZ)(ds,{title:"Choose your single sign-on (SSO) configuration"}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:e("choose_sso_screen_paragraph_sso_description")}),(0,C.BX)("div",{sx:{display:"flex",alignItems:"center"},children:[(0,C.BX)(o.nv,{as:"a",href:"https://support.dashlane.com/hc/en-us/articles/360013149040",textStyle:"ds.body.standard.regular",color:"ds.text.brand.quiet",sx:{padding:"5px 5px 5px 0px",gap:"4px"},children:[" ",e("choose_sso_screen_link_lean_more")]}),Ay||(Ay=(0,C.tZ)(o.JO,{name:"ActionOpenExternalLinkOutlined",size:"small",color:"ds.text.brand.quiet"}))]})]}),My||(My=(0,C.tZ)(Oy,{}))]})};var By=n(385993);const Ry={ITEM:{display:"flex",flexDirection:"row",alignItems:"flex-start",gap:"16px"}},zy=({iconName:e,title:t,subtitle:n})=>{const{translate:a}=(0,y.Z)();return(0,C.BX)("div",{sx:Ry.ITEM,children:[(0,C.tZ)(o.JO,{name:e,size:"xlarge"}),(0,C.BX)("div",{children:[(0,C.tZ)(o.nv,{textStyle:"ds.title.block.medium",sx:{marginBottom:"5px"},children:a(t)}),(0,C.tZ)(o.nv,{textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.quiet",children:a(n)})]})]})};var Py;const Xy={WHATS_SSO:{i18nKey:"team_settings_sso_paywall_whats_sso",url:ie.Tz},ZERO_KNOWLEDGE:{i18nKey:"team_settings_sso_paywall_zero_knowledge",url:ie.mn},MULTI_DOMAINS:{i18nKey:"team_settings_sso_paywall_multi_domains",url:ie.I9},SELF_HOSTED:{i18nKey:"team_settings_sso_paywall_self_hosted",url:ie.bx},CONFIDENTIAL_SSO:{i18nKey:"team_settings_sso_paywall_confidential_sso",url:ie.Fn},IDENTITY_PROVIDER:{i18nKey:"team_settings_sso_paywall_identity_provider",url:ie.HX},HELP_CENTER:{i18nKey:"team_settings_sso_paywall_helper_center",url:ie.Tx}},jy={CONTAINER:{borderRadius:"8px",border:"1px solid ds.border.neutral.quiet.idle",padding:"32px",backgroundColor:"ds.background.default",display:"flex",flexDirection:"column",alignItems:"flex-start"},HEADER:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"8px",alignSelf:"stretch"},ITEMS:{display:"flex",flexDirection:"column",alignItems:"flex-start",gap:"32px",alignSelf:"stretch"},ACTIONS:{display:"flex",justifyContent:"space-between",alignItems:"center",alignSelf:"stretch"}},Uy=({isTrialOrGracePeriod:e})=>{const{translate:t}=(0,y.Z)(),{routes:n}=(0,i.Xo)(),a=(0,j.B)();return(0,C.BX)(l.T5p,{gap:"32px",alignContent:"start",sx:jy.CONTAINER,children:[(0,C.BX)("div",{sx:jy.HEADER,children:[(0,C.tZ)(o.Ct,{iconName:"PremiumOutlined",layout:"iconLeading",label:t("team_settings_sso_paywall_business_badge"),mood:"brand",intensity:"quiet"}),(0,C.tZ)(o.nv,{textStyle:"ds.title.section.large",children:t("team_settings_sso_paywall_title")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.quiet",children:t("team_settings_sso_paywall_description")})]}),(0,C.BX)("div",{sx:jy.ITEMS,children:[(0,C.tZ)(zy,{iconName:"ProtectionOutlined",title:"team_settings_sso_paywall_user_experience_item",subtitle:"team_settings_sso_paywall_user_experience_description"}),(0,C.tZ)(zy,{iconName:"FeatureDarkWebMonitoringOutlined",title:"team_settings_sso_paywall_transparency_item",subtitle:"team_settings_sso_paywall_transparency_description"}),(0,C.tZ)(zy,{iconName:"AccountSettingsOutlined",title:"team_settings_sso_paywall_access_item",subtitle:"team_settings_sso_paywall_access_description"}),(0,C.tZ)(zy,{iconName:"ToolsOutlined",title:"team_settings_sso_paywall_confidential_sso_item",subtitle:"team_settings_sso_paywall_confidential_sso_description"})]}),(0,C.BX)("div",{sx:jy.ACTIONS,children:[Py||(Py=(0,C.tZ)(By.a,{dropdownItems:Xy,titleKey:"team_settings_sso_paywall_learn_more"})),(0,C.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",role:e?"link":void 0,onClick:()=>{var t;(0,h.Kz)(new c.UserClickEvent({button:c.Button.UpgradeBusinessTier,clickOrigin:c.ClickOrigin.SsoPaywallPage})),e?(0,q.Yo)(`${ie.ub}?plan=business&subCode=${null!=(t=a?.subscriptionCode)?t:""}&utm_source=button:upgrade_business_tier+click_origin:sso_paywall_page+origin_page:tac/sso/paywall+origin_component:main_app`):(0,i.uX)(`${n.teamAccountChangePlanRoutePath}?plan=business`)},children:t("team_settings_sso_paywall_upgrade_business")})]})]})},qy=({isTrialOrGracePeriod:e})=>{const[t,n]=(0,r.useState)(!1);return(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacSsoPaywall)}),[]),(0,C.BX)(C.HY,{children:[(0,C.tZ)(No,{mainContent:(0,C.tZ)(l.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,C.tZ)(Uy,{isTrialOrGracePeriod:e})}),secondaryContent:(0,C.tZ)(Xo,{openContactDialog:()=>n(!0)})}),t?(0,C.tZ)(ae.c,{onDismiss:()=>n(!1)}):null]})};var Gy;const Fy="/confidential-sso",$y="/paywall",Vy=({lee:e})=>{var t;const n=(0,i.$B)(),{shouldShowBuyOrUpgradePaywall:a,isTrialOrGracePeriod:r,planType:s}=null!=(t=ve(e.permission.adminAccess))?t:{},o=a&&(s===p.lD.Starter||s===p.lD.Team);return(0,C.BX)(i.rs,{children:[(0,C.tZ)(i.AW,{path:`${n.path}/self-hosted-sso`,children:(0,C.tZ)(Yb,{backRoute:n.url})}),(0,C.tZ)(i.AW,{path:`${n.path}${Fy}`,children:(0,C.tZ)(Zh,{backRoute:n.url})}),(0,C.tZ)(i.AW,{path:`${n.path}${$y}`,children:(0,C.tZ)(qy,{isTrialOrGracePeriod:null!=r&&r})}),(0,C.tZ)(i.AW,{path:`${n.path}/sso-connector`,children:(0,C.tZ)(yy,{lee:e})}),(0,C.tZ)(i.AW,{exact:!0,path:n.path,children:o?(0,C.tZ)(i.l_,{to:`${n.path}${$y}`}):Gy||(Gy=(0,C.tZ)(Ly,{}))})]})};var Hy=n(758480);const Wy=({accountInfo:e})=>{const{translate:t}=(0,y.Z)(),{routes:n}=(0,i.Xo)();return e?.premiumStatus?(0,C.tZ)(o.ke,{title:t("team_settings_active_directory_paywall_title"),description:t("team_settings_active_directory_paywall_description"),actions:[(0,X.wt)(e.premiumStatus)?(0,C.tZ)(o.zx,{onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.UpgradeBusinessTier,clickOrigin:c.ClickOrigin.DirectorySyncPaywallPage})),(0,q.Yo)(`${ie.ub}?plan=business&subCode=${e?.subscriptionCode}`)},children:t("team_settings_active_directory_paywall_buy")},"buy"):(0,C.tZ)(i.rU,{to:`${n.teamAccountChangePlanRoutePath}?plan=business`,children:(0,C.tZ)(o.zx,{children:t("team_settings_active_directory_paywall_upgrade")})},"upgrade")],size:"large",sx:{marginBottom:"32px"}}):null};var Yy,Ky;const Qy="_common_generic_error",Jy=({lee:e,disableForm:t,adSyncEnabled:n,isAdSyncCapable:a,accountInfo:i})=>{const{translate:s}=(0,y.Z)(),{reportTACError:d}=K(),{lastADSyncDateError:u,lastADSyncDateLoading:_,lastADSyncDate:m}=function(){const[e,t]=(0,r.useState)(!1),[n,a]=(0,r.useState)(),[i,s]=(0,r.useState)(null),o=(0,r.useCallback)((async e=>{try{e.signal.aborted||t(!0);const n=await async function(){const e=await fe.C.getLastADSyncDate();if(e.success)return{lastSyncRequestForTeamUnix:e.data.lastSyncRequestForTeam,lastSuccessfulSyncRequestForTeamUnix:e.data.lastSuccessfulSyncRequestForTeam};throw new Error(`getScimLastSyncDate: failed with error ${e.error}`)}();e.signal.aborted||(a(n),t(!1),s(null))}catch(n){e.signal.aborted||(t(!1),s(n))}}),[]);return(0,r.useEffect)((()=>{const e=new AbortController;return o(e),()=>{e.abort()}}),[o]),{lastADSyncDateLoading:e,lastADSyncDate:n,lastADSyncDateError:i}}(),p=s.shortDate,[g,b]=(0,r.useState)(!0),[x,v]=(0,r.useState)(!1),[S,f]=(0,r.useState)(!1),[Z,T]=(0,r.useState)(!1),[D,k]=(0,r.useState)(!1),{inviteLinkDataForAdmin:E,getInviteLinkDataForAdmin:w}=(0,lu.h)(),[I,N]=(0,r.useState)(!1),[A,M]=(0,r.useState)(void 0),{teamId:O}=(0,Ce.fV)(),{teamSettings:L,teamSettingsLoading:B,updateTeamSettings:R}=Ze(O),z=(0,r.useCallback)((()=>e.apiMiddleware.teamPlans?e.apiMiddleware.teamPlans:(d(new Error("teamPlans service missing from apiMiddleware")),null)),[]);(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacSettingsDirectorySyncActiveDirectory)}),[]),(0,r.useEffect)((()=>{w()}),[w]);const P=(0,r.useCallback)((()=>{if(!L)return;const{activeDirectorySyncType:t,activeDirectoryToken:n,activeDirectorySyncStatus:a}=L;try{const i={activeDirectorySyncStatus:a,activeDirectorySyncType:t,activeDirectoryToken:n,teamId:O};M(n),e.dispatch(Hy.vo(i)),f(["full","deprovision-only"].includes(null!=t?t:"")),k((e=>["full","provision-only"].includes(e))(null!=t?t:"")),b(!1)}catch(e){console.error(`ActiveDirectorySettings - fetchData: failed with error: ${e}`)}}),[e,O,L]);(0,r.useEffect)((()=>{B&&P()}),[p,B,P]);const X=(e,t)=>e?t?"full":"provision-only":t?"deprovision-only":null,j=(0,ie.cI)(E?.teamKey);return(0,C.BX)(_h,{title:"Active Directory",children:[(0,C.tZ)(_u,{showSharingDialog:I,setShowSharingDialog:N}),(0,C.BX)(l.T5p,{gap:"10px",gridTemplateAreas:"'mainContent secondaryContent'",gridTemplateColumns:"auto 1fr",alignContent:"flex-start",children:[(0,C.tZ)(l.dDn,{gridArea:"mainContent",children:(0,C.BX)(bp,{children:[a?null:(0,C.tZ)(Wy,{accountInfo:i}),(0,C.tZ)(o.nv,{sx:{marginTop:t?"32px":void 0},color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:s("team_settings_active_directory_title_help")}),(0,C.tZ)(Jc,{label:s("team_settings_active_directory_header_label"),labelHelper:s("team_settings_active_directory_header_helper"),children:(0,C.tZ)("div",{children:(0,C.tZ)(xp.Z,{label:s("team_settings_active_directory_header_button_label"),onClick:()=>{window.open("https://support.dashlane.com/hc/articles/115002155485","_blank")}})})}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:s("team_settings_active_directory_title_status")}),(0,C.tZ)(Jc,{label:s("team_settings_active_directory_last_successful_sync_date_label"),children:_?Yy||(Yy=(0,C.tZ)(o.ZX,{color:"ds.oddity.focus",size:"medium"})):u?`${s("_common_generic_error")} ${u.message.toLowerCase()}`:m?.lastSuccessfulSyncRequestForTeamUnix?p((0,an.Z)(m.lastSuccessfulSyncRequestForTeamUnix),hn._T.lll):s("team_settings_active_directory_last_successful_sync_date_value_never")}),(()=>{const{activeDirectorySyncStatus:t}=e.state;return t?.failedSyncCount?(0,C.BX)(C.HY,{children:[(0,C.tZ)(Jc,{label:s("team_settings_active_directory_last_error_message_label"),children:(0,C.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:t.lastFailedSync?.error})}),(0,C.tZ)(Jc,{label:s("team_settings_active_directory_last_error_date_label"),children:(0,C.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:t?.lastFailedSync?p((0,an.Z)(t.lastFailedSync.eventDateUnix),hn._T.lll):null})}),(0,C.tZ)(Jc,{label:s("team_settings_active_directory_fail_count_label"),children:(0,C.tZ)("span",{sx:{color:"ds.text.danger.standard"},children:e.state.activeDirectorySyncStatus.failedSyncCount})})]}):null})(),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.strong",children:s("team_settings_active_directory_title_setup")}),(0,C.tZ)(Jc,{label:s("team_settings_active_directory_automated_provisioning_label"),labelHelper:s("team_settings_active_directory_automated_provisioning_helper"),children:(0,C.tZ)(yp.Z,{genericErrorMessage:s(Qy),isDisabled:g||Z||t,saveValueFunction:async()=>{if(Z)return Promise.resolve();T(!0);const t=!D,n=X(t,S);try{if(!L)return;let{activeDirectorySyncStatus:a}=L;if(!a){const e=await(async()=>{const e=await z();if(!e)return;const{activeDirectorySyncStatus:t,activeDirectoryToken:n}=await e.getADToken();return M(n),{activeDirectorySyncStatus:t,activeDirectoryToken:n}})();a=e?.activeDirectorySyncStatus}await R({activeDirectorySyncType:n}),e.dispatch(Hy.dV(n)),k(t),T(!1)}catch(e){d(e)}},value:D})}),(0,C.tZ)(Jc,{label:s("team_settings_active_directory_automated_deprovisioning_label"),labelHelper:s("team_settings_active_directory_automated_deprovisioning_helper"),children:(0,C.tZ)(yp.Z,{genericErrorMessage:s(Qy),isDisabled:g||x||t,saveValueFunction:async()=>{if(x)return Promise.resolve();v(!0);const t=!S,n=X(D,t);try{await R({activeDirectorySyncType:n}),e.dispatch(Hy.dV(n)),f(t),v(!1)}catch(e){d(e)}},value:S})}),(0,C.BX)(Jc,{label:s("team_settings_active_directory_cron_script_label"),labelHelper:s("team_settings_active_directory_cron_script_helper"),children:[(0,C.tZ)(Tm.n,{defaultValue:e.state.activeDirectoryScript,isDisabled:!0,multiLine:!0,style:{backgroundColor:"ds.container.expressive.neutral.quiet.active",fontSize:"12px",height:"180px",width:"300px"}}),(0,C.tZ)("div",{children:(0,C.tZ)(Cm.Z,{label:e.state.isCopied?s("team_settings_active_directory_button_copy_feedback"):s("team_settings_active_directory_button_copy_label"),onClick:()=>{navigator.clipboard.writeText(e.state.activeDirectoryScript).then((()=>{e.dispatch(Hy.Kk(!0)),window.setTimeout((()=>e.dispatch(Hy.Kk(!1))),700)}))},disabled:!A})})]})]})}),n?(0,C.tZ)(l.dDn,{gridArea:"secondaryContent",sx:{maxWidth:"500px",minWidth:"250px"},alignSelf:"flex-start",children:(0,C.tZ)(Po,{linkProps:{linkType:zo.ExternalLink},heading:s("team_settings_encryption_service_scim_invite_link_heading"),description:(0,C.BX)("div",{children:[(0,C.tZ)(o.nv,{sx:{mb:"8px"},children:s("team_settings_encryption_service_scim_invite_link_description_first")}),(0,C.BX)(o.nv,{as:"a",onClick:e=>{e.preventDefault(),navigator.clipboard.writeText(j),N(!0)},sx:{display:"flex",gap:"4px"},href:"_blank",children:[s("team_settings_encryption_service_scim_invite_link_copy"),Ky||(Ky=(0,C.tZ)(o.JO,{color:"ds.text.brand.standard",name:"ActionCopyOutlined",size:"medium"}))]})]})})}):null]})]})};var ex,tx;const nx={CONTAINER:{borderRadius:"8px",padding:"24px",border:"1px solid ds.border.neutral.quiet.idle",background:"ds.container.agnostic.neutral.supershy","& h1":{margin:"8px 0px"}},MAIN_TITLE:{margin:"8px 0px",fontFamily:"Public Sans",fontSize:"22px",fontStyle:"normal",fontWeight:"500",lineHeight:"28px"},CONTENT_CARD:{margin:"32px 0px",display:"flex",flexDirection:"row",gap:"16px"},CONTENT_CARD_FEATURE_TITLE:{fontSize:"16px",fontStyle:"normal",fontWeight:"500",lineHeight:"20px",color:"ds.text.neutral.catchy"},CONTENT_CARD_FEATURE_DESC:{color:"ds.text.neutral.quiet",fontSize:"13px",fontStyle:"normal",fontWeight:"400",lineHeight:"18px",maxWidth:"600px"},BUTTONS:{display:"flex",justifyContent:"space-between"}},ax={LINK_ZEROKNOWLEDGE:{i18nKey:"team_settings_directory_sync_scim_paywall_link_zeroknowledge",url:ie.mn},LINK_MULTIPLEDOMAINS:{i18nKey:"team_settings_directory_sync_scim_paywall_link_multiple_domains",url:ie.I9},LINK_SELFHOSTED:{i18nKey:"team_settings_directory_sync_scim_paywall_link_self_hosted",url:ie.uR},LINK_CONFIDENTIAL:{i18nKey:"team_settings_directory_sync_scim_paywall_link_confidential",url:ie.FP},LINK_IDP_INTEGRATION:{i18nKey:"team_settings_directory_sync_scim_paywall_link_idp",url:ie.uC},LINK_ADMIN_HC:{i18nKey:"team_settings_directory_sync_scim_paywall_link_help_center",url:ie.Tx}},ix=({isTrialOrGracePeriod:e})=>{const{translate:t}=(0,y.Z)(),{routes:n}=(0,i.Xo)(),a=(0,j.B)();return(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacSettingsDirectorySyncPaywall)}),[]),(0,C.BX)("div",{sx:nx.CONTAINER,children:[(0,C.tZ)(o.Ct,{iconName:"PremiumOutlined",label:t("team_settings_directory_sync_scim_paywall_business_badge"),layout:"iconLeading",intensity:"quiet",mood:"brand",sx:{height:"16px"}}),(0,C.tZ)("h2",{sx:nx.MAIN_TITLE,children:t("team_settings_directory_sync_scim_paywall_title")}),(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t("team_settings_directory_sync_scim_paywall_description")}),(0,C.BX)("div",{sx:nx.CONTENT_CARD,children:[ex||(ex=(0,C.tZ)(o.JO,{name:"ToolsOutlined",size:"xlarge",tooltip:"bli"})),(0,C.BX)("div",{children:[(0,C.tZ)("span",{sx:nx.CONTENT_CARD_FEATURE_TITLE,children:t("team_settings_directory_sync_scim_paywall_feature_selfhosted_title")}),(0,C.tZ)(o.nv,{sx:nx.CONTENT_CARD_FEATURE_DESC,children:t("team_settings_directory_sync_scim_paywall_feature_selfhosted_desc")})]})]}),(0,C.BX)("div",{sx:nx.CONTENT_CARD,children:[tx||(tx=(0,C.tZ)(o.JO,{name:"ToolsOutlined",size:"xlarge",tooltip:"bli"})),(0,C.BX)("div",{children:[(0,C.tZ)("div",{sx:{display:"flex",gap:"5px"},children:(0,C.tZ)("span",{sx:nx.CONTENT_CARD_FEATURE_TITLE,children:t("team_settings_directory_sync_scim_paywall_feature_confidential_title")})}),(0,C.tZ)(o.nv,{sx:nx.CONTENT_CARD_FEATURE_DESC,children:t("team_settings_directory_sync_scim_paywall_feature_confidential_desc")})]})]}),(0,C.BX)("div",{sx:nx.BUTTONS,children:[(0,C.tZ)(By.a,{dropdownItems:ax,titleKey:"team_settings_directory_sync_scim_paywall_dropdown_learn_more"}),(0,C.tZ)(o.zx,{layout:"iconLeading",icon:"PremiumOutlined",mood:"brand",intensity:"quiet",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.UpgradeBusinessTier,clickOrigin:c.ClickOrigin.DirectorySyncPaywallPage})),e?(0,q.Yo)(`${ie.ub}?plan=business&subCode=${a?.subscriptionCode}&utm_source=button:upgrade_business_tier+click_origin:directory_sync_paywall_page+origin_page:tac/settings/directory_sync/paywall+origin_component:main_app`):(0,i.uX)(`${n.teamAccountChangePlanRoutePath}?plan=business`)},role:e?"link":"button",children:t("team_settings_directory_sync_scim_paywall_upgrade_business")})]})]})},rx="SCIM provisioning is not currently supported by Confidential SSO",sx="If you plan to set up both SCIM and single sign-on (SSO), you'll need to use the self-hosted option. Both SCIM and self-hosted SSO require the encryption service you configure and host yourself on AWS or Azure.",ox="Learn more",lx=({isScimEnabled:e,isSCIMCapable:t,isTrialOrGracePeriod:n,onSetupClear:a,showPaywall:i})=>{const[s,c]=(0,r.useState)(!1),{teamId:u}=(0,Ce.fV)(),{clearSettings:_,initSsoProvisioning:m}=(0,$.u)(Sg.y),{data:p,status:g}=(0,d.k)(Sg.y,"ssoProvisioning");if(g!==Te.rq.Success)return null;const{global:{inferredSsoState:h}}=p;if(h===kg.s5.enum.NitroComplete)throw new Error("Invalid state: cannot access SCIM if the team is using Confidential SSO until the enclave supports SCIM.");if(!1===t&&i&&void 0!==n)return(0,C.tZ)(ix,{isTrialOrGracePeriod:n});if(h===kg.s5.enum.NitroIncomplete&&u&&!i){const e=async()=>{await _({teamId:u}),await m({teamId:`${u}`}),await(a?.())};return(0,C.BX)(C.HY,{children:[s?(0,C.tZ)(Ag,{onClose:()=>c(!1),onConfirm:e,titleText:"Are you sure?",bodyText:"This action can’t be undone."}):null,(0,C.tZ)(o.ke,{mood:"neutral",size:"large",title:"To use SCIM, clear Confidential SSO setup",description:(0,C.tZ)(Ng,{markdownValue:"If you want to use SCIM, select **Clear setup** to erase your progress in Dashlane. Make sure to also delete your progress in your IdP."}),actions:[(0,C.tZ)(o.zx,{onClick:()=>c(!0),children:"Clear setup"},"clear")]})]})}return h===kg.s5.enum.SelfHostedComplete||!1!==e||i?null:(0,C.tZ)(o.ke,{mood:"neutral",size:"large",title:rx,description:sx,actions:[(0,C.tZ)(l.rUS,{href:ie.B7,target:"_blank",rel:"noopener noreferrer",children:(0,C.tZ)(o.zx,{onClick:()=>{},children:ox})},"learn-more")]})};var cx;const dx=({lastSyncUnix:e,version:t,loading:n,refreshData:a})=>{const{translate:i}=(0,y.Z)();return(0,C.tZ)(eb.R,{children:n?cx||(cx=(0,C.tZ)(o.ZX,{})):(0,C.BX)(l.Ejs,{flexDirection:"column",gap:"5px",children:[(0,C.tZ)(l.k$b,{as:o.nv,textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${i("team_settings_directory_sync_last_sync")} ${e?(0,an.Z)(e).toLocaleString(navigator.language,{...hn.qG.lll,timeZoneName:"short"}):i("team_settings_directory_sync_not_available")}`}),(0,C.tZ)(l.k$b,{as:o.nv,textStyle:"ds.body.reduced.regular",color:"ds.text.neutral.standard",children:`${i("team_settings_encryption_service_version")} ${null!=t?t:i("team_settings_encryption_service_not_available")}`}),(0,C.BX)(l.k$b,{as:o.nv,innerAs:"a",color:"ds.text.brand.standard",sx:{textDecoration:"none",fontWeight:"normal",display:"flex",flexDirection:"row"},onClick:()=>a(),children:[(0,C.tZ)(o.JO,{name:"ActionRefreshOutlined",sx:{marginRight:"5px"},color:"ds.text.brand.standard",size:"xsmall"}),i("team_settings_scim_sync_refresh")]})]})})},ux=({loading:e,parentPath:t,teamSettings:n,esConfig:a,isScimCapable:r,disableSetupButton:s})=>{const c=(0,i.k6)(),{translate:d}=(0,y.Z)(),{teamDeviceConfigLoading:u,teamDeviceConfig:_}=xb({draft:!1,deviceAccessKey:a?.deviceAccessKey}),{teamDeviceLoading:m,teamDevice:p,refreshTeamDevice:g}=Nh(a?.deviceAccessKey),h=e||u,b=!n?.ssoServiceProviderUrl||h||s||!r,x=!_?.configProperties?.scimAuthToken;return(0,C.tZ)(l.Zbd,{children:(0,C.BX)(l.T5p,{as:l.aYP,gap:"8px",gridTemplateAreas:"'header button' 'description button' 'status status'",gridTemplateColumns:"1fr auto",sx:{bg:"white",border:"none"},children:[(0,C.tZ)(l.dDn,{as:o.X6,innerAs:"h3",size:"large",bold:!0,gridArea:"header",textStyle:"ds.title.section.medium",children:d("team_settings_directory_sync_scim_header")}),(0,C.tZ)(l.dDn,{gridArea:"description",as:o.nv,size:"small",textStyle:"ds.title.block.small",color:"ds.text.neutral.quiet",children:d("team_settings_directory_sync_scim_description")}),(0,C.tZ)(l.dDn,{gridArea:"button",children:(0,C.tZ)(Qg.M,{id:"scimSetupButton",loading:h,disabled:b,neverShowTooltip:s,size:"large",onClick:()=>{c.push(`${t}${fx}`)},content:d("team_settings_es_sso_setup_configure_es_tooltip"),mood:x&&!b?"brand":"neutral",intensity:x&&!b?"catchy":"quiet",children:d(x?"team_settings_directory_sync_scim_set_up_button":"team_settings_button_edit_label")})}),_?.configProperties?.scimEnabled?(0,C.tZ)(l.dDn,{gridArea:"status",sx:{mt:"20px"},children:(0,C.tZ)(dx,{loading:m,version:p?.version,refreshData:g,lastSyncUnix:p?.lastActivityDateUnix})}):null]})})};var _x,mx,px,gx=n(957459);const hx={GENERIC_ERROR:"_common_generic_error"},bx=({config:e,esEndpoint:t})=>{var n;const{translate:a}=(0,y.Z)(),s=(0,i.k6)(),{teamDeviceConfigLoading:c,teamDeviceConfig:d,updateTeamDeviceConfig:u,refreshTeamDeviceConfig:_,loadTeamDeviceConfigErrorCode:m}=xb({draft:!1,deviceAccessKey:e?.deviceAccessKey}),[p,g]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[x,v]=(0,r.useState)(!1),[S,f]=(0,r.useState)(!1),[Z,T]=(0,r.useState)(!1),D=c;(0,r.useEffect)((()=>{const e=m;e&&e!==Ch.Bf&&g(e)}),[m,a]);const k=()=>s.goBack(),E=async({values:e,resetForm:n})=>{v(!0),b(!1);const a={scimEnabled:e.encryptionServiceSync,teamDeviceUrl:null!=t?t:void 0};!S&&d?.configProperties?.scimAuthToken||(a.scimAuthToken=e.scimToken);const i=await u(a);f(!1),await _(),v(!1),i.success?i.data.encryptionServiceReloadingStatus===Dh.x.OK?(n({values:e}),k()):b(!0):g(i.error.code)},w={scimToken:(I=d?.configProperties?.scimAuthToken,null!=(N=I?.replace(/./g,"*"))?N:""),scimEndpoint:t?(0,ey.UQ)(t,"scim/2.0"):"",encryptionServiceSync:null!=(n=d?.configProperties?.scimEnabled)&&n};var I,N;const A=()=>{T(!1)};return(0,C.tZ)(ca.J9,{onSubmit:async(e,t)=>{e.encryptionServiceSync?T(!0):await E({values:e,resetForm:t.resetForm})},enableReinitialize:!0,initialValues:w,children:({values:e,setFieldValue:t,isSubmitting:n,dirty:i,resetForm:r})=>{var s,u;return(0,C.BX)(ca.l0,{autoComplete:"off",noValidate:!0,children:[(0,C.tZ)(kh.X,{dirty:i&&!x&&!h}),(0,C.BX)(l.Zbd,{children:[(0,C.tZ)(l.Ol2,{children:a("team_settings_directory_sync_scim_header")}),(0,C.BX)(l.aYP,{children:[(0,C.tZ)(o.ke,{mood:"brand",title:a("team_settings_directory_sync_scim_infobox")}),(0,C.BX)(l.T5p,{gridTemplateAreas:"'header button' 'desc button' 'inputField inputField'",gap:"8px",sx:{mt:"32px"},children:[(0,C.tZ)(l.dDn,{gridArea:"header",as:o.nv,innerAs:"label",htmlFor:"scimTokenInput",textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_token_label")}),(0,C.tZ)(l.dDn,{as:o.zx,gridArea:"button",type:"button",alignSelf:"right",intensity:"quiet",mood:"brand",disabled:D||n,onClick:()=>(e=>{f(!0),e("scimToken",(0,gx.Z)())})(t),sx:{height:"fit-content",width:"100%"},children:e.scimToken?a("team_settings_directory_sync_scim_set_up_reset_buttons"):a("team_settings_directory_sync_scim_set_up_generate_buttons")}),(0,C.tZ)(l.dDn,{gridArea:"desc",as:o.nv,size:"medium",sx:{marginBottom:"24px"},color:"ds.text.neutral.quiet",children:a("team_settings_directory_sync_scim_set_up_token_description")}),(0,C.tZ)(l.dDn,{gridArea:"inputField",children:(0,C.tZ)(ca.gN,{name:"scimToken",children:({field:t})=>t.value?(0,C.tZ)(hd.x,{inputValue:t.value,iconButtonProps:{disabled:Boolean(e.scimToken)&&!S||n},passwordInputProps:{disabled:Boolean(e.scimToken)&&!S||n,fullWidth:!0,readOnly:!0,...t,id:"scimTokenInput"}}):null})})]}),(0,C.BX)(l.T5p,{gridTemplateColumns:"auto",gap:"8px",children:[(0,C.tZ)(l.dDn,{as:o.nv,innerAs:"label",htmlFor:"endpointInput",sx:{marginTop:"32px"},textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_endpoint_label")}),(0,C.tZ)(ca.gN,{name:"scimEndpoint",children:({field:e})=>(0,C.tZ)(hd.x,{inputValue:e.value,textInputProps:{fullWidth:!0,readOnly:!0,...e,id:"endpointInput"}})})]}),_x||(_x=(0,C.tZ)("hr",{})),(0,C.BX)(l.T5p,{gridTemplateAreas:"'label toggle' 'desc .'",gap:"8px",children:[(0,C.tZ)(l.dDn,{gridArea:"label",as:o.nv,innerAs:"label",htmlFor:"encryptionServiceSync",textStyle:"ds.title.block.medium",children:a("team_settings_directory_sync_scim_set_up_service_label")}),(0,C.tZ)(l.dDn,{gridArea:"desc",as:o.nv,color:"ds.text.neutral.quiet",children:a("team_settings_directory_sync_scim_set_up_service_description")}),(0,C.tZ)(l.dDn,{gridArea:"toggle",children:c?mx||(mx=(0,C.tZ)(o.ZX,{mood:"brand"})):(0,C.tZ)(o.ZD,{disabled:D||n,id:"encryptionServiceSync",onChange:e=>((e,t)=>{t("encryptionServiceSync",e.currentTarget.checked)})(e,t),defaultChecked:null!=(s=d?.configProperties?.scimEnabled)&&s})})]})]}),(0,C.BX)(l.eWM,{children:[p?(0,C.tZ)(o.nv,{sx:{width:"40%",ml:0,mr:"auto"},textStyle:"ds.title.supporting.small",children:a(null!=(u=hx?.[p])?u:hx.GENERIC_ERROR)}):null,h?(0,C.tZ)(l.Ejs,{sx:{flexGrow:1,justifyContent:"center"},children:px||(px=(0,C.tZ)(Mh,{context:"SCIM"}))}):null,(0,C.tZ)(o.zx,{mood:"neutral",intensity:"quiet",size:"large",type:"button",onClick:k,children:a("team_settings_directory_sync_scim_set_up_button_cancel")}),(0,C.tZ)(o.zx,{type:"submit",disabled:D||n||!i,children:a("team_settings_directory_sync_scim_set_up_button_save_changes")})]})]}),Z?(0,C.tZ)(Yg,{title:a("team_settings_directory_sync_scim_confirm_dialog_title"),body:a("team_settings_directory_sync_scim_confirm_dialog_body"),primaryActionLabel:a("team_settings_directory_sync_scim_confirm_dialog_primary_action_label"),onCancel:A,onConfirm:()=>(async({values:e,resetForm:t})=>{await E({values:e,resetForm:t}),T(!1)})({values:e,resetForm:r})}):null]})}})};var yx;const xx=({isScimEnabled:e})=>{const{translate:t}=(0,y.Z)(),{getInviteLinkDataForAdmin:n}=(0,lu.h)(),[a,i]=(0,r.useState)(!1),[s,c]=(0,r.useState)(!1);return(0,C.BX)(l.Ejs,{gap:"6",children:[(0,C.tZ)(_u,{showSharingDialog:a,setShowSharingDialog:i}),s?(0,C.tZ)(du,{showActivationDialog:s,setShowActivationDialog:c,setShowSharingDialog:i}):null,(0,C.tZ)(Po,{linkProps:{linkType:zo.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/4404301553938?utm_source=extension"},heading:t("team_settings_encryption_service_scim_setup_guide_heading"),description:t("team_settings_encryption_service_scim_setup_guide_description"),linkText:t("team_settings_encryption_service_scim_setup_guide_link_text")}),e?(0,C.tZ)(Po,{linkProps:{linkType:zo.ExternalLink},heading:t("team_settings_encryption_service_scim_invite_link_heading"),description:(0,C.BX)("div",{children:[(0,C.tZ)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.standard.regular",sx:{mb:"8px"},children:t("team_settings_encryption_service_scim_invite_link_description_first")}),(0,C.BX)(l.k$b,{as:o.nv,innerAs:"a",color:"ds.text.brand.standard",onClick:async e=>{e.preventDefault();const t=await n();t?.disabled||!t?.teamKey?c(!0):i(!0)},gap:"4px",href:"_blank",children:[(0,C.tZ)("span",{children:t("team_settings_encryption_service_scim_invite_link_copy")}),yx||(yx=(0,C.tZ)(o.JO,{name:"ActionCopyOutlined",size:"medium",color:"ds.text.brand.standard"}))]})]})}):null]})};var vx,Sx;const fx="/scim-settings",Zx=({isScimEnabled:e,isScimCapable:t,teamSettings:n,updateTeamSettings:a,disableForm:s=!1,adSyncEnabled:d,ssoConnectorSetup:u})=>{const[_,m]=(0,r.useState)(!1),{translate:g}=(0,y.Z)(),{path:b}=(0,i.$B)(),{esConfig:x,esConfigLoading:v,refreshEncryptionServiceConfig:S}=Th(),f=(0,me.o)(Qa.w.ItadminTacEncryptionserviceSSOmigrationReset),Z=Boolean(f||!v&&u);(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacSettingsDirectorySyncSelfHostedScim)}),[]);const T=ve({hasBillingAccess:!0});if(!T)return null;const{shouldShowBuyOrUpgradePaywall:D,planType:k,isTrialOrGracePeriod:E}=T,w=D&&k!==p.lD.Business;return(0,C.tZ)(_h,{title:"Self-hosted SCIM",children:(0,C.tZ)(No,{mainContent:(0,C.tZ)(l.T5p,{gridTemplateColumns:"auto",gridAutoRows:"min-content",gap:"32px",children:(0,C.BX)(i.rs,{children:[(0,C.BX)(i.AW,{exact:!0,path:b,children:[w?(0,C.tZ)(lx,{isScimEnabled:e,isSCIMCapable:t,onSetupClear:()=>a({ssoServiceProviderUrl:null}),isTrialOrGracePeriod:E,showPaywall:!0}):(0,C.BX)(C.HY,{children:[vx||(vx=(0,C.tZ)(Mh,{})),(0,C.tZ)(lx,{isScimEnabled:e,isSCIMCapable:t,onSetupClear:()=>a({ssoServiceProviderUrl:null})}),d?(0,C.tZ)(o.ke,{size:"medium",mood:"neutral",title:g("team_settings_encryption_service_scim_setup_ad_sync_warning_heading"),description:g("team_settings_encryption_service_scim_setup_ad_sync_warning_description")}):null,Z?(0,C.tZ)(o.ke,{size:"medium",mood:"brand",title:g("team_settings_es_sso_migration_infobox_title"),description:(0,C.tZ)(o.nv,{children:g("team_settings_es_sso_migration_infobox_body")})}):null,(0,C.tZ)(ib,{parentPath:b,loading:v||null===t,esConfig:x,disableSetupButton:!1===t||s}),(0,C.tZ)(ux,{teamSettings:n,parentPath:b,loading:v||null===t,esConfig:x,isScimCapable:!0===t,disableSetupButton:s})]}),_?(0,C.tZ)(ae.c,{onDismiss:()=>m(!1)}):null]}),(0,C.tZ)(i.AW,{path:`${b}/encryption-service-settings`,children:v?Sx||(Sx=(0,C.tZ)(o.ZX,{mood:"brand"})):(0,C.tZ)(Qh,{migratingFromSSOConnector:Z,onSave:()=>S(),teamSettings:n,updateTeamSettings:a,esConfig:x})}),(0,C.tZ)(i.AW,{path:`${b}${fx}`,children:(0,C.tZ)(bx,{config:x,esEndpoint:n?.ssoServiceProviderUrl})})]})}),secondaryContent:w?(0,C.tZ)(Xo,{openContactDialog:()=>m(!0)}):(0,C.tZ)(xx,{isScimEnabled:e})})})},Cx={title:"tac_settings_directory_sync_card_title_confidential_scim",redirectUrl:"confidential-scim",supportedFeatures:[{title:"tac_settings_directory_sync_card_cloud_based",description:"tac_settings_directory_sync_card_cloud_based_description",iconName:"SettingsOutlined"},{title:"tac_settings_directory_sync_card_confidential_automatic_syncs",description:"tac_settings_directory_sync_card_confidential_automatic_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_user_provisioning",description:"tac_settings_directory_sync_card_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_sharing_group",description:"tac_settings_directory_sync_card_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},Tx={title:"tac_settings_directory_sync_card_title_selfhosted_scim",redirectUrl:"scim-provisioning",supportedFeatures:[{title:"tac_settings_directory_sync_card_selfhosted_scim_cloud_based",description:"tac_settings_directory_sync_card_selfhosted_scim_cloud_based_description",iconName:"AccountSettingsOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_confidential_automatic_syncs",description:"tac_settings_directory_sync_card_selfhosted_confidential_automatic_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_user_provisioning",description:"tac_settings_directory_sync_card_selfhosted_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_selfhosted_sharing_group",description:"tac_settings_directory_sync_card_selfhosted_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},Dx={title:"tac_settings_directory_sync_card_title_ad_sync",redirectUrl:"active-directory",supportedFeatures:[{title:"tac_settings_directory_sync_card_ad_sync_cloud_based",description:"tac_settings_directory_sync_card_ad_sync_cloud_based_description",iconName:"AccountSettingsOutlined"},{title:"tac_settings_directory_sync_card_automatic_ad_sync_syncs",description:"tac_settings_directory_sync_card_automatic_ad_sync_syncs_description",iconName:"ConfigureOutlined"},{title:"tac_settings_directory_sync_card_ad_sync_user_provisioning",description:"tac_settings_directory_sync_card_ad_sync_user_provisioning_description",iconName:"GroupOutlined"},{title:"tac_settings_directory_sync_card_ad_sync_sharing_group",description:"tac_settings_directory_sync_card_ad_sync_sharing_group_description",iconName:"FeedbackSuccessOutlined"}]},kx=({isNitroSSOActivated:e,isSelfhostedSSOActivated:t})=>{const{translate:n}=(0,y.Z)(),{routes:a}=(0,os.Xo)();return e||t?(0,C.tZ)(o.ke,{title:n(e?"tac_settings_directory_sync_card_disabled_selfhosted_incompatible":"tac_settings_directory_sync_card_disabled_confidential_incompatible"),size:"large"}):(0,C.tZ)(o.ke,{title:n("tac_settings_directory_sync_card_disabled_confidential_not_activated"),size:"large",actions:[(0,C.tZ)(o.zx,{as:i.rU,to:a.teamSettingsSsoConfidential,size:"small",children:n("tac_settings_directory_sync_card_disabled_confidential_not_activated_button")},"enable-confidential-sso")]})},Ex="tac_settings_directory_sync_card_button_setup",wx="tac_settings_directory_sync_card_button_edit",Ix=({ssoState:e,isAdSyncEnabled:t,isSelfhostedScimEnabled:n,isNitroSCIMEnabled:a,isLoading:i=!1,isSSOConnectorSetup:s})=>{const{translate:d}=(0,y.Z)(),u="NitroComplete"===e,_=u||"NitroIncomplete"===e,m=(e=>"SelfHostedComplete"===e||"SelfHostedIncomplete"===e)(e),p=(0,rs.S)(),[g,b]=(0,r.useState)(!0),[x,v]=(0,r.useState)(!1),S=ve({hasBillingAccess:!0}),f=a||n||t;return(0,r.useEffect)((()=>{p&&b(!!p.scim.enabled)}),[p]),(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacSettingsDirectorySync)}),[]),(0,r.useEffect)((()=>{S?.isTrialOrGracePeriod&&v(S.isTrialOrGracePeriod)}),[S]),i?(0,C.tZ)(l.T5p,{justifyItems:"center",children:(0,C.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})}):(0,C.BX)("div",{sx:{margin:"32px",display:"flex",gap:"32px",flexDirection:"column"},children:[(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",sx:{marginBottom:"16px"},children:d("tac_settings_directory_sync_header")}),(0,C.tZ)(o.nv,{sx:{marginBottom:"8px"},children:d("tac_settings_directory_sync_header_helper")}),(0,C.tZ)(Ro,{href:"https://support.dashlane.com/hc/articles/4404301553938?utm_source=extension",children:d("tac_settings_directory_sync_header_link")})]}),f?null:(0,C.tZ)(kx,{isNitroSSOActivated:u,isSelfhostedSSOActivated:m}),(0,C.tZ)(l.T5p,{fullWidth:!0,gridTemplateColumns:"repeat(3, 1fr)",gap:"24px",children:g?(0,C.BX)(C.HY,{children:[(0,C.tZ)(ky,{optionNumber:1,...Cx,selected:a,buttonLabel:d(a?wx:Ex),disabled:!a&&!u||m||n||t||s,featureCardStatus:a?"ACTIVATED":"NOT_STARTED",onCtaClick:()=>{(0,h.Kz)(new c.UserSetupConfidentialScimEvent({scimSetupStep:c.ScimSetupStep.ClickSetUp}))}}),(0,C.tZ)(ky,{optionNumber:2,...Tx,selected:n,buttonLabel:d(n?wx:Ex),featureCardStatus:n?"ACTIVATED":"NOT_STARTED",disabled:_||a||t||s}),(0,C.tZ)(ky,{optionNumber:3,...Dx,selected:t,featureCardStatus:t?"ACTIVATED":"NOT_STARTED",buttonLabel:d(t?wx:Ex),disabled:a||n})]}):(0,C.BX)(C.HY,{children:[(0,C.tZ)(ky,{optionNumber:1,...Dx,selected:t,featureCardStatus:t?"ACTIVATED":"NOT_STARTED",buttonLabel:d(t?wx:Ex),disabled:a||n}),(0,C.tZ)(ix,{isTrialOrGracePeriod:x})]})})]})},Nx=({isTokenGenerated:e})=>{const[t,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),{translate:s}=(0,y.Z)(),{generateScimToken:l}=(0,$.u)(xy.m),d=(0,r.useCallback)((async()=>{n(!0),await l(void 0),(0,h.Kz)(new c.UserSetupConfidentialScimEvent({scimSetupStep:e?c.ScimSetupStep.ReGenerateToken:c.ScimSetupStep.GenerateScimToken})),n(!1)}),[l,e]);return(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:s("tac_settings_confidential_scim_generate_token_header")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:s("tac_settings_confidential_scim_generate_token_header_helper")}),(0,C.tZ)(o.zx,{intensity:e?"quiet":"catchy",mood:"brand",isLoading:!e&&t,onClick:e?()=>i(!0):d,children:s(e?"tac_settings_confidential_scim_regenerate_token_button":"tac_settings_confidential_scim_generate_token_button")}),(0,C.tZ)(o.Vq,{actions:{primary:{children:s("tac_settings_confidential_scim_regenerate_token_dialog_primary_action"),onClick:()=>{d(),i(!1)},isLoading:t},secondary:{children:s("tac_settings_confidential_scim_regenerate_token_dialog_secondary_action"),onClick:()=>i(!1)}},closeActionLabel:"Close",onClose:()=>i(!1),title:s("tac_settings_confidential_scim_regenerate_token_dialog_title"),isOpen:a,children:(0,C.tZ)(o.nv,{children:s("tac_settings_confidential_scim_regenerate_token_dialog")})})]})},Ax="input_copy_button",Mx="input_copied_button_feedback",Ox=({scimApiToken:e,scimEndpoint:t})=>{const{translate:n}=(0,y.Z)(),[a,i]=(0,r.useState)(!1),[s,l]=(0,r.useState)(!1),d=async(e,t)=>{t&&(await navigator.clipboard.writeText(t),"token"===e?(i(!0),setTimeout((()=>i(!1)),2e3)):(l(!0),setTimeout((()=>l(!1)),2e3)))};return(0,C.BX)(C.HY,{children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:n("tac_settings_confidential_scim_copy_token_header")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:n("tac_settings_confidential_scim_copy_token_header_helper")}),(0,C.tZ)(o.ZI,{label:n("tac_settings_confidential_scim_copy_token_field_token_label"),value:null!=e?e:"",disabled:!e,readOnly:!!e,toggleVisibilityLabel:{hide:n("_common_password_hide_label"),show:n("_common_password_show_label")},sx:{marginBottom:"16px"},actions:[{iconName:"ActionCopyOutlined",label:n(a?Mx:Ax),key:"copy-token",onClick:async()=>{await d("token",null!=e?e:""),(0,h.Kz)(new c.UserSetupConfidentialScimEvent({scimSetupStep:c.ScimSetupStep.CopyApiToken}))}}]}),(0,C.tZ)(o.qo,{value:null!=t?t:"",label:n("tac_settings_confidential_scim_copy_token_field_endpoint_label"),disabled:!t,readOnly:!!t,actions:[{iconName:"ActionCopyOutlined",key:"copy-endpoint",label:n(s?Mx:Ax),onClick:async()=>{(0,h.Kz)(new c.UserSetupConfidentialScimEvent({scimSetupStep:c.ScimSetupStep.CopyEndpointLink})),await d("endpoint",null!=t?t:"")}}]})]})},Lx=({active:e})=>{const t=(0,r.useRef)(!1),{translate:n}=(0,y.Z)(),{updateScimConfiguration:a}=(0,$.u)(xy.m),{showToast:i}=(0,o.pm)();return(0,r.useEffect)((()=>(t.current&&i({description:n(e?"tac_settings_activate_automatic_provisioning":"tac_settings_deactivate_automatic_provisioning"),closeActionLabel:"close"}),()=>{t.current=!0})),[e]),(0,C.BX)(l.T5p,{gridTemplateAreas:"'title toggle' 'description toggle'",alignItems:"center",children:[(0,C.tZ)(l.dDn,{gridArea:"title",as:o.X6,id:"userProvisioningActivation",innerAs:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:n("tac_settings_confidential_scim_activate_header")}),(0,C.tZ)(l.dDn,{gridArea:"description",as:o.nv,textStyle:"ds.body.standard.regular",children:n("tac_settings_confidential_scim_activate_header_helper")}),(0,C.tZ)(l.dDn,{justifySelf:"end",gridArea:"toggle",as:o.ZD,"aria-labelledby":"userProvisioningActivation",sx:{marginLeft:"24px"},onChange:()=>{(0,h.Kz)(new c.UserSetupConfidentialScimEvent({scimSetupStep:e?c.ScimSetupStep.DeactivateDirectorySync:c.ScimSetupStep.ActivateDirectorySync})),a({active:!e})},checked:e})]})},Bx=({scimEndpoint:e,scimConfiguration:t})=>{const{translate:n}=(0,y.Z)();return(0,C.BX)(l.Ejs,{gap:"32px",flexDirection:"column",as:l.Zbd,sx:{padding:"32px"},children:[(0,C.tZ)(o.Ct,{mood:"neutral",intensity:"quiet",label:n("tac_settings_confidential_scim_user_provisioning_badge"),sx:{marginBottom:"calc(8px - 32px)"}}),(0,C.tZ)(l.k$b,{children:(0,C.tZ)(Nx,{isTokenGenerated:!!t.token})}),(0,C.tZ)(l.k$b,{children:(0,C.tZ)(Ox,{scimEndpoint:e?.endpoint,scimApiToken:t.token})}),(0,C.tZ)(l.k$b,{children:(0,C.tZ)(Lx,{active:t.active})})]})};var Rx,zx,Px,Xx=n(29270);const jx={SEATS_REVIEW_SECTION:{display:"flex",flexDirection:"row",gap:"24px",marginBottom:"24px"},SEATS_REVIEW_ITEM:{width:"120px",display:"flex",flexDirection:"column",gap:"4px"},VERTICAL_DIVIDER:{borderLeft:"1px solid ds.border.neutral.quiet.idle",height:"48px"},BUTTON_SECTION:{display:"flex",flexDirection:"row",gap:"8px"}},Ux=({onClickBuySeats:e})=>{const{translate:t}=(0,y.Z)(),{routes:n}=(0,i.Xo)(),{data:a}=(0,d.k)(_.o,"getTeamSeats"),r=(0,se.C)(),s=(0,j.B)();if(!(0,me.o)(Qa.w.EcommerceWebIdPErrorsPhase1)||!r||!s)return null;const u=`${ie.ub}?plan=business&subCode=${s.subscriptionCode}`;return(0,C.BX)(l.Zbd,{sx:{display:"flex",flexDirection:"column",gap:"8px",padding:"32px"},children:[(0,C.tZ)(o.Ct,{mood:"brand",intensity:"quiet",layout:"iconLeading",iconName:"PremiumOutlined",label:t("tac_settings_confidential_scim_review_seats_card_pro_tip_badge")}),(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_review_seats_card_header")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",sx:{marginBottom:"24px"},children:t("tac_settings_confidential_scim_review_seats_card_description")}),(0,C.BX)("div",{sx:jx.SEATS_REVIEW_SECTION,children:[(0,C.BX)("div",{sx:jx.SEATS_REVIEW_ITEM,children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_total_seats")}),(0,C.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.neutral.standard",children:a?a.paid:Rx||(Rx=(0,C.tZ)(o.ZX,{}))})]}),(0,C.tZ)("div",{sx:jx.VERTICAL_DIVIDER}),(0,C.BX)("div",{sx:jx.SEATS_REVIEW_ITEM,children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_occupied")}),(0,C.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.positive.quiet",children:a?a.paid-a.remaining:zx||(zx=(0,C.tZ)(o.ZX,{}))})]}),(0,C.tZ)("div",{sx:jx.VERTICAL_DIVIDER}),(0,C.BX)("div",{sx:jx.SEATS_REVIEW_ITEM,children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:t("tac_settings_confidential_scim_review_seats_card_free")}),(0,C.tZ)(o.nv,{textStyle:"ds.specialty.monospace.small",color:"ds.text.positive.quiet",children:a?a.remaining:Px||(Px=(0,C.tZ)(o.ZX,{}))})]})]}),(0,C.BX)("div",{sx:jx.BUTTON_SECTION,children:[r.isFreeTrial?(0,C.tZ)(o.zx,{mood:"brand",intensity:"quiet",layout:"labelOnly",role:"link",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.BuyDashlane,clickOrigin:c.ClickOrigin.ProTip})),(0,q.Yo)(u)},children:t("team_buy_dashlane")}):(0,C.tZ)(o.zx,{mood:"brand",intensity:"quiet",layout:"labelOnly",onClick:e,children:t("tac_settings_confidential_scim_review_seats_card_buy_seats_button")}),(0,C.tZ)(Xx.rU,{to:n.teamAccountRoutePath,children:(0,C.tZ)(o.zx,{mood:"brand",intensity:"supershy",layout:"labelOnly",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.ReviewSubscription,clickOrigin:c.ClickOrigin.ProTip}))},children:t("tac_settings_confidential_scim_review_seats_card_review_subscription_button")})})]})]})]})},qx=()=>{var e;const{translate:t}=(0,y.Z)(),{showToast:n}=(0,o.pm)(),[a,i]=(0,r.useState)(!1),{updateGroupProvisioningConfiguration:s}=(0,$.u)(Sg.y),{groupProvisioningConfiguration:u}=(()=>{const{data:e,status:t}=(0,d.k)(Sg.y,"getGroupProvisioningConfiguration");return t!==Te.rq.Success?{groupProvisioningConfiguration:null}:{groupProvisioningConfiguration:e}})();return null===u?null:(0,C.BX)(l.Zbd,{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[(0,C.BX)("div",{children:[(0,C.tZ)(o.Ct,{mood:"neutral",intensity:"quiet",label:t("tac_settings_confidential_scim_group_provisioning_badge"),sx:{marginBottom:"8px"}}),(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_group_provisioning_header")}),(0,C.tZ)(o.nv,{sx:{marginBottom:"24px"},children:t("tac_settings_confidential_scim_group_provisioning_description")}),(0,C.tZ)(o.Qj,{href:"https://support.dashlane.com/hc/articles/10992671925778?utm_medium=misc&utm_source=dashlane_admin_console#scim",isExternal:!0,onClick:()=>{(0,h.Kz)(new c.UserOpenHelpCenterEvent({helpCenterArticleCta:c.HelpCenterArticleCta.SeeGroupProvisioningSetupGuide}))},children:t("tac_settings_confidential_scim_group_provisioning_support_link")})]}),(0,C.BX)("div",{sx:{display:"flex",gap:"24px",flexDirection:"row",alignItems:"center"},children:[(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{id:"groupProvisioningActivation",as:"h2",textStyle:"ds.title.section.medium",sx:{marginBottom:"8px"},children:t("tac_settings_confidential_scim_group_provisioning_step_2_header")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",children:t("tac_settings_confidential_scim_group_provisioning_step_2_description")})]}),(0,C.tZ)(o.ZD,{"aria-labelledby":"groupProvisioningActivation",checked:null!=(e=u.groupProvisioningActivated)&&e,onChange:()=>(async()=>{var e;i(!0),"failure"===(await s({groupProvisioningActivated:null==(e=!u.groupProvisioningActivated)||e})).tag?n({mood:"danger",description:t("tac_settings_confidential_scim_group_provisioning_generic_error")}):(n({mood:"brand",description:t(u.groupProvisioningActivated?"tac_settings_confidential_scim_group_provisioning_toast_disabled":"tac_settings_confidential_scim_group_provisioning_toast_enabled")}),u.groupProvisioningActivated||(0,h.Kz)(new c.UserSetupConfidentialScimEvent({scimSetupStep:c.ScimSetupStep.ActivateGroupSync}))),i(!1)})(),readOnly:a})]})]})};var Gx;const Fx=()=>{var e,t;const{translate:n}=(0,y.Z)(),[a,i]=(0,r.useState)(),[s,o]=(0,r.useState)(),[l,d]=(0,r.useState)(!1),[u,_]=(0,r.useState)(!1),[m,b]=(0,r.useState)(),[x,v]=(0,r.useState)(),[S,f]=(0,r.useState)(!1),{scimConfiguration:Z,scimEndpoint:T}=(0,Qo.Y)(xy.m,{scimConfiguration:{},scimEndpoint:{}},[]),D=(0,g.s)(),k=()=>{D?.billingType===p.qo.Invoice?f(!0):d(!0),(0,h.Kz)(new c.UserClickEvent({button:c.Button.BuySeats,clickOrigin:c.ClickOrigin.ProTip}))};if((0,r.useEffect)((()=>{Z.status===Te.rq.Success&&Z.data&&i(Z.data)}),[Z.data?.active,Z.data?.token]),(0,r.useEffect)((()=>{T.status===Te.rq.Success&&T.data&&o(T.data)}),[T.data?.endpoint]),(0,r.useEffect)((()=>{(0,h.Nc)(c.PageView.TacSettingsDirectorySyncConfidentialScim)}),[]),!D)return null;const{lastBillingDateUnix:E,nextBillingDetails:w,spaceTier:I,seatsNumber:N,usersToBeRenewedCount:A}=D;return(0,C.BX)(C.HY,{children:[u?null:(0,C.tZ)(_h,{title:n("tac_settings_confidential_scim_header"),paragraph:n("tac_settings_confidential_scim_header_helper"),children:(0,C.tZ)(No,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:()=>(0,C.tZ)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:a?(0,C.BX)(C.HY,{children:[e||(e=(0,C.tZ)(Bx,{scimConfiguration:a,scimEndpoint:s})),a.active?t||(t=(0,C.tZ)(Ux,{onClickBuySeats:k})):null,Gx||(Gx=(0,C.tZ)(qx,{}))]}):null}),secondaryContent:(0,C.tZ)(Po,{heading:n("tac_settings_confidential_scim_help_card_header"),description:n("tac_settings_confidential_scim_help_card_description"),linkProps:{linkType:zo.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/360013149040",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.SeeSetupGuide,clickOrigin:c.ClickOrigin.NeedHelp}))}},linkText:n("tac_settings_confidential_scim_help_card_link")})})}),S?(0,C.tZ)(pr,{openUpgradeDialog:()=>{d(!0),f(!1)},handleClose:()=>f(!1)}):null,l?(0,C.tZ)(Ur,{nextBillingDetails:w,numberOfCurrentPaidSlots:N,numberOfCurrentUsedSlots:A,onUpgradeSuccess:(e,t)=>{b(e),v(t),d(!1),_(!0)},onRequestClose:()=>d(!1),planTier:I},E):null,u&&m&&x?(0,C.tZ)(es,{planTier:I,lastAdditionalSeatsDetails:m,lastBillingDetails:x,onNavigateBack:()=>{_(!1),b(void 0),v(void 0)}}):null]})},$x=()=>{var e,t;const{path:n}=(0,i.$B)(),{esConfig:a,esConfigLoading:s}=Th(),{teamDeviceConfig:c}=xb({draft:!1,deviceAccessKey:a?.deviceAccessKey}),{teamId:u}=(0,Ce.fV)(),{teamSettings:_={},teamSettingsLoading:m,updateTeamSettings:p,teamCapabilities:g}=Ze(u),h=(0,j.B)(),{initSsoProvisioning:b}=(0,$.u)(Sg.y),{data:y}=(0,d.k)(Sg.y,"ssoProvisioning"),{data:x,status:v}=(0,d.k)(xy.m,"scimConfiguration");(0,r.useEffect)((()=>{y?.global.inferredSsoState===kg.s5.enum.Unknown&&u&&b({teamId:`${u}`})}),[b,y?.global.inferredSsoState,u]);const S=!m&&_.activeDirectorySyncType,f=c?.configProperties.scimEnabled,Z=null!=(e=g?.activeDirectorySync.enabled)?e:null,T=f&&!S||!Z,D=y?.global.inferredSsoState===kg.s5.enum.NitroIncomplete||S&&!f,k=m||s||!h||y?.global.inferredSsoState===kg.s5.enum.Unknown||v===Te.rq.Loading,E=[kg.s5.enum.SsoConnectorComplete,kg.s5.enum.SsoConnectorIncomplete],w=y?.global.inferredSsoState&&E.includes(y?.global.inferredSsoState);return(0,C.tZ)(l.T5p,{gridTemplateColumns:"auto",gridTemplateRows:"auto 1fr",fullWidth:!0,sx:{height:"100%"},children:k?(0,C.tZ)(l.T5p,{justifyItems:"center",children:(0,C.tZ)(o.ZX,{size:75,sx:{marginTop:"20vh"}})}):(0,C.BX)(i.rs,{children:[(0,C.tZ)(i.Vy,{exact:!0,path:n,component:Ix,permission:e=>e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess,additionalProps:{ssoState:y?.global.inferredSsoState,isAdSyncEnabled:S,isSelfhostedScimEnabled:f,isNitroSCIMEnabled:x?.active,isLoading:k,isSSOConnectorSetup:w}}),(0,C.tZ)(i.Vy,{exact:!0,path:`${n}/confidential-scim`,component:Fx,permission:e=>e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess}),(0,C.tZ)(i.Vy,{path:`${n}/scim-provisioning`,component:Zx,additionalProps:{isScimEnabled:null!=f?f:null,isScimCapable:null!=(t=g?.scim.enabled)?t:null,teamSettings:_,updateTeamSettings:p,disableForm:D,adSyncEnabled:S,ssoConnectorSetup:w},permission:e=>e.adminAccess.hasFullAccess||e.adminAccess.hasBillingAccess}),(0,C.tZ)(i.Vy,{path:`${n}/active-directory`,component:Jy,additionalProps:{isAdSyncCapable:Z,disableForm:T,adSyncEnabled:S,accountInfo:h},reducer:Hy.ZP})]})})};var Vx=n(355102),Hx=n(55548),Wx=n(767950),Yx=n(24170);const Kx={INVALID_URL:"team_settings_set_siem_configuration_invalid_url",GENERIC_ERROR:"team_settings_set_siem_configuration_generic_error",TEAM_NOT_FOUND:"team_settings_set_siem_configuration_team_not_found",MISMATCHING_ADMIN_PROVISIONING_KEY:"team_settings_set_siem_configuration_mismatching_admin_provision_key",NO_SIEM_CONFIGURATION_UPDATE:"team_settings_set_siem_configuration_no_siem_configuration_update"},Qx=({token:e,instanceURL:t,active:n,isTeamAlreadyCreated:a,hasSiemPaywall:i})=>{const{translate:s}=(0,y.Z)(),{showToast:d}=(0,o.pm)(),{trackPageView:u}=(0,Hx.D)(),{setSiemConfiguration:_}=(0,$.u)(Vx.v),{createTeamInEnclave:m}=(0,$.u)(Wx.S),p=(0,r.useRef)(null),g=(0,r.useRef)(null),[b,x]=(0,r.useState)(!1),[v,S]=(0,r.useState)(""),[f,Z]=(0,r.useState)(!1),[T,D]=(0,r.useState)(!1),k=e&&t;(0,r.useEffect)((()=>{u({pageView:c.PageView.TacIntegrationsSplunk})}),[]);const E=n=>{e!==p.current?.value||t!==g.current?.value?x(!0):x(!1),"instanceURL"===n&&S("")},w=e=>{e.tag===Yx.M7.INVALID_URL?(S(s(Kx.INVALID_URL)),(0,h.Kz)(new c.UserSetupSplunkIntegrationEvent({splunkSetupStep:c.SplunkSetupStep.InvalidUrlError}))):(d({mood:"danger",description:s(e.tag in Kx?Kx[e.tag]:Kx.GENERIC_ERROR)}),(0,h.Kz)(new c.UserSetupSplunkIntegrationEvent({splunkSetupStep:"MISMATCHING_ADMIN_PROVISIONING_KEY"===e.tag?c.SplunkSetupStep.MismatchAdminProvisioningKeyError:"TEAM_NOT_FOUND"===e.tag?c.SplunkSetupStep.TeamNotFoundError:c.SplunkSetupStep.GenericError})))};return(0,C.BX)(C.HY,{children:[(0,C.tZ)(l.Zbd,{sx:{marginBottom:"24px"},children:(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:s("team_settings_splunk_configuration_step_1_title")}),(0,C.tZ)(o.nv,{sx:{marginBottom:"16px"},children:s("team_settings_splunk_configuration_step_1_description")}),(0,C.tZ)(o.ke,{mood:i?"neutral":"brand",title:s("team_settings_splunk_configuration_step_1_infobox")})]}),(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:s("team_settings_splunk_configuration_step_2_title")}),(0,C.tZ)(o.nv,{sx:{marginBottom:"24px"},children:s("team_settings_splunk_configuration_step_2_description")}),(0,C.BX)("div",{sx:{display:"flex",gap:"16px",flexDirection:"column"},children:[(0,C.tZ)(o.qo,{value:t,label:s("team_settings_splunk_configuration_instance_url_label"),ref:g,onChange:()=>E("instanceURL"),id:"splunk-instance-url-field",disabled:i,error:!!v,feedback:v||void 0}),(0,C.tZ)(o.ZI,{value:e,label:s("team_settings_splunk_configuration_token_label"),ref:p,onChange:()=>E("token"),disabled:i,"data-testid":"splunk-token-field",toggleVisibilityLabel:{show:s("_common_password_show_label"),hide:s("_common_password_hide_label")},isPasswordInitiallyVisible:!n},`splunk-token-field-active:${!!n}`)]})]}),(0,C.tZ)("div",{sx:{display:"flex",justifyContent:"end"},children:(0,C.tZ)(o.zx,{intensity:"catchy",disabled:!b||i,onClick:async()=>{Z(!0),a||await m();const e=!p?.current?.value||!g?.current?.value,t=await _({token:p?.current?.value.trim(),instanceURL:g?.current?.value.trim(),active:!e&&void 0});"failure"===t.tag?w(t.error):(d({mood:"brand",description:s("team_settings_splunk_integration_saved_toast")}),(0,h.Kz)(new c.UserSetupSplunkIntegrationEvent({splunkSetupStep:c.SplunkSetupStep.SaveTokens}))),Z(!1)},isLoading:f,children:s(k?"team_settings_siem_configuration_actions_update":"team_settings_siem_configuration_actions_save")})})]})}),(0,C.tZ)(l.Zbd,{children:(0,C.BX)("div",{sx:{display:"flex",gap:"32px",padding:"32px",alignItems:"center",justifyContent:"space-between"},children:[(0,C.BX)("div",{children:[(0,C.tZ)(o.X6,{as:"h2",sx:{marginBottom:"8px"},children:s("team_settings_splunk_configuration_step_3_title")}),(0,C.tZ)(o.nv,{children:s("team_settings_splunk_configuration_step_3_description")})]}),(0,C.tZ)("div",{children:(0,C.tZ)(o.ZD,{"aria-label":"activateSiemToggle",onChange:()=>(async e=>{D(!0);const t=await _({active:e});"failure"===t.tag?w(t.error):(d({mood:"brand",description:s(e?"team_settings_splunk_integration_activated_toast":"team_settings_splunk_integration_deactivated_toast")}),(0,h.Kz)(new c.UserSetupSplunkIntegrationEvent({splunkSetupStep:e?c.SplunkSetupStep.ActivateSplunkIntegration:c.SplunkSetupStep.DeactivateSplunkIntegration}))),D(!1)})(!n),checked:n,disabled:!k||T||i})})]})})]})},Jx=()=>{const{translate:e}=(0,y.Z)(),{routes:t}=(0,i.Xo)();return(0,C.tZ)(o.ke,{title:e("team_settings_splunk_paywall_title"),description:e("team_settings_splunk_paywall_description"),mood:"brand",size:"large",actions:[(0,C.tZ)(o.zx,{mood:"brand",intensity:"catchy",icon:"PremiumOutlined",layout:"iconLeading",as:Xx.rU,to:`${t.teamAccountChangePlanRoutePath}?plan=business`,children:e("team_settings_siem_paywall_upgrade_cta")},"upgrade")],sx:{margin:"16px 32px 32px 32px"}})};var ev;const tv=()=>{const[e,t]=(0,r.useState)(!1),{translate:n}=(0,y.Z)(),{teamId:a}=(0,Ce.fV)(),{initSsoProvisioning:i}=(0,$.u)(Sg.y),{data:s,status:u}=(0,d.k)(Vx.v,"getSiemConfiguration"),{data:_,status:m}=(0,d.k)(Sg.y,"ssoProvisioning"),g=(0,se.C)(),b=(0,r.useCallback)((async e=>{e&&await i({teamId:e})}),[i]);if((0,r.useEffect)((()=>{b(a).then((()=>{t(!0)}))}),[b,a]),!g)return null;const x=g.spaceTier!==p.lD.Business;return(0,C.tZ)(_h,{title:n("team_settings_siem_header"),paragraph:x?void 0:n("team_settings_siem_header_helper"),children:(0,C.BX)(C.HY,{children:[x?ev||(ev=(0,C.tZ)(Jx,{})):null,(0,C.tZ)(No,{sx:{padding:"0 32px"},fullWidth:!0,mainContent:(0,C.tZ)((({hasPaywall:t})=>{var n,a;return u===Te.rq.Success&&m===Te.rq.Success&&e?(0,C.tZ)(Qx,{token:null!=(n=s.token)?n:"",instanceURL:null!=(a=s.instanceURL)?a:"",active:s.active,isTeamAlreadyCreated:_.global.isTeamProvisionedInNitro,hasSiemPaywall:t}):(0,C.tZ)(l.Zbd,{children:(0,C.tZ)(l.Ejs,{fullWidth:!0,justifyContent:"center",children:(0,C.tZ)(o.ZX,{size:60,sx:{padding:"16px"}})})})}),{hasPaywall:x}),secondaryContent:(0,C.tZ)(Po,{heading:n("team_settings_siem_help_card_header"),description:n("team_settings_splunk_help_card_description"),linkProps:{linkType:zo.ExternalLink,linkHref:"https://support.dashlane.com/hc/articles/17674635955730",onClick:()=>{(0,h.Kz)(new c.UserClickEvent({button:c.Button.SeeSetupGuide,clickOrigin:c.ClickOrigin.NeedHelp}))}},linkText:n("team_settings_splunk_help_card_link")})})]})})};function nv({path:e}){return(0,C.tZ)(i.GB,{path:e,permission:e=>e.adminAccess.hasFullAccess,children:(0,C.BX)(i.rs,{children:[(0,C.tZ)(i.l_,{exact:!0,from:e,to:`${e}${a.B9.POLICIES}`}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.POLICIES}`,component:vg}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.DIRECTORY_SYNC}`,component:$x}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.DUO}`,component:Zp,reducer:mp.ZP}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.MASTER_PASSWORD_POLICIES}`,component:Ip,reducer:Dp.ZP}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.SSO}`,component:Vy}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.SIEM}`,component:tv})]})})}const av=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",rowGap:"4px"},children:[(0,C.tZ)(o.Ct,{label:e("team_integrations_mass_deployment_badge"),mood:"brand",intensity:"quiet"}),(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_mass_deployment_title")}),(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e("team_integrations_mass_deployment_description")})]}),(0,C.tZ)(o.Qj,{href:"https://support.dashlane.com/hc/articles/16995560527250-Mass-deploy-the-Dashlane-browser-extension",isExternal:!0,children:e("team_integrations_mass_deployment_link")})]})};var iv=n(647416);const rv=({containerTitle:e,containerDescription:t,isMainButtonDisabled:n=!1,disabledReason:a,mainButtonLink:i,badgeLabel:r,isCapable:s,children:l})=>(0,C.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,C.tZ)(o.Ct,{label:r,mood:i?"brand":"neutral",intensity:"quiet"}),(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e}),!!t&&(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:t})]}),l,!!n&&!!a&&s&&(0,C.tZ)(o.nv,{color:"ds.text.neutral.quiet",sx:{margin:"-28px 0px 0px 12px"},children:a})]}),sv=({subCardDescription:e,subCardHeader:t,image:n,externalLink:a,externalLinkTitle:r,externalLinkOnClick:s,isMainButtonDisabled:l=!1,mainButtonTitle:c,mainButtonLink:d,mainButtonOnClick:u,secondButtonTitle:_,secondButtonLink:m,upgradeButtonLink:p,isCapable:g})=>{const{translate:h}=(0,y.Z)();return(0,C.BX)("div",{sx:{display:"flex",flex:1,backgroundColor:"ds.background.alternate",padding:"24px",borderRadius:"8px"},children:[(0,C.BX)("div",{sx:{display:"flex",flex:n?3:1,flexDirection:"column",justifyContent:"center",gap:"10px"},children:[(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),e||a||d||p?(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"24px"},children:[e?(0,C.tZ)(o.nv,{textStyle:"ds.body.standard.regular",color:"ds.text.neutral.standard",children:e}):null,!!a&&(0,C.tZ)(o.Qj,{href:a,isExternal:!0,onClick:s,children:r}),g&&d?(0,C.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,C.tZ)(o.zx,{as:i.rU,to:d,disabled:l,onClick:u,children:c}),m?(0,C.tZ)(o.zx,{as:i.rU,to:m,mood:"neutral",intensity:"quiet",children:_}):null]}):p&&(0,C.tZ)(o.zx,{as:i.rU,to:p,layout:"iconLeading",icon:"PremiumOutlined",mood:"brand",intensity:"quiet",children:h("team_settings_directory_sync_scim_paywall_upgrade_business")})]}):null]}),n&&(0,C.tZ)("div",{sx:{display:"flex",justifyContent:"center",flex:1},children:(0,C.tZ)("img",{role:"presentation",alt:"",src:n,sx:{objectFit:"contain",width:"100%",height:"auto"}})})]})},ov=({containerTitle:e,containerDescription:t,subCardDescription:n,subCardHeader:a,image:i,externalLink:r,externalLinkTitle:s,externalLinkOnClick:o,isMainButtonDisabled:l=!1,disabledReason:c,mainButtonTitle:d,mainButtonLink:u,mainButtonOnClick:_,secondButtonTitle:m,secondButtonLink:p,badgeLabel:g,upgradeButtonLink:h,isCapable:b})=>(0,C.tZ)(rv,{containerTitle:e,containerDescription:t,isMainButtonDisabled:l,disabledReason:c,mainButtonLink:u,badgeLabel:g,isCapable:b,children:(0,C.tZ)(sv,{subCardDescription:n,subCardHeader:a,image:i,externalLink:r,externalLinkTitle:s,externalLinkOnClick:o,isMainButtonDisabled:l,mainButtonTitle:d,mainButtonLink:u,mainButtonOnClick:_,secondButtonTitle:m,secondButtonLink:p,upgradeButtonLink:h,isCapable:b})});var lv;const cv=({containerTitle:e,subCardTitle:t,editButtonLink:n,badgeLabel:a})=>{const{translate:r}=(0,y.Z)();return(0,C.BX)("div",{sx:{padding:"24px",borderColor:"ds.border.neutral.quiet.idle",backgroundColor:"ds.container.agnostic.neutral.supershy",borderRadius:"8px",display:"flex",flexDirection:"column",gap:"32px"},children:[(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,C.tZ)(o.Ct,{label:a,mood:"brand",intensity:"quiet"}),(0,C.tZ)(o.X6,{as:"h2",textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:e})]}),(0,C.BX)("div",{sx:{display:"flex",justifyContent:"space-between",backgroundColor:"ds.background.alternate",padding:"24px",borderRadius:"8px"},children:[(0,C.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t}),lv||(lv=(0,C.tZ)(o.Ct,{label:"Enabled",mood:"positive",intensity:"catchy",layout:"labelOnly"}))]}),(0,C.tZ)(o.zx,{as:i.rU,to:n,mood:"brand",intensity:"quiet",children:r("team_integrations_edit_button")})]})]})};var dv;const uv="team_integrations_siem_title",_v="team_integrations_siem_badge",mv=({active:e})=>{const{translate:t}=(0,y.Z)(),{routes:n}=(0,i.Xo)(),r=(0,me.o)("setup_rollout_splunk_integration_prod"),s=(0,se.C)()?.spaceTier===p.lD.Business,l=`${n.teamIntegrationsRoutePath}${a.B9.SIEM}`;return r?e?(0,C.tZ)(cv,{containerTitle:t(uv),subCardTitle:(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t("team_integrations_splunk_active_title")}),badgeLabel:t(_v),editButtonLink:l}):(0,C.tZ)(ov,{containerTitle:t(uv),subCardHeader:(0,C.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t("team_integrations_splunk_non_active_title")}),(0,C.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[dv||(dv=(0,C.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,C.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["5 ",t("team_integrations_time")]})]})]}),subCardDescription:t("team_integrations_splunk_non_active_subtitle"),badgeLabel:t(_v),externalLink:"https://support.dashlane.com/hc/articles/17674635955730",externalLinkTitle:t("team_integrations_splunk_non_active_link"),externalLinkOnClick:()=>(0,h.Kz)(new c.UserOpenHelpCenterEvent({helpCenterArticleCta:c.HelpCenterArticleCta.LearnAboutSplunkIntegration})),image:iv,mainButtonTitle:t("team_integrations_splunk_non_active_main_button"),mainButtonLink:l,mainButtonOnClick:()=>(0,h.Kz)(new c.UserClickEvent({button:c.Button.SetUp,clickOrigin:c.ClickOrigin.SplunkIntegration})),isCapable:s,upgradeButtonLink:`${n.teamAccountChangePlanRoutePath}?plan=business`}):(0,C.tZ)(ov,{containerTitle:t(uv),subCardHeader:(0,C.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:t("team_integrations_siem_subtitle")}),(0,C.tZ)(o.Ct,{label:t("team_integrations_siem_coming_soon"),layout:"labelOnly",intensity:"catchy",mood:"brand"})]}),subCardDescription:t("team_integrations_siem_subdescription"),badgeLabel:t(_v),isCapable:!1})};var pv,gv,hv=n(243389);const bv=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_sso_subcard_title")}),(0,C.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[pv||(pv=(0,C.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,C.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["10 ",e("team_integrations_time")]})]})]})},yv=({isCapable:e,isSelfhostedScimEnabled:t})=>{const{routes:n}=(0,i.Xo)(),{translate:r}=(0,y.Z)();return(0,C.tZ)(ov,{containerTitle:r("team_integrations_sso_card_title"),subCardHeader:gv||(gv=(0,C.tZ)(bv,{})),subCardDescription:r("team_integrations_sso_subcard_description"),image:hv,externalLink:"https://support.dashlane.com/hc/articles/10992671925778",externalLinkTitle:r("team_integrations_mass_deployment_link"),isMainButtonDisabled:t,disabledReason:r("team_integrations_sso_disabled"),mainButtonTitle:r("team_integrations_scim_main_button"),mainButtonLink:`${n.teamIntegrationsRoutePath}${a.B9.SSO}${Fy}`,secondButtonTitle:r("team_integrations_scim_second_button"),secondButtonLink:`${n.teamIntegrationsRoutePath}${a.B9.SSO}`,badgeLabel:r("team_integrations_sso_badge"),upgradeButtonLink:`${n.teamIntegrationsRoutePath}${a.B9.SSO}`,isCapable:e})},xv=({isConfidentialSSO:e,isSelfHostedSSO:t,isCapable:n,isSelfhostedScimEnabled:r})=>{const{translate:s}=(0,y.Z)(),{routes:l}=(0,i.Xo)();return e||t?(0,C.tZ)(cv,{containerTitle:s("team_integrations_sso_title"),subCardTitle:(0,C.tZ)(o.nv,{children:s(e?"team_integrations_confidential_sso_title":"team_integrations_self_hosted_sso_title")}),editButtonLink:`${l.teamIntegrationsRoutePath}${a.B9.SSO}${Fy}`,badgeLabel:s("team_integrations_sso_badge")}):(0,C.tZ)(yv,{isCapable:n,isSelfhostedScimEnabled:null!=r&&r})};var vv,Sv,fv=n(318246);const Zv=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)("div",{sx:{display:"flex",gap:"8px"},children:[(0,C.tZ)(o.X6,{as:"h3",textStyle:"ds.title.block.medium",color:"ds.text.neutral.catchy",children:e("team_integrations_confidential_scim")}),(0,C.BX)("div",{sx:{display:"flex",alignItems:"center",gap:"4px"},children:[vv||(vv=(0,C.tZ)(o.JO,{name:"TimeOutlined",size:"xsmall",color:"ds.text.neutral.standard"})),(0,C.BX)(o.nv,{color:"ds.text.neutral.standard",textStyle:"ds.body.helper.regular",children:["5 ",e("team_integrations_time")]})]})]})},Cv=({isCapable:e,isConfidentialSSOSetup:t,isSelfHostedSSOSetup:n})=>{const{routes:r}=(0,i.Xo)(),{translate:s}=(0,y.Z)();return(0,C.tZ)(ov,{containerTitle:s("team_integrations_scim_title"),subCardHeader:Sv||(Sv=(0,C.tZ)(Zv,{})),subCardDescription:s("team_integrations_scim_subcard_description"),image:fv,externalLink:"https://support.dashlane.com/hc/articles/10992671925778",externalLinkTitle:s("team_integrations_mass_deployment_link"),isMainButtonDisabled:!t&&!n,disabledReason:s("team_integrations_scim_disabled_reason"),mainButtonTitle:s("team_integrations_scim_main_button"),mainButtonLink:`${r.teamIntegrationsRoutePath}${a.B9.DIRECTORY_SYNC}/${Cx.redirectUrl}`,secondButtonTitle:s("team_integrations_scim_second_button"),secondButtonLink:`${r.teamIntegrationsRoutePath}${a.B9.DIRECTORY_SYNC}`,badgeLabel:s("team_integrations_scim_badge"),upgradeButtonLink:`${r.teamIntegrationsRoutePath}${a.B9.DIRECTORY_SYNC}`,isCapable:e})},Tv=({isNitroSCIMEnabled:e,isSelfhostedScimEnabled:t,isAdSyncEnabled:n,isCapable:r,isConfidentialSSO:s,isSelfHostedSSO:l})=>{const{translate:c}=(0,y.Z)(),{routes:d}=(0,i.Xo)();return e||t||n?(0,C.tZ)(cv,{containerTitle:c("team_integrations_scim_title"),subCardTitle:(0,C.tZ)(o.nv,{children:c(e?"team_integrations_confidential_scim":t?"team_integrations_self_hosted_scim":"team_integrations_active_directory")}),editButtonLink:`${d.teamIntegrationsRoutePath}${a.B9.DIRECTORY_SYNC}/${Cx.redirectUrl}`,badgeLabel:c("team_integrations_scim_badge")}):(0,C.tZ)(Cv,{isCapable:r,isConfidentialSSOSetup:s,isSelfHostedSSOSetup:l})},Dv=()=>{const{translate:e}=(0,y.Z)();return(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"16px"},children:[(0,C.tZ)(o.X6,{as:"h1",textStyle:"ds.title.section.large",children:e("team_settings_menu_title_integrations")}),(0,C.tZ)(o.nv,{children:e("team_integrations_title")})]})};var kv,Ev,wv;const Iv=()=>{var e;const[t,n]=(0,r.useState)(!1),a=(0,rs.S)(),{initSsoProvisioning:i}=(0,$.u)(Sg.y),s=(0,d.k)(Sg.y,"ssoProvisioning"),{data:l,status:c}=(0,d.k)(xy.m,"scimConfiguration"),{data:u,status:_}=(0,d.k)(Vx.v,"getSiemConfiguration"),{teamId:m}=(0,Ce.fV)(),{teamSettings:p={},teamSettingsLoading:g}=Ze(m),{esConfig:h}=Th(),{teamDeviceConfig:b}=xb({draft:!1,deviceAccessKey:h?.deviceAccessKey}),y=(0,r.useCallback)((async e=>{e&&await i({teamId:`${e}`})}),[i]),x=null==(e=a?.scim.enabled)||e;if((0,r.useEffect)((()=>{y(m).then((()=>{n(!0)}))}),[y,m]),s.status!==Te.rq.Success||c!==Te.rq.Success||_!==Te.rq.Success||!t)return(0,C.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:kv||(kv=(0,C.tZ)(o.ZX,{size:75}))});const{inferredSsoState:v}=s.data.global,S=v===kg.s5.enum.SelfHostedComplete,f=v===kg.s5.enum.NitroComplete,Z=!g&&p.activeDirectorySyncType,T=b?.configProperties.scimEnabled,D=l?.active,k=u?.active;return(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",gap:"32px",padding:"32px"},children:[Ev||(Ev=(0,C.tZ)(Dv,{})),(0,C.tZ)(xv,{isConfidentialSSO:f,isSelfHostedSSO:S,isCapable:x,isSelfhostedScimEnabled:!!T}),(0,C.tZ)(Tv,{isNitroSCIMEnabled:D,isAdSyncEnabled:!!Z,isCapable:x,isConfidentialSSO:f,isSelfHostedSSO:S,isSelfhostedScimEnabled:S}),wv||(wv=(0,C.tZ)(av,{})),(0,C.tZ)(mv,{active:k})]})};function Nv({path:e}){return(0,C.tZ)(i.GB,{path:e,permission:e=>e.adminAccess.hasFullAccess,children:(0,C.BX)(i.rs,{children:[(0,C.tZ)(i.Vy,{exact:!0,component:Iv,path:`${e}`,permission:e=>Ov("FULL",e),redirectPath:`${e}`}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.DIRECTORY_SYNC}`,component:$x}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.SSO}`,component:Vy}),(0,C.tZ)(i.Vy,{path:`${e}${a.B9.SIEM}`,component:tv})]})})}var Av=n(16037),Mv=n(897078);function Ov(e,t){return!t.adminAccess||t.adminAccess.hasPermissionLevel(e)}const Lv=({basePath:e,path:t})=>(0,C.tZ)(i.GB,{path:t,reducer:Mv.Z,permission:e=>e.loggedIn&&e.adminAccess.hasTACAccess,redirectPath:a.TT,component:kl,children:(0,C.BX)(i.rs,{children:[(0,C.tZ)(i.l_,{exact:!0,from:`${e}/`,to:`${e}/${Av.$.DASHBOARD}`}),(0,C.tZ)(i.Vy,{component:Ta,path:`${e}/${Av.$.CHANGE_PLAN}`,permission:e=>Ov("BILLING",e)}),(0,C.tZ)(i.Vy,{component:ns,path:`${e}/${Av.$.ACCOUNT}`,permission:e=>Ov("BILLING",e),redirectPath:`${e}/${Av.$.GROUPS}`}),(0,C.tZ)(i.Vy,{component:qc,path:`${e}/${Av.$.DASHBOARD}`,permission:e=>Ov("FULL",e),redirectPath:`${e}/${Av.$.ACCOUNT}`}),(0,C.tZ)(sl,{path:`${e}/${Av.$.ACTIVITY}`}),(0,C.tZ)(F_,{path:`${e}/${Av.$.GROUPS}`,permission:e=>Ov("GROUP_READ",e)}),(0,C.tZ)(i.Vy,{component:_p,path:`${e}/${Av.$.MEMBERS}`,permission:e=>Ov("FULL",e),redirectPath:`${e}/${Av.$.ACCOUNT}`,reducer:tm.ZP}),(0,C.tZ)(i.Vy,{component:Fu,path:`${e}/${Av.$.DARK_WEB_INSIGHTS}`,permission:e=>Ov("FULL",e),redirectPath:`${e}/${Av.$.DARK_WEB_INSIGHTS}`,reducer:tm.ZP}),(0,C.tZ)(nv,{path:`${e}/${Av.$.SETTINGS}`}),(0,C.tZ)(Nv,{path:`${e}/${Av.$.INTEGRATIONS}`})]})})},619122:(e,t,n)=>{n.d(t,{fV:()=>c,qc:()=>l});var a=n(696832),i=n(38452),r=n(739649),s=n(524130);const o=a.createContext({currentSpaceId:null,spaceDetails:null,teamId:null}),l=({lee:e,children:t})=>{var n;const a=(0,r.B)(e.globalState),l=null!=(n=(0,i.xO)(e.globalState)?.details)?n:null,c=(0,i.ev)(e.globalState);return(0,s.tZ)(o.Provider,{value:{teamId:c,currentSpaceId:a,spaceDetails:l},children:t})},c=()=>a.useContext(o)},758480:(e,t,n)=>{n.d(t,{vo:()=>i,ZP:()=>o,dV:()=>s,Kk:()=>r});const a=(0,n(158432).SP)("active-directory-settings",{activeDirectoryScript:"",activeDirectorySyncStatus:{failedSyncCount:0,lastFailedSync:null,lastSuccessfulSync:null},activeDirectorySyncType:null,isCopied:!1}),i=a.action("active-directory-settings-loaded",(({param:e})=>{var t,n,a;return{activeDirectoryScript:(n=e.activeDirectoryToken,a=e.teamId,`#################################################################################\n## dashlane-ad-sync.ps1\n##\n## For more information, please visit :\n## https://support.dashlane.com/hc/articles/115002155485\n##\n## This script will:\n## 1. Search each Group's GroupMembers\n## 2. Export all GroupMember AD User Email Address values to a temp CSV file\n## 3. Sign the data extract\n## 4. Synchronize the data with Dashlane\n#################################################################################\n\nPROCESS {\n##################################################################################\n## List the Group Names you'd like to extract Users from and sync with Dashlane ##\n##################################################################################\n\n$Groups = @(\n    "AGroup",\n    "AnotherGroup"\n)\n\n##################################################################################\n## Replace this with the attribute containing your employees' Dashlane logins   ##\n##################################################################################\n\n$DASHLANE_LOGIN_ATTR = "mail"\n\n#################################################################################\n##  DO NOT CHANGE THE PROCESS BELOW                                            ##\n#################################################################################\n\nImport-Module ActiveDirectory\n\nWrite-Host "Running Dashlane AD synchronization"\n\n$GroupMembers = @()\n$GroupInfos = @()\n$CSV_TEMP_PATH = $env:TEMP + "\\dashlane_export.csv"\n$INSTALL_TOKEN = "${n}"\n$TEAM_ID = "${a}"\n\n##################################################################################\n## Anaylzing Groups                                                                ##\n##################################################################################\n\nforeach ($Group in $Groups | Select-Object -Unique) {\n    Try {\n        $GroupInfo = Get-ADGroup -Identity $Group | Select Name, ObjectGUID\n        $GroupInfo | Add-Member Members @()\n\n        $Members = Get-ADGroupMember -Identity $Group | Get-ADUser -Properties Mail\n\n        # Roughly filtering out users with invalid emails.\n        # A user with an invalid email is filtered out by Dashlane servers: it will therefore not\n        # be included in the verified data, which will lead to an invalid signature check if it is\n        # included in the signed data.\n        $ValidMembers = $Members | Where-Object {($_ | Select -ExpandProperty $DASHLANE_LOGIN_ATTR) -like '*@*.*' }\n        # Lower case and trim all emails to make consistent with Dashlane servers; only need email\n        $ValidMembers = $ValidMembers | Select @{\n            Label=$DASHLANE_LOGIN_ATTR;\n            Expression={($_ | Select -ExpandProperty $DASHLANE_LOGIN_ATTR).ToLower().Trim() }\n        }\n        # Sort the users and get rid of any potential duplicates\n        $ValidMembers = $ValidMembers | Sort-Object -Property $DASHLANE_LOGIN_ATTR | Get-Unique -AsString\n        # Get a count\n        $measure = $ValidMembers | measure\n        $count = $measure.count\n        Write-Host "Exporting $count valid members from $Group"\n\n        if ($count -gt 0) {\n            foreach ($Member in $ValidMembers) {\n                $Member | Add-Member GroupName $GroupInfo.Name\n                $Member | Add-Member GroupGUID $GroupInfo.ObjectGUID\n                $GroupMembers += $Member\n                $GroupInfo.Members += $Member\n            }\n            $GroupInfos += $GroupInfo\n        }\n    } Catch {\n        $ErrorMessage = $_.Exception.Message\n        $FailedItem = $_.Exception.GetType().FullName\n\n        Write-Host "Error: $FailedItem - $ErrorMessage"\n        Write-Host "Message: It seems there is no account on this Group: $Group."\n        Exit 2\n    }\n}\n\n##################################################################################\n## Writing temp CSV                                                             ##\n##################################################################################\n\nWrite-Host ""\nWrite-Host "Writing debug information to $CSV_TEMP_PATH"\n$GroupMembers | Export-Csv -Path $CSV_TEMP_PATH -NoTypeInformation -Encoding UTF8\n\n##################################################################################\n## Generate signature                                                           ##\n##################################################################################\n\nTry {\n    $CspParameters = New-Object -TypeName System.Security.Cryptography.CspParameters\n    $CspParameters.KeyContainerName = "DashlaneDirectorySyncKey53"\n\n    $RSA = New-Object -TypeName System.Security.Cryptography.RSACryptoServiceProvider -ArgumentList $CspParameters\n    $PublicKey = $RSA.ToXmlString($false)\n    $PublicKeyHash = [System.Convert]::ToBase64String([System.Text.Encoding]::UTF8.GetBytes($PublicKey))\n\n    Write-Host ""\n    Write-Host "---------- Provide your Dashlane admin with this key on setup: -----------"\n    Write-Host ""\n    Write-Host $PublicKeyHash\n    Write-Host ""\n    Write-Host "--------------------------------------------------------------------------"\n    Write-Host ""\n\n    $RSAFormatter = New-Object -TypeName System.Security.Cryptography.RSAPKCS1SignatureFormatter -ArgumentList $RSA\n    $RSAFormatter.SetHashAlgorithm("SHA256")\n\n    $DataStr = $TEAM_ID\n    foreach ($GroupInfo in $GroupInfos | Sort-Object -Property ObjectGUID) {\n        $DataStr += $GroupInfo.ObjectGUID\n        $DataStr += $GroupInfo.Name\n\n        foreach ($Member in $GroupInfo.Members | Sort-Object -Property $DASHLANE_LOGIN_ATTR) {\n            $DashlaneLogin = $Member | Select -ExpandProperty $DASHLANE_LOGIN_ATTR\n            $DataStr += $DashlaneLogin\n        }\n    }\n\n    ## Uncomment following lines for debugging purposes on 'invalid_signature' error investigations\n    # Write-Host ""\n    # Write-Host "--------------------------------------------------------------------------"\n    # Write-Host ""\n    # Write-Host $DataStr\n    # Write-Host ""\n    # Write-Host "--------------------------------------------------------------------------"\n    # Write-Host ""\n\n    $DataBytes = [System.Text.Encoding]::UTF8.GetBytes($DataStr)\n    $SHA256 = New-Object -TypeName System.Security.Cryptography.SHA256CryptoServiceProvider\n    $DataHash = $SHA256.ComputeHash($DataBytes)\n\n    $SignatureBytes = $RSAFormatter.CreateSignature($DataHash)\n    $SignatureHash = [System.Convert]::ToBase64String($SignatureBytes)\n\n} Catch {\n    $ErrorMessage = $_.Exception.Message\n    $FailedItem = $_.Exception.GetType().FullName\n    Write-Host "Failed: $FailedItem - $ErrorMessage"\n    Exit 3\n}\n\n##################################################################################\n## Send data to Dashlane                                                        ##\n##################################################################################\n\n$FileContent = Get-Content $CSV_TEMP_PATH | Out-String\n$FileContentBytes = [System.Text.Encoding]::UTF8.GetBytes($FileContent)\n$FileContentEncoded = [System.Convert]::ToBase64String($FileContentBytes)\n\n[System.Net.ServicePointManager]::SecurityProtocol = [System.Net.SecurityProtocolType]::Tls12;\n\n$URL = "https://ws1.dashlane.com/1/teamPlans/syncFromDirectory"\n$Payload = @{adLogins=$FileContentEncoded;adToken=$INSTALL_TOKEN;teamId=$TEAM_ID;signature=$SignatureHash;publicKey=$PublicKeyHash}\n\nTry {\n    $Response = Invoke-WebRequest -Uri $URL -Method POST -Body $Payload\n    Write-Host "Dashlane sync responded with: $Response"\n\n} Catch {\n    $ErrorMessage = $_.Exception.Message\n    $FailedItem = $_.Exception.GetType().FullName\n    Write-Host ""\n    Write-Host "Dashlane sync error: $FailedItem - $ErrorMessage"\n}\n\n##################################################################################\n## Cleaning up temp CSV                                                         ##\n##################################################################################\n\nRemove-Item $CSV_TEMP_PATH\n\n}`),activeDirectorySyncStatus:e.activeDirectorySyncStatus||null,activeDirectorySyncType:null!=(t=e.activeDirectorySyncType)?t:null}})),r=a.action("script-copy-feedback-toggled",(({param:e})=>({isCopied:e}))),s=a.action("active-directory-sync-type-set",(({param:e})=>({activeDirectorySyncType:e}))),o=a},678128:(e,t,n)=>{n.d(t,{E4:()=>o,FC:()=>r,ZP:()=>c,a2:()=>s,k0:()=>i,qf:()=>l});const a=(0,n(158432).SP)("duo-settings",{hasDuo:!1,duoIntegrationKey:"",duoSecretKey:"",duoApiHostname:""}),i=a.action("duo-settings-loaded",(({param:e})=>({hasDuo:e.duo||!1,duoIntegrationKey:e.duoIntegrationKey||"",duoSecretKey:e.duoSecretKey||"",duoApiHostname:e.duoApiHostname||""}))),r=a.action("duo-set",(({param:e})=>({hasDuo:e}))),s=a.action("duo-integration-key-set",(({param:e})=>({duoIntegrationKey:e}))),o=a.action("duo-secret-key-set",(({param:e})=>({duoSecretKey:e}))),l=a.action("duo-api-hostname-set",(({param:e})=>({duoApiHostname:e}))),c=a},212637:(e,t,n)=>{n.d(t,{j:()=>c});var a=n(361607),i=n(133354),r=n(615142),s=n(78060),o=n(700091),l=n(728207);const c=()=>{var e;const t=(0,a._)(),n=t.status!==i.rq.Success,{[r.G.OnboardingWebAdminVaultGetStartedGuide]:c=!1}=n?{}:t.data,d=(0,o.F)(),u=(0,l.u)(),_=(0,s.m)();if(t.status===i.rq.Error||d.status===i.rq.Error||u.status===i.rq.Error||_.status===i.rq.Error)return{status:i.rq.Success,shouldDisplayAdminVaultGetStartedGuide:!1};if(t.status!==i.rq.Success||d.status!==i.rq.Success||u.status!==i.rq.Success||_.status!==i.rq.Success)return{status:i.rq.Loading};const m=c&&!d.isGetStartedDismissed&&u.teamCreationDate>=1702508400&&null!=(e=_.isTeamCreator)&&e;return{status:i.rq.Success,shouldDisplayAdminVaultGetStartedGuide:m}}},806135:(e,t,n)=>{n.d(t,{S:()=>s});var a=n(799852),i=n(133354),r=n(240581);const s=()=>{const e=(0,a.k)(r.o,"getTeamCapabilities");return e.status===i.rq.Success?e.data:null}},93437:(e,t,n)=>{n.d(t,{h:()=>s});var a=n(696832),i=n(823512),r=n(740300);function s(){const[e,t]=(0,a.useState)(!0),[n,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(null),[c,d]=(0,a.useState)(null),u=(0,a.useCallback)((async(e,t)=>{try{const n=await r.C.requestInviteLinkToken({teamUuid:e,login:t});if(n.success)return n.data;d(n.error.code)}catch{d(i.S2)}return null}),[]);return{inviteLinkDataLoading:e,inviteLinkError:c,inviteLinkData:n,inviteLinkDataForAdmin:o,getInviteLinkData:(0,a.useCallback)((async e=>{t(!0);try{const t=await r.C.getInviteLink({teamKey:e});if(t.success)return s(t.data),t.data;d(t.error.code)}catch{d(i.S2)}finally{t(!1)}return null}),[]),requestInviteLinkToken:u,getInviteLinkDataForAdmin:(0,a.useCallback)((async()=>{t(!0);try{const e=await r.C.getInviteLinkForAdmin({});if(e.success)return l(e.data),e.data;d(e.error.code)}catch{d(i.S2)}finally{t(!1)}return null}),[]),createInviteLink:(0,a.useCallback)((async e=>{t(!0);try{const t=await r.C.createInviteLink({displayName:e});if(t.success)return t.data;d(t.error.code)}catch{d(i.S2)}finally{t(!1)}return null}),[]),changeInviteLinkTeamKey:(0,a.useCallback)((async()=>{t(!0);try{const e=await r.C.changeInviteLinkTeamKey({});if(e.success)return e.data;d(e.error.code)}catch{d(i.S2)}finally{t(!1)}return null}),[]),toggleInviteLink:(0,a.useCallback)((async e=>{t(!0);try{const t=await r.C.toggleInviteLink({disabled:e});if(t.success)return t.data;d(t.error.code)}catch{d(i.S2)}finally{t(!1)}return null}),[])}}},874466:(e,t,n)=>{n.d(t,{ZP:()=>s,Zn:()=>r,x:()=>i});const a=(0,n(158432).SP)("master-password-policies-settings",{recoveryEnabled:!1}),i=a.action("master-password-policies-settings-loaded",(({param:e})=>({recoveryEnabled:Boolean(e.recoveryEnabled)}))),r=a.action("set-recovery-enabled",(({param:e})=>({recoveryEnabled:e}))),s=a},16037:(e,t,n)=>{n.d(t,{$:()=>a});let a=function(e){return e.ACCOUNT="account",e.ACTIVITY="activity",e.CHANGE_PLAN="account/changeplan",e.DASHBOARD="dashboard",e.GROUPS="groups",e.MEMBERS="members",e.SETTINGS="settings",e.DARK_WEB_INSIGHTS="dark-web-insights",e.INTEGRATIONS="integrations",e}({})},119471:(e,t,n)=>{n.d(t,{$b:()=>g,B7:()=>y,BJ:()=>Z,Bw:()=>m,Bz:()=>z,F1:()=>a,FL:()=>B,FP:()=>N,FX:()=>u,Fn:()=>k,HX:()=>f,I9:()=>T,Iw:()=>b,J0:()=>O,M:()=>$,Mv:()=>i,Pr:()=>x,Rf:()=>L,Tx:()=>w,Tz:()=>U,Vr:()=>l,XP:()=>F,bx:()=>D,cI:()=>H,hP:()=>E,hc:()=>p,i1:()=>X,lh:()=>j,mA:()=>M,mn:()=>q,n0:()=>_,nC:()=>v,o2:()=>G,oH:()=>d,rC:()=>r,rh:()=>C,sz:()=>R,tU:()=>S,to:()=>c,tz:()=>o,uC:()=>A,uR:()=>I,ub:()=>s,vS:()=>P,yi:()=>h,zF:()=>V});const a="https://app.dashlane.com",i="https://app.dashlane.com#/login",r="https://app.dashlane.com#/onboarding",s="https://www.dashlane.com/business/directbuy",o="https://www.dashlane.com/pricing",l="https://support.dashlane.com/hc",c="https://support.dashlane.com/hc/requests/new",d="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business",u="https://support.dashlane.com/hc/categories/200958889-Dashlane-Business",_="https://support.dashlane.com/hc/en-us/articles/360015304999-Joining-a-Dashlane-Business-plan-with-SSO-enabled#title2",m="https://support.dashlane.com/hc/requests/new",p="https://support.dashlane.com/hc/en-us/requests/new?utm_medium=misc&utm_source=dashlane_admin_console",g="https://support.dashlane.com/hc/en-us/articles/6351573344786?utm_medium=misc&utm_source=dashlane_admin_console",h="https://www.dashlane.com/download",b="https://support.dashlane.com/hc/articles/360014345059",y="https://support.dashlane.com/hc/articles/360014345059",x="https://dashlane.status.io/",v="https://support.dashlane.com/hc/articles/360013149040",S="https://support.dashlane.com/hc/articles/360000112339",f="https://support.dashlane.com/hc/articles/360013149040",Z="https://www.dashlane.com/business/sso-download",C="https://support.dashlane.com/hc/articles/360017434219",T="https://support.dashlane.com/hc/en-us/articles/210826449",D="https://support.dashlane.com/hc/en-us/articles/360015973719-Use-self-hosted-SSO-to-integrate-Dashlane-with-your-IdP",k="https://support.dashlane.com/hc/en-us/articles/10992671925778-Use-Dashlane-Confidential-SSO-to-integrate-with-your-IdP",E="https://support.dashlane.com/hc/en-us/articles/10992671925778",w="https://support.dashlane.com/hc/en-us/categories/200958889-Admins",I="https://support.dashlane.com/hc/en-us/articles/360013149040",N="https://support.dashlane.com/hc/en-us/articles/360013149040",A="https://support.dashlane.com/hc/en-us/articles/360013149040",M="https://www.dashlane.com/business-password-manager/enterprise",O="https://dashlane.zoom.us/webinar/register/6216504012380/WN_j-3JwzI0T1q1alUxHqsM7g#/registration",L="https://support.dashlane.com/hc/en-us/articles/212491369",B="https://support.dashlane.com/hc/articles/4516905332370",R="https://www.dashlane.com/terms",z="https://www.dashlane.com/privacy",P="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business&ticket_form_id=4659353761426&topic=upgrade_to_dashlane_business",X="https://support.dashlane.com/hc/requests/new?req_type=dashlane_for_business&topic=add_seats",j=`${l}/articles/4516905332370#chatbot`,U="https://www.dashlane.com/blog/what-is-single-sign-on-sso",q="https://www.dashlane.com/resources/dashlane-zero-knowledge-security",G="https://support.apple.com/HT202039",F="https://support.apple.com/HT204088",$="https://support.google.com/googleplay/answer/7018481?co=GENIE.Platform%3DDesktop",V="https://support.google.com/store/answer/6160235",H=(e="")=>`https://app.dashlane.com/#/team/signup?team=${e}`},127521:(e,t,n)=>{n.d(t,{MQ:()=>o,n5:()=>l,t2:()=>r,v0:()=>s}),n(233377);var a=n(38452);const i=e=>(e=>"function"==typeof e.getState)(e)?e.getState():e,r=e=>i(e).user.session.login,s=e=>{const t=r(e),n=i(e).user.session.uki;return n?{login:t||null,uki:n||null,teamId:(0,a.ev)(i(e))}:null},o=e=>i(e).user.session.sessionId,l=e=>i(e).user.session.anonymousUserId}}]);