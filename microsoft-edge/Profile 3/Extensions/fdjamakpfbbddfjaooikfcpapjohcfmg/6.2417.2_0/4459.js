"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4459],{568314:(e,t,i)=>{i.r(t),i.d(t,{CredentialEditPanel:()=>Re});var n,a=i(15192),s=i(799852),r=i(995445),o=i(133354),l=i(448430),d=i(382706),c=i(348958),p=i(982466),u=i(846097),_=i(569029),m=i(718108),h=i(466424),g=i(692077),b=i(832971),k=i(830894),w=i(696832),S=i(526849),x=i(914662),y=i(361607),C=i(482598),f=i(172721),v=i(310789),I=i(299074),Z=i(96862),D=i(86498),L=i(488203),A=i(806697),P=i(73875),E=i(376452),T=i(682994),U=i(133659),B=i(762042),R=i(99822),V=i(384885),q=i(555449),z=i(810291),G=i(696397),W=i(760790),N=i(117534),X=i(364438),O=i(684985),F=i(468037),M=i(524130);const H=w.memo((({credential:e,onClose:t,openWithNewUrlField:i,onUpdateLinkedWebsitesAddedByUser:a,hasLimitedRights:s,dashlaneDefinedLinkedWebsites:r})=>{const{translate:o}=(0,L.Z)(),[l,d]=w.useState(e.linkedURLs),[c,p]=w.useState(i);return w.useEffect((()=>{const t=e.linkedURLs,i=!(t.length===l.length&&t.every(((e,t)=>l[t]===e)));p(i),a(l)}),[l]),(0,M.BX)("div",{"data-testid":"linked-websites-tab",children:[(0,M.tZ)(X.zx,{"data-testid":"back-button",layout:"iconLeading",mood:"neutral",intensity:"supershy",onClick:t,icon:n||(n=(0,M.tZ)(X.JO,{name:"ArrowLeftOutlined"})),children:o("webapp_credential_linked_websites_title")}),(0,M.tZ)(F.u,{title:o("webapp_credential_linked_websites_section_primary"),description:o("webapp_credential_linked_websites_section_primary_description"),additionalSx:{marginTop:"24px"},children:(0,M.tZ)(O.a,{linkedWebsitesList:[e.URL],areItemsLocked:s,credentialId:e.id,isEditing:!1})}),(0,M.tZ)(F.u,{title:o("webapp_credential_linked_websites_section_added_by_user"),additionalSx:{marginTop:"16px"},children:(0,M.tZ)(O.a,{linkedWebsitesList:l,areItemsLocked:s,credentialId:e.id,isListEditable:!s,isEditing:c,showUrlProtocol:!0,updateLinkedWebsitesList:d})}),r&&r.length>1?(0,M.tZ)(F.u,{title:o("webapp_credential_linked_websites_section_added_by_dashlane"),description:o("webapp_credential_linked_websites_section_added_by_dashlane_description"),additionalSx:{marginTop:"16px"},children:(0,M.tZ)(O.a,{linkedWebsitesList:r,areItemsLocked:!0,credentialId:e.id,isEditing:!1})}):null]})})),j=({onClose:e,setDisplayLinkedWebsitesDataSavedAlert:t})=>{const{translate:i}=(0,L.Z)();return(0,w.useRef)(null).current=window.setTimeout((()=>t(!1)),5e3),(0,M.tZ)(v.YcA,{children:(0,M.tZ)(v.bZj,{size:v.k3y.SMALL,severity:v.BLW.SUCCESS,closeIconName:i("_common_alert_dismiss_button"),onClose:e,children:i("_common_toast_changes_saved")})})};var K=i(717676);const J=({onCancel:e,onLeavePageWithoutSaving:t})=>{const{translate:i}=(0,L.Z)();return(0,M.tZ)(K.o,{isOpen:!0,showCloseIcon:!0,title:i("webapp_credential_linked_websites_discard_dialog_title"),onRequestClose:e,footer:(0,M.BX)(v.Ejs,{justifyContent:"end",gap:"8px",children:[(0,M.tZ)(v.zxk,{type:"button",nature:"secondary",onClick:e,children:i("webapp_credential_linked_websites_discard_dialog_cancel")}),(0,M.tZ)(v.zxk,{type:"button",onClick:t,children:i("webapp_credential_linked_websites_discard_dialog_discard")})]}),children:(0,M.tZ)(v.Ejs,{flexDirection:"column",gap:"8px",sx:{width:"576px"},children:(0,M.tZ)(v.nvN,{children:i.markup("webapp_credential_linked_websites_discard_dialog_description_markup")})})})},Y=({duplicateData:e,onCancel:t,onSave:i})=>{const{translate:n}=(0,L.Z)(),a=e.length>1,s=a?n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_title_one",{url:e[0].linkedWebsite}),r=a?n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_multiple"):n("webapp_credential_linked_websites_duplicate_prevention_dialog_description_one",{credentialName:e[0].credentialName}),o=n(a?"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_multiple":"webapp_credential_linked_websites_duplicate_prevention_dialog_add_websites_one");return(0,M.tZ)(K.o,{isOpen:!0,showCloseIcon:!0,title:s,onRequestClose:t,footer:(0,M.BX)(v.Ejs,{justifyContent:"end",gap:"8px",children:[(0,M.tZ)(v.zxk,{type:"button",nature:"secondary",onClick:t,children:n("webapp_credential_linked_websites_duplicate_prevention_dialog_cancel")}),(0,M.tZ)(v.zxk,{type:"button",onClick:i,children:o})]}),children:(0,M.BX)("div",{children:[(0,M.tZ)("p",{children:r}),a?(0,M.tZ)("ul",{className:"duplicatesList--SwGmL5ftwe",children:e.map((e=>(0,M.tZ)("li",{className:"duplicateItem--mPX5urdfL2",children:e.linkedWebsite},e.linkedWebsite)))}):null]})})};var $=i(740300);const Q="webapp_password_history_detailed_password_view_button",ee=({credentialId:e})=>{const{translate:t}=(0,L.Z)(),{routes:i}=(0,g.Xo)(),n=i.userPasswordHistoryFilteredByCredential(e),[a,s]=(0,w.useState)(!1);return(0,w.useEffect)((()=>{$.C.getHasPasswordHistory(e).then((e=>{e&&s(!0)}))}),[e]),a?(0,M.tZ)("div",{children:(0,M.tZ)(g.rU,{to:n,tabIndex:-1,children:(0,M.tZ)(X.zx,{mood:"neutral",intensity:"supershy",title:t(Q),icon:"HistoryBackupOutlined",layout:"iconLeading",children:t(Q)})})}):null};var te=i(72133),ie=i(924058),ne=i(157668),ae=i(671738),se=i(139632);const re={exit:"exit--p4spwlkedE",exitActive:"exitActive--BIpaDF7MkX",exitDone:"exitDone--KzowOK4h4K",appear:"appear--OcvlWdq5He",appearActive:"appearActive--HVwCcEJzKz",appearDone:"appearDone--KgBJPzbyTA"},oe=w.memo((({onPrimaryClick:e})=>{const{translate:t}=(0,L.Z)(),[i,n]=w.useState(!1);return(0,M.tZ)(se.Z,{appear:!0,in:!i,timeout:600,classNames:re,onExited:e,children:(0,M.tZ)("div",{sx:{backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,M.tZ)(X.ke,{title:t("webapp_credential_edition_health_box_excluded_title"),description:t("webapp_credential_edition_health_box_excluded_description"),mood:"warning",size:"large",actions:[(0,M.tZ)(X.zx,{mood:"brand",intensity:"quiet",onClick:e=>{e.preventDefault(),n(!0)},size:"small",type:"button",children:t("webapp_credential_edition_health_box_include")},"primaryAction")]})})})}));var le=i(504253),de=i(365580);const ce={appear:"appear--MMCjEcRU3u",appearActive:"appearActive--LG103cUrNZ",appearDone:"appearDone--tuYaN3WTGO"},pe=w.memo((({onPrimaryClick:e,onSecondaryClick:t,isLimitedSharingPassword:i,corruptionData:n})=>{const{translate:a}=(0,L.Z)();if(!n)return null;const s=((e,t)=>{const{riskType:i}=e;switch(i){case le.gI.Compromised:return{title:t("webapp_credential_edition_health_box_compromised_title"),description:t("webapp_credential_edition_health_box_compromised_description"),secondary:t("webapp_credential_edition_health_box_view_compromised")};case le.gI.Reused:return{title:t("webapp_credential_edition_health_box_reused_title"),description:t.markup("webapp_credential_edition_health_box_reused_description_markup",{count:e.reuseCount}),secondary:t("webapp_credential_edition_health_box_view_reused")};case le.gI.Weak:return{title:t("webapp_credential_edition_health_box_weak_title"),description:t("webapp_credential_edition_health_box_weak_description"),secondary:t("webapp_credential_edition_health_box_view_weak")};default:return(0,de.U)(i)}})(n,a),r=n.severity===le.bp.STRONG?"warning":"brand";return(0,M.tZ)(se.Z,{in:!0,appear:!0,timeout:600,classNames:ce,children:(0,M.tZ)("div",{sx:{position:"relative",backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,M.tZ)(X.ke,{title:s.title,description:s.description,mood:r,size:"large",actions:[(0,M.tZ)(X.zx,{onClick:t,intensity:"quiet",size:"small",children:s.secondary},"view_health"),(0,M.tZ)(v.ua7,{passThrough:!i,content:a("webapp_credential_edition_health_box_change_limited"),placement:"left",sx:{maxWidth:"312px",fontSize:2},children:(0,M.tZ)(X.zx,{size:"small",onClick:e,disabled:i,children:a("webapp_credential_edition_health_box_change_password")})},"change_password")]})})})})),ue=JSON.parse('{"v":"5.7.0","fr":30,"ip":0,"op":26,"w":240,"h":240,"nm":"Loading Light Theme","ddd":0,"assets":[],"layers":[{"ddd":0,"ind":1,"ty":3,"nm":"Null 4","sr":1,"ks":{"o":{"a":0,"k":0,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[120,122,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"ip":0,"op":150,"st":0,"bm":0},{"ddd":0,"ind":2,"ty":4,"nm":"load","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.05490196078,0.2078431373,0.2392156863,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":1,"lj":1,"ml":4,"bm":0,"nm":"Stroke 1","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false},{"ty":"tm","s":{"a":0,"k":0,"ix":1},"e":{"a":1,"k":[{"i":{"x":[0.667],"y":[1]},"o":{"x":[0.167],"y":[0.167]},"t":0,"s":[10]},{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.333],"y":[0]},"t":12.5,"s":[42]},{"t":25,"s":[10]}],"ix":2},"o":{"a":1,"k":[{"i":{"x":[0.833],"y":[0.833]},"o":{"x":[0.2],"y":[0]},"t":0,"s":[-19]},{"t":25,"s":[341]}],"ix":3},"m":1,"ix":2,"nm":"Trim Paths 1","mn":"ADBE Vector Filter - Trim","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0},{"ddd":0,"ind":3,"ty":4,"nm":"load 2","parent":1,"sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"r":{"a":0,"k":0,"ix":10},"p":{"a":0,"k":[0,151,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[250,250,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[88,88],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"st","c":{"a":0,"k":[0.9058823529,0.9215686275,0.9254901961,1],"ix":3},"o":{"a":0,"k":100,"ix":4},"w":{"a":0,"k":6,"ix":5},"lc":2,"lj":1,"ml":4,"bm":0,"nm":".","mn":"ADBE Vector Graphic - Stroke","hd":false},{"ty":"tr","p":{"a":0,"k":[0.5,-60.5],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":106.197876042479,"st":0,"bm":0}],"markers":[]}'),_e=({credentialId:e,isShared:t,hasLimitedPermission:i})=>{const n=(0,g.k6)(),{routes:a}=(0,g.Xo)(),{updateIsCredentialExcluded:r}=(0,ie.$)(),{healthData:o}=(e=>{const{data:t}=(0,s.k)(ne.d,"credentialHealthData",{credentialId:e});return{healthData:t}})(e),[l,d]=(0,w.useState)(null);return null===o?null:o?(0,M.BX)("div",{sx:{position:"relative"},children:[l?(0,M.tZ)(ae.R,{credentialId:l,dismissCallback:()=>d(null)}):null,o.excluded?(0,M.tZ)(oe,{onPrimaryClick:()=>{r(e,!1)}}):(0,M.tZ)(pe,{onPrimaryClick:t=>{t.preventDefault(),d(e)},onSecondaryClick:e=>{e.preventDefault(),n.push(a.userPasswordHealth)},isLimitedSharingPassword:t&&i,corruptionData:o.corruptionData})]}):(0,M.tZ)("div",{sx:{marginBottom:"24px"},children:(0,M.tZ)("div",{sx:{display:"flex",justifyContent:"center"},children:(0,M.tZ)(te.Z,{height:24,width:24,animationParams:{renderer:"svg",loop:!0,autoplay:!0,animationData:ue}})})})};var me=i(164718),he=i(285473),ge=i(626555),be=i(662667),ke=i(979808);const{SHARED_ACCESS:we,ACCOUNT_DETAILS:Se}=be.CredentialTabs,xe=({activeTab:e,credential:t,displayTabs:i,changeTab:n})=>{const{translate:a}=(0,L.Z)(),{data:s,status:r}=(0,ke.r)(t.id),l=r===o.rq.Success?s?.count:0,d=[{active:e===Se,label:a("webapp_credential_edition_account_details"),onClick:()=>n(Se)},{active:e===we,label:`${a("webapp_credential_edition_shared_access")} (${l})`,onClick:()=>n(we)}];return(0,M.tZ)(E.V9,{icon:(0,M.tZ)(ge.h,{title:t.itemName,size:he.o.LARGE,domain:new me.Y(t.URL).getRootDomain()}),title:t.itemName,tabs:i?d:void 0})};var ye=i(245636),Ce=i(690056),fe=i(397855);const ve=({rank:e,content:t,title:i})=>(0,M.BX)(v.T5p,{as:"li",gap:"16px",gridTemplateColumns:"35px 1fr",alignItems:"center",justifyContent:"flex-start",sx:{width:"100%",padding:"6px 0"},children:[(0,M.tZ)(v.dDn,{alignSelf:"flex-start",children:(0,M.tZ)(fe.m,{rank:e})}),(0,M.BX)(v.dDn,{children:[(0,M.tZ)(X.nv,{sx:{a:{color:"ds.text.brand.standard"},"a:hover":{color:"ds.text.brand.standard",textDecoration:"underline"}},color:"ds.text.neutral.catchy",textStyle:"ds.title.block.medium",children:i}),t?(0,M.tZ)(X.nv,{color:"ds.text.neutral.quiet",textStyle:"ds.body.standard.regular",children:t}):null]})]});var Ie;const Ze=({credentialId:e,title:t,url:i,setHasDataBeenModified:n,onClose:a,onSubmit:s})=>{const{translate:r}=(0,L.Z)(),[l,d]=(0,w.useState)(""),c=(0,ye.v6)(l),{setupOtpCode:p}=(()=>{const{setupOtpCodeForCredential:e}=(0,C.u)(Ce.i);return{setupOtpCode:async(t,i)=>{try{return await e({credentialId:t,otpUrl:i}),!0}catch{return!1}}}})(),{showToast:u}=(0,X.pm)(),_=!!l&&c.status===o.rq.Error,m=c.status!==o.rq.Success;return(0,M.BX)("div",{"data-testid":"linked-websites-tab",children:[(0,M.tZ)(X.zx,{"data-testid":"back-button",layout:"iconLeading",mood:"neutral",intensity:"supershy",size:"large",onClick:a,icon:Ie||(Ie=(0,M.tZ)(X.JO,{name:"ArrowLeftOutlined"})),children:(0,M.tZ)(X.nv,{textStyle:"ds.title.section.medium",color:"ds.text.neutral.catchy",children:r("webapp_credential_otp_setup_sublevel_header")})}),(0,M.BX)(F.u,{additionalSx:{marginTop:"16px"},children:[(0,M.BX)(v.Ejs,{as:"ol",gap:"16px",children:[(0,M.tZ)(X.X6,{as:"h3",textStyle:"ds.title.supporting.small",color:"ds.text.neutral.quiet",children:r("webapp_credential_otp_setup_title")}),(0,M.tZ)(ve,{rank:1,content:r("webapp_credential_otp_setup_step1_description"),title:r.markup("webapp_credential_otp_setup_step1_title_markup",{title:t,url:i},{linkTarget:"_blank"})},"2fa-settings"),(0,M.tZ)(ve,{rank:2,content:r("webapp_credential_otp_setup_step2_description"),title:r("webapp_credential_otp_setup_step2_title")},"2fa-turn-on"),(0,M.tZ)(ve,{rank:3,content:r("webapp_credential_otp_setup_step3_description"),title:r("webapp_credential_otp_setup_step3_title")},"enter-setup-code")]}),(0,M.BX)(v.Ejs,{sx:{mt:"16px",backgroundColor:"ds.container.agnostic.neutral.quiet",padding:"16px",borderRadius:"8px"},gap:"8px",flexDirection:"column",children:[(0,M.tZ)(X.Kx,{error:_,feedback:_?r("webapp_credential_otp_setup_incorrect_setup_code_error"):"",label:r("webapp_credential_otp_setup_code_label"),onChange:e=>{e.preventDefault(),e.stopPropagation(),n(!0),d(e.target.value)}}),(0,M.tZ)(X.zx,{fullsize:!0,onClick:async()=>{c.status===o.rq.Success&&(await p(e,c.data.url)?(s(),u({description:r("webapp_credential_otp_code_success_toast")})):u({mood:"danger",description:r("_common_generic_error")}))},disabled:m,tooltip:r("webapp_credential_otp_setup_submit_button_disabled_tooltip"),children:r("webapp_credential_otp_setup_submit_button")})]})]}),(0,M.tZ)(X.ke,{sx:{mt:"16px"},title:r("webapp_credential_otp_code_cant_find_code_title"),description:r("webapp_credential_otp_code_cant_find_code_description")})]})},De=()=>{const{translate:e}=(0,L.Z)();return(0,M.tZ)("div",{sx:{position:"relative",backgroundColor:"ds.background.default",marginBottom:"24px"},children:(0,M.tZ)(X.ke,{title:e("webapp_credential_edition_frozen_limited_rights_title"),description:e("webapp_credential_edition_frozen_limited_rights_description"),mood:"warning",size:"medium"})})};var Le;const{SHARED_ACCESS:Ae,ACCOUNT_DETAILS:Pe,LINKED_WEBSITES:Ee,OTP_SETUP:Te}=be.CredentialTabs,Ue=({location:e,activeSpaces:t,credential:i,credentialPreferences:n,onClose:a,protectedItemsUnlockerShown:s,dashlaneDefinedLinkedWebsites:r,areProtectedItemsUnlocked:o,openProtectedItemsUnlocker:c,isShared:m,isAdmin:h,isSharedViaUserGroup:b,isItemInCollection:k,isLastAdmin:X})=>{const{translate:O}=(0,L.Z)(),F=(0,y._)(),{routes:K}=(0,g.Xo)(),$=(0,D.V)(),Q=(()=>{const{updateLinkedWebsites:e}=(0,C.u)(u.G);return async(t,i)=>{e({credentialId:t,updatedLinkedWebsitesList:i})}})(),{updateVaultItem:te}=(0,C.u)(l.L),{createCollection:ie,updateCollection:ne}=(0,C.u)(I.v),{addItemToCollections:ae,removeItemFromCollections:se}=(0,C.u)(f.a),{updateCredentialPreferences:re}=(0,C.u)(_.I),{shouldShowFrozenStateDialog:oe}=(0,A.Ub)(),le=(0,P.l)(),de=Boolean(F.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(F.data?.sharingVault_web_Collection_Item_Permissions_prod),ce=(0,w.createRef)(),pe=()=>{var e,t,a;return{alternativeUsername:null!=(e=i.alternativeUsername)?e:"",email:i.email,itemName:i.itemName,linkedURLs:i.linkedURLs,note:i.note,otpURL:null!=(t=i.otpURL)?t:"",otpSecret:null!=(a=i.otpSecret)?a:"",password:i.password,spaceId:i.spaceId,URL:i.URL,username:i.username,onlyAutofillExactDomain:n.onlyAutofillExactDomain,requireMasterPassword:n.requireMasterPassword,useAutoLogin:n.useAutoLogin}},[ue,me]=(0,w.useState)(pe()),[he,ge]=(0,w.useState)((()=>{var e;const t=(0,g.CN)();return W.A0[null!=(e=t.get("tab"))?e:"account-details"]})()),[be,ke]=(0,w.useState)(Pe),[we,Se]=(0,w.useState)(!1),[ye,Ce]=(0,w.useState)(!1),[fe,ve]=(0,w.useState)(i.linkedURLs),[Ie,Ue]=(0,w.useState)(!1),[Be,Re]=(0,w.useState)(!1),[Ve,qe]=(0,w.useState)([]),[ze,Ge]=(0,w.useState)(!1),[We,Ne]=(0,w.useState)(!1),[Xe,Oe]=(0,w.useState)(!1),[Fe,Me]=(0,w.useState)(!1),[He,je]=(0,w.useState)(!1),[Ke,Je]=(0,w.useState)(!1),{current:Ye}=(0,w.useRef)({confirmDeleteConfirm:O("webapp_credential_edition_delete_confirm"),confirmDeleteDismiss:O("webapp_credential_edition_delete_dismiss"),confirmDeleteSubtitle:O("webapp_credential_edition_confirm_delete_subtitle"),confirmDeleteTitle:O("webapp_credential_edition_confirm_delete_title"),lastAdminActionLabel:O("webapp_credential_edition_change_permissions"),lastAdminTitle:O("webapp_credential_edition_last_admin_title"),lastAdminSubtitle:O("webapp_credential_edition_last_admin_subtitle"),groupSharingTitle:O("webapp_credential_edition_group_sharing_title"),groupSharingSubtitle:O("webapp_credential_edition_group_sharing_subtitle"),collectionSharingTitle:O("webapp_credential_edition_collection_sharing_title"),collectionSharingSubtitle:O("webapp_credential_edition_collection_sharing_subtitle")});if((0,w.useEffect)((()=>{(0,N.SJ)(fe,i.linkedURLs)&&Se(!0)}),[fe,i.linkedURLs]),(0,w.useEffect)((()=>{he===Pe&&me(pe())}),[he]),(0,w.useEffect)((()=>{const{onlyAutofillExactDomain:e,requireMasterPassword:t,useAutoLogin:i,...n}=ue,{onlyAutofillExactDomain:a,requireMasterPassword:s,useAutoLogin:r,...o}=pe(),l=!(0,S.equals)(ue,pe());Se(l),Je(!(0,S.equals)(n,o))}),[ue]),null===oe||null===le)return null;const $e=()=>{const e=m&&!h;return{id:i.id,forceCategorizedSpace:(0,W.UC)(i,t),isDiscontinuedUser:oe,limitedPermissions:e,linkedURLs:i.linkedURLs}},Qe=e=>{we?(ke(e),Ne(!0)):ge(e)},et=()=>{Ne(!1),Ge(!1),qe([])},tt=()=>{ge(Pe),Se(!1),et()},it=e=>{e?.preventDefault(),we?(ke(Pe),Ge(!0)):tt()},nt=()=>{Q(i.id,fe),Oe(!0),(0,N.Bq)(i,fe),tt()},at=e=>!e.initiallyExisting&&!e.hasBeenDeleted,st=e=>e.initiallyExisting&&!e.hasBeenDeleted,rt=()=>{e?.state?.entity?(({routes:e,location:t})=>{t?.state?.entity?(0,V.y)(t?.state?.entity)?(0,g.uX)(e.userSharingGroupInfo(t?.state?.entity?.groupId)):(0,g.uX)(e.userSharingUserInfo(t?.state?.entity?.alias)):(0,g.uX)(e.userSharingCenter)})({routes:K,location:e}):a()},ot=()=>{if(ye)return ke(Pe),void Ne(!0);ge(Pe)},lt=Be||s,dt=le&&$e().limitedPermissions;return(0,M.BX)(E.zI,{isUsingNewDesign:!0,isViewingExistingItem:!0,itemHasBeenEdited:we,isSomeDialogOpen:ze||Ve.length>0||We||He||Be,onSubmit:async()=>{if(he===Ee)return void(async()=>{const e=await(0,N.wb)(i,fe);qe(e),he!==Ee||e.length||nt()})();if(!ce.current?.isFormValid())return;const e=ce.current?.getVaultItemCollections();if(!we||e){var t;Me(!0),n&&ue.requireMasterPassword&&ue.requireMasterPassword!==n.requireMasterPassword&&(0,z.ih)(ue.requireMasterPassword,i.id,i.URL,null!=(t=ue.spaceId)?t:void 0);try{const{onlyAutofillExactDomain:t,useAutoLogin:a,requireMasterPassword:s,...r}=ue,o=t!==n.onlyAutofillExactDomain||a!==n.useAutoLogin||s!==n.requireMasterPassword,l=[];Ke&&l.push(te({vaultItemType:d.U.Credential,content:r,id:i.id,shouldSkipSync:!!o})),o&&l.push(re({credentialId:i.id,credentialUrl:i.URL,onlyAutofillExactDomain:t,useAutoLogin:a,requireMasterPassword:s,shouldSkipSync:e?.some((e=>e.isShared&&!st(e)))})),e&&l.push((async(e,t,i)=>{const n=[],a=[];for(const r of t){var s;st(r)||(r.isShared?at(r)?n.push({collectionId:r.id,permission:de?null!=(s=r.itemPermission)?s:p.y3.Limited:p.y3.Admin}):a.push(r.id):(r.vaultItems=[{id:e,type:x.dJ.KWAuthentifiant,url:i}],r.id?await ne({id:r.id,collection:r,operationType:r.hasBeenDeleted?Z.C.SUBSTRACT_VAULT_ITEMS:Z.C.APPEND_VAULT_ITEMS}):await ie({content:r})))}n.length&&await ae({collectionPermissions:n,itemId:e,shouldSkipSync:a.length>0}),a.length&&await se({collectionIds:a,itemId:e})})(i.id,e,i.URL)),await Promise.all(l)}catch(e){return $.showAlert(O("_common_generic_error"),v.BLW.ERROR),void a()}$.showAlert(O("_common_toast_changes_saved"),v.BLW.SUCCESS),a()}},secondaryActions:he===Ee?[]:[(0,M.tZ)(ee,{credentialId:i.id},"pwhist"),(0,M.tZ)(B._,{id:i.id,isShared:m,isAdmin:h,isDiscontinuedUser:oe,getSharing:R.Ei},"shareaction")],onNavigateOut:(e,t)=>{he!==Ee?he!==Te?rt():ot():it(t)},onClickDelete:()=>Re(!0),withoutDeleteButton:he===Ee,withoutConfirmationDialog:he===Ee,withoutCloseButton:he===Te,ignoreCloseOnEscape:lt,formId:"edit_credential_panel",submitPending:Fe,header:(0,M.tZ)(xe,{activeTab:he,credential:i,displayTabs:m,changeTab:Qe}),children:[m&&he===Ae?(0,M.tZ)(q.u,{isAdmin:h,id:i.id}):null,he===Pe?(0,M.BX)("div",{sx:{flex:1,flexDirection:"column",position:"relative"},children:[dt?Le||(Le=(0,M.tZ)(De,{})):(0,M.tZ)(_e,{credentialId:i.id,isShared:m,hasLimitedPermission:!h}),(0,M.tZ)("div",{sx:{overflowY:"initial",overflowX:"visible"},children:(0,M.tZ)(G.S,{ref:ce,activeSpaces:t,editableValues:ue,setEditableValues:me,readonlyValues:$e(),signalEditedValues:e=>{Se(e)},dashlaneDefinedLinkedWebsites:r,areProtectedItemsUnlocked:o,openProtectedItemsUnlocker:c,protectedItemsUnlockerShown:s,onClickAddNewWebsite:()=>(Ue(!0),void Qe(Ee)),onClickSetup2FAToken:()=>{Qe(Te)},setHasOpenedDialogs:je})})]}):null,he===Ee?(0,M.tZ)(H,{credential:i,dashlaneDefinedLinkedWebsites:r,onClose:it,openWithNewUrlField:Ie,onUpdateLinkedWebsitesAddedByUser:ve,hasLimitedRights:m&&!h}):null,he===Te?(0,M.tZ)(Ze,{credentialId:i.id,title:i.itemName,url:i.URL,onClose:ot,onSubmit:()=>{Ce(!1),ge(Pe)},setHasDataBeenModified:Ce}):null,(0,M.tZ)(T.s,{isVisible:Be,itemId:i.id,closeConfirmDeleteDialog:()=>Re(!1),goToSharingAccess:()=>{Qe(Ae)},onDeletionSuccess:rt,isShared:m,isSharedViaUserGroup:b,translations:Ye,vaultItemType:d.U.Credential,isLastAdmin:X,isItemInCollection:k}),ze?(0,M.tZ)(J,{onCancel:()=>Ge(!1),onLeavePageWithoutSaving:tt}):null,Ve.length>0?(0,M.tZ)(Y,{duplicateData:Ve,onCancel:()=>qe([]),onSave:nt}):null,We?(0,M.tZ)(U.a,{onDismissClick:()=>Ne(!1),onConfirmClick:()=>{ge(be),Se(!1),Ce(!1),et()}}):null,Xe?(0,M.tZ)(j,{onClose:()=>Oe(!1),setDisplayLinkedWebsitesDataSavedAlert:Oe}):null]})},Be=e=>{const{credential:t}=e,i=(0,m.E)(),n=(0,k.tY)(),a=(0,h.B)([t.id]),l=(0,s.k)(u.G,"getDashlaneDefinedLinkedWebsites",{url:t.URL}),d=(0,s.k)(_.I,"getPreferencesForCredentials",{credentialIds:[t.id]}),{getPermissionForItem:g,getSharingStatusForItem:b,getIsLastAdminForItem:w}=(0,r.Y)(c.X,{getPermissionForItem:{queryParam:{itemId:t.id}},getSharingStatusForItem:{queryParam:{itemId:t.id}},getIsLastAdminForItem:{queryParam:{itemId:t.id}}},[]);if(d.status!==o.rq.Success||l.status!==o.rq.Success||g.status!==o.rq.Success||b.status!==o.rq.Success||i.status!==o.rq.Success||w.status!==o.rq.Success)return null;const{isShared:S,isSharedViaUserGroup:x}=b.data,{isLastAdmin:y}=w.data,C=!!a.length;return(0,M.tZ)(Ue,{...e,...n,activeSpaces:i.data,dashlaneDefinedLinkedWebsites:l.data,credentialPreferences:d.data[0],isShared:S,isAdmin:S&&g.data.permission===p.y3.Admin,isSharedViaUserGroup:x,isItemInCollection:C,isLastAdmin:y})},Re=e=>{const{data:t,status:i}=(0,s.k)(l.L,"query",{vaultItemTypes:[d.U.Credential],ids:[`{${e.match.params.uuid}}`]}),{routes:n}=(0,g.Xo)();return i===o.rq.Loading?null:t?.credentialsResult.items.length?(0,M.tZ)(Be,{...e,credential:t.credentialsResult.items[0]}):e.location?.state?(0,M.tZ)(a.l_,{to:(0,b.rF)(e.location?.state,n)}):(0,M.tZ)(a.l_,{to:n.userCredentials})}},682994:(e,t,i)=>{i.d(t,{s:()=>m}),i(696832);var n=i(364438),a=i(482598),s=i(133354),r=i(448430),o=i(488203);let l=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var d=i(365580),c=i(524130);const p=({reason:e,translations:t,goToSharingAccess:i,closeCantDeleteDialog:a})=>{const{translate:s}=(0,o.Z)(),r=((e,t)=>{const{groupSharingTitle:i,lastAdminTitle:n,collectionSharingTitle:a,genericErrorTitle:s}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return a;case l.Generic:return s;default:return(0,d.U)(t)}})(t,e),p=((e,t)=>{const{groupSharingSubtitle:i,lastAdminSubtitle:n,collectionSharingSubtitle:a,genericErrorSubtitle:s}=e;switch(t){case l.LastAdmin:return n;case l.GroupSharing:return i;case l.CollectionSharing:return a;case l.Generic:return s;default:return(0,d.U)(t)}})(t,e);return(0,c.tZ)(n.Vq,{isOpen:!0,onClose:a,title:null!=r?r:"",closeActionLabel:s("_common_dialog_dismiss_button"),actions:e===l.LastAdmin||l.GroupSharing||l.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{i(),a()}}}:void 0,children:p})};var u=i(837527);const _=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:i})=>{const{translate:a}=(0,o.Z)(),{confirmDeleteSubtitle:s,confirmDeleteTitle:r,confirmDeleteDismiss:l,confirmDeleteConfirm:d}=i;return(0,c.tZ)(n.Vq,{title:r,onClose:e,isOpen:!0,dialogClassName:u.Ht,closeActionLabel:a("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:d,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:l,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:s})},m=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:i,itemId:d,onDeletionSuccess:u,sharingStatus:m,translations:h,vaultItemType:g,isShared:b,isSharedViaUserGroup:k,isItemInCollection:w,isLastAdmin:S})=>{const{showToast:x}=(0,n.pm)(),{translate:y}=(0,o.Z)(),{deleteVaultItems:C}=(0,a.u)(r.L);if(!i)return null;let f;return(b||m?.isShared)&&(k&&(f=l.GroupSharing),S&&(f=l.LastAdmin),w&&(f=l.CollectionSharing)),f&&t?(0,c.tZ)(p,{reason:f,translations:h,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,c.tZ)(_,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await C({ids:[d],vaultItemType:g})).tag===s.rq.Success?(x({description:null!=(e=h.deleteSuccessToast)?e:y("webapp_personal_info_edition_delete_success_toast")}),u()):x({description:y("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){x({description:y("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:h})}},762042:(e,t,i)=>{i.d(t,{_:()=>l});var n=i(926897),a=i(488203),s=i(301639),r=i(524130);const o=({sharing:e})=>{const{translate:t}=(0,a.Z)();return(0,r.tZ)(s.Z,{tooltipPlacement:"top-start",sharing:e,text:t("webapp_sharing_invite_share"),origin:n.Origin.ItemDetailView})},l=({id:e,isShared:t,isAdmin:i,isDiscontinuedUser:n,getSharing:a})=>t&&!i||n?null:(0,r.tZ)(o,{sharing:a(e)})},979808:(e,t,i)=>{i.d(t,{r:()=>s});var n=i(799852),a=i(348958);const s=e=>(0,n.k)(a.X,"sharedAccessForItem",{itemId:e})},555449:(e,t,i)=>{i.d(t,{u:()=>T});var n,a,s=i(696832),r=i(310789),o=i(361607),l=i(482598),d=i(133354),c=i(172721),p=i(982466),u=i(573623),_=i(740300),m=i(488203),h=i(343194),g=i(448263),b=i(364438),k=i(232814),w=i(904967),S=i(873670),x=i(989572),y=i(58037),C=i(524130);const f=({cancelStatus:e,itemGroupId:t,setCancelStatus:i,recipientId:o})=>{const{translate:l}=(0,m.Z)(),d=e===g.V.Loading,c={type:"user",alias:o};(0,s.useEffect)((()=>{let t;return e===g.V.Failure&&(t=window.setTimeout((()=>i(null)),2e3)),()=>{clearTimeout(t)}}),[e,i]);const p=e?()=>i(null):()=>i(g.V.Confirm);return e===g.V.Failure?(0,C.BX)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"},children:[n||(n=(0,C.tZ)(r.aNP,{color:"ds.text.danger.standard"}))," ",l("webapp_shared_access_cancel_failure")]}):(0,C.BX)("div",{children:[(0,C.tZ)(b.zx,{intensity:e?"quiet":"supershy",disabled:d,onClick:p,size:"small",children:l(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")}),e?(0,C.tZ)(b.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:d,size:"small",onClick:()=>(async()=>{i(g.V.Loading);const e=await(async()=>{try{const{success:e}=await _.C.revokeSharing({itemGroupId:t,recipient:c});return e}catch(e){return!1}})();i(e?g.V.Success:g.V.Failure)})(),children:d?a||(a=(0,C.tZ)(r.HoD,{})):l("webapp_shared_access_confirm")}):null]})};var v;const I="webapp_sharing_permissions_full_rights",Z="webapp_sharing_permissions_limited_rights",D=e=>{const{status:t,permission:i}=e;return"pending"===t?"webapp_shared_access_pending_invitation":"accepted"===t?"admin"===i?I:Z:""},L=({itemGroupId:e,onUserSelected:t,openEditPermissionsDialog:i,member:n,isAdmin:a,isItemPermissionsEnabled:r=!1})=>{const[o,l]=(0,s.useState)(null),d=(0,y.j)()?.login,{translate:c}=(0,m.Z)();if(o===g.V.Success)return null;const{permission:u,status:_,recipientType:h}=n,L=d===n.recipientId,A=a&&d!==n.recipientId,P="pending"===_?(0,C.tZ)(f,{recipientId:n.recipientId,itemGroupId:e,cancelStatus:o,setCancelStatus:l}):(0,C.tZ)(S.M,{disabled:r&&!a||!r&&n.recipientType===p.IP.Collection,icon:"ActionEditOutlined",layout:"iconLeading",intensity:"supershy",onClick:()=>{t&&t(n.recipientId),i(n,u,h)},content:c("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"},size:"small",children:c("webapp_shared_access_edit_permissions")});return(0,C.tZ)("li",{sx:{alignItems:"center",display:"flex",minHeight:"48px",position:"relative"},children:(0,C.tZ)(w.r,{infoAction:A?P:null,logo:n.recipientType===p.IP.Group?v||(v=(0,C.tZ)(x.Z,{})):(0,C.tZ)(k.q,{email:n.recipientName,size:36}),text:r?void 0:D(n)?c(D(n)):c("webapp_shared_permissions_dialog_revoke_success_title"),title:n.recipientName,permissionBadge:r?(0,C.tZ)(b.Ct,{mood:"admin"===u?"brand":"danger",label:c("admin"===u?I:Z)}):void 0,disabled:o===g.V.Loading,titleLogo:L?(0,C.tZ)(b.Ct,{label:c("webapp_shared_access_you_badge").toUpperCase(),layout:"labelOnly",sx:{marginLeft:"4px"}}):null})},n.recipientId)};var A=i(979808),P=i(468037),E=i(814341);const T=({id:e,isAdmin:t})=>{const{translate:i}=(0,m.Z)(),[n,a]=(0,s.useState)(!1),[b,k]=(0,s.useState)(null),[w,S]=(0,s.useState)(void 0),x=(0,o._)(),{data:y,status:f}=(0,A.r)(e),{updatePermissionForCollectionItem:v,removeItemFromCollections:I}=(0,l.u)(c.a),Z=Boolean(x.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(x.data?.sharingVault_web_Collection_Item_Permissions_prod);if(f!==d.rq.Success)return(0,C.tZ)(r.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});if(!y)return null;const{itemGroupId:D,users:T,groups:U,collections:B}=y,R=e=>{b&&k({...b,step:e})},V=async()=>{if(!b)return;const{recipient:t,permission:i,recipientType:n}=b;a(!0);const s="revoke"===i?await(async(t,i)=>{try{if(i===p.IP.Collection){const i=await I({collectionIds:[t.recipientId],itemId:e});return!!(0,u.d6)(i)}const{success:n}=await _.C.revokeSharing({itemGroupId:null!=D?D:"",recipient:(0,E.d)(t)});return n}catch(e){return!1}})(t,n):await(async(e,t,i)=>{try{if(i===p.IP.Collection){const i=await v({groupId:D,collection:{collectionId:e.recipientId,permission:t}});return!!(0,u.d6)(i)}{const{success:i}=await _.C.updateSharingPermission({itemGroupId:null!=D?D:"",recipient:(0,E.d)(e),permission:t});return i}}catch(e){return!1}})(t,i,n);if(s){const e="revoke"===i?g.PermissionDialogStep.RevokeSuccess:g.PermissionDialogStep.Success;R(e)}else R(g.PermissionDialogStep.Failure);a(!1)},q=(e,t,i)=>{const n={recipient:e,recipientType:i,permission:t,originPermission:t,step:g.PermissionDialogStep.Permission,name:e.recipientName};k(n)},z=U?.length>0,G=B?.length>0,W=T?.length>0,N=!(w&&T.find((e=>e.recipientId!==w&&e.permission===p.y3.Admin)))&&b?.recipient.recipientType===p.IP.User,X="collection"===b?.recipientType;return(0,C.BX)("div",{sx:{flex:"1",overflowY:"auto"},children:[(0,C.BX)("ul",{sx:{flex:"1"},children:[G?(0,C.tZ)(P.u,{title:i("webapp_shared_access_collections"),additionalSx:{marginBottom:"16px"},children:B.map((e=>(0,C.tZ)(L,{isItemPermissionsEnabled:Z,isAdmin:t,member:e,itemGroupId:null!=D?D:"",openEditPermissionsDialog:q},e.recipientId)))}):null,z?(0,C.tZ)(P.u,{title:i("webapp_shared_access_groups_card_title"),additionalSx:{marginBottom:"16px"},children:U.map((e=>(0,C.tZ)(L,{isAdmin:t,member:e,itemGroupId:null!=D?D:"",openEditPermissionsDialog:q},e.recipientId)))}):null,W?(0,C.tZ)(P.u,{title:i("webapp_shared_access_individuals_card_title"),children:T.map((e=>(0,C.tZ)(L,{isAdmin:t,member:e,onUserSelected:e=>S(e),itemGroupId:null!=D?D:"",openEditPermissionsDialog:q},e.recipientId)))}):null]}),b&&(0,C.tZ)(h.E,{isOpen:!0,isCollectionItemPermission:X,shouldRevokeBeDisabled:N||void 0,loading:n,onCancelRevoke:()=>{b&&k({...b,step:g.PermissionDialogStep.Permission})},onConfirmRevoke:V,onDismiss:()=>k(null),onSelectPermission:e=>{b&&k({...b,permission:e})},onValidatePermission:()=>{"revoke"===b?.permission?k({...b,step:g.PermissionDialogStep.ConfirmRevoke}):V()},permission:b.permission,recipient:b.recipient,step:b.step})]})}}}]);