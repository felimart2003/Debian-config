"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[7453],{61014:(e,t,n)=>{n.d(t,{P:()=>O});var i=n(696832),r=n(310789),a=n(364438),s=n(488203),o=n(341571);const l=n(816583);var c=n(468037),d=n(210994),p=n(221119),u=n(86498),_=n(589923),m=n(671785),h=n(317086);var f=n(926897),g=n(45272),w=n(923206),y=n(837527);const E="webapp_secure_file_delete_button_title",b="webapp_secure_file_download_button_title",I={cursor:"pointer",margin:"0px 10px",padding:"5px",border:"1px solid transparent","&:hover":{border:`1px solid ${r.colors.grey05}`},borderRadius:"4px"},x={opacity:.6};var C=n(524130);const v=({attachment:e,disableActions:t,handleFileInfoDetached:n,onModalDisplayStateChange:a,parentId:o,parentType:l})=>{const{translate:c}=(0,s.Z)(),{translateWithMarkup:d}=(0,_.Y)(),p=(0,u.V)(),[h,b]=(0,i.useState)(!1),v=(0,i.useCallback)((()=>p.showAlert(d("webapp_secure_file_error_unknown"),r.BLW.ERROR)),[p,d]),{deleteFile:S}=(0,m.vN)(e.id,v,l,n),D=()=>{b(!0),a?.(!0)},R=()=>{b(!1),a?.(!1)};return(0,C.BX)(C.HY,{children:[(0,C.tZ)(r.ua7,{placement:"left",trigger:"hover",content:d(t?"webapp_secure_file_delete_button_tooltip_content_disable":"webapp_secure_file_delete_button_tooltip_content_enable"),children:(0,C.tZ)("div",{role:"button","aria-label":c(E),sx:t?(0,r.jMf)([I,x]):I,tabIndex:0,onKeyDown:e=>{13===e.keyCode&&D()},onClick:D,children:(0,C.tZ)(r.XHJ,{color:r.colors.dashGreen00,"aria-hidden":"true",title:c(E),"aria-label":c(E)})})}),(0,C.BX)(r.VqE,{isOpen:h&&!t,onClose:R,closeIconName:"CloseIcon",modalContentClassName:y.jK,children:[(0,C.BX)(r.a7O,{children:[(0,C.tZ)(r.X6q,{size:"small",sx:{margin:"16px 0px",fontWeight:"bolder"},children:d("webapp_secure_file_delete_confirm_dialog_heading")}),(0,C.tZ)(r.nvN,{sx:{margin:"8px 0px"},color:r.colors.grey00,children:d("webapp_secure_file_delete_confirm_dialog_paragraph")})]}),(0,C.tZ)(r.cNS,{primaryButtonTitle:d("webapp_secure_file_delete_confirm_dialog_action_primary_button_title"),primaryButtonOnClick:()=>{o&&(0,g.Kz)(new f.UserUpdateVaultItemAttachmentEvent({attachmentAction:f.Action.Delete,itemId:o,itemType:l})),S(),p.showAlert(c("webapp_secure_file_delete_success",{fileName:(0,w.K)(e.filename)}),r.BLW.SUCCESS),b(!1)},secondaryButtonTitle:d("webapp_secure_file_delete_confirm_dialog_action_secondary_button_title"),secondaryButtonOnClick:R,intent:"danger"})]})]})},S=({attachment:e,disableActions:t,setDisableActions:n,progress:a,parentId:o,parentType:l})=>{const{translate:c}=(0,s.Z)(),{translateWithMarkup:d}=(0,_.Y)(),{download:u}=(0,m.gF)(e,l),h=()=>{o&&(0,g.Kz)(new f.UserDownloadVaultItemAttachmentEvent({itemId:o,itemType:l})),u()};return(0,i.useEffect)((()=>{switch(a?.status){case p.wL.Downloading:n(!0);break;case p.wL.TransferComplete:case p.wL.Error:n(!1)}}),[a,n,d]),(0,C.tZ)(r.ua7,{placement:"left",trigger:"hover",content:d(t?"webapp_secure_file_download_button_tooltip_content_disable":"webapp_secure_file_download_button_tooltip_content_enable"),children:(0,C.tZ)("div",{role:"link","aria-label":c(b),sx:t?(0,r.jMf)([I,x]):I,tabIndex:0,onKeyDown:t?void 0:e=>{13===e.keyCode&&h()},onClick:t?void 0:h,children:(0,C.tZ)(r._8t,{sx:t?x:void 0,color:r.colors.dashGreen00,"aria-hidden":"true","aria-label":c(b),title:c(b)})})})},D=e=>{const t=(0,m.Ce)(e.attachment.downloadKey);return(0,C.BX)(r.Ejs,{alignItems:"center",justifyContent:"flex-end",children:[(0,C.tZ)(S,{progress:t,...e}),(0,C.tZ)(v,{...e})]})},R=n(816583),k={color:`${r.colors.grey00}`,minHeight:"60px",position:"relative","&:hover":{"& > *:last-child":{opacity:1}}},N={width:36,minWidth:36,height:36,borderRadius:"50%",border:"1px solid rgba(0, 0, 0, 0.1)",background:r.colors.dashGreen06},A={padding:"0px 8px",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",fontWeight:"bold"},T=e=>R(e,{decimalPlaces:0,unitSeparator:" "}),Z=({attachment:e,isDesignRevamped:t})=>(0,C.BX)(r.Ejs,{alignItems:"center",flexWrap:"nowrap",children:[(0,C.tZ)(r.Ejs,{sx:N,alignItems:"center",justifyContent:"center",children:(0,C.tZ)(r.Ujz,{size:25,color:r.colors.midGreen00})}),(0,C.BX)("div",{sx:{display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,C.tZ)(a.nv,{sx:A,children:e.filename}),t&&(0,C.tZ)(a.nv,{color:"ds.text.neutral.quiet",sx:{fontSize:"ds.body.helper.regular",padding:"0px 8px"},children:T(e.localSize)})]})]}),P=e=>{const{attachment:t,isDesignRevamped:n,itemId:a,itemType:o}=e,{translate:l}=(0,s.Z)();return(e=>{const{showAlert:t}=(0,u.V)(),{translateWithMarkup:n}=(0,_.Y)(),a=(0,m.Ce)(e.downloadKey);(0,i.useEffect)((()=>{var i,s;const o=e=>t((0,h.b)(n(e)),r.BLW.SUBTLE,!1);if(a?.status)switch(a.status){case p.wL.Downloading:o({key:"webapp_secure_file_download_progress_downloading_markup",params:{fileName:e.filename,progress:Math.round(null!=(i=(null!=(s=100*a?.bytesReceived)?s:0)/a?.contentLength)?i:1)}});break;case p.wL.Deciphering:o({key:"webapp_secure_file_download_progress_deciphering_markup",params:{fileName:e.filename}});break;case p.wL.TransferComplete:t(n({key:"webapp_secure_file_download_progress_success_markup",params:{fileName:e.filename}}),r.BLW.SUCCESS);break;case p.wL.Error:t(n({key:"webapp_secure_file_error_unknown"}),r.BLW.ERROR)}}),[alert,e,a,n])})(t),(0,C.BX)(r.Ejs,{fullWidth:!0,alignItems:"center",sx:k,children:[(0,C.tZ)(r.k$b,{sx:{width:n?"60%":"45%"},children:(0,C.tZ)(Z,{...e})}),(0,C.tZ)(r.k$b,{sx:{width:n?"20%":"25%"},children:l.shortDate((0,d.Z)(t.creationDatetime))}),!n&&(0,C.tZ)(r.k$b,{sx:{width:"10%"},children:T(t.localSize)}),(0,C.tZ)(D,{parentType:o,parentId:a,...e})]})},L=({children:e,isDesignRevamped:t})=>{const{translate:n}=(0,s.Z)();return t?(0,C.tZ)(c.u,{title:n("webapp_secure_file_attachment_title"),children:e}):e},O=({attachments:e,additionalProps:t,isDesignRevamped:n=!0})=>{const{translate:c}=(0,s.Z)(),[d,p]=(0,i.useState)(!1),u=(0,o.I)(),_=u.max>0&&u.remaining<78643200,m={padding:!n&&"16px 16px 16px 0px",borderBottom:`1px solid ${r.colors.grey06}`,color:"ds.text.neutral.quiet",alignSelf:"center",fontSize:"12px",textTransform:"uppercase"};return(0,i.useEffect)((()=>{p(t.isUploading)}),[t.isUploading]),(0,C.tZ)(L,{isDesignRevamped:n,children:(0,C.BX)(r.Ejs,{flexDirection:"column",sx:{padding:"12px 0px",flex:1,overflow:"hidden"},children:[(0,C.BX)(r.Ejs,{flexDirection:"column",alignItems:"center",fullWidth:!0,sx:{flex:1,overflowY:"auto",flexWrap:"nowrap"},children:[e?.length>0?(0,C.BX)(r.Ejs,{fullWidth:!0,alignItems:"center",sx:n?{backgroundColor:"ds.container.agnostic.neutral.quiet",borderRadius:"4px",padding:"0px 4px",height:"28px"}:{},children:[(0,C.tZ)(a.nv,{sx:{...m,width:n?"60%":"45%"},children:c("webapp_secure_notes_addition_field_tab_attachments_table_title_name")}),(0,C.tZ)(a.nv,{sx:{...m,width:n?"40%":"25%"},children:c("webapp_secure_notes_addition_field_tab_attachments_table_title_creation_date")}),!n&&(0,C.tZ)(a.nv,{sx:{...m,width:"30%"},children:c("webapp_secure_notes_addition_field_tab_attachments_table_title_file_size")})]}):(0,C.BX)(r.Ejs,{justifyContent:"center",flexDirection:"column",alignItems:"center",sx:{flex:1},children:[(0,C.tZ)(r.Ujz,{size:70,color:r.colors.dashGreen04,sx:{marginBottom:"24px"}}),(0,C.tZ)(a.nv,{sx:{textAlign:"center",color:"ds.text.neutral.catchy"},children:c.markup("webapp_secure_file_empty_attachments_markup")})]}),e?e.map((e=>(0,C.tZ)(P,{attachment:e,handleFileInfoDetached:t?.handleFileInfoDetached,isDesignRevamped:n,disableActions:d,setDisableActions:p,onModalDisplayStateChange:t.onModalDisplayStateChange,itemId:t.itemId,itemType:t.itemType},e.id))):null]}),_?(0,C.tZ)(a.ke,{mood:"danger",title:c("webapp_secure_file_storage_quota_info",(h=u.remaining,f=u.max,{usedQuota:l(h,{decimalPlaces:0,unitSeparator:" "}),maxQuota:l(f,{decimalPlaces:0,unitSeparator:" "})})),sx:{flex:0,marginTop:"16px"}}):null]})});var h,f}},773157:(e,t,n)=>{n.d(t,{d:()=>b});var i=n(696832),r=n(364438),a=n(310789),s=n(926897),o=n(488203),l=(n(416702),n(842403),n(798849),n(978895),n(445595),n(325676),n(221119)),c=n(740300),d=n(45272),p=n(86498),u=n(589923),_=n(923206),m=n(317086);const h=15*Math.pow(1024,2),f={PROGRESS_CIPHERING:"webapp_secure_file_upload_progress_ciphering_markup"};function g(e){const[t,n]=(0,i.useState)(!1),r=(0,p.V)(),{translateWithMarkup:o}=(0,u.Y)();return{isUploading:t,upload:(t,i)=>{if(t)if(t.size>h)i?.({success:!1,error:{code:l.tA.MAX_CONTENT_LENGTH_EXCEEDED}});else{const p=(0,_.K)(t.name);r.showAlert((0,m.b)(o({key:f.PROGRESS_CIPHERING,params:{fileName:p}})),a.BLW.SUBTLE,!1),n(!0);const u=new FileReader,g=e=>{i?.(e),n(!1)};u.onloadend=async()=>async function(e,t,n,i){if(2===e.readyState){const r=e.result,a=new Uint8Array(r),o=JSON.stringify(Array.from(a));if(t.size>h)i?.({success:!1,error:{code:l.tA.MAX_CONTENT_LENGTH_EXCEEDED}});else{const e=await c.C.addSecureFile({fileName:t.name,fileType:t.type,serializedContent:o});e.success&&(0,d.Kz)(new s.UserUpdateVaultItemAttachmentEvent({attachmentAction:s.Action.Add,itemId:e.secureFileInfo.Id,itemType:n})),i?.(e)}}return null}(u,t,e,g),u.readAsArrayBuffer(t)}}}}var w=n(671785),y=n(553966),E=n(524130);const b=({onFileUploadStarted:e,onFileUploadDone:t,isQuotaReached:n,isShared:l,itemId:p,dataType:u,disabled:_=!1})=>{var m;const h=(0,w.ml)("KWIDCard"===u)&&!l,f=null!=(m=y.dataModelTypeToItemType[u])?m:function(e){throw new Error(e)}(`Unsupported Type ${u}`),{translate:b}=(0,o.Z)(),{upload:I,isUploading:x}=g(f),[C,v]=(0,i.useState)(""),{showErrorAlert:S}=(0,w.Pw)(C),D=(0,w.yK)(),R=e=>{t?.(e),e.success||S(e.error?.code)},k=async t=>{const n=await(async e=>await c.C.validateSecureFile({fileName:e.name,fileType:e.type,contentLength:e.size}))(t);n.success?(e(),v(t.name),I(t,R)):S(n?.error?.code)};return h?(0,E.BX)(a.Ejs,{children:[(0,E.tZ)("input",{type:"file",id:"secureFileInput",sx:{display:"none"},onChange:e=>{e?.target?.files?.length&&k(e.target.files[0]),e.target.value=""},accept:D?.join(",")}),(0,E.tZ)(r.zx,{mood:"neutral",intensity:"quiet",icon:"AttachmentOutlined",layout:"iconLeading",onClick:e=>{p&&(0,d.Kz)(new s.UserUpdateVaultItemAttachmentEvent({attachmentAction:s.Action.Add,itemId:p,itemType:f})),document.getElementById("secureFileInput")?.click(),e.preventDefault()},disabled:n||x||_,children:b("webapp_secure_notes_add_attachment_action_name")},"attach")]}):null}},317086:(e,t,n)=>{n.d(t,{b:()=>a});var i=n(310789),r=n(524130);const a=e=>(0,r.BX)(i.Ejs,{justifyContent:"center",children:[(0,r.tZ)(i.HoD,{sx:{mr:"8px"},color:i.colors.dashGreen00,size:18}),e]})},899193:(e,t,n)=>{n.d(t,{w:()=>i});const i=e=>({id:e.Id,type:e.Type,version:1,filename:e.Filename,downloadKey:e.DownloadKey,cryptoKey:e.CryptoKey,localSize:e.LocalSize,remoteSize:e.RemoteSize,creationDatetime:e.CreationDatetime,userModificationDatetime:e.UserModificationDatetime,owner:e.Owner})},923206:(e,t,n)=>{n.d(t,{K:()=>i});const i=e=>e.length<=32?e:e.substring(0,32)},671785:(e,t,n)=>{n.d(t,{ml:()=>I,aV:()=>E,yK:()=>R,vN:()=>o,gF:()=>g,Ce:()=>c,Pw:()=>D});var i=n(221119),r=n(740300),a=n(45272),s=n(926897);function o(e,t,n,o){return{deleteFile:()=>{r.C.deleteSecureFile({id:e}).then((r=>{var l;r.success||!r.success&&r.error?.code===i.tA.FILE_NOT_FOUND?(o?.(e),(0,a.Kz)(new s.UserUpdateVaultItemAttachmentEvent({attachmentAction:s.Action.Delete,itemId:e,itemType:n}))):t(null!=(l=r.error?.code)?l:i.tA.INTERNAL_ERROR)}))}}}var l=n(148038);function c(e){const t=(0,l.qr)({queryConfig:{query:r.C.getFileDownloadProgress,queryParam:e},liveConfig:{live:r.C.liveFileDownloadProgress,liveParam:e}},[e]);return t.status===l.rq.Success?t.data:null}n(416702),n(842403),n(798849),n(978895),n(445595),n(325676);var d=n(696832),p=n(354760),u=n(589923),_=n(86498),m=n(310789);const h={UNKNOWN_ERROR:"webapp_secure_file_error_unknown"},f=(e,t)=>{try{const t=JSON.parse(e);return new Uint8Array(t).buffer}catch(e){return t(i.tA.INTERNAL_ERROR),null}};function g({id:e,filename:t,downloadKey:n,cryptoKey:o,type:l},g){const{translateWithMarkup:w}=(0,u.Y)(),y=(0,_.V)(),E=c(n),b=(0,d.useRef)(""),I=()=>y.showAlert(w(h.UNKNOWN_ERROR),m.BLW.ERROR);return(0,d.useEffect)((()=>{E?.status===i.wL.ChunkReady&&(b.current=b.current.concat(E.chunk),r.C.chunkTransferDone(n))}),[E,n]),(0,d.useEffect)((()=>{if(E?.status===i.wL.TransferComplete){const i=f(b.current,I);i&&((0,p.S)(i,t,l),b.current="",r.C.clearSecureFileState(n),(0,a.Kz)(new s.UserDownloadVaultItemAttachmentEvent({itemId:e,itemType:g})))}}),[E,t,l,n,e,g]),{download:()=>{r.C.downloadSecureFile({downloadKey:n,cryptoKey:o})}}}n(341571);var w=n(65255),y=n(377377);function E(){return(0,y.w)(w.w.SaexSecureNoteAttachmentsForrelease)}var b=n(615394);function I(e){const t=(0,y.w)(w.w.TechweekWebAttachmentsForIdsV1),n=E(),i=(0,b.rp)(["secureFiles"]),r=n&&i;return e?r&&t:r}var x=n(317086),C=n(923206);const v={PROGRESS_UPLOADING:"webapp_secure_file_upload_progress_loading_markup",PROGRESS_CIPHERING:"webapp_secure_file_upload_progress_ciphering_markup",UPLOAD_SUCCESS:"webapp_secure_file_upload_success_markup",UNKNOWN_ERROR:"webapp_secure_file_error_unknown",MAX_CONTENT_LENGTH_EXCEEDED:"webapp_secure_file_error_upload_max_length_excedeed",QUOTA_EXCEDEED:"webapp_secure_file_error_upload_quota_excedeed",INVALID_FILE_TYPE:"webapp_secure_file_error_file_type_not_allowed"},S=e=>{var t;return e&&null!=(t=v[e])?t:v.UNKNOWN_ERROR},D=e=>{const t=(0,_.V)(),{translateWithMarkup:n}=(0,u.Y)(),a=function(){const e=(0,l.qr)({queryConfig:{query:r.C.getFileUploadProgress},liveConfig:{live:r.C.liveFileUploadProgress}},[]);return e.status===l.rq.Success?e.data:null}(),s=(0,C.K)(e);return(0,d.useEffect)((()=>{var e,r;const o=e=>t.showAlert((0,x.b)(n(e)),m.BLW.SUBTLE,!1);switch(a?.status){case i.XX.Uploading:o({key:v.PROGRESS_UPLOADING,params:{fileName:s,progress:Math.round(null!=(e=(null!=(r=100*a?.bytesSent)?r:0)/a?.contentLength)?e:1)}});break;case i.XX.Ciphering:o({key:v.PROGRESS_CIPHERING,params:{fileName:s}});break;case i.XX.Done:t.showAlert(n({key:v.UPLOAD_SUCCESS,params:{fileName:s}}),m.BLW.SUCCESS)}}),[t,e,a,n]),{showErrorAlert:e=>{t.showAlert(n({key:S(null!=e?e:"")}),m.BLW.ERROR)}}};function R(){const e=(0,l.qr)({queryConfig:{query:r.C.getSecureDocumentsExtensionsList}},[]);return e.status===l.rq.Success?e.data:void 0}},341571:(e,t,n)=>{n.d(t,{I:()=>a});var i=n(148038),r=n(740300);function a(){const e=(0,i.qr)({queryConfig:{query:r.C.getSecureFilesQuota},liveConfig:{live:r.C.liveSecureFilesQuota}},[]);return e.status===i.rq.Success?e.data:{max:0,remaining:0}}},979808:(e,t,n)=>{n.d(t,{r:()=>a});var i=n(799852),r=n(348958);const a=e=>(0,i.k)(r.X,"sharedAccessForItem",{itemId:e})},555449:(e,t,n)=>{n.d(t,{u:()=>Z});var i,r,a=n(696832),s=n(310789),o=n(361607),l=n(482598),c=n(133354),d=n(172721),p=n(982466),u=n(573623),_=n(740300),m=n(488203),h=n(343194),f=n(448263),g=n(364438),w=n(232814),y=n(904967),E=n(873670),b=n(989572),I=n(58037),x=n(524130);const C=({cancelStatus:e,itemGroupId:t,setCancelStatus:n,recipientId:o})=>{const{translate:l}=(0,m.Z)(),c=e===f.V.Loading,d={type:"user",alias:o};(0,a.useEffect)((()=>{let t;return e===f.V.Failure&&(t=window.setTimeout((()=>n(null)),2e3)),()=>{clearTimeout(t)}}),[e,n]);const p=e?()=>n(null):()=>n(f.V.Confirm);return e===f.V.Failure?(0,x.BX)("div",{sx:{color:"ds.text.danger.standard",display:"flex",alignItems:"center"},children:[i||(i=(0,x.tZ)(s.aNP,{color:"ds.text.danger.standard"}))," ",l("webapp_shared_access_cancel_failure")]}):(0,x.BX)("div",{children:[(0,x.tZ)(g.zx,{intensity:e?"quiet":"supershy",disabled:c,onClick:p,size:"small",children:l(e?"webapp_shared_access_cancel":"webapp_shared_access_cancel_invitation")}),e?(0,x.tZ)(g.zx,{mood:"danger",intensity:"catchy",sx:{ml:"16px"},disabled:c,size:"small",onClick:()=>(async()=>{n(f.V.Loading);const e=await(async()=>{try{const{success:e}=await _.C.revokeSharing({itemGroupId:t,recipient:d});return e}catch(e){return!1}})();n(e?f.V.Success:f.V.Failure)})(),children:c?r||(r=(0,x.tZ)(s.HoD,{})):l("webapp_shared_access_confirm")}):null]})};var v;const S="webapp_sharing_permissions_full_rights",D="webapp_sharing_permissions_limited_rights",R=e=>{const{status:t,permission:n}=e;return"pending"===t?"webapp_shared_access_pending_invitation":"accepted"===t?"admin"===n?S:D:""},k=({itemGroupId:e,onUserSelected:t,openEditPermissionsDialog:n,member:i,isAdmin:r,isItemPermissionsEnabled:s=!1})=>{const[o,l]=(0,a.useState)(null),c=(0,I.j)()?.login,{translate:d}=(0,m.Z)();if(o===f.V.Success)return null;const{permission:u,status:_,recipientType:h}=i,k=c===i.recipientId,N=r&&c!==i.recipientId,A="pending"===_?(0,x.tZ)(C,{recipientId:i.recipientId,itemGroupId:e,cancelStatus:o,setCancelStatus:l}):(0,x.tZ)(E.M,{disabled:s&&!r||!s&&i.recipientType===p.IP.Collection,icon:"ActionEditOutlined",layout:"iconLeading",intensity:"supershy",onClick:()=>{t&&t(i.recipientId),n(i,u,h)},content:d("webapp_sharing_collection_access_description_tooltip"),tooltipSx:{textWrap:"wrap",maxWidth:"240px"},size:"small",children:d("webapp_shared_access_edit_permissions")});return(0,x.tZ)("li",{sx:{alignItems:"center",display:"flex",minHeight:"48px",position:"relative"},children:(0,x.tZ)(y.r,{infoAction:N?A:null,logo:i.recipientType===p.IP.Group?v||(v=(0,x.tZ)(b.Z,{})):(0,x.tZ)(w.q,{email:i.recipientName,size:36}),text:s?void 0:R(i)?d(R(i)):d("webapp_shared_permissions_dialog_revoke_success_title"),title:i.recipientName,permissionBadge:s?(0,x.tZ)(g.Ct,{mood:"admin"===u?"brand":"danger",label:d("admin"===u?S:D)}):void 0,disabled:o===f.V.Loading,titleLogo:k?(0,x.tZ)(g.Ct,{label:d("webapp_shared_access_you_badge").toUpperCase(),layout:"labelOnly",sx:{marginLeft:"4px"}}):null})},i.recipientId)};var N=n(979808),A=n(468037),T=n(814341);const Z=({id:e,isAdmin:t})=>{const{translate:n}=(0,m.Z)(),[i,r]=(0,a.useState)(!1),[g,w]=(0,a.useState)(null),[y,E]=(0,a.useState)(void 0),b=(0,o._)(),{data:I,status:C}=(0,N.r)(e),{updatePermissionForCollectionItem:v,removeItemFromCollections:S}=(0,l.u)(d.a),D=Boolean(b.data?.sharingVault_web_Collection_Item_Permissions_dev)||Boolean(b.data?.sharingVault_web_Collection_Item_Permissions_prod);if(C!==c.rq.Success)return(0,x.tZ)(s.HoD,{color:"ds.container.expressive.brand.catchy.idle",size:50,sx:{alignSelf:"center",m:"20px"}});if(!I)return null;const{itemGroupId:R,users:Z,groups:P,collections:L}=I,O=e=>{g&&w({...g,step:e})},U=async()=>{if(!g)return;const{recipient:t,permission:n,recipientType:i}=g;r(!0);const a="revoke"===n?await(async(t,n)=>{try{if(n===p.IP.Collection){const n=await S({collectionIds:[t.recipientId],itemId:e});return!!(0,u.d6)(n)}const{success:i}=await _.C.revokeSharing({itemGroupId:null!=R?R:"",recipient:(0,T.d)(t)});return i}catch(e){return!1}})(t,i):await(async(e,t,n)=>{try{if(n===p.IP.Collection){const n=await v({groupId:R,collection:{collectionId:e.recipientId,permission:t}});return!!(0,u.d6)(n)}{const{success:n}=await _.C.updateSharingPermission({itemGroupId:null!=R?R:"",recipient:(0,T.d)(e),permission:t});return n}}catch(e){return!1}})(t,n,i);if(a){const e="revoke"===n?f.PermissionDialogStep.RevokeSuccess:f.PermissionDialogStep.Success;O(e)}else O(f.PermissionDialogStep.Failure);r(!1)},B=(e,t,n)=>{const i={recipient:e,recipientType:n,permission:t,originPermission:t,step:f.PermissionDialogStep.Permission,name:e.recipientName};w(i)},F=P?.length>0,X=L?.length>0,G=Z?.length>0,z=!(y&&Z.find((e=>e.recipientId!==y&&e.permission===p.y3.Admin)))&&g?.recipient.recipientType===p.IP.User,W="collection"===g?.recipientType;return(0,x.BX)("div",{sx:{flex:"1",overflowY:"auto"},children:[(0,x.BX)("ul",{sx:{flex:"1"},children:[X?(0,x.tZ)(A.u,{title:n("webapp_shared_access_collections"),additionalSx:{marginBottom:"16px"},children:L.map((e=>(0,x.tZ)(k,{isItemPermissionsEnabled:D,isAdmin:t,member:e,itemGroupId:null!=R?R:"",openEditPermissionsDialog:B},e.recipientId)))}):null,F?(0,x.tZ)(A.u,{title:n("webapp_shared_access_groups_card_title"),additionalSx:{marginBottom:"16px"},children:P.map((e=>(0,x.tZ)(k,{isAdmin:t,member:e,itemGroupId:null!=R?R:"",openEditPermissionsDialog:B},e.recipientId)))}):null,G?(0,x.tZ)(A.u,{title:n("webapp_shared_access_individuals_card_title"),children:Z.map((e=>(0,x.tZ)(k,{isAdmin:t,member:e,onUserSelected:e=>E(e),itemGroupId:null!=R?R:"",openEditPermissionsDialog:B},e.recipientId)))}):null]}),g&&(0,x.tZ)(h.E,{isOpen:!0,isCollectionItemPermission:W,shouldRevokeBeDisabled:z||void 0,loading:i,onCancelRevoke:()=>{g&&w({...g,step:f.PermissionDialogStep.Permission})},onConfirmRevoke:U,onDismiss:()=>w(null),onSelectPermission:e=>{g&&w({...g,permission:e})},onValidatePermission:()=>{"revoke"===g?.permission?w({...g,step:f.PermissionDialogStep.ConfirmRevoke}):U()},permission:g.permission,recipient:g.recipient,step:g.step})]})}},221119:(e,t,n)=>{var i,r,a;n.d(t,{XX:()=>a,tA:()=>i,wL:()=>r}),function(e){e.MAX_CONTENT_LENGTH_EXCEEDED="MAX_CONTENT_LENGTH_EXCEEDED",e.QUOTA_EXCEEDED="QUOTA_EXCEEDED",e.INVALID_FILE_TYPE="INVALID_FILE_TYPE",e.INTERNAL_ERROR="INTERNAL_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.FILE_NOT_FOUND="FILE_NOT_FOUND"}(i||(i={})),function(e){e.Initial="Initial",e.Downloading="Downloading",e.Deciphering="Deciphering",e.Error="Error",e.ChunkReady="ChunkReady",e.ChunkDownloaded="ChunkDownloaded",e.TransferComplete="TransferComplete"}(r||(r={})),function(e){e.None="None",e.Initial="Initial",e.Uploading="Uploading",e.Ciphering="Ciphering",e.Done="Done",e.Error="Error"}(a||(a={}))}}]);