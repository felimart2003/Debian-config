"use strict";(globalThis.webpackChunk_dashlane_leeloo=globalThis.webpackChunk_dashlane_leeloo||[]).push([[4720],{611913:(e,t,s)=>{s.d(t,{Z:()=>g});var i=s(696832),n=s(554712),a=s(383849),r=s.n(a),l=s(526849),o=s(957459),c=s(158549),d=s.n(c),p=s(573630);const u={container:"container--Qypu77vxOn",containerMultiLine:"containerMultiLine--ncWYFwQEnR",_field:"_field--KII5X4xmLN",input:"input--Iq10hxAz32 _field--KII5X4xmLN",inputRow:"inputRow--gdD_j5S1R8",textarea:"textarea--VpIWTZemV2 _field--KII5X4xmLN",label:"label--Ww_r49kt_J",text:"text--oXyCzpUMwG",value:"value--aD7nWEqBIq",multiline:"multiline--fdPM1KFHPT"};var h=s(524130);const m=e=>{navigator.clipboard.writeText(e.replaceAll(" ",""))};class g extends i.Component{constructor(e){super(e),this.field=void 0,this.handleChange=e=>{this.setState({selectionRangeStart:e.target.selectionStart,selectionRangeEnd:e.target.selectionEnd}),this.props.onChange&&this.props.onChange(e)},this.state={fieldHtmlId:(0,o.Z)(),selectionRangeStart:null,selectionRangeEnd:null}}componentDidUpdate(){null!==this.state.selectionRangeStart&&null!==this.state.selectionRangeEnd&&this.field.setSelectionRange(this.state.selectionRangeStart,this.state.selectionRangeEnd)}shouldComponentUpdate(e,t){return!((0,l.equals)(this.props.value,e.value)&&(0,l.equals)(this.props.error,e.error)&&(0,l.equals)(this.props.mask,e.mask)&&(0,l.equals)(this.props.label,e.label)&&(0,l.equals)(this.state.selectionRangeStart,t.selectionRangeStart)&&(0,l.equals)(this.state.selectionRangeEnd,t.selectionRangeEnd))}getValue(){return this.field.value}focus(){this.field.focus()}getTextarea(){var e;return(0,h.tZ)(n.Z,{inputRef:e=>{this.field=e},id:this.state.fieldHtmlId,disabled:this.props.disabled,value:null!=(e=this.props.value)?e:"",name:this.props.name,"data-name":this.props.dataName,sx:{borderColor:this.props.error&&"ds.border.danger.standard.idle"},className:u.textarea,placeholder:this.props.placeholder,onBlur:this.props.handleFieldBlur,onKeyDown:this.props.onFieldKeyDown,onChange:this.handleChange,readOnly:this.props.readOnly})}getInput(){var e;const t={onBlur:this.props.handleFieldBlur,onChange:this.handleChange,disabled:this.props.disabled,readOnly:this.props.readOnly,value:null!=(e=this.props.value)?e:""},s={ref:e=>{this.field=e},id:this.state.fieldHtmlId,autoComplete:"off",className:r()(u.input,{[u.error]:Boolean(this.props.error)}),sx:{...this.props.error&&{"::placeholder":{color:"ds.text.danger.quiet"},minWidth:"fit-content"},border:"1px solid",borderColor:this.props.error?"ds.border.danger.standard.idle":"transparent"},name:this.props.name,"data-name":this.props.dataName,type:this.props.type||"text",placeholder:this.props.placeholder,onKeyDown:this.props.onFieldKeyDown};return this.props.mask?(0,h.tZ)(d(),{...t,...this.props.maskProps,mask:this.props.mask,onCopy:()=>m(t.value),onCut:()=>m(t.value),children:e=>(0,h.tZ)("input",{...s,...e})}):(0,h.BX)("div",{className:u.inputRow,children:[(0,h.tZ)("input",{...s,...t}),(0,h.tZ)("div",{hidden:!this.props.error||"string"!=typeof this.props.error,sx:{color:"ds.text.danger.quiet"},className:u.errorMessage,children:this.props.error})]})}render(){const e="password"!==this.props.type?this.props.value||this.props.placeholder:"";return(0,h.BX)("div",{className:r()(u.container,this.props.multiLine?u.containerMultiLine:null),children:[this.props.label&&(0,h.tZ)("label",{className:u.label,sx:{color:"ds.text.neutral.catchy"},htmlFor:this.state.fieldHtmlId,children:(0,h.tZ)("span",{className:u.text,title:this.props.label,children:this.props.label})}),(0,h.tZ)(p.Z,{tooltipText:e,className:r()(u.value,{[u.placeholder]:!this.props.value,[u.multiline]:this.props.multiLine}),children:this.props.multiLine?this.getTextarea():this.getInput()})]})}}g.defaultProps={maskProps:{maskChar:""}}},682994:(e,t,s)=>{s.d(t,{s:()=>m}),s(696832);var i=s(364438),n=s(482598),a=s(133354),r=s(448430),l=s(488203);let o=function(e){return e.LastAdmin="LastAdmin",e.GroupSharing="GroupSharing",e.CollectionSharing="CollectionSharing",e.Generic="Generic",e}({});var c=s(365580),d=s(524130);const p=({reason:e,translations:t,goToSharingAccess:s,closeCantDeleteDialog:n})=>{const{translate:a}=(0,l.Z)(),r=((e,t)=>{const{groupSharingTitle:s,lastAdminTitle:i,collectionSharingTitle:n,genericErrorTitle:a}=e;switch(t){case o.LastAdmin:return i;case o.GroupSharing:return s;case o.CollectionSharing:return n;case o.Generic:return a;default:return(0,c.U)(t)}})(t,e),p=((e,t)=>{const{groupSharingSubtitle:s,lastAdminSubtitle:i,collectionSharingSubtitle:n,genericErrorSubtitle:a}=e;switch(t){case o.LastAdmin:return i;case o.GroupSharing:return s;case o.CollectionSharing:return n;case o.Generic:return a;default:return(0,c.U)(t)}})(t,e);return(0,d.tZ)(i.Vq,{isOpen:!0,onClose:n,title:null!=r?r:"",closeActionLabel:a("_common_dialog_dismiss_button"),actions:e===o.LastAdmin||o.GroupSharing||o.CollectionSharing?{primary:{children:t.lastAdminActionLabel,onClick:()=>{s(),n()}}}:void 0,children:p})};var u=s(837527);const h=({closeConfirmDeleteDialog:e,onDeleteConfirm:t,translations:s})=>{const{translate:n}=(0,l.Z)(),{confirmDeleteSubtitle:a,confirmDeleteTitle:r,confirmDeleteDismiss:o,confirmDeleteConfirm:c}=s;return(0,d.tZ)(i.Vq,{title:r,onClose:e,isOpen:!0,dialogClassName:u.Ht,closeActionLabel:n("_common_dialog_dismiss_button"),isDestructive:!0,actions:{primary:{children:c,onClick:t,id:"deletion-dialog-confirm-button"},secondary:{children:o,onClick:e,autoFocus:!0,id:"deletion-dialog-dismiss-button"}},children:a})},m=({closeConfirmDeleteDialog:e,goToSharingAccess:t,isVisible:s,itemId:c,onDeletionSuccess:u,sharingStatus:m,translations:g,vaultItemType:f,isShared:S,isSharedViaUserGroup:_,isItemInCollection:D,isLastAdmin:v})=>{const{showToast:C}=(0,i.pm)(),{translate:I}=(0,l.Z)(),{deleteVaultItems:b}=(0,n.u)(r.L);if(!s)return null;let E;return(S||m?.isShared)&&(_&&(E=o.GroupSharing),v&&(E=o.LastAdmin),D&&(E=o.CollectionSharing)),E&&t?(0,d.tZ)(p,{reason:E,translations:g,goToSharingAccess:t,closeCantDeleteDialog:e}):(0,d.tZ)(h,{closeConfirmDeleteDialog:e,onDeleteConfirm:async()=>{try{var e;(await b({ids:[c],vaultItemType:f})).tag===a.rq.Success?(C({description:null!=(e=g.deleteSuccessToast)?e:I("webapp_personal_info_edition_delete_success_toast")}),u()):C({description:I("_common_generic_error"),mood:"danger",isManualDismiss:!0})}catch(e){C({description:I("_common_generic_error"),mood:"danger",isManualDismiss:!0})}},translations:g})}},242521:(e,t,s)=>{s.d(t,{Jh:()=>l,UE:()=>a,ZP:()=>o});var i=s(696832),n=s(526849);const a=(0,n.compose)(n.not,n.isEmpty,n.trim,(0,n.defaultTo)("")),r=/.+@.+\..+/,l=e=>r.test(e.trim());class o extends i.Component{constructor(e){super(e),this.setInternalState=e=>{this.setState({internal:{...this.state.internal,...e}})},this.setUpdatedValues=e=>{const{signalEditedValues:t,onValuesUpdated:s}=this.props,i={...this.state.values,...e};this.setState({values:i},(()=>{t&&t(this.hasFormBeenEdited()),s&&s(i)}))},this.handleChange=(e,t="")=>{if(e instanceof Event&&t)throw new Error("handleChange was called with both a ChangeEvent and key.");const s=e?.target?{[e.target.dataset.name]:e.target.value}:{[t]:e};this.setUpdatedValues(s)},this.handleChanges=e=>{this.setUpdatedValues(e)},this.validateValues=e=>{if(0===Object.keys(e).length)return!0;const t=(0,n.reduce)(((t,s)=>(t[s]=e[s]?(0,n.compose)(n.not,e[s]):()=>!1,t)),{},Object.keys(this.state.values)),s=(0,n.evolve)(t,this.state.values);return this.setState({errors:s}),(0,n.all)((0,n.equals)(!1),(0,n.values)(s))},this.hasFormBeenEdited=()=>!(0,n.equals)(this.state.values,this.props.currentValues),this.getValues=()=>this.state.values;const t=Object.keys(e.currentValues).reduce(((e,t)=>(e[t]=!1,e)),{});this.state={internal:{},values:e.currentValues,errors:t}}componentDidUpdate(e){(0,n.equals)(this.props.currentValues,e.currentValues)||this.setState({values:this.props.currentValues})}}},486816:(e,t,s)=>{s.d(t,{Y:()=>v});var i=s(696832),n=s(926897),a=s(448430),r=s(382706),l=s(482598),o=s(310789),c=s(376452),d=s(615446),p=s(682994),u=s(692077),h=s(86498),m=s(488203),g=s(45272),f=s(418402),S=s.n(f),_=s(524130);const D={DELETE_CONFIRM:"webapp_personal_info_edition_delete_confirm",DELETE_DISMISS:"webapp_personal_info_edition_delete_dismiss",DELETE_SUBTITLE:"webapp_personal_info_edition_delete_subtitle"};function v(e){const{getItemTypeDescription:t,getDeleteTitle:s,getTitle:f,iconType:v,vaultItemType:C,renderForm:I}=e;return({lee:e,item:b,match:E})=>{const y=(0,i.useRef)(null),T=(0,h.V)(),{translate:w}=(0,m.Z)(),{routes:V}=(0,u.Xo)(),{updateVaultItem:L}=(0,l.u)(a.L),[x,Z]=(0,i.useState)(!1),[R,k]=(0,i.useState)(!1);if((0,i.useEffect)((()=>{const e={[r.U.Address]:n.PageView.ItemAddressDetails,[r.U.Company]:n.PageView.ItemCompanyDetails,[r.U.Email]:n.PageView.ItemEmailDetails,[r.U.Identity]:n.PageView.ItemIdentityDetails,[r.U.Phone]:n.PageView.ItemPhoneDetails,[r.U.Website]:n.PageView.ItemWebsiteDetails};(0,g.Nc)(e[C])}),[]),!b)return null;const A=()=>{(0,g.Nc)(n.PageView.ItemPersonalInfoList),(0,u.uX)(V.userPersonalInfo)},U=b?f(b,w):"",N={confirmDeleteConfirm:w(D.DELETE_CONFIRM),confirmDeleteDismiss:w(D.DELETE_DISMISS),confirmDeleteSubtitle:w(D.DELETE_SUBTITLE),confirmDeleteTitle:s(w)};return(0,_.BX)(c.zI,{isViewingExistingItem:Boolean(E.params?.uuid),itemHasBeenEdited:x,onNavigateOut:A,onSubmit:async()=>{b.id&&Boolean(y.current?.isFormValid())&&(await(async()=>{const e=y.current?.getValues();e&&"success"!==(await L({vaultItemType:C,content:e,id:b.id})).tag&&T.showAlert(w("_common_generic_error"),o.BLW.ERROR)})(),A())},onClickDelete:()=>k(!0),ignoreCloseOnEscape:R,formId:"edit_personalinfo_panel",header:(0,_.tZ)(c.V9,{icon:(0,_.tZ)(d.ZP,{iconSize:d.Jh.headerEditPanelIcon,iconType:v}),iconBackgroundColor:S()["--dash-green-00"],title:U,titleDescription:t(w)}),children:[I(e,b,y,(()=>Z(!0))),(0,_.tZ)(p.s,{isVisible:R,itemId:b.id,closeConfirmDeleteDialog:()=>k(!1),onDeletionSuccess:A,translations:N,vaultItemType:C})]})}}}}]);